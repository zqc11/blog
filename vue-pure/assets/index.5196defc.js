var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,s=(t,a,o)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[a]=o;import{a as r,b as i,d,v as c,z as m,e as u,f,J as p,B as b,u as g,I as h,h as y,D as v,E as x,K as w}from"./vue.5e6d7e94.js";import _ from"./config.7ea538b5.js";import{_ as R,g as C,c as E,x as k,V as D}from"./index.6c61e3e9.js";import{Q as j}from"./element-plus.8b2bac93.js";import"./vform3-plus.69c43fab.js";function O(e){const t=r(e||""),a=r(!1),o=r(!1);return i(t,(e=>{void 0!==e&&(o.value=!0,a.value=function(e,{target:t=document.body}={}){const a=document.createElement("textarea"),o=document.activeElement;a.value=e,a.setAttribute("readonly",""),a.style.contain="strict",a.style.position="absolute",a.style.left="-9999px",a.style.fontSize="12pt";const l=document.getSelection();let n;l&&l.rangeCount>0&&(n=l.getRangeAt(0));t.append(a),a.select(),a.selectionStart=0,a.selectionEnd=e.length;let s=!1;try{s=document.execCommand("copy")}catch(r){throw new Error(r)}a.remove(),n&&l&&(l.removeAllRanges(),l.addRange(n));o&&o.focus();return s}(e))}),{immediate:!!e,flush:"sync"}),{clipboardRef:t,isSuccessRef:a,copiedRef:o}}const S={class:"text-model"},T=h("编辑"),$=h("新增子类型"),V=h("字典配置"),A=h("删除"),I=d((q=((e,t)=>{for(var a in t||(t={}))l.call(t,a)&&s(e,a,t[a]);if(o)for(var a of o(t))n.call(t,a)&&s(e,a,t[a]);return e})({},{name:"dict"}),t(q,a({setup(e){const t=c({submitLoading:!1,showEdit:!1,selectRow:null,filterName:"",tableData:[{id:1,name:"状态",model:"",children:[{id:"1-1",name:"服务状态",model:"serviceStatus"},{id:"1-2",name:"在线状态",model:"onlienStatus"}]},{id:2,name:"操作系统",model:"operatingSystem"}],formData:{name:"",model:""},formItems:[{field:"name",title:"字典名称",span:24,itemRender:{name:"$input",props:{placeholder:"请输入字典名称"}}},{field:"model",title:"字典类型",span:24,itemRender:{name:"$input",props:{placeholder:"请输入字典类型",disabled:!0}}},{align:"right",span:24,itemRender:{name:"$buttons",children:[{props:{type:"submit",content:"提交",status:"primary"}},{props:{type:"reset",content:"重置"}}]}}]});let a=C(t.tableData);const o=E("xTree",null),l=k.debounce((function(){(()=>{const e=k.toValueString(t.filterName).trim();if(e){const l={children:"children"},n=["name"];t.tableData=k.searchTree(a,(t=>n.some((a=>k.toValueString(t[a]).indexOf(e)>-1))),l),w((()=>{o.value.setAllTreeExpand(!0)}))}else t.tableData=a})()}),100,{leading:!1,trailing:!0}),n=async()=>{const e=await D.modal.confirm("您确定要删除吗？");"confirm"===await e&&D.modal.message({content:"测试数据，不可删除",status:"error"})};function s(e,a){t.selectRow=e,t.showEdit=!0,t.formItems[1].itemRender.props.disabled=a}function i(){s(null,!1)}const{clipboardRef:d}=O(),R=({row:e})=>{d.value=g(e).model},I=r({}),q=()=>{t.submitLoading=!0,setTimeout((()=>{const e=I.value;t.submitLoading=!1,t.showEdit=!1,t.selectRow?(D.modal.message({content:"保存成功",status:"success"}),Object.assign(t.selectRow,t.formData)):(D.modal.message({content:"新增成功",status:"success"}),e.insert(t.formData))}),500)};let P=r(!1);function z(){P.value=!1}return(e,a)=>{const r=m("vxe-input"),d=m("vxe-button"),c=m("vxe-toolbar"),w=m("vxe-table-column"),C=m("el-tooltip"),E=m("vxe-table"),k=m("vxe-form"),D=m("vxe-modal");return u(),f("div",null,[p(c,null,{buttons:b((()=>[p(r,{modelValue:g(t).filterName,"onUpdate:modelValue":a[0]||(a[0]=e=>g(t).filterName=e),placeholder:e.$t("buttons.hssearch"),onKeyup:g(l)},null,8,["modelValue","placeholder","onKeyup"])])),tools:b((()=>[p(d,{icon:"fa fa-plus-square-o",status:"primary",onClick:i},{default:b((()=>[h(j(e.$t("buttons.hsadd")),1)])),_:1}),p(d,{icon:"fa fa-folder-open-o",status:"primary",onClick:a[1]||(a[1]=t=>e.$refs.xTree.setAllTreeExpand(!0))},{default:b((()=>[h(j(e.$t("buttons.hsexpendAll")),1)])),_:1}),p(d,{icon:"fa fa-folder-o",status:"primary",onClick:a[2]||(a[2]=t=>e.$refs.xTree.clearTreeExpand())},{default:b((()=>[h(j(e.$t("buttons.hscollapseAll")),1)])),_:1})])),_:1}),p(E,{ref_key:"xTree",ref:o,border:"",resizable:"","tree-config":{children:"children",iconOpen:"fa fa-minus-square-o",iconClose:"fa fa-plus-square-o"},data:g(t).tableData,onCellDblclick:R},{default:b((()=>[p(w,{"tree-node":"",field:"name",title:"字典名称"}),p(w,{title:"字典类型"},{default:b((({row:e})=>[p(C,{effect:"dark",content:"双击复制："+e.model,placement:"right"},{default:b((()=>[y("span",S,j(e.model),1)])),_:2},1032,["content"])])),_:1}),p(w,{title:"操作",width:"330",fixed:"right"},{default:b((({row:e})=>[p(d,{type:"text",icon:"fa fa-pencil-square-o",onClick:a=>function(e){t.formData={name:e.name,model:e.model?e.model:"暂无字典类型"},s(e,!0)}(e)},{default:b((()=>[T])),_:2},1032,["onClick"]),p(d,{type:"text",icon:"fa fa-plus-square-o",onClick:e=>{s(null,!1)}},{default:b((()=>[$])),_:2},1032,["onClick"]),v(p(d,{type:"text",icon:"fa fa-cog",onClick:e=>{P.value=!0}},{default:b((()=>[V])),_:2},1032,["onClick"]),[[x,e.model]]),p(d,{type:"text",icon:"fa fa-trash-o",onClick:n},{default:b((()=>[A])),_:1})])),_:1})])),_:1},8,["data"]),p(D,{resize:"",width:"450",modelValue:g(t).showEdit,"onUpdate:modelValue":a[3]||(a[3]=e=>g(t).showEdit=e),title:g(t).selectRow?"编辑":"新增",loading:g(t).submitLoading,onHide:a[4]||(a[4]=t=>e.$refs.xForm.reset())},{default:b((()=>[p(k,{ref:"xForm",data:g(t).formData,items:g(t).formItems,"title-align":"right","title-width":"100",onSubmit:q},null,8,["data","items"])])),_:1},8,["modelValue","title","loading"]),p(_,{drawer:g(P),drawTitle:"字典列表",onHandleClose:z},null,8,["drawer"])])}}}))));var q,P=R(I,[["__scopeId","data-v-3226b49c"]]);export{P as default};
