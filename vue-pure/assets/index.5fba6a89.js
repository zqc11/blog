var Mu=Object.defineProperty;var fu=Object.getOwnPropertySymbols;var Nu=Object.prototype.hasOwnProperty,Iu=Object.prototype.propertyIsEnumerable;var ql=(Re,e,t)=>e in Re?Mu(Re,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):Re[e]=t,du=(Re,e)=>{for(var t in e||(e={}))Nu.call(e,t)&&ql(Re,t,e[t]);if(fu)for(var t of fu(e))Iu.call(e,t)&&ql(Re,t,e[t]);return Re};var pi=(Re,e,t)=>(ql(Re,typeof e!="symbol"?e+"":e,t),t);import{_ as _export_sfc$1,u as useRouter,s as storageLocal,n as useOperationStoreHook,o as vjmap,p as vjmap_min$1,q as require$$5,w as useAppStore,x as useRoute,y as getBlueprintSnapData,z as saveBlueprintSnapData,A as saveBlueprintDrawData,B as getBlueprintDrawData,C as saveFormData,D as loadEnv,E as getOperationById}from"./index.b2e6b694.js";import{d as defineComponent,x as computed,r as resolveComponent,o as openBlock,b as createBlock,w as withCtx,e as createVNode,A as createBaseVNode,C as toDisplayString,H as unref,D as createTextVNode,B as createCommentVNode,J as pushScopeId,K as popScopeId,k as watch,l as reactive,i as getCurrentInstance,t as toRaw,bg as toRef,u as toRefs,h as ref,N as provide,Q as onMounted,q as onUnmounted,z as createElementBlock,$ as renderSlot,Y as normalizeStyle,j as inject,c as commonjsGlobal,X as onBeforeMount,I as normalizeClass,be as ElMessage,F as Fragment,G as renderList,s as nextTick,a0 as KeepAlive,Z as resolveDynamicComponent,M as h$1,V as withDirectives,W as vShow,bh as commonjsRequire}from"./element-plus.5e3a2ffc.js";import{e as emitter,s as sleep,a as showConfirm,g as getInput}from"./ui.19e1b5b7.js";/* empty css                   */import{_ as _export_sfc$2}from"./plugin-vue_export-helper.98d5223b.js";var _imports_0="/vue-pure/assets/cad.ab3c3c3c.jpg",TaskCard_vue_vue_type_style_index_0_scoped_true_lang="";const _withScopeId$2=Re=>(pushScopeId("data-v-ad9419cc"),Re=Re(),popScopeId(),Re),_hoisted_1$k=_withScopeId$2(()=>createBaseVNode("span",null,"\u6D41\u7A0B\u540D\u79F0\uFF1A",-1)),_hoisted_2$h=_withScopeId$2(()=>createBaseVNode("span",null,"\u6240\u5C5E\u8282\u70B9\uFF1A",-1)),_hoisted_3$f=_withScopeId$2(()=>createBaseVNode("img",{src:_imports_0,alt:"\u673A\u68B0\u56FE\u7EB8"},null,-1)),_hoisted_4$8=_withScopeId$2(()=>createBaseVNode("span",null,"\u8FDB\u5EA6\uFF1A",-1)),_sfc_main$o=defineComponent({props:{task:{type:Object},node:{type:Object}},setup(Re){const e=Re,t=useRouter(),Pe=storageLocal.getItem("info").userInfo.id,Me=computed(()=>e.node.properties.status),Ie=computed(()=>{const _e=e.node.properties;return _e.hasRejected.indexOf(Pe+"")!==-1||_e.hasPassed.indexOf(Pe+"")!==-1?"\u5DF2\u5BA1\u6279":""}),Be=computed(()=>Me.value==="\u88AB\u9A73\u56DE"?"danger":Me.value==="\u5DF2\u5B8C\u6210"?"success":Me.value==="\u8FDB\u884C\u4E2D"?"warning":"");function ke(){useOperationStoreHook().SET_CURRENT_TASK(e.task),useOperationStoreHook().SET_CURRENT_NODE(e.node),t.push("/taskInfo")}return(_e,Ce)=>{const Te=resolveComponent("el-col"),Se=resolveComponent("el-row"),xe=resolveComponent("el-tag"),r=resolveComponent("el-card");return openBlock(),createBlock(r,{onClick:ke,shadow:"hover",class:"card"},{header:withCtx(()=>[createVNode(Se,null,{default:withCtx(()=>[createVNode(Te,null,{default:withCtx(()=>[_hoisted_1$k,createBaseVNode("span",null,toDisplayString(e.task.title),1)]),_:1}),createVNode(Te,null,{default:withCtx(()=>[_hoisted_2$h,createBaseVNode("span",null,toDisplayString(e.node.text.value),1)]),_:1})]),_:1})]),default:withCtx(()=>[_hoisted_3$f,createVNode(Se,null,{default:withCtx(()=>[createVNode(Te,null,{default:withCtx(()=>[_hoisted_4$8,createVNode(xe,{type:unref(Be),effect:"dark"},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(Me)),1)]),_:1},8,["type"]),unref(Ie)!==""?(openBlock(),createBlock(xe,{key:0,type:"success",effect:"dark"},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(Ie)),1)]),_:1})):createCommentVNode("",!0)]),_:1})]),_:1})]),_:1})}}});var taskCard=_export_sfc$1(_sfc_main$o,[["__scopeId","data-v-ad9419cc"]]),vjmap_min="";class Deferred{constructor(e){pi(this,"promise");pi(this,"fate");pi(this,"state");pi(this,"_val");pi(this,"_resolve");pi(this,"_reject");this.state="pending",this.fate="unresolved",this._val=e||null,this.promise=new Promise((t,Pe)=>{this._resolve=t,this._reject=Pe}),this.promise.then(t=>{this.state="fulfilled",this._val=t},()=>{this.state="rejected",this._val=null})}resolve(e){if(this.fate==="resolved")throw"Deferred cannot be resolved twice";this.fate="resolved",this._resolve(e)}reject(e){if(this.fate==="resolved")throw"Deferred cannot be resolved twice";this.fate="resolved",this._reject(e)}isResolved(){return this.fate==="resolved"}isPending(){return this.state==="pending"}isFulfilled(){return this.state==="fulfilled"}isRejected(){return this.state==="rejected"}get val(){return this._val}}const filterObject=(Re,e,t=[void 0])=>{const Pe={},Me=e||Object.keys(Re);for(const Ie of Me)t.some(Be=>Be===Re[Ie])||(Pe[Ie]=Re[Ie]);return Pe},duplicateEvents=(Re,e,t)=>{for(const Pe of t)Re.on(Pe,Me=>{e.emit(Pe,Me)})};var conditionalWatch=(Re,e,t)=>Re&&Re.value!==void 0?watch(Re,e,t):null;function enableAutoResize(Re,e,t){if(window.ResizeObserver)enableAutoResizeWithResizeObserver(Re,e);else{const Pe=enableAutoResizeWithEventListener(Re,t);watch(Pe,()=>{e.resize()})}}function enableTouchZoomRotate(Re,e){e.value&&Re.touchZoomRotate.enable(),watch(e,t=>{t?Re.touchZoomRotate.enable():Re.touchZoomRotate.disable()})}function enableAutoResizeWithResizeObserver(Re,e){if(!Re.value)throw new Error("Could not enable auto-resize because root container could not be found");new window.ResizeObserver(()=>e.resize()).observe(Re.value)}function enableAutoResizeWithEventListener(Re,e){const t=getCurrentInstance(),Pe=reactive(new DOMRect(0,0,0,0).toJSON());if(t){let Me=Re.value?Re.value.getBoundingClientRect():new DOMRect(0,0,0,0);addEventListener("resize",Ie=>{setTimeout(()=>{if(Re.value){const Be=Re.value.getBoundingClientRect().toJSON(),ke=Me.width!==Be.width||Me.height!==Be.height;Me=Be,ke&&Object.assign(Pe,Be)}},e||0)})}return Pe}const getDivStyle=Re=>({height:Re.height,width:Re.width,"--zoom-logo":Re.zoomLogo>=.8?Re.zoomLogo:1}),getMapOptions=(Re,e)=>{const t=filterObject(Re,["style","antialias","attributionControl","bearing","bearingSnap","bounds","boxZoom","center","clickTolerance","collectResourceTiming","container","crossSourceCollisions","customAttribution","doubleClickZoom","dragPan","dragRotate","fadeDuration","failIfMajorPerformanceCaveat","fitBoundsOptions","hash","interactive","keyboard","localIdeographFontFamily","logoPosition","maxBounds","maxPitch","maxTileCacheSize","maxZoom","minPitch","minZoom","pitch","pitchWithRotate","preserveDrawingBuffer","refreshExpiredTiles","renderWorldCopies","scrollZoom","touchZoomRotate","trackResize","transformRequest","zoom"]);return t.container=e,t},mountMap=async(Re,e,t,Pe,Me)=>{var Se,xe,r,Oe,Ee;let Ie,Be;if(e.openMapParam&&e.openMapParam.mapid){const Ae={mapid:e.openMapParam.mapid,mapopenway:(Se=e.openMapParam.mapopenway)!=null?Se:vjmap.MapOpenWay.Memory,style:e.openMapParam.style!==void 0?toRaw(e.openMapParam.style):vjmap.openMapDarkStyle(),version:e.openMapParam.version!==void 0?e.openMapParam.version:void 0},Fe=await Re.openMap(Ae);if(Fe.error)Ie=Fe.error;else{const De=vjmap.GeoBounds.fromString(Fe.bounds);Be=new vjmap.GeoProjection(De)}}else e.mapBounds&&(Be=new vjmap.GeoProjection(e.mapBounds));const ke=Pe.value,_e=getMapOptions(e,ke);Ie||!Be?(Be||(Be=new vjmap.GeoProjection(vjmap_min$1.exports.GeoBounds.fromArray(vjmap_min$1.exports.Projection.EARTH_BOUNDS))),_e.style=Re.rasterBlankStyle(0,24)):_e.style||(((xe=e.openMapParam)==null?void 0:xe.mapopenway)===vjmap.MapOpenWay.Memory?_e.style=Re.rasterStyle():_e.style=e.isVectorStyle?Re.vectorStyle():Re.rasterStyle());const Ce=(r=Re.currentMapParam())==null?void 0:r.view;(Ce==null?void 0:Ce.center)&&e.useInitView&&(_e.center=Ce==null?void 0:Ce.center,_e.zoom=(Oe=Ce==null?void 0:Ce.zoom)!=null?Oe:0,_e.bearing=(Ee=Ce==null?void 0:Ce.bearing)!=null?Ee:0);const Te=new vjmap.Map(_e);return Ie&&Te.setError(Ie),Te.attach(Re,Be),await Te.onLoad(),t.isPending()&&t.resolve(Te),e.autoResize&&enableAutoResize(Me,Te,e.autoResizeDelay),e.touchZoomRotate&&enableTouchZoomRotate(Te,toRef(e,"touchZoomRotate")),Ie},updateStyle=(Re,e)=>{e.value=getDivStyle(Re)};async function mapWatcher(Re,e,t){const{width:Pe,height:Me,bearing:Ie,maxBounds:Be,maxPitch:ke,minZoom:_e,maxZoom:Ce,minPitch:Te,pitch:Se,renderWorldCopies:xe,zoom:r}=toRefs(e),{center:Oe,flyToOptions:Ee}=t;await watchDimensions(Re,Pe,Me),await watchRegular(Re,{bearing:Ie,maxBounds:Be,maxPitch:ke,minPitch:Te,pitch:Se,renderWorldCopies:xe}),await watchPosition(Re,{maxZoom:Ce,center:Oe,flyToOptions:Ee,minZoom:_e,zoom:r})}async function watchDimensions(Re,e,t){const Pe=await Re.promise;watch(e,()=>Pe.resize()),watch(t,()=>Pe.resize())}async function watchRegular(Re,e){const t=await Re.promise;conditionalWatch(e.bearing,Pe=>t.setBearing(Pe)),conditionalWatch(e.maxBounds,Pe=>t.setMaxBounds(Pe)),conditionalWatch(e.maxPitch,Pe=>t.setMaxPitch(Pe)),conditionalWatch(e.minPitch,Pe=>t.setMinPitch(Pe)),conditionalWatch(e.pitch,Pe=>t.setPitch(Pe)),conditionalWatch(e.renderWorldCopies,Pe=>t.setRenderWorldCopies(Pe))}function watchPosition(Re,e){conditionalWatch(e.center,t=>updateMapPosition(Re,{center:t}),{deep:!0}),conditionalWatch(e.flyToOptions,t=>updateMapPosition(Re,{flyToOptions:t}),{deep:!0}),conditionalWatch(e.maxZoom,t=>updateMapPosition(Re,{maxZoom:t})),conditionalWatch(e.minZoom,t=>updateMapPosition(Re,{minZoom:t})),conditionalWatch(e.zoom,t=>updateMapPosition(Re,{zoom:t}))}function watchMapOpenStatus(Re,e){Re.on("maperror",()=>{e.value=Re.getError()}),Re.on("mapopenstart",()=>{e.value="loading"}),Re.on("mapopenfinish",()=>{e.value=""})}async function updateMapPosition(Re,e){const t=await Re.promise,Pe=e.flyToOptions?filterObject(e.flyToOptions,["curve","maxDuration","minZoom","screenSpeed","speed"]):{};e.center&&(Pe.center=e.center),e.zoom&&(Pe.zoom=e.zoom),t.flyTo(Pe)}const MapEvents=["boxzoomstart","click","contextmenu","data","dataloading","dblclick","drag","dragend","dragstart","error","idle","load","mousedown","mouseenter","mouseleave","mousemouve","mouseout","mouseover","mouseup","move","moveend","movestart","pitch","pitchend","pitchstart","remove","resize","rotate","rotateend","rotatestart","sourcedata","sourcedataloading","styledata","styledataloading","styleimagemissing","touchcancel","touchend","touchstart","webglcontextlost","webglcontextrestored","wheel","zoom","zoomend","zoomstart"],MapEmits=[...MapEvents,"update:center","update:flyToOptions","update:zoom","update:pitch","update:bearing","loaded","maperror","mapopenstart","mapopenfinish"],registerMapEvents=async(Re,e)=>{const t=await Re.promise;duplicateEvents(t,e,MapEvents),e.emit("loaded",t),t.on("zoomend",Pe=>{e.emit("update:zoom",Pe.target.getZoom()),e.emit("update:center",Pe.target.getCenter().toArray())}),t.on("dragend",Pe=>{e.emit("update:center",Pe.target.getCenter().toArray())}),t.on("pitchend",Pe=>{e.emit("update:pitch",Pe.target.getPitch())}),t.on("rotateend",Pe=>{e.emit("update:bearing",Pe.target.getBearing())})};var fastDeepEqual=function Re(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var Pe,Me,Ie;if(Array.isArray(e)){if(Pe=e.length,Pe!=t.length)return!1;for(Me=Pe;Me--!=0;)if(!Re(e[Me],t[Me]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(Ie=Object.keys(e),Pe=Ie.length,Pe!==Object.keys(t).length)return!1;for(Me=Pe;Me--!=0;)if(!Object.prototype.hasOwnProperty.call(t,Ie[Me]))return!1;for(Me=Pe;Me--!=0;){var Be=Ie[Me];if(!Re(e[Be],t[Be]))return!1}return!0}return e!==e&&t!==t};const isPrimitive=Re=>{const e=["string","number","boolean"];let t=!1;return Re===null&&(t=!0),e.some(Pe=>typeof Re===Pe)&&(t=!0),t};function vmodel(Re,e="change",t="value"){const Pe=getCurrentInstance(),Me=e instanceof Array?e:[e];if(!Pe)throw new Error("vmodel: Instance not found");const Ie=ref(Pe.props[t]||Re);for(const Be of Me)watch(Ie,ke=>{Pe.emit(Be,Ie.value)});return watch(Pe.props,()=>{(isPrimitive(Pe.props[t])?Pe.props[t]!==Ie.value:!fastDeepEqual(Pe.props[t],Ie.value))&&(Ie.value=Pe.props[t])}),Ie}var Map_vue_vue_type_style_index_0_scoped_true_lang="";const _sfc_main$n=defineComponent({name:"VjMap",emits:MapEmits,props:{serviceUrl:{type:String,required:!0},accessToken:{type:String,required:!0},openMapParam:{type:Object},mapBounds:{type:[Object,null],default:null},height:{type:String,default:"100%"},width:{type:String,default:"100%"},container:{type:[Object,String],default:""},minZoom:{type:Number,default:0},maxZoom:{type:Number,default:22},minPitch:{type:Number,default:0},maxPitch:{type:Number,default:85},mapStyle:{type:[Object,String],default:""},hash:{type:Boolean,default:!1},interactive:{type:Boolean,default:!0},bearingSnap:{type:Number,default:7},pitchWithRotate:{type:Boolean,default:!0},clickTolerance:{type:Number,default:3},attributionControl:{type:Boolean,default:!1},customAttribution:{type:Array,default:null},logoPosition:{type:String,default:"bottom-left"},failIfMajorPerformanceCaveat:{type:Boolean,default:!1},preserveDrawingBuffer:{type:Boolean,default:!1},antialias:{type:Boolean,default:!0},refreshExpiredTiles:{type:Boolean,default:!0},maxBounds:{type:[Array,Object],default:null},scrollZoom:{type:[Boolean,Object],default:!0},boxZoom:{type:Boolean,default:!0},dragRotate:{type:Boolean,default:!0},dragPan:{type:[Object,Boolean],default:!0},keyboard:{type:Boolean,default:!0},doubleClickZoom:{type:Boolean,default:!0},touchZoomRotate:{type:[Boolean,Object],default:!0},trackResize:{type:Boolean,default:!0},center:{default:()=>[0,0]},zoom:{type:Number,default:0},bearing:{type:Number,default:0},useInitView:{type:Boolean,default:!0},pitch:{type:Number,default:0},bounds:{type:Array},fitBoundsOptions:{type:Object},renderWorldCopies:{type:Boolean,default:!1},maxTileCacheSize:{type:Number,default:null},localIdeographFontFamily:{type:String,default:"sans-serif"},transformRequest:{type:Function,default:null},collectResourceTiming:{type:Boolean,default:!1},fadeDuration:{type:Number,default:300},crossSourceCollisions:{type:Boolean,default:!0},zoomLogo:{type:Number,default:1},flyToOptions:{default:()=>({})},autoResize:{type:Boolean,default:!1},autoResizeDelay:{type:Number,default:0},isVectorStyle:{type:Boolean,default:!1}},setup:Re=>{const e=ref(null),t=ref(null),Pe=new vjmap.Service(Re.serviceUrl,Re.accessToken),Me=ref("loading"),Ie=new Deferred;provide("vmap",Ie);const Be=vmodel(Re,"update:center","center"),ke=vmodel(Re,"update:flyToOptions","flyToOptions"),_e=ref(getDivStyle(Re));return watch(Re,async Ce=>{updateStyle(Ce,_e)}),mapWatcher(Ie,Re,{center:Be,flyToOptions:ke}),onMounted(async()=>{try{const Ce=getCurrentInstance();let Te=await mountMap(Pe,Re,Ie,t,e);const Se=await Ie.promise;Te?Me.value=Se.getError():Me.value="",watchMapOpenStatus(Se,Me),Ce&&!Te&&await registerMapEvents(Ie,Ce)}catch(Ce){Me.value=Ce.message||Ce.response||JSON.stringify(Ce).substring(0,80)}}),onUnmounted(async()=>{(await Ie.promise).remove()}),{svc:Pe,vmap:Ie,root:e,style:_e,i_center:Be,i_flyToOptions:ke,mapContainer:t,mapStatus:Me}}}),_withScopeId$1=Re=>(pushScopeId("data-v-2384dbdc"),Re=Re(),popScopeId(),Re),_hoisted_1$j={key:0},_hoisted_2$g={style:{color:"#ff0000","line-height":"40px"}},_hoisted_3$e={key:1},_hoisted_4$7={key:0,class:"loading"},_hoisted_5$3=_withScopeId$1(()=>createBaseVNode("div",{class:"loadEffect"},[createBaseVNode("span"),createBaseVNode("span"),createBaseVNode("span"),createBaseVNode("span"),createBaseVNode("span"),createBaseVNode("span"),createBaseVNode("span"),createBaseVNode("span")],-1)),_hoisted_6$1=[_hoisted_5$3];function _sfc_render$9(Re,e,t,Pe,Me,Ie){return openBlock(),createElementBlock("div",{style:normalizeStyle(Re.style),ref:"root",class:"vj-map"},[createBaseVNode("div",{ref:"mapContainer",class:"map-container",style:normalizeStyle({height:Re.height,width:Re.width})},[Re.mapStatus&&Re.mapStatus!=="loading"?(openBlock(),createElementBlock("div",_hoisted_1$j,[renderSlot(Re.$slots,"error",{},()=>[createBaseVNode("div",{style:normalizeStyle(Re.style)},[createBaseVNode("h1",_hoisted_2$g," Error:"+toDisplayString(Re.mapStatus),1)],4)],!0)])):(openBlock(),createElementBlock("div",_hoisted_3$e,[renderSlot(Re.$slots,"default",{},void 0,!0)]))],4),Re.mapStatus==="loading"?(openBlock(),createElementBlock("div",_hoisted_4$7,[renderSlot(Re.$slots,"loader",{},()=>[createBaseVNode("div",{style:normalizeStyle(Re.style)},_hoisted_6$1,4)],!0)])):createCommentVNode("",!0)],4)}var MapView=_export_sfc$1(_sfc_main$n,[["render",_sfc_render$9],["__scopeId","data-v-2384dbdc"]]);const getNavigationControlOptions=Re=>{const{showCompass:e,showZoom:t,vizualizePitch:Pe}=Re;return{showCompass:e,showZoom:t,vizualizePitch:Pe}},mountNavigationControl=(Re,e,t)=>(async()=>{(await e.promise).addControl(Re,t)})(),_sfc_main$m=defineComponent({name:"VjNavigationControl",props:{showCompass:{type:Boolean,default:!0},showZoom:{type:Boolean,default:!0},visualizePitch:{type:Boolean,default:!0},position:{type:String,default:()=>"top-right"}},setup(Re){const e=inject("vmap",null),t=getNavigationControlOptions(Re),Pe=new vjmap_min$1.exports.NavigationControl(t);onMounted(()=>{e&&mountNavigationControl(Pe,e,Re.position)}),onUnmounted(async()=>{e&&(await e.promise).removeControl(Pe)})}});function _sfc_render$8(Re,e,t,Pe,Me,Ie){return openBlock(),createElementBlock("div")}var VjNavigationControl=_export_sfc$1(_sfc_main$m,[["render",_sfc_render$8]]);class CrosshairManager{constructor(e){pi(this,"map");pi(this,"width");pi(this,"height");pi(this,"svgCanvas");pi(this,"xLine");pi(this,"yLine");pi(this,"color","#535353");this.map=e,this.mapResize=this.mapResize.bind(this)}create(){this.updateValues(),this.map!==void 0?(this.map.on("resize",this.mapResize),this.createCanvas(this.map.getCanvasContainer())):console.error("map object is null")}updateValues(){var e,t;this.width=(e=this.map)==null?void 0:e.getCanvas().clientWidth,this.height=(t=this.map)==null?void 0:t.getCanvas().clientHeight}mapResize(){this.updateValues(),this.updateCanvas()}updateCanvas(){if(this.svgCanvas!==void 0&&this.yLine!==void 0&&this.xLine!==void 0&&this.width!==void 0&&this.height!==void 0){this.svgCanvas.setAttribute("width",`${this.width}px`),this.svgCanvas.setAttribute("height",`${this.height}px`);const e=this.width/2,t=this.height/2;this.yLine.setAttribute("x1",`${e}px`),this.yLine.setAttribute("y1","0px"),this.yLine.setAttribute("x2",`${e}px`),this.yLine.setAttribute("y2",`${this.height}px`),this.xLine.setAttribute("x1",`${0}px`),this.xLine.setAttribute("y1",`${t}px`),this.xLine.setAttribute("x2",`${this.width}px`),this.xLine.setAttribute("y2",`${t}px`)}else console.error("element value is null")}createCanvas(e){if(this.width!==void 0&&this.height!==void 0){const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.style.position="relative",t.setAttribute("width",`${this.width}px`),t.setAttribute("height",`${this.height}px`);const Pe=this.width/2,Me=this.height/2;this.yLine=t.appendChild(this.createLine(Pe,0,Pe,this.height,this.color,"2px")),this.xLine=t.appendChild(this.createLine(0,Me,this.width,Me,this.color,"2px")),e==null||e.appendChild(t),this.svgCanvas=t}}createLine(e,t,Pe,Me,Ie,Be){const ke=document.createElementNS("http://www.w3.org/2000/svg","line");return ke.setAttribute("x1",e),ke.setAttribute("y1",t),ke.setAttribute("x2",Pe),ke.setAttribute("y2",Me),ke.setAttribute("stroke-dasharray","5,5"),ke.setAttribute("stroke",Ie),ke.setAttribute("stroke-width",Be),ke}destroy(){this.xLine!==void 0&&(this.xLine.remove(),this.xLine=void 0),this.yLine!==void 0&&(this.yLine.remove(),this.yLine=void 0),this.svgCanvas!==void 0&&(this.svgCanvas.remove(),this.svgCanvas=void 0),this.map!==void 0&&(this.map.off("resize",this.mapResize),this.map=void 0)}}function _typeof(Re){return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(Re)}var u8=Uint8Array,u16=Uint16Array,u32=Uint32Array,fleb=new u8([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fdeb=new u8([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),clim=new u8([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),freb=function(Re,e){for(var t=new u16(31),Pe=0;Pe<31;++Pe)t[Pe]=e+=1<<Re[Pe-1];for(var Me=new u32(t[30]),Pe=1;Pe<30;++Pe)for(var Ie=t[Pe];Ie<t[Pe+1];++Ie)Me[Ie]=Ie-t[Pe]<<5|Pe;return[t,Me]},_a=freb(fleb,2),fl=_a[0],revfl=_a[1];fl[28]=258,revfl[258]=28;var _b=freb(fdeb,0),fd=_b[0],revfd=_b[1],rev=new u16(32768);for(var i$1=0;i$1<32768;++i$1){var x$1=(i$1&43690)>>>1|(i$1&21845)<<1;x$1=(x$1&52428)>>>2|(x$1&13107)<<2,x$1=(x$1&61680)>>>4|(x$1&3855)<<4,rev[i$1]=((x$1&65280)>>>8|(x$1&255)<<8)>>>1}var hMap=function(Re,e,t){for(var Pe=Re.length,Me=0,Ie=new u16(e);Me<Pe;++Me)++Ie[Re[Me]-1];var Be=new u16(e);for(Me=0;Me<e;++Me)Be[Me]=Be[Me-1]+Ie[Me-1]<<1;var ke;if(t){ke=new u16(1<<e);var _e=15-e;for(Me=0;Me<Pe;++Me)if(Re[Me])for(var Ce=Me<<4|Re[Me],Te=e-Re[Me],Se=Be[Re[Me]-1]++<<Te,xe=Se|(1<<Te)-1;Se<=xe;++Se)ke[rev[Se]>>>_e]=Ce}else for(ke=new u16(Pe),Me=0;Me<Pe;++Me)ke[Me]=rev[Be[Re[Me]-1]++]>>>15-Re[Me];return ke},flt=new u8(288);for(var i$1=0;i$1<144;++i$1)flt[i$1]=8;for(var i$1=144;i$1<256;++i$1)flt[i$1]=9;for(var i$1=256;i$1<280;++i$1)flt[i$1]=7;for(var i$1=280;i$1<288;++i$1)flt[i$1]=8;var fdt=new u8(32);for(var i$1=0;i$1<32;++i$1)fdt[i$1]=5;var flm=hMap(flt,9,0),flrm=hMap(flt,9,1),fdm=hMap(fdt,5,0),fdrm=hMap(fdt,5,1),max=function(Re){for(var e=Re[0],t=1;t<Re.length;++t)Re[t]>e&&(e=Re[t]);return e},bits=function(Re,e,t){var Pe=e/8>>0;return(Re[Pe]|Re[Pe+1]<<8)>>>(e&7)&t},bits16=function(Re,e){var t=e/8>>0;return(Re[t]|Re[t+1]<<8|Re[t+2]<<16)>>>(e&7)},shft=function(Re){return(Re/8>>0)+(Re&7&&1)},slc=function(Re,e,t){(e==null||e<0)&&(e=0),(t==null||t>Re.length)&&(t=Re.length);var Pe=new(Re instanceof u16?u16:Re instanceof u32?u32:u8)(t-e);return Pe.set(Re.subarray(e,t)),Pe},inflt=function(Re,e,t){var Pe=Re.length,Me=!e||t,Ie=!t||t.i;t||(t={}),e||(e=new u8(Pe*3));var Be=function(vr){var mr=e.length;if(vr>mr){var Cr=new u8(Math.max(mr*2,vr));Cr.set(e),e=Cr}},ke=t.f||0,_e=t.p||0,Ce=t.b||0,Te=t.l,Se=t.d,xe=t.m,r=t.n,Oe=Pe*8;do{if(!Te){t.f=ke=bits(Re,_e,1);var Ee=bits(Re,_e+1,3);if(_e+=3,Ee)if(Ee==1)Te=flrm,Se=fdrm,xe=9,r=5;else if(Ee==2){var ze=bits(Re,_e,31)+257,je=bits(Re,_e+10,15)+4,We=ze+bits(Re,_e+5,31)+1;_e+=14;for(var Ge=new u8(We),Ye=new u8(19),Xe=0;Xe<je;++Xe)Ye[clim[Xe]]=bits(Re,_e+Xe*3,7);_e+=je*3;var Ke=max(Ye),er=(1<<Ke)-1;if(!Ie&&_e+We*(Ke+7)>Oe)break;for(var Qe=hMap(Ye,Ke,1),Xe=0;Xe<We;){var nr=Qe[bits(Re,_e,er)];_e+=nr&15;var Ae=nr>>>4;if(Ae<16)Ge[Xe++]=Ae;else{var ir=0,cr=0;for(Ae==16?(cr=3+bits(Re,_e,3),_e+=2,ir=Ge[Xe-1]):Ae==17?(cr=3+bits(Re,_e,7),_e+=3):Ae==18&&(cr=11+bits(Re,_e,127),_e+=7);cr--;)Ge[Xe++]=ir}}var br=Ge.subarray(0,ze),wr=Ge.subarray(ze);xe=max(br),r=max(wr),Te=hMap(br,xe,1),Se=hMap(wr,r,1)}else throw"invalid block type";else{var Ae=shft(_e)+4,Fe=Re[Ae-4]|Re[Ae-3]<<8,De=Ae+Fe;if(De>Pe){if(Ie)throw"unexpected EOF";break}Me&&Be(Ce+Fe),e.set(Re.subarray(Ae,De),Ce),t.b=Ce+=Fe,t.p=_e=De*8;continue}if(_e>Oe)throw"unexpected EOF"}Me&&Be(Ce+131072);for(var xr=(1<<xe)-1,Sr=(1<<r)-1,lr=xe+r+18;Ie||_e+lr<Oe;){var ir=Te[bits16(Re,_e)&xr],fr=ir>>>4;if(_e+=ir&15,_e>Oe)throw"unexpected EOF";if(!ir)throw"invalid length/literal";if(fr<256)e[Ce++]=fr;else if(fr==256){Te=null;break}else{var $e=fr-254;if(fr>264){var Xe=fr-257,Ve=fleb[Xe];$e=bits(Re,_e,(1<<Ve)-1)+fl[Xe],_e+=Ve}var Je=Se[bits16(Re,_e)&Sr],Ze=Je>>>4;if(!Je)throw"invalid distance";_e+=Je&15;var wr=fd[Ze];if(Ze>3){var Ve=fdeb[Ze];wr+=bits16(Re,_e)&(1<<Ve)-1,_e+=Ve}if(_e>Oe)throw"unexpected EOF";Me&&Be(Ce+131072);for(var St=Ce+$e;Ce<St;Ce+=4)e[Ce]=e[Ce-wr],e[Ce+1]=e[Ce+1-wr],e[Ce+2]=e[Ce+2-wr],e[Ce+3]=e[Ce+3-wr];Ce=St}}t.l=Te,t.p=_e,t.b=Ce,Te&&(ke=1,t.m=xe,t.d=Se,t.n=r)}while(!ke);return Ce==e.length?e:slc(e,0,Ce)},wbits=function(Re,e,t){t<<=e&7;var Pe=e/8>>0;Re[Pe]|=t,Re[Pe+1]|=t>>>8},wbits16=function(Re,e,t){t<<=e&7;var Pe=e/8>>0;Re[Pe]|=t,Re[Pe+1]|=t>>>8,Re[Pe+2]|=t>>>16},hTree=function(Re,e){for(var t=[],Pe=0;Pe<Re.length;++Pe)Re[Pe]&&t.push({s:Pe,f:Re[Pe]});var Me=t.length,Ie=t.slice();if(!Me)return[new u8(0),0];if(Me==1){var Be=new u8(t[0].s+1);return Be[t[0].s]=1,[Be,1]}t.sort(function(We,Ge){return We.f-Ge.f}),t.push({s:-1,f:25001});var ke=t[0],_e=t[1],Ce=0,Te=1,Se=2;for(t[0]={s:-1,f:ke.f+_e.f,l:ke,r:_e};Te!=Me-1;)ke=t[t[Ce].f<t[Se].f?Ce++:Se++],_e=t[Ce!=Te&&t[Ce].f<t[Se].f?Ce++:Se++],t[Te++]={s:-1,f:ke.f+_e.f,l:ke,r:_e};for(var xe=Ie[0].s,Pe=1;Pe<Me;++Pe)Ie[Pe].s>xe&&(xe=Ie[Pe].s);var r=new u16(xe+1),Oe=ln(t[Te-1],r,0);if(Oe>e){var Pe=0,Ee=0,Ae=Oe-e,Fe=1<<Ae;for(Ie.sort(function(Ge,Ye){return r[Ye.s]-r[Ge.s]||Ge.f-Ye.f});Pe<Me;++Pe){var De=Ie[Pe].s;if(r[De]>e)Ee+=Fe-(1<<Oe-r[De]),r[De]=e;else break}for(Ee>>>=Ae;Ee>0;){var ze=Ie[Pe].s;r[ze]<e?Ee-=1<<e-r[ze]++-1:++Pe}for(;Pe>=0&&Ee;--Pe){var je=Ie[Pe].s;r[je]==e&&(--r[je],++Ee)}Oe=e}return[new u8(r),Oe]},ln=function(Re,e,t){return Re.s==-1?Math.max(ln(Re.l,e,t+1),ln(Re.r,e,t+1)):e[Re.s]=t},lc=function(Re){for(var e=Re.length;e&&!Re[--e];);for(var t=new u16(++e),Pe=0,Me=Re[0],Ie=1,Be=function(_e){t[Pe++]=_e},ke=1;ke<=e;++ke)if(Re[ke]==Me&&ke!=e)++Ie;else{if(!Me&&Ie>2){for(;Ie>138;Ie-=138)Be(32754);Ie>2&&(Be(Ie>10?Ie-11<<5|28690:Ie-3<<5|12305),Ie=0)}else if(Ie>3){for(Be(Me),--Ie;Ie>6;Ie-=6)Be(8304);Ie>2&&(Be(Ie-3<<5|8208),Ie=0)}for(;Ie--;)Be(Me);Ie=1,Me=Re[ke]}return[t.subarray(0,Pe),e]},clen=function(Re,e){for(var t=0,Pe=0;Pe<e.length;++Pe)t+=Re[Pe]*e[Pe];return t},wfblk=function(Re,e,t){var Pe=t.length,Me=shft(e+2);Re[Me]=Pe&255,Re[Me+1]=Pe>>>8,Re[Me+2]=Re[Me]^255,Re[Me+3]=Re[Me+1]^255;for(var Ie=0;Ie<Pe;++Ie)Re[Me+Ie+4]=t[Ie];return(Me+4+Pe)*8},wblk=function(Re,e,t,Pe,Me,Ie,Be,ke,_e,Ce,Te){wbits(e,Te++,t),++Me[256];for(var Se=hTree(Me,15),xe=Se[0],r=Se[1],Oe=hTree(Ie,15),Ee=Oe[0],Ae=Oe[1],Fe=lc(xe),De=Fe[0],ze=Fe[1],je=lc(Ee),We=je[0],Ge=je[1],Ye=new u16(19),Xe=0;Xe<De.length;++Xe)Ye[De[Xe]&31]++;for(var Xe=0;Xe<We.length;++Xe)Ye[We[Xe]&31]++;for(var Ke=hTree(Ye,7),er=Ke[0],Qe=Ke[1],nr=19;nr>4&&!er[clim[nr-1]];--nr);var ir=Ce+5<<3,cr=clen(Me,flt)+clen(Ie,fdt)+Be,br=clen(Me,xe)+clen(Ie,Ee)+Be+14+3*nr+clen(Ye,er)+(2*Ye[16]+3*Ye[17]+7*Ye[18]);if(ir<=cr&&ir<=br)return wfblk(e,Te,Re.subarray(_e,_e+Ce));var wr,xr,Sr,lr;if(wbits(e,Te,1+(br<cr)),Te+=2,br<cr){wr=hMap(xe,r,0),xr=xe,Sr=hMap(Ee,Ae,0),lr=Ee;var fr=hMap(er,Qe,0);wbits(e,Te,ze-257),wbits(e,Te+5,Ge-1),wbits(e,Te+10,nr-4),Te+=14;for(var Xe=0;Xe<nr;++Xe)wbits(e,Te+3*Xe,er[clim[Xe]]);Te+=3*nr;for(var $e=[De,We],Ve=0;Ve<2;++Ve)for(var Je=$e[Ve],Xe=0;Xe<Je.length;++Xe){var Ze=Je[Xe]&31;wbits(e,Te,fr[Ze]),Te+=er[Ze],Ze>15&&(wbits(e,Te,Je[Xe]>>>5&127),Te+=Je[Xe]>>>12)}}else wr=flm,xr=flt,Sr=fdm,lr=fdt;for(var Xe=0;Xe<ke;++Xe)if(Pe[Xe]>255){var Ze=Pe[Xe]>>>18&31;wbits16(e,Te,wr[Ze+257]),Te+=xr[Ze+257],Ze>7&&(wbits(e,Te,Pe[Xe]>>>23&31),Te+=fleb[Ze]);var St=Pe[Xe]&31;wbits16(e,Te,Sr[St]),Te+=lr[St],St>3&&(wbits16(e,Te,Pe[Xe]>>>5&8191),Te+=fdeb[St])}else wbits16(e,Te,wr[Pe[Xe]]),Te+=xr[Pe[Xe]];return wbits16(e,Te,wr[256]),Te+xr[256]},deo=new u32([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),et$1=new u8(0),dflt=function(Re,e,t,Pe,Me,Ie){var Be=Re.length,ke=new u8(Pe+Be+5*(1+Math.floor(Be/7e3))+Me),_e=ke.subarray(Pe,ke.length-Me),Ce=0;if(!e||Be<8)for(var Te=0;Te<=Be;Te+=65535){var Se=Te+65535;Se<Be?Ce=wfblk(_e,Ce,Re.subarray(Te,Se)):(_e[Te]=Ie,Ce=wfblk(_e,Ce,Re.subarray(Te,Be)))}else{for(var xe=deo[e-1],r=xe>>>13,Oe=xe&8191,Ee=(1<<t)-1,Ae=new u16(32768),Fe=new u16(Ee+1),De=Math.ceil(t/3),ze=2*De,je=function(gr){return(Re[gr]^Re[gr+1]<<De^Re[gr+2]<<ze)&Ee},We=new u32(25e3),Ge=new u16(288),Ye=new u16(32),Xe=0,Ke=0,Te=0,er=0,Qe=0,nr=0;Te<Be;++Te){var ir=je(Te),cr=Te&32767,br=Fe[ir];if(Ae[cr]=br,Fe[ir]=cr,Qe<=Te){var wr=Be-Te;if((Xe>7e3||er>24576)&&wr>423){Ce=wblk(Re,_e,0,We,Ge,Ye,Ke,er,nr,Te-nr,Ce),er=Xe=Ke=0,nr=Te;for(var xr=0;xr<286;++xr)Ge[xr]=0;for(var xr=0;xr<30;++xr)Ye[xr]=0}var Sr=2,lr=0,fr=Oe,$e=cr-br&32767;if(wr>2&&ir==je(Te-$e))for(var Ve=Math.min(r,wr)-1,Je=Math.min(32767,Te),Ze=Math.min(258,wr);$e<=Je&&--fr&&cr!=br;){if(Re[Te+Sr]==Re[Te+Sr-$e]){for(var St=0;St<Ze&&Re[Te+St]==Re[Te+St-$e];++St);if(St>Sr){if(Sr=St,lr=$e,St>Ve)break;for(var vr=Math.min($e,St-2),mr=0,xr=0;xr<vr;++xr){var Cr=Te-$e+xr+32768&32767,_r=Ae[Cr],pr=Cr-_r+32768&32767;pr>mr&&(mr=pr,br=Cr)}}}cr=br,br=Ae[cr],$e+=cr-br+32768&32767}if(lr){We[er++]=268435456|revfl[Sr]<<18|revfd[lr];var dr=revfl[Sr]&31,ur=revfd[lr]&31;Ke+=fleb[dr]+fdeb[ur],++Ge[257+dr],++Ye[ur],Qe=Te+Sr,++Xe}else We[er++]=Re[Te],++Ge[Re[Te]]}}Ce=wblk(Re,_e,Ie,We,Ge,Ye,Ke,er,nr,Te-nr,Ce),Ie||(Ce=wfblk(_e,Ce,et$1))}return slc(ke,0,Pe+shft(Ce)+Me)},adler=function(){var Re=1,e=0;return{p:function(t){for(var Pe=Re,Me=e,Ie=t.length,Be=0;Be!=Ie;){for(var ke=Math.min(Be+5552,Ie);Be<ke;++Be)Pe+=t[Be],Me+=Pe;Pe%=65521,Me%=65521}Re=Pe,e=Me},d:function(){return(Re>>>8<<16|(e&255)<<8|e>>>8)+((Re&255)<<23)*2}}},dopt=function(Re,e,t,Pe,Me){return dflt(Re,e.level==null?6:e.level,e.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(Re.length)))*1.5):12+e.mem,t,Pe,!Me)},wbytes=function(Re,e,t){for(;t;++e)Re[e]=t,t>>>=8},zlh=function(Re,e){var t=e.level,Pe=t==0?0:t<6?1:t==9?3:2;Re[0]=120,Re[1]=Pe<<6|(Pe?32-2*Pe:1)},zlv=function(Re){if((Re[0]&15)!=8||Re[0]>>>4>7||(Re[0]<<8|Re[1])%31)throw"invalid zlib data";if(Re[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function zlibSync(Re,e){e===void 0&&(e={});var t=adler();t.p(Re);var Pe=dopt(Re,e,2,4);return zlh(Pe,e),wbytes(Pe,Pe.length-4,t.d()),Pe}function unzlibSync(Re,e){return inflt((zlv(Re),Re.subarray(2,-4)),e)}/** @license
 *
 * jsPDF - PDF Document creation from JavaScript
 * Version 2.5.1 Built on 2022-01-28T15:37:57.791Z
 *                      CommitID 00000000
 *
 * Copyright (c) 2010-2021 James Hall <james@parall.ax>, https://github.com/MrRio/jsPDF
 *               2015-2021 yWorks GmbH, http://www.yworks.com
 *               2015-2021 Lukas Holländer <lukas.hollaender@yworks.com>, https://github.com/HackbrettXXX
 *               2016-2018 Aras Abbasi <aras.abbasi@gmail.com>
 *               2010 Aaron Spike, https://github.com/acspike
 *               2012 Willow Systems Corporation, https://github.com/willowsystems
 *               2012 Pablo Hess, https://github.com/pablohess
 *               2012 Florian Jenett, https://github.com/fjenett
 *               2013 Warren Weckesser, https://github.com/warrenweckesser
 *               2013 Youssef Beddad, https://github.com/lifof
 *               2013 Lee Driscoll, https://github.com/lsdriscoll
 *               2013 Stefan Slonevskiy, https://github.com/stefslon
 *               2013 Jeremy Morel, https://github.com/jmorel
 *               2013 Christoph Hartmann, https://github.com/chris-rock
 *               2014 Juan Pablo Gaviria, https://github.com/juanpgaviria
 *               2014 James Makes, https://github.com/dollaruw
 *               2014 Diego Casorran, https://github.com/diegocr
 *               2014 Steven Spungin, https://github.com/Flamenco
 *               2014 Kenneth Glassey, https://github.com/Gavvers
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 * Contributor(s):
 *    siefkenj, ahwolf, rickygu, Midnith, saintclair, eaparango,
 *    kim3er, mfo, alnorth, Flamenco
 */var n=function(){return typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:this}();function i(){n.console&&typeof n.console.log=="function"&&n.console.log.apply(n.console,arguments)}var a={log:i,warn:function(Re){n.console&&(typeof n.console.warn=="function"?n.console.warn.apply(n.console,arguments):i.call(null,arguments))},error:function(Re){n.console&&(typeof n.console.error=="function"?n.console.error.apply(n.console,arguments):i(Re))}};function o(Re,e,t){var Pe=new XMLHttpRequest;Pe.open("GET",Re),Pe.responseType="blob",Pe.onload=function(){l(Pe.response,e,t)},Pe.onerror=function(){a.error("could not download file")},Pe.send()}function s(Re){var e=new XMLHttpRequest;e.open("HEAD",Re,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function c(Re){try{Re.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),Re.dispatchEvent(e)}}var u,h,l=n.saveAs||((typeof window=="undefined"?"undefined":_typeof(window))!=="object"||window!==n?function(){}:typeof HTMLAnchorElement!="undefined"&&"download"in HTMLAnchorElement.prototype?function(Re,e,t){var Pe=n.URL||n.webkitURL,Me=document.createElement("a");e=e||Re.name||"download",Me.download=e,Me.rel="noopener",typeof Re=="string"?(Me.href=Re,Me.origin!==location.origin?s(Me.href)?o(Re,e,t):c(Me,Me.target="_blank"):c(Me)):(Me.href=Pe.createObjectURL(Re),setTimeout(function(){Pe.revokeObjectURL(Me.href)},4e4),setTimeout(function(){c(Me)},0))}:"msSaveOrOpenBlob"in navigator?function(Re,e,t){if(e=e||Re.name||"download",typeof Re=="string")if(s(Re))o(Re,e,t);else{var Pe=document.createElement("a");Pe.href=Re,Pe.target="_blank",setTimeout(function(){c(Pe)})}else navigator.msSaveOrOpenBlob(function(Me,Ie){return Ie===void 0?Ie={autoBom:!1}:_typeof(Ie)!=="object"&&(a.warn("Deprecated: Expected third argument to be a object"),Ie={autoBom:!Ie}),Ie.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(Me.type)?new Blob([String.fromCharCode(65279),Me],{type:Me.type}):Me}(Re,t),e)}:function(Re,e,t,Pe){if((Pe=Pe||open("","_blank"))&&(Pe.document.title=Pe.document.body.innerText="downloading..."),typeof Re=="string")return o(Re,e,t);var Me=Re.type==="application/octet-stream",Ie=/constructor/i.test(n.HTMLElement)||n.safari,Be=/CriOS\/[\d]+/.test(navigator.userAgent);if((Be||Me&&Ie)&&(typeof FileReader=="undefined"?"undefined":_typeof(FileReader))==="object"){var ke=new FileReader;ke.onloadend=function(){var Te=ke.result;Te=Be?Te:Te.replace(/^data:[^;]*;/,"data:attachment/file;"),Pe?Pe.location.href=Te:location=Te,Pe=null},ke.readAsDataURL(Re)}else{var _e=n.URL||n.webkitURL,Ce=_e.createObjectURL(Re);Pe?Pe.location=Ce:location.href=Ce,Pe=null,setTimeout(function(){_e.revokeObjectURL(Ce)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function f(Re){var e;Re=Re||"",this.ok=!1,Re.charAt(0)=="#"&&(Re=Re.substr(1,6)),Re={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[Re=(Re=Re.replace(/ /g,"")).toLowerCase()]||Re;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(ke){return[parseInt(ke[1]),parseInt(ke[2]),parseInt(ke[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(ke){return[parseInt(ke[1],16),parseInt(ke[2],16),parseInt(ke[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(ke){return[parseInt(ke[1]+ke[1],16),parseInt(ke[2]+ke[2],16),parseInt(ke[3]+ke[3],16)]}}],Pe=0;Pe<t.length;Pe++){var Me=t[Pe].re,Ie=t[Pe].process,Be=Me.exec(Re);Be&&(e=Ie(Be),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var ke=this.r.toString(16),_e=this.g.toString(16),Ce=this.b.toString(16);return ke.length==1&&(ke="0"+ke),_e.length==1&&(_e="0"+_e),Ce.length==1&&(Ce="0"+Ce),"#"+ke+_e+Ce}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function d(Re,e){var t=Re[0],Pe=Re[1],Me=Re[2],Ie=Re[3];t=g(t,Pe,Me,Ie,e[0],7,-680876936),Ie=g(Ie,t,Pe,Me,e[1],12,-389564586),Me=g(Me,Ie,t,Pe,e[2],17,606105819),Pe=g(Pe,Me,Ie,t,e[3],22,-1044525330),t=g(t,Pe,Me,Ie,e[4],7,-176418897),Ie=g(Ie,t,Pe,Me,e[5],12,1200080426),Me=g(Me,Ie,t,Pe,e[6],17,-1473231341),Pe=g(Pe,Me,Ie,t,e[7],22,-45705983),t=g(t,Pe,Me,Ie,e[8],7,1770035416),Ie=g(Ie,t,Pe,Me,e[9],12,-1958414417),Me=g(Me,Ie,t,Pe,e[10],17,-42063),Pe=g(Pe,Me,Ie,t,e[11],22,-1990404162),t=g(t,Pe,Me,Ie,e[12],7,1804603682),Ie=g(Ie,t,Pe,Me,e[13],12,-40341101),Me=g(Me,Ie,t,Pe,e[14],17,-1502002290),t=m(t,Pe=g(Pe,Me,Ie,t,e[15],22,1236535329),Me,Ie,e[1],5,-165796510),Ie=m(Ie,t,Pe,Me,e[6],9,-1069501632),Me=m(Me,Ie,t,Pe,e[11],14,643717713),Pe=m(Pe,Me,Ie,t,e[0],20,-373897302),t=m(t,Pe,Me,Ie,e[5],5,-701558691),Ie=m(Ie,t,Pe,Me,e[10],9,38016083),Me=m(Me,Ie,t,Pe,e[15],14,-660478335),Pe=m(Pe,Me,Ie,t,e[4],20,-405537848),t=m(t,Pe,Me,Ie,e[9],5,568446438),Ie=m(Ie,t,Pe,Me,e[14],9,-1019803690),Me=m(Me,Ie,t,Pe,e[3],14,-187363961),Pe=m(Pe,Me,Ie,t,e[8],20,1163531501),t=m(t,Pe,Me,Ie,e[13],5,-1444681467),Ie=m(Ie,t,Pe,Me,e[2],9,-51403784),Me=m(Me,Ie,t,Pe,e[7],14,1735328473),t=v(t,Pe=m(Pe,Me,Ie,t,e[12],20,-1926607734),Me,Ie,e[5],4,-378558),Ie=v(Ie,t,Pe,Me,e[8],11,-2022574463),Me=v(Me,Ie,t,Pe,e[11],16,1839030562),Pe=v(Pe,Me,Ie,t,e[14],23,-35309556),t=v(t,Pe,Me,Ie,e[1],4,-1530992060),Ie=v(Ie,t,Pe,Me,e[4],11,1272893353),Me=v(Me,Ie,t,Pe,e[7],16,-155497632),Pe=v(Pe,Me,Ie,t,e[10],23,-1094730640),t=v(t,Pe,Me,Ie,e[13],4,681279174),Ie=v(Ie,t,Pe,Me,e[0],11,-358537222),Me=v(Me,Ie,t,Pe,e[3],16,-722521979),Pe=v(Pe,Me,Ie,t,e[6],23,76029189),t=v(t,Pe,Me,Ie,e[9],4,-640364487),Ie=v(Ie,t,Pe,Me,e[12],11,-421815835),Me=v(Me,Ie,t,Pe,e[15],16,530742520),t=b(t,Pe=v(Pe,Me,Ie,t,e[2],23,-995338651),Me,Ie,e[0],6,-198630844),Ie=b(Ie,t,Pe,Me,e[7],10,1126891415),Me=b(Me,Ie,t,Pe,e[14],15,-1416354905),Pe=b(Pe,Me,Ie,t,e[5],21,-57434055),t=b(t,Pe,Me,Ie,e[12],6,1700485571),Ie=b(Ie,t,Pe,Me,e[3],10,-1894986606),Me=b(Me,Ie,t,Pe,e[10],15,-1051523),Pe=b(Pe,Me,Ie,t,e[1],21,-2054922799),t=b(t,Pe,Me,Ie,e[8],6,1873313359),Ie=b(Ie,t,Pe,Me,e[15],10,-30611744),Me=b(Me,Ie,t,Pe,e[6],15,-1560198380),Pe=b(Pe,Me,Ie,t,e[13],21,1309151649),t=b(t,Pe,Me,Ie,e[4],6,-145523070),Ie=b(Ie,t,Pe,Me,e[11],10,-1120210379),Me=b(Me,Ie,t,Pe,e[2],15,718787259),Pe=b(Pe,Me,Ie,t,e[9],21,-343485551),Re[0]=_(t,Re[0]),Re[1]=_(Pe,Re[1]),Re[2]=_(Me,Re[2]),Re[3]=_(Ie,Re[3])}function p(Re,e,t,Pe,Me,Ie){return e=_(_(e,Re),_(Pe,Ie)),_(e<<Me|e>>>32-Me,t)}function g(Re,e,t,Pe,Me,Ie,Be){return p(e&t|~e&Pe,Re,e,Me,Ie,Be)}function m(Re,e,t,Pe,Me,Ie,Be){return p(e&Pe|t&~Pe,Re,e,Me,Ie,Be)}function v(Re,e,t,Pe,Me,Ie,Be){return p(e^t^Pe,Re,e,Me,Ie,Be)}function b(Re,e,t,Pe,Me,Ie,Be){return p(t^(e|~Pe),Re,e,Me,Ie,Be)}function y(Re){var e,t=Re.length,Pe=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=Re.length;e+=64)d(Pe,w(Re.substring(e-64,e)));Re=Re.substring(e-64);var Me=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<Re.length;e++)Me[e>>2]|=Re.charCodeAt(e)<<(e%4<<3);if(Me[e>>2]|=128<<(e%4<<3),e>55)for(d(Pe,Me),e=0;e<16;e++)Me[e]=0;return Me[14]=8*t,d(Pe,Me),Pe}function w(Re){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=Re.charCodeAt(e)+(Re.charCodeAt(e+1)<<8)+(Re.charCodeAt(e+2)<<16)+(Re.charCodeAt(e+3)<<24);return t}u=n.atob.bind(n),h=n.btoa.bind(n);var N="0123456789abcdef".split("");function L(Re){for(var e="",t=0;t<4;t++)e+=N[Re>>8*t+4&15]+N[Re>>8*t&15];return e}function A(Re){return String.fromCharCode((255&Re)>>0,(65280&Re)>>8,(16711680&Re)>>16,(4278190080&Re)>>24)}function x(Re){return y(Re).map(A).join("")}var S=function(Re){for(var e=0;e<Re.length;e++)Re[e]=L(Re[e]);return Re.join("")}(y("hello"))!="5d41402abc4b2a76b9719d911017c592";function _(Re,e){if(S){var t=(65535&Re)+(65535&e);return(Re>>16)+(e>>16)+(t>>16)<<16|65535&t}return Re+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function P(Re,e){var t,Pe,Me,Ie;if(Re!==t){for(var Be=(Me=Re,Ie=1+(256/Re.length>>0),new Array(Ie+1).join(Me)),ke=[],_e=0;_e<256;_e++)ke[_e]=_e;var Ce=0;for(_e=0;_e<256;_e++){var Te=ke[_e];Ce=(Ce+Te+Be.charCodeAt(_e))%256,ke[_e]=ke[Ce],ke[Ce]=Te}t=Re,Pe=ke}else ke=Pe;var Se=e.length,xe=0,r=0,Oe="";for(_e=0;_e<Se;_e++)r=(r+(Te=ke[xe=(xe+1)%256]))%256,ke[xe]=ke[r],ke[r]=Te,Be=ke[(ke[xe]+ke[r])%256],Oe+=String.fromCharCode(e.charCodeAt(_e)^Be);return Oe}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var k={print:4,modify:8,copy:16,"annot-forms":32};function I(Re,e,t,Pe){this.v=1,this.r=2;var Me=192;Re.forEach(function(ke){Me+=k[ke]}),this.padding="(\xBFN^Nu\x8AAd\0NV\xFF\xFA\b..\0\xB6\xD0h>\x80/\f\xA9\xFEdSiz";var Ie=(e+this.padding).substr(0,32),Be=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(Ie,Be),this.P=-(1+(255^Me)),this.encryptionKey=x(Ie+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(Pe)).substr(0,5),this.U=P(this.encryptionKey,this.padding)}function F(Re){if(/[^\u0000-\u00ff]/.test(Re))throw new Error("Invalid PDF Name Object: "+Re+", Only accept ASCII characters.");for(var e="",t=Re.length,Pe=0;Pe<t;Pe++){var Me=Re.charCodeAt(Pe);Me<33||Me===35||Me===37||Me===40||Me===41||Me===47||Me===60||Me===62||Me===91||Me===93||Me===123||Me===125||Me>126?e+="#"+("0"+Me.toString(16)).slice(-2):e+=Re[Pe]}return e}function C(Re){if(_typeof(Re)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,Pe,Me){if(Me=Me||!1,typeof t!="string"||typeof Pe!="function"||typeof Me!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var Ie=Math.random().toString(35);return e[t][Ie]=[Pe,!!Me],Ie},this.unsubscribe=function(t){for(var Pe in e)if(e[Pe][t])return delete e[Pe][t],Object.keys(e[Pe]).length===0&&delete e[Pe],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var Pe=Array.prototype.slice.call(arguments,1),Me=[];for(var Ie in e[t]){var Be=e[t][Ie];try{Be[0].apply(Re,Pe)}catch(ke){n.console&&a.error("jsPDF PubSub Error",ke.message,ke)}Be[1]&&Me.push(Ie)}Me.length&&Me.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function j(Re){if(!(this instanceof j))return new j(Re);var e="opacity,stroke-opacity".split(",");for(var t in Re)Re.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=Re[t]);this.id="",this.objectNumber=-1}function O(Re,e){this.gState=Re,this.matrix=e,this.id="",this.objectNumber=-1}function B(Re,e,t,Pe,Me){if(!(this instanceof B))return new B(Re,e,t,Pe,Me);this.type=Re==="axial"?2:3,this.coords=e,this.colors=t,O.call(this,Pe,Me)}function M(Re,e,t,Pe,Me){if(!(this instanceof M))return new M(Re,e,t,Pe,Me);this.boundingBox=Re,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,O.call(this,Pe,Me)}function E(Re){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",Pe=arguments[1],Me=arguments[2],Ie=arguments[3],Be=[],ke=1,_e=16,Ce="S",Te=null;_typeof(Re=Re||{})==="object"&&(t=Re.orientation,Pe=Re.unit||Pe,Me=Re.format||Me,Ie=Re.compress||Re.compressPdf||Ie,(Te=Re.encryption||null)!==null&&(Te.userPassword=Te.userPassword||"",Te.ownerPassword=Te.ownerPassword||"",Te.userPermissions=Te.userPermissions||[]),ke=typeof Re.userUnit=="number"?Math.abs(Re.userUnit):1,Re.precision!==void 0&&(e=Re.precision),Re.floatPrecision!==void 0&&(_e=Re.floatPrecision),Ce=Re.defaultPathOperation||"S"),Be=Re.filters||(Ie===!0?["FlateEncode"]:Be),Pe=Pe||"mm",t=(""+(t||"P")).toLowerCase();var Se=Re.putOnlyUsedFonts||!1,xe={},r={internal:{},__private__:{}};r.__private__.PubSub=C;var Oe="1.3",Ee=r.__private__.getPdfVersion=function(){return Oe};r.__private__.setPdfVersion=function(tr){Oe=tr};var Ae={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};r.__private__.getPageFormats=function(){return Ae};var Fe=r.__private__.getPageFormat=function(tr){return Ae[tr]};Me=Me||"a4";var De={COMPAT:"compat",ADVANCED:"advanced"},ze=De.COMPAT;function je(){this.saveGraphicsState(),sr(new Fn(Er,0,0,-Er,0,ua()*Er).toString()+" cm"),this.setFontSize(this.getFontSize()/Er),Ce="n",ze=De.ADVANCED}function We(){this.restoreGraphicsState(),Ce="S",ze=De.COMPAT}var Ge=r.__private__.combineFontStyleAndFontWeight=function(tr,Tr){if(tr=="bold"&&Tr=="normal"||tr=="bold"&&Tr==400||tr=="normal"&&Tr=="italic"||tr=="bold"&&Tr=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Tr&&(tr=Tr==400||Tr==="normal"?tr==="italic"?"italic":"normal":Tr!=700&&Tr!=="bold"||tr!=="normal"?(Tr==700?"bold":Tr)+""+tr:"bold"),tr};r.advancedAPI=function(tr){var Tr=ze===De.COMPAT;return Tr&&je.call(this),typeof tr!="function"||(tr(this),Tr&&We.call(this)),this},r.compatAPI=function(tr){var Tr=ze===De.ADVANCED;return Tr&&We.call(this),typeof tr!="function"||(tr(this),Tr&&je.call(this)),this},r.isAdvancedAPI=function(){return ze===De.ADVANCED};var Ye,Xe=function(tr){if(ze!==De.ADVANCED)throw new Error(tr+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Ke=r.roundToPrecision=r.__private__.roundToPrecision=function(tr,Tr){var qr=e||Tr;if(isNaN(tr)||isNaN(qr))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return tr.toFixed(qr).replace(/0+$/,"")};Ye=r.hpf=r.__private__.hpf=typeof _e=="number"?function(tr){if(isNaN(tr))throw new Error("Invalid argument passed to jsPDF.hpf");return Ke(tr,_e)}:_e==="smart"?function(tr){if(isNaN(tr))throw new Error("Invalid argument passed to jsPDF.hpf");return Ke(tr,tr>-1&&tr<1?16:5)}:function(tr){if(isNaN(tr))throw new Error("Invalid argument passed to jsPDF.hpf");return Ke(tr,16)};var er=r.f2=r.__private__.f2=function(tr){if(isNaN(tr))throw new Error("Invalid argument passed to jsPDF.f2");return Ke(tr,2)},Qe=r.__private__.f3=function(tr){if(isNaN(tr))throw new Error("Invalid argument passed to jsPDF.f3");return Ke(tr,3)},nr=r.scale=r.__private__.scale=function(tr){if(isNaN(tr))throw new Error("Invalid argument passed to jsPDF.scale");return ze===De.COMPAT?tr*Er:ze===De.ADVANCED?tr:void 0},ir=function(tr){return ze===De.COMPAT?ua()-tr:ze===De.ADVANCED?tr:void 0},cr=function(tr){return nr(ir(tr))};r.__private__.setPrecision=r.setPrecision=function(tr){typeof parseInt(tr,10)=="number"&&(e=parseInt(tr,10))};var br,wr="00000000000000000000000000000000",xr=r.__private__.getFileId=function(){return wr},Sr=r.__private__.setFileId=function(tr){return wr=tr!==void 0&&/^[a-fA-F0-9]{32}$/.test(tr)?tr.toUpperCase():wr.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),Te!==null&&(Ii=new I(Te.userPermissions,Te.userPassword,Te.ownerPassword,wr)),wr};r.setFileId=function(tr){return Sr(tr),this},r.getFileId=function(){return xr()};var lr=r.__private__.convertDateToPDFDate=function(tr){var Tr=tr.getTimezoneOffset(),qr=Tr<0?"+":"-",en=Math.floor(Math.abs(Tr/60)),fn=Math.abs(Tr%60),An=[qr,Ze(en),"'",Ze(fn),"'"].join("");return["D:",tr.getFullYear(),Ze(tr.getMonth()+1),Ze(tr.getDate()),Ze(tr.getHours()),Ze(tr.getMinutes()),Ze(tr.getSeconds()),An].join("")},fr=r.__private__.convertPDFDateToDate=function(tr){var Tr=parseInt(tr.substr(2,4),10),qr=parseInt(tr.substr(6,2),10)-1,en=parseInt(tr.substr(8,2),10),fn=parseInt(tr.substr(10,2),10),An=parseInt(tr.substr(12,2),10),Ln=parseInt(tr.substr(14,2),10);return new Date(Tr,qr,en,fn,An,Ln,0)},$e=r.__private__.setCreationDate=function(tr){var Tr;if(tr===void 0&&(tr=new Date),tr instanceof Date)Tr=lr(tr);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(tr))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Tr=tr}return br=Tr},Ve=r.__private__.getCreationDate=function(tr){var Tr=br;return tr==="jsDate"&&(Tr=fr(br)),Tr};r.setCreationDate=function(tr){return $e(tr),this},r.getCreationDate=function(tr){return Ve(tr)};var Je,Ze=r.__private__.padd2=function(tr){return("0"+parseInt(tr)).slice(-2)},St=r.__private__.padd2Hex=function(tr){return("00"+(tr=tr.toString())).substr(tr.length)},vr=0,mr=[],Cr=[],_r=0,pr=[],dr=[],ur=!1,rr=Cr,gr=function(){vr=0,_r=0,Cr=[],mr=[],pr=[],_n=fi(),Jr=fi()};r.__private__.setCustomOutputDestination=function(tr){ur=!0,rr=tr};var hr=function(tr){ur||(rr=tr)};r.__private__.resetCustomOutputDestination=function(){ur=!1,rr=Cr};var sr=r.__private__.out=function(tr){return tr=tr.toString(),_r+=tr.length+1,rr.push(tr),rr},Ar=r.__private__.write=function(tr){return sr(arguments.length===1?tr.toString():Array.prototype.join.call(arguments," "))},Or=r.__private__.getArrayBuffer=function(tr){for(var Tr=tr.length,qr=new ArrayBuffer(Tr),en=new Uint8Array(qr);Tr--;)en[Tr]=tr.charCodeAt(Tr);return qr},Mr=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];r.__private__.getStandardFonts=function(){return Mr};var Gr=Re.fontSize||16;r.__private__.setFontSize=r.setFontSize=function(tr){return Gr=ze===De.ADVANCED?tr/Er:tr,this};var zr,Ir=r.__private__.getFontSize=r.getFontSize=function(){return ze===De.COMPAT?Gr:Gr*Er},Qr=Re.R2L||!1;r.__private__.setR2L=r.setR2L=function(tr){return Qr=tr,this},r.__private__.getR2L=r.getR2L=function(){return Qr};var rn,sn=r.__private__.setZoomMode=function(tr){var Tr=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(tr))zr=tr;else if(isNaN(tr)){if(Tr.indexOf(tr)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+tr+'" is not recognized.');zr=tr}else zr=parseInt(tr,10)};r.__private__.getZoomMode=function(){return zr};var pn,mn=r.__private__.setPageMode=function(tr){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(tr)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+tr+'" is not recognized.');rn=tr};r.__private__.getPageMode=function(){return rn};var Sn=r.__private__.setLayoutMode=function(tr){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(tr)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+tr+'" is not recognized.');pn=tr};r.__private__.getLayoutMode=function(){return pn},r.__private__.setDisplayMode=r.setDisplayMode=function(tr,Tr,qr){return sn(tr),Sn(Tr),mn(qr),this};var Cn={title:"",subject:"",author:"",keywords:"",creator:""};r.__private__.getDocumentProperty=function(tr){if(Object.keys(Cn).indexOf(tr)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Cn[tr]},r.__private__.getDocumentProperties=function(){return Cn},r.__private__.setDocumentProperties=r.setProperties=r.setDocumentProperties=function(tr){for(var Tr in Cn)Cn.hasOwnProperty(Tr)&&tr[Tr]&&(Cn[Tr]=tr[Tr]);return this},r.__private__.setDocumentProperty=function(tr,Tr){if(Object.keys(Cn).indexOf(tr)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Cn[tr]=Tr};var Xr,Er,Rr,Dr,Br,Wr={},Ur={},Hr=[],$r={},Kr={},tn={},yn={},Pn=null,bn=0,dn=[],Tn=new C(r),xn=Re.hotfixes||[],Nn={},In={},Bn=[],Fn=function tr(Tr,qr,en,fn,An,Ln){if(!(this instanceof tr))return new tr(Tr,qr,en,fn,An,Ln);isNaN(Tr)&&(Tr=1),isNaN(qr)&&(qr=0),isNaN(en)&&(en=0),isNaN(fn)&&(fn=1),isNaN(An)&&(An=0),isNaN(Ln)&&(Ln=0),this._matrix=[Tr,qr,en,fn,An,Ln]};Object.defineProperty(Fn.prototype,"sx",{get:function(){return this._matrix[0]},set:function(tr){this._matrix[0]=tr}}),Object.defineProperty(Fn.prototype,"shy",{get:function(){return this._matrix[1]},set:function(tr){this._matrix[1]=tr}}),Object.defineProperty(Fn.prototype,"shx",{get:function(){return this._matrix[2]},set:function(tr){this._matrix[2]=tr}}),Object.defineProperty(Fn.prototype,"sy",{get:function(){return this._matrix[3]},set:function(tr){this._matrix[3]=tr}}),Object.defineProperty(Fn.prototype,"tx",{get:function(){return this._matrix[4]},set:function(tr){this._matrix[4]=tr}}),Object.defineProperty(Fn.prototype,"ty",{get:function(){return this._matrix[5]},set:function(tr){this._matrix[5]=tr}}),Object.defineProperty(Fn.prototype,"a",{get:function(){return this._matrix[0]},set:function(tr){this._matrix[0]=tr}}),Object.defineProperty(Fn.prototype,"b",{get:function(){return this._matrix[1]},set:function(tr){this._matrix[1]=tr}}),Object.defineProperty(Fn.prototype,"c",{get:function(){return this._matrix[2]},set:function(tr){this._matrix[2]=tr}}),Object.defineProperty(Fn.prototype,"d",{get:function(){return this._matrix[3]},set:function(tr){this._matrix[3]=tr}}),Object.defineProperty(Fn.prototype,"e",{get:function(){return this._matrix[4]},set:function(tr){this._matrix[4]=tr}}),Object.defineProperty(Fn.prototype,"f",{get:function(){return this._matrix[5]},set:function(tr){this._matrix[5]=tr}}),Object.defineProperty(Fn.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Fn.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Fn.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Fn.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Fn.prototype.join=function(tr){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(Ye).join(tr)},Fn.prototype.multiply=function(tr){var Tr=tr.sx*this.sx+tr.shy*this.shx,qr=tr.sx*this.shy+tr.shy*this.sy,en=tr.shx*this.sx+tr.sy*this.shx,fn=tr.shx*this.shy+tr.sy*this.sy,An=tr.tx*this.sx+tr.ty*this.shx+this.tx,Ln=tr.tx*this.shy+tr.ty*this.sy+this.ty;return new Fn(Tr,qr,en,fn,An,Ln)},Fn.prototype.decompose=function(){var tr=this.sx,Tr=this.shy,qr=this.shx,en=this.sy,fn=this.tx,An=this.ty,Ln=Math.sqrt(tr*tr+Tr*Tr),Wn=(tr/=Ln)*qr+(Tr/=Ln)*en;qr-=tr*Wn,en-=Tr*Wn;var Kn=Math.sqrt(qr*qr+en*en);return Wn/=Kn,tr*(en/=Kn)<Tr*(qr/=Kn)&&(tr=-tr,Tr=-Tr,Wn=-Wn,Ln=-Ln),{scale:new Fn(Ln,0,0,Kn,0,0),translate:new Fn(1,0,0,1,fn,An),rotate:new Fn(tr,Tr,-Tr,tr,0,0),skew:new Fn(1,0,Wn,1,0,0)}},Fn.prototype.toString=function(tr){return this.join(" ")},Fn.prototype.inversed=function(){var tr=this.sx,Tr=this.shy,qr=this.shx,en=this.sy,fn=this.tx,An=this.ty,Ln=1/(tr*en-Tr*qr),Wn=en*Ln,Kn=-Tr*Ln,Zn=-qr*Ln,ai=tr*Ln;return new Fn(Wn,Kn,Zn,ai,-Wn*fn-Zn*An,-Kn*fn-ai*An)},Fn.prototype.applyToPoint=function(tr){var Tr=tr.x*this.sx+tr.y*this.shx+this.tx,qr=tr.x*this.shy+tr.y*this.sy+this.ty;return new to(Tr,qr)},Fn.prototype.applyToRectangle=function(tr){var Tr=this.applyToPoint(tr),qr=this.applyToPoint(new to(tr.x+tr.w,tr.y+tr.h));return new Go(Tr.x,Tr.y,qr.x-Tr.x,qr.y-Tr.y)},Fn.prototype.clone=function(){var tr=this.sx,Tr=this.shy,qr=this.shx,en=this.sy,fn=this.tx,An=this.ty;return new Fn(tr,Tr,qr,en,fn,An)},r.Matrix=Fn;var qn=r.matrixMult=function(tr,Tr){return Tr.multiply(tr)},ni=new Fn(1,0,0,1,0,0);r.unitMatrix=r.identityMatrix=ni;var si=function(tr,Tr){if(!Kr[tr]){var qr=(Tr instanceof B?"Sh":"P")+(Object.keys($r).length+1).toString(10);Tr.id=qr,Kr[tr]=qr,$r[qr]=Tr,Tn.publish("addPattern",Tr)}};r.ShadingPattern=B,r.TilingPattern=M,r.addShadingPattern=function(tr,Tr){return Xe("addShadingPattern()"),si(tr,Tr),this},r.beginTilingPattern=function(tr){Xe("beginTilingPattern()"),Ns(tr.boundingBox[0],tr.boundingBox[1],tr.boundingBox[2]-tr.boundingBox[0],tr.boundingBox[3]-tr.boundingBox[1],tr.matrix)},r.endTilingPattern=function(tr,Tr){Xe("endTilingPattern()"),Tr.stream=dr[Je].join(`
`),si(tr,Tr),Tn.publish("endTilingPattern",Tr),Bn.pop().restore()};var ii=r.__private__.newObject=function(){var tr=fi();return ki(tr,!0),tr},fi=r.__private__.newObjectDeferred=function(){return vr++,mr[vr]=function(){return _r},vr},ki=function(tr,Tr){return Tr=typeof Tr=="boolean"&&Tr,mr[tr]=_r,Tr&&sr(tr+" 0 obj"),tr},Zr=r.__private__.newAdditionalObject=function(){var tr={objId:fi(),content:""};return pr.push(tr),tr},_n=fi(),Jr=fi(),cn=r.__private__.decodeColorString=function(tr){var Tr=tr.split(" ");if(Tr.length!==2||Tr[1]!=="g"&&Tr[1]!=="G")Tr.length===5&&(Tr[4]==="k"||Tr[4]==="K")&&(Tr=[(1-Tr[0])*(1-Tr[3]),(1-Tr[1])*(1-Tr[3]),(1-Tr[2])*(1-Tr[3]),"r"]);else{var qr=parseFloat(Tr[0]);Tr=[qr,qr,qr,"r"]}for(var en="#",fn=0;fn<3;fn++)en+=("0"+Math.floor(255*parseFloat(Tr[fn])).toString(16)).slice(-2);return en},jn=r.__private__.encodeColorString=function(tr){var Tr;typeof tr=="string"&&(tr={ch1:tr});var qr=tr.ch1,en=tr.ch2,fn=tr.ch3,An=tr.ch4,Ln=tr.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof qr=="string"&&qr.charAt(0)!=="#"){var Wn=new f(qr);if(Wn.ok)qr=Wn.toHex();else if(!/^\d*\.?\d*$/.test(qr))throw new Error('Invalid color "'+qr+'" passed to jsPDF.encodeColorString.')}if(typeof qr=="string"&&/^#[0-9A-Fa-f]{3}$/.test(qr)&&(qr="#"+qr[1]+qr[1]+qr[2]+qr[2]+qr[3]+qr[3]),typeof qr=="string"&&/^#[0-9A-Fa-f]{6}$/.test(qr)){var Kn=parseInt(qr.substr(1),16);qr=Kn>>16&255,en=Kn>>8&255,fn=255&Kn}if(en===void 0||An===void 0&&qr===en&&en===fn)if(typeof qr=="string")Tr=qr+" "+Ln[0];else switch(tr.precision){case 2:Tr=er(qr/255)+" "+Ln[0];break;case 3:default:Tr=Qe(qr/255)+" "+Ln[0]}else if(An===void 0||_typeof(An)==="object"){if(An&&!isNaN(An.a)&&An.a===0)return Tr=["1.","1.","1.",Ln[1]].join(" ");if(typeof qr=="string")Tr=[qr,en,fn,Ln[1]].join(" ");else switch(tr.precision){case 2:Tr=[er(qr/255),er(en/255),er(fn/255),Ln[1]].join(" ");break;default:case 3:Tr=[Qe(qr/255),Qe(en/255),Qe(fn/255),Ln[1]].join(" ")}}else if(typeof qr=="string")Tr=[qr,en,fn,An,Ln[2]].join(" ");else switch(tr.precision){case 2:Tr=[er(qr),er(en),er(fn),er(An),Ln[2]].join(" ");break;case 3:default:Tr=[Qe(qr),Qe(en),Qe(fn),Qe(An),Ln[2]].join(" ")}return Tr},Vn=r.__private__.getFilters=function(){return Be},Yn=r.__private__.putStream=function(tr){var Tr=(tr=tr||{}).data||"",qr=tr.filters||Vn(),en=tr.alreadyAppliedFilters||[],fn=tr.addLength1||!1,An=Tr.length,Ln=tr.objectId,Wn=function(Qi){return Qi};if(Te!==null&&Ln===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");Te!==null&&(Wn=Ii.encryptor(Ln,0));var Kn={};qr===!0&&(qr=["FlateEncode"]);var Zn=tr.additionalKeyValues||[],ai=(Kn=E.API.processDataByFilters!==void 0?E.API.processDataByFilters(Tr,qr):{data:Tr,reverseChain:[]}).reverseChain+(Array.isArray(en)?en.join(" "):en.toString());if(Kn.data.length!==0&&(Zn.push({key:"Length",value:Kn.data.length}),fn===!0&&Zn.push({key:"Length1",value:An})),ai.length!=0)if(ai.split("/").length-1==1)Zn.push({key:"Filter",value:ai});else{Zn.push({key:"Filter",value:"["+ai+"]"});for(var ci=0;ci<Zn.length;ci+=1)if(Zn[ci].key==="DecodeParms"){for(var xi=[],Ti=0;Ti<Kn.reverseChain.split("/").length-1;Ti+=1)xi.push("null");xi.push(Zn[ci].value),Zn[ci].value="["+xi.join(" ")+"]"}}sr("<<");for(var zi=0;zi<Zn.length;zi++)sr("/"+Zn[zi].key+" "+Zn[zi].value);sr(">>"),Kn.data.length!==0&&(sr("stream"),sr(Wn(Kn.data)),sr("endstream"))},Xn=r.__private__.putPage=function(tr){var Tr=tr.number,qr=tr.data,en=tr.objId,fn=tr.contentsObjId;ki(en,!0),sr("<</Type /Page"),sr("/Parent "+tr.rootDictionaryObjId+" 0 R"),sr("/Resources "+tr.resourceDictionaryObjId+" 0 R"),sr("/MediaBox ["+parseFloat(Ye(tr.mediaBox.bottomLeftX))+" "+parseFloat(Ye(tr.mediaBox.bottomLeftY))+" "+Ye(tr.mediaBox.topRightX)+" "+Ye(tr.mediaBox.topRightY)+"]"),tr.cropBox!==null&&sr("/CropBox ["+Ye(tr.cropBox.bottomLeftX)+" "+Ye(tr.cropBox.bottomLeftY)+" "+Ye(tr.cropBox.topRightX)+" "+Ye(tr.cropBox.topRightY)+"]"),tr.bleedBox!==null&&sr("/BleedBox ["+Ye(tr.bleedBox.bottomLeftX)+" "+Ye(tr.bleedBox.bottomLeftY)+" "+Ye(tr.bleedBox.topRightX)+" "+Ye(tr.bleedBox.topRightY)+"]"),tr.trimBox!==null&&sr("/TrimBox ["+Ye(tr.trimBox.bottomLeftX)+" "+Ye(tr.trimBox.bottomLeftY)+" "+Ye(tr.trimBox.topRightX)+" "+Ye(tr.trimBox.topRightY)+"]"),tr.artBox!==null&&sr("/ArtBox ["+Ye(tr.artBox.bottomLeftX)+" "+Ye(tr.artBox.bottomLeftY)+" "+Ye(tr.artBox.topRightX)+" "+Ye(tr.artBox.topRightY)+"]"),typeof tr.userUnit=="number"&&tr.userUnit!==1&&sr("/UserUnit "+tr.userUnit),Tn.publish("putPage",{objId:en,pageContext:dn[Tr],pageNumber:Tr,page:qr}),sr("/Contents "+fn+" 0 R"),sr(">>"),sr("endobj");var An=qr.join(`
`);return ze===De.ADVANCED&&(An+=`
Q`),ki(fn,!0),Yn({data:An,filters:Vn(),objectId:fn}),sr("endobj"),en},li=r.__private__.putPages=function(){var tr,Tr,qr=[];for(tr=1;tr<=bn;tr++)dn[tr].objId=fi(),dn[tr].contentsObjId=fi();for(tr=1;tr<=bn;tr++)qr.push(Xn({number:tr,data:dr[tr],objId:dn[tr].objId,contentsObjId:dn[tr].contentsObjId,mediaBox:dn[tr].mediaBox,cropBox:dn[tr].cropBox,bleedBox:dn[tr].bleedBox,trimBox:dn[tr].trimBox,artBox:dn[tr].artBox,userUnit:dn[tr].userUnit,rootDictionaryObjId:_n,resourceDictionaryObjId:Jr}));ki(_n,!0),sr("<</Type /Pages");var en="/Kids [";for(Tr=0;Tr<bn;Tr++)en+=qr[Tr]+" 0 R ";sr(en+"]"),sr("/Count "+bn),sr(">>"),sr("endobj"),Tn.publish("postPutPages")},Pi=function(tr){Tn.publish("putFont",{font:tr,out:sr,newObject:ii,putStream:Yn}),tr.isAlreadyPutted!==!0&&(tr.objectNumber=ii(),sr("<<"),sr("/Type /Font"),sr("/BaseFont /"+F(tr.postScriptName)),sr("/Subtype /Type1"),typeof tr.encoding=="string"&&sr("/Encoding /"+tr.encoding),sr("/FirstChar 32"),sr("/LastChar 255"),sr(">>"),sr("endobj"))},Gi=function(){for(var tr in Wr)Wr.hasOwnProperty(tr)&&(Se===!1||Se===!0&&xe.hasOwnProperty(tr))&&Pi(Wr[tr])},gi=function(tr){tr.objectNumber=ii();var Tr=[];Tr.push({key:"Type",value:"/XObject"}),Tr.push({key:"Subtype",value:"/Form"}),Tr.push({key:"BBox",value:"["+[Ye(tr.x),Ye(tr.y),Ye(tr.x+tr.width),Ye(tr.y+tr.height)].join(" ")+"]"}),Tr.push({key:"Matrix",value:"["+tr.matrix.toString()+"]"});var qr=tr.pages[1].join(`
`);Yn({data:qr,additionalKeyValues:Tr,objectId:tr.objectNumber}),sr("endobj")},ji=function(){for(var tr in Nn)Nn.hasOwnProperty(tr)&&gi(Nn[tr])},mi=function(tr,Tr){var qr,en=[],fn=1/(Tr-1);for(qr=0;qr<1;qr+=fn)en.push(qr);if(en.push(1),tr[0].offset!=0){var An={offset:0,color:tr[0].color};tr.unshift(An)}if(tr[tr.length-1].offset!=1){var Ln={offset:1,color:tr[tr.length-1].color};tr.push(Ln)}for(var Wn="",Kn=0,Zn=0;Zn<en.length;Zn++){for(qr=en[Zn];qr>tr[Kn+1].offset;)Kn++;var ai=tr[Kn].offset,ci=(qr-ai)/(tr[Kn+1].offset-ai),xi=tr[Kn].color,Ti=tr[Kn+1].color;Wn+=St(Math.round((1-ci)*xi[0]+ci*Ti[0]).toString(16))+St(Math.round((1-ci)*xi[1]+ci*Ti[1]).toString(16))+St(Math.round((1-ci)*xi[2]+ci*Ti[2]).toString(16))}return Wn.trim()},Ua=function(tr,Tr){Tr||(Tr=21);var qr=ii(),en=mi(tr.colors,Tr),fn=[];fn.push({key:"FunctionType",value:"0"}),fn.push({key:"Domain",value:"[0.0 1.0]"}),fn.push({key:"Size",value:"["+Tr+"]"}),fn.push({key:"BitsPerSample",value:"8"}),fn.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),fn.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Yn({data:en,additionalKeyValues:fn,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:qr}),sr("endobj"),tr.objectNumber=ii(),sr("<< /ShadingType "+tr.type),sr("/ColorSpace /DeviceRGB");var An="/Coords ["+Ye(parseFloat(tr.coords[0]))+" "+Ye(parseFloat(tr.coords[1]))+" ";tr.type===2?An+=Ye(parseFloat(tr.coords[2]))+" "+Ye(parseFloat(tr.coords[3])):An+=Ye(parseFloat(tr.coords[2]))+" "+Ye(parseFloat(tr.coords[3]))+" "+Ye(parseFloat(tr.coords[4]))+" "+Ye(parseFloat(tr.coords[5])),sr(An+="]"),tr.matrix&&sr("/Matrix ["+tr.matrix.toString()+"]"),sr("/Function "+qr+" 0 R"),sr("/Extend [true true]"),sr(">>"),sr("endobj")},Li=function(tr,Tr){var qr=fi(),en=ii();Tr.push({resourcesOid:qr,objectOid:en}),tr.objectNumber=en;var fn=[];fn.push({key:"Type",value:"/Pattern"}),fn.push({key:"PatternType",value:"1"}),fn.push({key:"PaintType",value:"1"}),fn.push({key:"TilingType",value:"1"}),fn.push({key:"BBox",value:"["+tr.boundingBox.map(Ye).join(" ")+"]"}),fn.push({key:"XStep",value:Ye(tr.xStep)}),fn.push({key:"YStep",value:Ye(tr.yStep)}),fn.push({key:"Resources",value:qr+" 0 R"}),tr.matrix&&fn.push({key:"Matrix",value:"["+tr.matrix.toString()+"]"}),Yn({data:tr.stream,additionalKeyValues:fn,objectId:tr.objectNumber}),sr("endobj")},sa=function(tr){var Tr;for(Tr in $r)$r.hasOwnProperty(Tr)&&($r[Tr]instanceof B?Ua($r[Tr]):$r[Tr]instanceof M&&Li($r[Tr],tr))},ma=function(tr){for(var Tr in tr.objectNumber=ii(),sr("<<"),tr)switch(Tr){case"opacity":sr("/ca "+er(tr[Tr]));break;case"stroke-opacity":sr("/CA "+er(tr[Tr]))}sr(">>"),sr("endobj")},co=function(){var tr;for(tr in tn)tn.hasOwnProperty(tr)&&ma(tn[tr])},Ja=function(){for(var tr in sr("/XObject <<"),Nn)Nn.hasOwnProperty(tr)&&Nn[tr].objectNumber>=0&&sr("/"+tr+" "+Nn[tr].objectNumber+" 0 R");Tn.publish("putXobjectDict"),sr(">>")},ko=function(){Ii.oid=ii(),sr("<<"),sr("/Filter /Standard"),sr("/V "+Ii.v),sr("/R "+Ii.r),sr("/U <"+Ii.toHexString(Ii.U)+">"),sr("/O <"+Ii.toHexString(Ii.O)+">"),sr("/P "+Ii.P),sr(">>"),sr("endobj")},ya=function(){for(var tr in sr("/Font <<"),Wr)Wr.hasOwnProperty(tr)&&(Se===!1||Se===!0&&xe.hasOwnProperty(tr))&&sr("/"+tr+" "+Wr[tr].objectNumber+" 0 R");sr(">>")},Mi=function(){if(Object.keys($r).length>0){for(var tr in sr("/Shading <<"),$r)$r.hasOwnProperty(tr)&&$r[tr]instanceof B&&$r[tr].objectNumber>=0&&sr("/"+tr+" "+$r[tr].objectNumber+" 0 R");Tn.publish("putShadingPatternDict"),sr(">>")}},qi=function(tr){if(Object.keys($r).length>0){for(var Tr in sr("/Pattern <<"),$r)$r.hasOwnProperty(Tr)&&$r[Tr]instanceof r.TilingPattern&&$r[Tr].objectNumber>=0&&$r[Tr].objectNumber<tr&&sr("/"+Tr+" "+$r[Tr].objectNumber+" 0 R");Tn.publish("putTilingPatternDict"),sr(">>")}},Po=function(){if(Object.keys(tn).length>0){var tr;for(tr in sr("/ExtGState <<"),tn)tn.hasOwnProperty(tr)&&tn[tr].objectNumber>=0&&sr("/"+tr+" "+tn[tr].objectNumber+" 0 R");Tn.publish("putGStateDict"),sr(">>")}},xs=function(tr){ki(tr.resourcesOid,!0),sr("<<"),sr("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),ya(),Mi(),qi(tr.objectOid),Po(),Ja(),sr(">>"),sr("endobj")},Ni=function(){var tr=[];Gi(),co(),ji(),sa(tr),Tn.publish("putResources"),tr.forEach(xs),xs({resourcesOid:Jr,objectOid:Number.MAX_SAFE_INTEGER}),Tn.publish("postPutResources")},jo=function(){Tn.publish("putAdditionalObjects");for(var tr=0;tr<pr.length;tr++){var Tr=pr[tr];ki(Tr.objId,!0),sr(Tr.content),sr("endobj")}Tn.publish("postPutAdditionalObjects")},Qa=function(tr){Ur[tr.fontName]=Ur[tr.fontName]||{},Ur[tr.fontName][tr.fontStyle]=tr.id},Wa=function(tr,Tr,qr,en,fn){var An={id:"F"+(Object.keys(Wr).length+1).toString(10),postScriptName:tr,fontName:Tr,fontStyle:qr,encoding:en,isStandardFont:fn||!1,metadata:{}};return Tn.publish("addFont",{font:An,instance:this}),Wr[An.id]=An,Qa(An),An.id},as=function(tr){for(var Tr=0,qr=Mr.length;Tr<qr;Tr++){var en=Wa.call(this,tr[Tr][0],tr[Tr][1],tr[Tr][2],Mr[Tr][3],!0);Se===!1&&(xe[en]=!0);var fn=tr[Tr][0].split("-");Qa({id:en,fontName:fn[0],fontStyle:fn[1]||""})}Tn.publish("addFonts",{fonts:Wr,dictionary:Ur})},zo=function(tr){return tr.foo=function(){try{return tr.apply(this,arguments)}catch(en){var Tr=en.stack||"";~Tr.indexOf(" at ")&&(Tr=Tr.split(" at ")[1]);var qr="Error in function "+Tr.split(`
`)[0].split("<")[0]+": "+en.message;if(!n.console)throw new Error(qr);n.console.error(qr,en),n.alert&&alert(qr)}},tr.foo.bar=tr,tr.foo},ra=function(tr,Tr){var qr,en,fn,An,Ln,Wn,Kn,Zn,ai;if(fn=(Tr=Tr||{}).sourceEncoding||"Unicode",Ln=Tr.outputEncoding,(Tr.autoencode||Ln)&&Wr[Xr].metadata&&Wr[Xr].metadata[fn]&&Wr[Xr].metadata[fn].encoding&&(An=Wr[Xr].metadata[fn].encoding,!Ln&&Wr[Xr].encoding&&(Ln=Wr[Xr].encoding),!Ln&&An.codePages&&(Ln=An.codePages[0]),typeof Ln=="string"&&(Ln=An[Ln]),Ln)){for(Kn=!1,Wn=[],qr=0,en=tr.length;qr<en;qr++)(Zn=Ln[tr.charCodeAt(qr)])?Wn.push(String.fromCharCode(Zn)):Wn.push(tr[qr]),Wn[qr].charCodeAt(0)>>8&&(Kn=!0);tr=Wn.join("")}for(qr=tr.length;Kn===void 0&&qr!==0;)tr.charCodeAt(qr-1)>>8&&(Kn=!0),qr--;if(!Kn)return tr;for(Wn=Tr.noBOM?[]:[254,255],qr=0,en=tr.length;qr<en;qr++){if((ai=(Zn=tr.charCodeAt(qr))>>8)>>8)throw new Error("Character at position "+qr+" of string '"+tr+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Wn.push(ai),Wn.push(Zn-(ai<<8))}return String.fromCharCode.apply(void 0,Wn)},na=r.__private__.pdfEscape=r.pdfEscape=function(tr,Tr){return ra(tr,Tr).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ba=r.__private__.beginPage=function(tr){dr[++bn]=[],dn[bn]={objId:0,contentsObjId:0,userUnit:Number(ke),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(tr[0]),topRightY:Number(tr[1])}},As(bn),hr(dr[Je])},os=function(tr,Tr){var qr,en,fn;switch(t=Tr||t,typeof tr=="string"&&(qr=Fe(tr.toLowerCase()),Array.isArray(qr)&&(en=qr[0],fn=qr[1])),Array.isArray(tr)&&(en=tr[0]*Er,fn=tr[1]*Er),isNaN(en)&&(en=Me[0],fn=Me[1]),(en>14400||fn>14400)&&(a.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),en=Math.min(14400,en),fn=Math.min(14400,fn)),Me=[en,fn],t.substr(0,1)){case"l":fn>en&&(Me=[fn,en]);break;case"p":en>fn&&(Me=[fn,en])}ba(Me),Eo(La),sr(Ji),ds!==0&&sr(ds+" J"),Vo!==0&&sr(Vo+" j"),Tn.publish("addPage",{pageNumber:bn})},qs=function(tr){tr>0&&tr<=bn&&(dr.splice(tr,1),dn.splice(tr,1),bn--,Je>bn&&(Je=bn),this.setPage(Je))},As=function(tr){tr>0&&tr<=bn&&(Je=tr)},Xs=r.__private__.getNumberOfPages=r.getNumberOfPages=function(){return dr.length-1},Cs=function(tr,Tr,qr){var en,fn=void 0;return qr=qr||{},tr=tr!==void 0?tr:Wr[Xr].fontName,Tr=Tr!==void 0?Tr:Wr[Xr].fontStyle,en=tr.toLowerCase(),Ur[en]!==void 0&&Ur[en][Tr]!==void 0?fn=Ur[en][Tr]:Ur[tr]!==void 0&&Ur[tr][Tr]!==void 0?fn=Ur[tr][Tr]:qr.disableWarning===!1&&a.warn("Unable to look up font label for font '"+tr+"', '"+Tr+"'. Refer to getFontList() for available fonts."),fn||qr.noFallback||(fn=Ur.times[Tr])==null&&(fn=Ur.times.normal),fn},Ys=r.__private__.putInfo=function(){var tr=ii(),Tr=function(en){return en};for(var qr in Te!==null&&(Tr=Ii.encryptor(tr,0)),sr("<<"),sr("/Producer ("+na(Tr("jsPDF "+E.version))+")"),Cn)Cn.hasOwnProperty(qr)&&Cn[qr]&&sr("/"+qr.substr(0,1).toUpperCase()+qr.substr(1)+" ("+na(Tr(Cn[qr]))+")");sr("/CreationDate ("+na(Tr(br))+")"),sr(">>"),sr("endobj")},ks=r.__private__.putCatalog=function(tr){var Tr=(tr=tr||{}).rootDictionaryObjId||_n;switch(ii(),sr("<<"),sr("/Type /Catalog"),sr("/Pages "+Tr+" 0 R"),zr||(zr="fullwidth"),zr){case"fullwidth":sr("/OpenAction [3 0 R /FitH null]");break;case"fullheight":sr("/OpenAction [3 0 R /FitV null]");break;case"fullpage":sr("/OpenAction [3 0 R /Fit]");break;case"original":sr("/OpenAction [3 0 R /XYZ null null 1]");break;default:var qr=""+zr;qr.substr(qr.length-1)==="%"&&(zr=parseInt(zr)/100),typeof zr=="number"&&sr("/OpenAction [3 0 R /XYZ null null "+er(zr)+"]")}switch(pn||(pn="continuous"),pn){case"continuous":sr("/PageLayout /OneColumn");break;case"single":sr("/PageLayout /SinglePage");break;case"two":case"twoleft":sr("/PageLayout /TwoColumnLeft");break;case"tworight":sr("/PageLayout /TwoColumnRight")}rn&&sr("/PageMode /"+rn),Tn.publish("putCatalog"),sr(">>"),sr("endobj")},ss=r.__private__.putTrailer=function(){sr("trailer"),sr("<<"),sr("/Size "+(vr+1)),sr("/Root "+vr+" 0 R"),sr("/Info "+(vr-1)+" 0 R"),Te!==null&&sr("/Encrypt "+Ii.oid+" 0 R"),sr("/ID [ <"+wr+"> <"+wr+"> ]"),sr(">>")},$s=r.__private__.putHeader=function(){sr("%PDF-"+Oe),sr("%\xBA\xDF\xAC\xE0")},Ks=r.__private__.putXRef=function(){var tr="0000000000";sr("xref"),sr("0 "+(vr+1)),sr("0000000000 65535 f ");for(var Tr=1;Tr<=vr;Tr++)typeof mr[Tr]=="function"?sr((tr+mr[Tr]()).slice(-10)+" 00000 n "):mr[Tr]!==void 0?sr((tr+mr[Tr]).slice(-10)+" 00000 n "):sr("0000000000 00000 n ")},fa=r.__private__.buildDocument=function(){gr(),hr(Cr),Tn.publish("buildDocument"),$s(),li(),jo(),Ni(),Te!==null&&ko(),Ys(),ks();var tr=_r;return Ks(),ss(),sr("startxref"),sr(""+tr),sr("%%EOF"),hr(dr[Je]),Cr.join(`
`)},To=r.__private__.getBlob=function(tr){return new Blob([Or(tr)],{type:"application/pdf"})},Js=r.output=r.__private__.output=zo(function(tr,Tr){switch(typeof(Tr=Tr||{})=="string"?Tr={filename:Tr}:Tr.filename=Tr.filename||"generated.pdf",tr){case void 0:return fa();case"save":r.save(Tr.filename);break;case"arraybuffer":return Or(fa());case"blob":return To(fa());case"bloburi":case"bloburl":if(n.URL!==void 0&&typeof n.URL.createObjectURL=="function")return n.URL&&n.URL.createObjectURL(To(fa()))||void 0;a.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var qr="",en=fa();try{qr=h(en)}catch{qr=h(unescape(encodeURIComponent(en)))}return"data:application/pdf;filename="+Tr.filename+";base64,"+qr;case"pdfobjectnewwindow":if(Object.prototype.toString.call(n)==="[object Window]"){var fn="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",An=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Tr.pdfObjectUrl&&(fn=Tr.pdfObjectUrl,An="");var Ln='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+fn+'"'+An+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Tr)+");<\/script></body></html>",Wn=n.open();return Wn!==null&&Wn.document.write(Ln),Wn}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(n)==="[object Window]"){var Kn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Tr.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Tr.filename+'" width="500px" height="400px" /></body></html>',Zn=n.open();if(Zn!==null){Zn.document.write(Kn);var ai=this;Zn.document.documentElement.querySelector("#pdfViewer").onload=function(){Zn.document.title=Tr.filename,Zn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(ai.output("bloburl"))}}return Zn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(n)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var ci='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Tr)+'"></iframe></body></html>',xi=n.open();if(xi!==null&&(xi.document.write(ci),xi.document.title=Tr.filename),xi||typeof safari=="undefined")return xi;break;case"datauri":case"dataurl":return n.document.location.href=this.output("datauristring",Tr);default:return null}}),ho=function(tr){return Array.isArray(xn)===!0&&xn.indexOf(tr)>-1};switch(Pe){case"pt":Er=1;break;case"mm":Er=72/25.4;break;case"cm":Er=72/2.54;break;case"in":Er=72;break;case"px":Er=ho("px_scaling")==1?.75:96/72;break;case"pc":case"em":Er=12;break;case"ex":Er=6;break;default:if(typeof Pe!="number")throw new Error("Invalid unit: "+Pe);Er=Pe}var Ii=null;$e(),Sr();var fo=function(tr){return Te!==null?Ii.encryptor(tr,0):function(Tr){return Tr}},Oo=r.__private__.getPageInfo=r.getPageInfo=function(tr){if(isNaN(tr)||tr%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:dn[tr].objId,pageNumber:tr,pageContext:dn[tr]}},Ps=r.__private__.getPageInfoByObjId=function(tr){if(isNaN(tr)||tr%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Tr in dn)if(dn[Tr].objId===tr)break;return Oo(Tr)},Qn=r.__private__.getCurrentPageInfo=r.getCurrentPageInfo=function(){return{objId:dn[Je].objId,pageNumber:Je,pageContext:dn[Je]}};r.addPage=function(){return os.apply(this,arguments),this},r.setPage=function(){return As.apply(this,arguments),hr.call(this,dr[Je]),this},r.insertPage=function(tr){return this.addPage(),this.movePage(Je,tr),this},r.movePage=function(tr,Tr){var qr,en;if(tr>Tr){qr=dr[tr],en=dn[tr];for(var fn=tr;fn>Tr;fn--)dr[fn]=dr[fn-1],dn[fn]=dn[fn-1];dr[Tr]=qr,dn[Tr]=en,this.setPage(Tr)}else if(tr<Tr){qr=dr[tr],en=dn[tr];for(var An=tr;An<Tr;An++)dr[An]=dr[An+1],dn[An]=dn[An+1];dr[Tr]=qr,dn[Tr]=en,this.setPage(Tr)}return this},r.deletePage=function(){return qs.apply(this,arguments),this},r.__private__.text=r.text=function(tr,Tr,qr,en,fn){var An,Ln,Wn,Kn,Zn,ai,ci,xi,Ti,zi=(en=en||{}).scope||this;if(typeof tr=="number"&&typeof Tr=="number"&&(typeof qr=="string"||Array.isArray(qr))){var Qi=qr;qr=Tr,Tr=tr,tr=Qi}if(arguments[3]instanceof Fn?(Xe("The transform parameter of text() with a Matrix value"),Ti=fn):(Wn=arguments[4],Kn=arguments[5],_typeof(ci=arguments[3])==="object"&&ci!==null||(typeof Wn=="string"&&(Kn=Wn,Wn=null),typeof ci=="string"&&(Kn=ci,ci=null),typeof ci=="number"&&(Wn=ci,ci=null),en={flags:ci,angle:Wn,align:Kn})),isNaN(Tr)||isNaN(qr)||tr==null)throw new Error("Invalid arguments passed to jsPDF.text");if(tr.length===0)return zi;var Xi="",Aa=!1,Fa=typeof en.lineHeightFactor=="number"?en.lineHeightFactor:Ra,Ca=zi.internal.scaleFactor;function go(bi){return bi=bi.split("	").join(Array(en.TabLen||9).join(" ")),na(bi,ci)}function qo(bi){for(var _i,Oi=bi.concat(),Ui=[],Xa=Oi.length;Xa--;)typeof(_i=Oi.shift())=="string"?Ui.push(_i):Array.isArray(bi)&&(_i.length===1||_i[1]===void 0&&_i[2]===void 0)?Ui.push(_i[0]):Ui.push([_i[0],_i[1],_i[2]]);return Ui}function mo(bi,_i){var Oi;if(typeof bi=="string")Oi=_i(bi)[0];else if(Array.isArray(bi)){for(var Ui,Xa,wo=bi.concat(),$o=[],Ds=wo.length;Ds--;)typeof(Ui=wo.shift())=="string"?$o.push(_i(Ui)[0]):Array.isArray(Ui)&&typeof Ui[0]=="string"&&(Xa=_i(Ui[0],Ui[1],Ui[2]),$o.push([Xa[0],Xa[1],Xa[2]]));Oi=$o}return Oi}var Ga=!1,yo=!0;if(typeof tr=="string")Ga=!0;else if(Array.isArray(tr)){var ka=tr.concat();Ln=[];for(var bo,ca=ka.length;ca--;)(typeof(bo=ka.shift())!="string"||Array.isArray(bo)&&typeof bo[0]!="string")&&(yo=!1);Ga=yo}if(Ga===!1)throw new Error('Type of text must be string or Array. "'+tr+'" is not recognized.');typeof tr=="string"&&(tr=tr.match(/[\r?\n]/)?tr.split(/\r\n|\r|\n/g):[tr]);var Ma=Gr/zi.internal.scaleFactor,Lo=Ma*(Fa-1);switch(en.baseline){case"bottom":qr-=Lo;break;case"top":qr+=Ma-Lo;break;case"hanging":qr+=Ma-2*Lo;break;case"middle":qr+=Ma/2-Lo}if((ai=en.maxWidth||0)>0&&(typeof tr=="string"?tr=zi.splitTextToSize(tr,ai):Object.prototype.toString.call(tr)==="[object Array]"&&(tr=tr.reduce(function(bi,_i){return bi.concat(zi.splitTextToSize(_i,ai))},[]))),An={text:tr,x:Tr,y:qr,options:en,mutex:{pdfEscape:na,activeFontKey:Xr,fonts:Wr,activeFontSize:Gr}},Tn.publish("preProcessText",An),tr=An.text,Wn=(en=An.options).angle,!(Ti instanceof Fn)&&Wn&&typeof Wn=="number"){Wn*=Math.PI/180,en.rotationDirection===0&&(Wn=-Wn),ze===De.ADVANCED&&(Wn=-Wn);var Xo=Math.cos(Wn),_o=Math.sin(Wn);Ti=new Fn(Xo,_o,-_o,Xo,0,0)}else Wn&&Wn instanceof Fn&&(Ti=Wn);ze!==De.ADVANCED||Ti||(Ti=ni),(Zn=en.charSpace||eo)!==void 0&&(Xi+=Ye(nr(Zn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(xi=en.horizontalScale)!==void 0&&(Xi+=Ye(100*xi)+` Tz
`),en.lang;var ha=-1,nl=en.renderingMode!==void 0?en.renderingMode:en.stroke,vs=zi.internal.getCurrentPageInfo().pageContext;switch(nl){case 0:case!1:case"fill":ha=0;break;case 1:case!0:case"stroke":ha=1;break;case 2:case"fillThenStroke":ha=2;break;case 3:case"invisible":ha=3;break;case 4:case"fillAndAddForClipping":ha=4;break;case 5:case"strokeAndAddPathForClipping":ha=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ha=6;break;case 7:case"addToPathForClipping":ha=7}var Is=vs.usedRenderingMode!==void 0?vs.usedRenderingMode:-1;ha!==-1?Xi+=ha+` Tr
`:Is!==-1&&(Xi+=`0 Tr
`),ha!==-1&&(vs.usedRenderingMode=ha),Kn=en.align||"left";var Na,gs=Gr*Fa,il=zi.internal.pageSize.getWidth(),al=Wr[Xr];Zn=en.charSpace||eo,ai=en.maxWidth||0,ci=Object.assign({autoencode:!0,noBOM:!0},en.flags);var So=[];if(Object.prototype.toString.call(tr)==="[object Array]"){var Pa;Ln=qo(tr),Kn!=="left"&&(Na=Ln.map(function(bi){return zi.getStringUnitWidth(bi,{font:al,charSpace:Zn,fontSize:Gr,doKerning:!1})*Gr/Ca}));var Ia,io=0;if(Kn==="right"){Tr-=Na[0],tr=[],ca=Ln.length;for(var Ha=0;Ha<ca;Ha++)Ha===0?(Ia=Za(Tr),Pa=Va(qr)):(Ia=nr(io-Na[Ha]),Pa=-gs),tr.push([Ln[Ha],Ia,Pa]),io=Na[Ha]}else if(Kn==="center"){Tr-=Na[0]/2,tr=[],ca=Ln.length;for(var ao=0;ao<ca;ao++)ao===0?(Ia=Za(Tr),Pa=Va(qr)):(Ia=nr((io-Na[ao])/2),Pa=-gs),tr.push([Ln[ao],Ia,Pa]),io=Na[ao]}else if(Kn==="left"){tr=[],ca=Ln.length;for(var da=0;da<ca;da++)tr.push(Ln[da])}else{if(Kn!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');tr=[],ca=Ln.length,ai=ai!==0?ai:il;for(var pa=0;pa<ca;pa++)Pa=pa===0?Va(qr):-gs,Ia=pa===0?Za(Tr):0,pa<ca-1?So.push(Ye(nr((ai-Na[pa])/(Ln[pa].split(" ").length-1)))):So.push(0),tr.push([Ln[pa],Ia,Pa])}}var Fo=typeof en.R2L=="boolean"?en.R2L:Qr;Fo===!0&&(tr=mo(tr,function(bi,_i,Oi){return[bi.split("").reverse().join(""),_i,Oi]})),An={text:tr,x:Tr,y:qr,options:en,mutex:{pdfEscape:na,activeFontKey:Xr,fonts:Wr,activeFontSize:Gr}},Tn.publish("postProcessText",An),tr=An.text,Aa=An.mutex.isHex||!1;var Mo=Wr[Xr].encoding;Mo!=="WinAnsiEncoding"&&Mo!=="StandardEncoding"||(tr=mo(tr,function(bi,_i,Oi){return[go(bi),_i,Oi]})),Ln=qo(tr),tr=[];for(var ia,Yi,Hi,Da=0,No=1,va=Array.isArray(Ln[0])?No:Da,oo="",Yo=function(bi,_i,Oi){var Ui="";return Oi instanceof Fn?(Oi=typeof en.angle=="number"?qn(Oi,new Fn(1,0,0,1,bi,_i)):qn(new Fn(1,0,0,1,bi,_i),Oi),ze===De.ADVANCED&&(Oi=qn(new Fn(1,0,0,-1,0,0),Oi)),Ui=Oi.join(" ")+` Tm
`):Ui=Ye(bi)+" "+Ye(_i)+` Td
`,Ui},aa=0;aa<Ln.length;aa++){switch(oo="",va){case No:Hi=(Aa?"<":"(")+Ln[aa][0]+(Aa?">":")"),ia=parseFloat(Ln[aa][1]),Yi=parseFloat(Ln[aa][2]);break;case Da:Hi=(Aa?"<":"(")+Ln[aa]+(Aa?">":")"),ia=Za(Tr),Yi=Va(qr)}So!==void 0&&So[aa]!==void 0&&(oo=So[aa]+` Tw
`),aa===0?tr.push(oo+Yo(ia,Yi,Ti)+Hi):va===Da?tr.push(oo+Hi):va===No&&tr.push(oo+Yo(ia,Yi,Ti)+Hi)}tr=va===Da?tr.join(` Tj
T* `):tr.join(` Tj
`),tr+=` Tj
`;var qa=`BT
/`;return qa+=Xr+" "+Gr+` Tf
`,qa+=Ye(Gr*Fa)+` TL
`,qa+=po+`
`,qa+=Xi,qa+=tr,sr(qa+="ET"),xe[Xr]=!0,zi};var ls=r.__private__.clip=r.clip=function(tr){return sr(tr==="evenodd"?"W*":"W"),this};r.clipEvenOdd=function(){return ls("evenodd")},r.__private__.discardPath=r.discardPath=function(){return sr("n"),this};var Sa=r.__private__.isValidStyle=function(tr){var Tr=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(tr)!==-1&&(Tr=!0),Tr};r.__private__.setDefaultPathOperation=r.setDefaultPathOperation=function(tr){return Sa(tr)&&(Ce=tr),this};var Uo=r.__private__.getStyle=r.getStyle=function(tr){var Tr=Ce;switch(tr){case"D":case"S":Tr="S";break;case"F":Tr="f";break;case"FD":case"DF":Tr="B";break;case"f":case"f*":case"B":case"B*":Tr=tr}return Tr},Ts=r.close=function(){return sr("h"),this};r.stroke=function(){return sr("S"),this},r.fill=function(tr){return Wo("f",tr),this},r.fillEvenOdd=function(tr){return Wo("f*",tr),this},r.fillStroke=function(tr){return Wo("B",tr),this},r.fillStrokeEvenOdd=function(tr){return Wo("B*",tr),this};var Wo=function(tr,Tr){_typeof(Tr)==="object"?wa(Tr,tr):sr(tr)},us=function(tr){tr===null||ze===De.ADVANCED&&tr===void 0||(tr=Uo(tr),sr(tr))};function Qs(tr,Tr,qr,en,fn){var An=new M(Tr||this.boundingBox,qr||this.xStep,en||this.yStep,this.gState,fn||this.matrix);An.stream=this.stream;var Ln=tr+"$$"+this.cloneIndex+++"$$";return si(Ln,An),An}var wa=function(tr,Tr){var qr=Kr[tr.key],en=$r[qr];if(en instanceof B)sr("q"),sr(Zs(Tr)),en.gState&&r.setGState(en.gState),sr(tr.matrix.toString()+" cm"),sr("/"+qr+" sh"),sr("Q");else if(en instanceof M){var fn=new Fn(1,0,0,-1,0,ua());tr.matrix&&(fn=fn.multiply(tr.matrix||ni),qr=Qs.call(en,tr.key,tr.boundingBox,tr.xStep,tr.yStep,fn).id),sr("q"),sr("/Pattern cs"),sr("/"+qr+" scn"),en.gState&&r.setGState(en.gState),sr(Tr),sr("Q")}},Zs=function(tr){switch(tr){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},cs=r.moveTo=function(tr,Tr){return sr(Ye(nr(tr))+" "+Ye(cr(Tr))+" m"),this},Os=r.lineTo=function(tr,Tr){return sr(Ye(nr(tr))+" "+Ye(cr(Tr))+" l"),this},la=r.curveTo=function(tr,Tr,qr,en,fn,An){return sr([Ye(nr(tr)),Ye(cr(Tr)),Ye(nr(qr)),Ye(cr(en)),Ye(nr(fn)),Ye(cr(An)),"c"].join(" ")),this};r.__private__.line=r.line=function(tr,Tr,qr,en,fn){if(isNaN(tr)||isNaN(Tr)||isNaN(qr)||isNaN(en)||!Sa(fn))throw new Error("Invalid arguments passed to jsPDF.line");return ze===De.COMPAT?this.lines([[qr-tr,en-Tr]],tr,Tr,[1,1],fn||"S"):this.lines([[qr-tr,en-Tr]],tr,Tr,[1,1]).stroke()},r.__private__.lines=r.lines=function(tr,Tr,qr,en,fn,An){var Ln,Wn,Kn,Zn,ai,ci,xi,Ti,zi,Qi,Xi,Aa;if(typeof tr=="number"&&(Aa=qr,qr=Tr,Tr=tr,tr=Aa),en=en||[1,1],An=An||!1,isNaN(Tr)||isNaN(qr)||!Array.isArray(tr)||!Array.isArray(en)||!Sa(fn)||typeof An!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(cs(Tr,qr),Ln=en[0],Wn=en[1],Zn=tr.length,Qi=Tr,Xi=qr,Kn=0;Kn<Zn;Kn++)(ai=tr[Kn]).length===2?(Qi=ai[0]*Ln+Qi,Xi=ai[1]*Wn+Xi,Os(Qi,Xi)):(ci=ai[0]*Ln+Qi,xi=ai[1]*Wn+Xi,Ti=ai[2]*Ln+Qi,zi=ai[3]*Wn+Xi,Qi=ai[4]*Ln+Qi,Xi=ai[5]*Wn+Xi,la(ci,xi,Ti,zi,Qi,Xi));return An&&Ts(),us(fn),this},r.path=function(tr){for(var Tr=0;Tr<tr.length;Tr++){var qr=tr[Tr],en=qr.c;switch(qr.op){case"m":cs(en[0],en[1]);break;case"l":Os(en[0],en[1]);break;case"c":la.apply(this,en);break;case"h":Ts()}}return this},r.__private__.rect=r.rect=function(tr,Tr,qr,en,fn){if(isNaN(tr)||isNaN(Tr)||isNaN(qr)||isNaN(en)||!Sa(fn))throw new Error("Invalid arguments passed to jsPDF.rect");return ze===De.COMPAT&&(en=-en),sr([Ye(nr(tr)),Ye(cr(Tr)),Ye(nr(qr)),Ye(nr(en)),"re"].join(" ")),us(fn),this},r.__private__.triangle=r.triangle=function(tr,Tr,qr,en,fn,An,Ln){if(isNaN(tr)||isNaN(Tr)||isNaN(qr)||isNaN(en)||isNaN(fn)||isNaN(An)||!Sa(Ln))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[qr-tr,en-Tr],[fn-qr,An-en],[tr-fn,Tr-An]],tr,Tr,[1,1],Ln,!0),this},r.__private__.roundedRect=r.roundedRect=function(tr,Tr,qr,en,fn,An,Ln){if(isNaN(tr)||isNaN(Tr)||isNaN(qr)||isNaN(en)||isNaN(fn)||isNaN(An)||!Sa(Ln))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Wn=4/3*(Math.SQRT2-1);return fn=Math.min(fn,.5*qr),An=Math.min(An,.5*en),this.lines([[qr-2*fn,0],[fn*Wn,0,fn,An-An*Wn,fn,An],[0,en-2*An],[0,An*Wn,-fn*Wn,An,-fn,An],[2*fn-qr,0],[-fn*Wn,0,-fn,-An*Wn,-fn,-An],[0,2*An-en],[0,-An*Wn,fn*Wn,-An,fn,-An]],tr+fn,Tr,[1,1],Ln,!0),this},r.__private__.ellipse=r.ellipse=function(tr,Tr,qr,en,fn){if(isNaN(tr)||isNaN(Tr)||isNaN(qr)||isNaN(en)||!Sa(fn))throw new Error("Invalid arguments passed to jsPDF.ellipse");var An=4/3*(Math.SQRT2-1)*qr,Ln=4/3*(Math.SQRT2-1)*en;return cs(tr+qr,Tr),la(tr+qr,Tr-Ln,tr+An,Tr-en,tr,Tr-en),la(tr-An,Tr-en,tr-qr,Tr-Ln,tr-qr,Tr),la(tr-qr,Tr+Ln,tr-An,Tr+en,tr,Tr+en),la(tr+An,Tr+en,tr+qr,Tr+Ln,tr+qr,Tr),us(fn),this},r.__private__.circle=r.circle=function(tr,Tr,qr,en){if(isNaN(tr)||isNaN(Tr)||isNaN(qr)||!Sa(en))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(tr,Tr,qr,qr,en)},r.setFont=function(tr,Tr,qr){return qr&&(Tr=Ge(Tr,qr)),Xr=Cs(tr,Tr,{disableWarning:!1}),this};var hs=r.__private__.getFont=r.getFont=function(){return Wr[Cs.apply(r,arguments)]};r.__private__.getFontList=r.getFontList=function(){var tr,Tr,qr={};for(tr in Ur)if(Ur.hasOwnProperty(tr))for(Tr in qr[tr]=[],Ur[tr])Ur[tr].hasOwnProperty(Tr)&&qr[tr].push(Tr);return qr},r.addFont=function(tr,Tr,qr,en,fn){var An=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&An.indexOf(arguments[3])!==-1?fn=arguments[3]:arguments[3]&&An.indexOf(arguments[3])==-1&&(qr=Ge(qr,en)),fn=fn||"Identity-H",Wa.call(this,tr,Tr,qr,fn)};var Ra,La=Re.lineWidth||.200025,el=r.__private__.getLineWidth=r.getLineWidth=function(){return La},Eo=r.__private__.setLineWidth=r.setLineWidth=function(tr){return La=tr,sr(Ye(nr(tr))+" w"),this};r.__private__.setLineDash=E.API.setLineDash=E.API.setLineDashPattern=function(tr,Tr){if(tr=tr||[],Tr=Tr||0,isNaN(Tr)||!Array.isArray(tr))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return tr=tr.map(function(qr){return Ye(nr(qr))}).join(" "),Tr=Ye(nr(Tr)),sr("["+tr+"] "+Tr+" d"),this};var Es=r.__private__.getLineHeight=r.getLineHeight=function(){return Gr*Ra};r.__private__.getLineHeight=r.getLineHeight=function(){return Gr*Ra};var Rs=r.__private__.setLineHeightFactor=r.setLineHeightFactor=function(tr){return typeof(tr=tr||1.15)=="number"&&(Ra=tr),this},fs=r.__private__.getLineHeightFactor=r.getLineHeightFactor=function(){return Ra};Rs(Re.lineHeight);var Za=r.__private__.getHorizontalCoordinate=function(tr){return nr(tr)},Va=r.__private__.getVerticalCoordinate=function(tr){return ze===De.ADVANCED?tr:dn[Je].mediaBox.topRightY-dn[Je].mediaBox.bottomLeftY-nr(tr)},Ls=r.__private__.getHorizontalCoordinateString=r.getHorizontalCoordinateString=function(tr){return Ye(Za(tr))},Fs=r.__private__.getVerticalCoordinateString=r.getVerticalCoordinateString=function(tr){return Ye(Va(tr))},Ji=Re.strokeColor||"0 G";r.__private__.getStrokeColor=r.getDrawColor=function(){return cn(Ji)},r.__private__.setStrokeColor=r.setDrawColor=function(tr,Tr,qr,en){return Ji=jn({ch1:tr,ch2:Tr,ch3:qr,ch4:en,pdfColorType:"draw",precision:2}),sr(Ji),this};var xa=Re.fillColor||"0 g";r.__private__.getFillColor=r.getFillColor=function(){return cn(xa)},r.__private__.setFillColor=r.setFillColor=function(tr,Tr,qr,en){return xa=jn({ch1:tr,ch2:Tr,ch3:qr,ch4:en,pdfColorType:"fill",precision:2}),sr(xa),this};var po=Re.textColor||"0 g",tl=r.__private__.getTextColor=r.getTextColor=function(){return cn(po)};r.__private__.setTextColor=r.setTextColor=function(tr,Tr,qr,en){return po=jn({ch1:tr,ch2:Tr,ch3:qr,ch4:en,pdfColorType:"text",precision:3}),this};var eo=Re.charSpace,rl=r.__private__.getCharSpace=r.getCharSpace=function(){return parseFloat(eo||0)};r.__private__.setCharSpace=r.setCharSpace=function(tr){if(isNaN(tr))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return eo=tr,this};var ds=0;r.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},r.__private__.setLineCap=r.setLineCap=function(tr){var Tr=r.CapJoinStyles[tr];if(Tr===void 0)throw new Error("Line cap style of '"+tr+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ds=Tr,sr(Tr+" J"),this};var Vo=0;r.__private__.setLineJoin=r.setLineJoin=function(tr){var Tr=r.CapJoinStyles[tr];if(Tr===void 0)throw new Error("Line join style of '"+tr+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Vo=Tr,sr(Tr+" j"),this},r.__private__.setLineMiterLimit=r.__private__.setMiterLimit=r.setLineMiterLimit=r.setMiterLimit=function(tr){if(tr=tr||0,isNaN(tr))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return sr(Ye(nr(tr))+" M"),this},r.GState=j,r.setGState=function(tr){(tr=typeof tr=="string"?tn[yn[tr]]:Ms(null,tr)).equals(Pn)||(sr("/"+tr.id+" gs"),Pn=tr)};var Ms=function(tr,Tr){if(!tr||!yn[tr]){var qr=!1;for(var en in tn)if(tn.hasOwnProperty(en)&&tn[en].equals(Tr)){qr=!0;break}if(qr)Tr=tn[en];else{var fn="GS"+(Object.keys(tn).length+1).toString(10);tn[fn]=Tr,Tr.id=fn}return tr&&(yn[tr]=Tr.id),Tn.publish("addGState",Tr),Tr}};r.addGState=function(tr,Tr){return Ms(tr,Tr),this},r.saveGraphicsState=function(){return sr("q"),Hr.push({key:Xr,size:Gr,color:po}),this},r.restoreGraphicsState=function(){sr("Q");var tr=Hr.pop();return Xr=tr.key,Gr=tr.size,po=tr.color,Pn=null,this},r.setCurrentTransformationMatrix=function(tr){return sr(tr.toString()+" cm"),this},r.comment=function(tr){return sr("#"+tr),this};var to=function(tr,Tr){var qr=tr||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return qr},set:function(An){isNaN(An)||(qr=parseFloat(An))}});var en=Tr||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return en},set:function(An){isNaN(An)||(en=parseFloat(An))}});var fn="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return fn},set:function(An){fn=An.toString()}}),this},Go=function(tr,Tr,qr,en){to.call(this,tr,Tr),this.type="rect";var fn=qr||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return fn},set:function(Ln){isNaN(Ln)||(fn=parseFloat(Ln))}});var An=en||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return An},set:function(Ln){isNaN(Ln)||(An=parseFloat(Ln))}}),this},Ho=function(){this.page=bn,this.currentPage=Je,this.pages=dr.slice(0),this.pagesContext=dn.slice(0),this.x=Rr,this.y=Dr,this.matrix=Br,this.width=vo(Je),this.height=ua(Je),this.outputDestination=rr,this.id="",this.objectNumber=-1};Ho.prototype.restore=function(){bn=this.page,Je=this.currentPage,dn=this.pagesContext,dr=this.pages,Rr=this.x,Dr=this.y,Br=this.matrix,ro(Je,this.width),no(Je,this.height),rr=this.outputDestination};var Ns=function(tr,Tr,qr,en,fn){Bn.push(new Ho),bn=Je=0,dr=[],Rr=tr,Dr=Tr,Br=fn,ba([qr,en])},ps=function(tr){if(In[tr])Bn.pop().restore();else{var Tr=new Ho,qr="Xo"+(Object.keys(Nn).length+1).toString(10);Tr.id=qr,In[tr]=qr,Nn[qr]=Tr,Tn.publish("addFormObject",Tr),Bn.pop().restore()}};for(var Ro in r.beginFormObject=function(tr,Tr,qr,en,fn){return Ns(tr,Tr,qr,en,fn),this},r.endFormObject=function(tr){return ps(tr),this},r.doFormObject=function(tr,Tr){var qr=Nn[In[tr]];return sr("q"),sr(Tr.toString()+" cm"),sr("/"+qr.id+" Do"),sr("Q"),this},r.getFormObject=function(tr){var Tr=Nn[In[tr]];return{x:Tr.x,y:Tr.y,width:Tr.width,height:Tr.height,matrix:Tr.matrix}},r.save=function(tr,Tr){return tr=tr||"generated.pdf",(Tr=Tr||{}).returnPromise=Tr.returnPromise||!1,Tr.returnPromise===!1?(l(To(fa()),tr),typeof l.unload=="function"&&n.setTimeout&&setTimeout(l.unload,911),this):new Promise(function(qr,en){try{var fn=l(To(fa()),tr);typeof l.unload=="function"&&n.setTimeout&&setTimeout(l.unload,911),qr(fn)}catch(An){en(An.message)}})},E.API)E.API.hasOwnProperty(Ro)&&(Ro==="events"&&E.API.events.length?function(tr,Tr){var qr,en,fn;for(fn=Tr.length-1;fn!==-1;fn--)qr=Tr[fn][0],en=Tr[fn][1],tr.subscribe.apply(tr,[qr].concat(typeof en=="function"?[en]:en))}(Tn,E.API.events):r[Ro]=E.API[Ro]);var vo=r.getPageWidth=function(tr){return(dn[tr=tr||Je].mediaBox.topRightX-dn[tr].mediaBox.bottomLeftX)/Er},ro=r.setPageWidth=function(tr,Tr){dn[tr].mediaBox.topRightX=Tr*Er+dn[tr].mediaBox.bottomLeftX},ua=r.getPageHeight=function(tr){return(dn[tr=tr||Je].mediaBox.topRightY-dn[tr].mediaBox.bottomLeftY)/Er},no=r.setPageHeight=function(tr,Tr){dn[tr].mediaBox.topRightY=Tr*Er+dn[tr].mediaBox.bottomLeftY};return r.internal={pdfEscape:na,getStyle:Uo,getFont:hs,getFontSize:Ir,getCharSpace:rl,getTextColor:tl,getLineHeight:Es,getLineHeightFactor:fs,getLineWidth:el,write:Ar,getHorizontalCoordinate:Za,getVerticalCoordinate:Va,getCoordinateString:Ls,getVerticalCoordinateString:Fs,collections:{},newObject:ii,newAdditionalObject:Zr,newObjectDeferred:fi,newObjectDeferredBegin:ki,getFilters:Vn,putStream:Yn,events:Tn,scaleFactor:Er,pageSize:{getWidth:function(){return vo(Je)},setWidth:function(tr){ro(Je,tr)},getHeight:function(){return ua(Je)},setHeight:function(tr){no(Je,tr)}},encryptionOptions:Te,encryption:Ii,getEncryptor:fo,output:Js,getNumberOfPages:Xs,pages:dr,out:sr,f2:er,f3:Qe,getPageInfo:Oo,getPageInfoByObjId:Ps,getCurrentPageInfo:Qn,getPDFVersion:Ee,Point:to,Rectangle:Go,Matrix:Fn,hasHotfix:ho},Object.defineProperty(r.internal.pageSize,"width",{get:function(){return vo(Je)},set:function(tr){ro(Je,tr)},enumerable:!0,configurable:!0}),Object.defineProperty(r.internal.pageSize,"height",{get:function(){return ua(Je)},set:function(tr){no(Je,tr)},enumerable:!0,configurable:!0}),as.call(r,Mr),Xr="F1",os(Me,t),Tn.publish("initialized"),r}I.prototype.lsbFirstWord=function(Re){return String.fromCharCode(Re>>0&255,Re>>8&255,Re>>16&255,Re>>24&255)},I.prototype.toHexString=function(Re){return Re.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},I.prototype.hexToBytes=function(Re){for(var e=[],t=0;t<Re.length;t+=2)e.push(String.fromCharCode(parseInt(Re.substr(t,2),16)));return e.join("")},I.prototype.processOwnerPassword=function(Re,e){return P(x(e).substr(0,5),Re)},I.prototype.encryptor=function(Re,e){var t=x(this.encryptionKey+String.fromCharCode(255&Re,Re>>8&255,Re>>16&255,255&e,e>>8&255)).substr(0,10);return function(Pe){return P(t,Pe)}},j.prototype.equals=function(Re){var e,t="id,objectNumber,equals";if(!Re||_typeof(Re)!==_typeof(this))return!1;var Pe=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!Re.hasOwnProperty(e)||this[e]!==Re[e])return!1;Pe++}for(e in Re)Re.hasOwnProperty(e)&&t.indexOf(e)<0&&Pe--;return Pe===0},E.API={events:[]},E.version="2.5.1";var q=E.API,D=1,R=function(Re){return Re.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},T=function(Re){return Re.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},U=function(Re){return Re.toFixed(2)},z=function(Re){return Re.toFixed(5)};q.__acroform__={};var H=function(Re,e){Re.prototype=Object.create(e.prototype),Re.prototype.constructor=Re},W=function(Re){return Re*D},V=function(Re){var e=new ut,t=At.internal.getHeight(Re)||0,Pe=At.internal.getWidth(Re)||0;return e.BBox=[0,0,Number(U(Pe)),Number(U(t))],e},G=q.__acroform__.setBit=function(Re,e){if(Re=Re||0,e=e||0,isNaN(Re)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return Re|=1<<e},Y=q.__acroform__.clearBit=function(Re,e){if(Re=Re||0,e=e||0,isNaN(Re)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return Re&=~(1<<e)},J=q.__acroform__.getBit=function(Re,e){if(isNaN(Re)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(Re&1<<e)==0?0:1},X=q.__acroform__.getBitForPdf=function(Re,e){if(isNaN(Re)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return J(Re,e-1)},K=q.__acroform__.setBitForPdf=function(Re,e){if(isNaN(Re)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return G(Re,e-1)},Z=q.__acroform__.clearBitForPdf=function(Re,e){if(isNaN(Re)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Y(Re,e-1)},$=q.__acroform__.calculateCoordinates=function(Re,e){var t=e.internal.getHorizontalCoordinate,Pe=e.internal.getVerticalCoordinate,Me=Re[0],Ie=Re[1],Be=Re[2],ke=Re[3],_e={};return _e.lowerLeft_X=t(Me)||0,_e.lowerLeft_Y=Pe(Ie+ke)||0,_e.upperRight_X=t(Me+Be)||0,_e.upperRight_Y=Pe(Ie)||0,[Number(U(_e.lowerLeft_X)),Number(U(_e.lowerLeft_Y)),Number(U(_e.upperRight_X)),Number(U(_e.upperRight_Y))]},Q=function(Re){if(Re.appearanceStreamContent)return Re.appearanceStreamContent;if(Re.V||Re.DV){var e=[],t=Re._V||Re.DV,Pe=tt(Re,t),Me=Re.scope.internal.getFont(Re.fontName,Re.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(Re.scope.__private__.encodeColorString(Re.color)),e.push("/"+Me+" "+U(Pe.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(Pe.text),e.push("ET"),e.push("Q"),e.push("EMC");var Ie=V(Re);return Ie.scope=Re.scope,Ie.stream=e.join(`
`),Ie}},tt=function(Re,e){var t=Re.fontSize===0?Re.maxFontSize:Re.fontSize,Pe={text:"",fontSize:""},Me=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");Me=Re.multiline?Me.map(function(Qe){return Qe.split(`
`)}):Me.map(function(Qe){return[Qe]});var Ie=t,Be=At.internal.getHeight(Re)||0;Be=Be<0?-Be:Be;var ke=At.internal.getWidth(Re)||0;ke=ke<0?-ke:ke;var _e=function(Qe,nr,ir){if(Qe+1<Me.length){var cr=nr+" "+Me[Qe+1][0];return et(cr,Re,ir).width<=ke-4}return!1};Ie++;e:for(;Ie>0;){e="",Ie--;var Ce,Te,Se=et("3",Re,Ie).height,xe=Re.multiline?Be-Ie:(Be-Se)/2,r=xe+=2,Oe=0,Ee=0,Ae=0;if(Ie<=0){e=`(...) Tj
`,e+="% Width of Text: "+et(e,Re,Ie=12).width+", FieldWidth:"+ke+`
`;break}for(var Fe="",De=0,ze=0;ze<Me.length;ze++)if(Me.hasOwnProperty(ze)){var je=!1;if(Me[ze].length!==1&&Ae!==Me[ze].length-1){if((Se+2)*(De+2)+2>Be)continue e;Fe+=Me[ze][Ae],je=!0,Ee=ze,ze--}else{Fe=(Fe+=Me[ze][Ae]+" ").substr(Fe.length-1)==" "?Fe.substr(0,Fe.length-1):Fe;var We=parseInt(ze),Ge=_e(We,Fe,Ie),Ye=ze>=Me.length-1;if(Ge&&!Ye){Fe+=" ",Ae=0;continue}if(Ge||Ye){if(Ye)Ee=We;else if(Re.multiline&&(Se+2)*(De+2)+2>Be)continue e}else{if(!Re.multiline||(Se+2)*(De+2)+2>Be)continue e;Ee=We}}for(var Xe="",Ke=Oe;Ke<=Ee;Ke++){var er=Me[Ke];if(Re.multiline){if(Ke===Ee){Xe+=er[Ae]+" ",Ae=(Ae+1)%er.length;continue}if(Ke===Oe){Xe+=er[er.length-1]+" ";continue}}Xe+=er[0]+" "}switch(Xe=Xe.substr(Xe.length-1)==" "?Xe.substr(0,Xe.length-1):Xe,Te=et(Xe,Re,Ie).width,Re.textAlign){case"right":Ce=ke-Te-2;break;case"center":Ce=(ke-Te)/2;break;case"left":default:Ce=2}e+=U(Ce)+" "+U(r)+` Td
`,e+="("+R(Xe)+`) Tj
`,e+=-U(Ce)+` 0 Td
`,r=-(Ie+2),Te=0,Oe=je?Ee:Ee+1,De++,Fe=""}break}return Pe.text=e,Pe.fontSize=Ie,Pe},et=function(Re,e,t){var Pe=e.scope.internal.getFont(e.fontName,e.fontStyle),Me=e.scope.getStringUnitWidth(Re,{font:Pe,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:Pe,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:Me}},rt={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},nt=function(Re,e){var t={type:"reference",object:Re};e.internal.getPageInfo(Re.page).pageContext.annotations.find(function(Pe){return Pe.type===t.type&&Pe.object===t.object})===void 0&&e.internal.getPageInfo(Re.page).pageContext.annotations.push(t)},it=function(Re,e){for(var t in Re)if(Re.hasOwnProperty(t)){var Pe=t,Me=Re[t];e.internal.newObjectDeferredBegin(Me.objId,!0),_typeof(Me)==="object"&&typeof Me.putStream=="function"&&Me.putStream(),delete Re[Pe]}},at=function(Re,e){if(e.scope=Re,Re.internal!==void 0&&(Re.internal.acroformPlugin===void 0||Re.internal.acroformPlugin.isInitialized===!1)){if(lt.FieldNum=0,Re.internal.acroformPlugin=JSON.parse(JSON.stringify(rt)),Re.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");D=Re.internal.scaleFactor,Re.internal.acroformPlugin.acroFormDictionaryRoot=new ht,Re.internal.acroformPlugin.acroFormDictionaryRoot.scope=Re,Re.internal.acroformPlugin.acroFormDictionaryRoot._eventID=Re.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(Re)}),Re.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var Pe=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var Me in Pe)if(Pe.hasOwnProperty(Me)){var Ie=Pe[Me];Ie.objId=void 0,Ie.hasAnnotation&&nt(Ie,t)}})(Re)}),Re.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(Re)}),Re.internal.events.subscribe("postPutPages",function(t){(function(Pe,Me){var Ie=!Pe;for(var Be in Pe||(Me.internal.newObjectDeferredBegin(Me.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),Me.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),Pe=Pe||Me.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(Pe.hasOwnProperty(Be)){var ke=Pe[Be],_e=[],Ce=ke.Rect;if(ke.Rect&&(ke.Rect=$(ke.Rect,Me)),Me.internal.newObjectDeferredBegin(ke.objId,!0),ke.DA=At.createDefaultAppearanceStream(ke),_typeof(ke)==="object"&&typeof ke.getKeyValueListForStream=="function"&&(_e=ke.getKeyValueListForStream()),ke.Rect=Ce,ke.hasAppearanceStream&&!ke.appearanceStreamContent){var Te=Q(ke);_e.push({key:"AP",value:"<</N "+Te+">>"}),Me.internal.acroformPlugin.xForms.push(Te)}if(ke.appearanceStreamContent){var Se="";for(var xe in ke.appearanceStreamContent)if(ke.appearanceStreamContent.hasOwnProperty(xe)){var r=ke.appearanceStreamContent[xe];if(Se+="/"+xe+" ",Se+="<<",Object.keys(r).length>=1||Array.isArray(r)){for(var Be in r)if(r.hasOwnProperty(Be)){var Oe=r[Be];typeof Oe=="function"&&(Oe=Oe.call(Me,ke)),Se+="/"+Be+" "+Oe+" ",Me.internal.acroformPlugin.xForms.indexOf(Oe)>=0||Me.internal.acroformPlugin.xForms.push(Oe)}}else typeof(Oe=r)=="function"&&(Oe=Oe.call(Me,ke)),Se+="/"+Be+" "+Oe,Me.internal.acroformPlugin.xForms.indexOf(Oe)>=0||Me.internal.acroformPlugin.xForms.push(Oe);Se+=">>"}_e.push({key:"AP",value:`<<
`+Se+">>"})}Me.internal.putStream({additionalKeyValues:_e,objectId:ke.objId}),Me.internal.out("endobj")}Ie&&it(Me.internal.acroformPlugin.xForms,Me)})(t,Re)}),Re.internal.acroformPlugin.isInitialized=!0}},ot=q.__acroform__.arrayToPdfArray=function(Re,e,t){var Pe=function(Be){return Be};if(Array.isArray(Re)){for(var Me="[",Ie=0;Ie<Re.length;Ie++)switch(Ie!==0&&(Me+=" "),_typeof(Re[Ie])){case"boolean":case"number":case"object":Me+=Re[Ie].toString();break;case"string":Re[Ie].substr(0,1)!=="/"?(e!==void 0&&t&&(Pe=t.internal.getEncryptor(e)),Me+="("+R(Pe(Re[Ie].toString()))+")"):Me+=Re[Ie].toString()}return Me+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},st=function(Re,e,t){var Pe=function(Me){return Me};return e!==void 0&&t&&(Pe=t.internal.getEncryptor(e)),(Re=Re||"").toString(),Re="("+R(Pe(Re))+")"},ct=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(Re){this._objId=Re}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ct.prototype.toString=function(){return this.objId+" 0 R"},ct.prototype.putStream=function(){var Re=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:Re,objectId:this.objId}),this.scope.internal.out("endobj")},ct.prototype.getKeyValueListForStream=function(){var Re=[],e=Object.getOwnPropertyNames(this).filter(function(Ie){return Ie!="content"&&Ie!="appearanceStreamContent"&&Ie!="scope"&&Ie!="objId"&&Ie.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var Pe=e[t],Me=this[Pe];Me&&(Array.isArray(Me)?Re.push({key:Pe,value:ot(Me,this.objId,this.scope)}):Me instanceof ct?(Me.scope=this.scope,Re.push({key:Pe,value:Me.objId+" 0 R"})):typeof Me!="function"&&Re.push({key:Pe,value:Me}))}return Re};var ut=function(){ct.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var Re,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){Re=t.trim()},get:function(){return Re||null}})};H(ut,ct);var ht=function(){ct.call(this);var Re,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(Re){var t=function(Pe){return Pe};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+R(t(Re))+")"}},set:function(t){Re=t}})};H(ht,ct);var lt=function Re(){ct.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(Fe){if(isNaN(Fe))throw new Error('Invalid value "'+Fe+'" for attribute F supplied.');e=Fe}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return Boolean(X(e,3))},set:function(Fe){Boolean(Fe)===!0?this.F=K(e,3):this.F=Z(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(Fe){if(isNaN(Fe))throw new Error('Invalid value "'+Fe+'" for attribute Ff supplied.');t=Fe}});var Pe=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(Pe.length!==0)return Pe},set:function(Fe){Pe=Fe!==void 0?Fe:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!Pe||isNaN(Pe[0])?0:Pe[0]},set:function(Fe){Pe[0]=Fe}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!Pe||isNaN(Pe[1])?0:Pe[1]},set:function(Fe){Pe[1]=Fe}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!Pe||isNaN(Pe[2])?0:Pe[2]},set:function(Fe){Pe[2]=Fe}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!Pe||isNaN(Pe[3])?0:Pe[3]},set:function(Fe){Pe[3]=Fe}});var Me="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return Me},set:function(Fe){switch(Fe){case"/Btn":case"/Tx":case"/Ch":case"/Sig":Me=Fe;break;default:throw new Error('Invalid value "'+Fe+'" for attribute FT supplied.')}}});var Ie=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!Ie||Ie.length<1){if(this instanceof yt)return;Ie="FieldObject"+Re.FieldNum++}var Fe=function(De){return De};return this.scope&&(Fe=this.scope.internal.getEncryptor(this.objId)),"("+R(Fe(Ie))+")"},set:function(Fe){Ie=Fe.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return Ie},set:function(Fe){Ie=Fe}});var Be="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return Be},set:function(Fe){Be=Fe}});var ke="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return ke},set:function(Fe){ke=Fe}});var _e=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return _e},set:function(Fe){_e=Fe}});var Ce=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return Ce===void 0?50/D:Ce},set:function(Fe){Ce=Fe}});var Te="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return Te},set:function(Fe){Te=Fe}});var Se="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!Se||this instanceof yt||this instanceof Nt))return st(Se,this.objId,this.scope)},set:function(Fe){Fe=Fe.toString(),Se=Fe}});var xe=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(xe)return this instanceof mt?xe:st(xe,this.objId,this.scope)},set:function(Fe){Fe=Fe.toString(),xe=this instanceof mt?Fe:Fe.substr(0,1)==="("?T(Fe.substr(1,Fe.length-2)):T(Fe)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof mt?T(xe.substr(1,xe.length-1)):xe},set:function(Fe){Fe=Fe.toString(),xe=this instanceof mt?"/"+Fe:Fe}});var r=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(r)return r},set:function(Fe){this.V=Fe}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(r)return this instanceof mt?r:st(r,this.objId,this.scope)},set:function(Fe){Fe=Fe.toString(),r=this instanceof mt?Fe:Fe.substr(0,1)==="("?T(Fe.substr(1,Fe.length-2)):T(Fe)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof mt?T(r.substr(1,r.length-1)):r},set:function(Fe){Fe=Fe.toString(),r=this instanceof mt?"/"+Fe:Fe}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var Oe,Ee=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return Ee},set:function(Fe){Fe=Boolean(Fe),Ee=Fe}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(Oe)return Oe},set:function(Fe){Oe=Fe}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return Boolean(X(this.Ff,1))},set:function(Fe){Boolean(Fe)===!0?this.Ff=K(this.Ff,1):this.Ff=Z(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return Boolean(X(this.Ff,2))},set:function(Fe){Boolean(Fe)===!0?this.Ff=K(this.Ff,2):this.Ff=Z(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return Boolean(X(this.Ff,3))},set:function(Fe){Boolean(Fe)===!0?this.Ff=K(this.Ff,3):this.Ff=Z(this.Ff,3)}});var Ae=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(Ae!==null)return Ae},set:function(Fe){if([0,1,2].indexOf(Fe)===-1)throw new Error('Invalid value "'+Fe+'" for attribute Q supplied.');Ae=Fe}}),Object.defineProperty(this,"textAlign",{get:function(){var Fe;switch(Ae){case 0:default:Fe="left";break;case 1:Fe="center";break;case 2:Fe="right"}return Fe},configurable:!0,enumerable:!0,set:function(Fe){switch(Fe){case"right":case 2:Ae=2;break;case"center":case 1:Ae=1;break;case"left":case 0:default:Ae=0}}})};H(lt,ct);var ft=function(){lt.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var Re=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return Re},set:function(t){Re=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return Re},set:function(t){Re=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return ot(e,this.objId,this.scope)},set:function(t){var Pe,Me;Me=[],typeof(Pe=t)=="string"&&(Me=function(Ie,Be,ke){ke||(ke=1);for(var _e,Ce=[];_e=Be.exec(Ie);)Ce.push(_e[ke]);return Ce}(Pe,/\((.*?)\)/g)),e=Me}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,Pe){for(Pe=Pe||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),Pe!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return Boolean(X(this.Ff,18))},set:function(t){Boolean(t)===!0?this.Ff=K(this.Ff,18):this.Ff=Z(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return Boolean(X(this.Ff,19))},set:function(t){this.combo===!0&&(Boolean(t)===!0?this.Ff=K(this.Ff,19):this.Ff=Z(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return Boolean(X(this.Ff,20))},set:function(t){Boolean(t)===!0?(this.Ff=K(this.Ff,20),e.sort()):this.Ff=Z(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(X(this.Ff,22))},set:function(t){Boolean(t)===!0?this.Ff=K(this.Ff,22):this.Ff=Z(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(X(this.Ff,23))},set:function(t){Boolean(t)===!0?this.Ff=K(this.Ff,23):this.Ff=Z(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return Boolean(X(this.Ff,27))},set:function(t){Boolean(t)===!0?this.Ff=K(this.Ff,27):this.Ff=Z(this.Ff,27)}}),this.hasAppearanceStream=!1};H(ft,lt);var dt=function(){ft.call(this),this.fontName="helvetica",this.combo=!1};H(dt,ft);var pt=function(){dt.call(this),this.combo=!0};H(pt,dt);var gt=function(){pt.call(this),this.edit=!0};H(gt,pt);var mt=function(){lt.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return Boolean(X(this.Ff,15))},set:function(t){Boolean(t)===!0?this.Ff=K(this.Ff,15):this.Ff=Z(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return Boolean(X(this.Ff,16))},set:function(t){Boolean(t)===!0?this.Ff=K(this.Ff,16):this.Ff=Z(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return Boolean(X(this.Ff,17))},set:function(t){Boolean(t)===!0?this.Ff=K(this.Ff,17):this.Ff=Z(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return Boolean(X(this.Ff,26))},set:function(t){Boolean(t)===!0?this.Ff=K(this.Ff,26):this.Ff=Z(this.Ff,26)}});var Re,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(Ie){return Ie};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var Pe,Me=[];for(Pe in Me.push("<<"),e)Me.push("/"+Pe+" ("+R(t(e[Pe]))+")");return Me.push(">>"),Me.join(`
`)}},set:function(t){_typeof(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return Re},set:function(t){Re=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return Re.substr(1,Re.length-1)},set:function(t){Re="/"+t}})};H(mt,lt);var vt=function(){mt.call(this),this.pushButton=!0};H(vt,mt);var bt=function(){mt.call(this),this.radio=!0,this.pushButton=!1;var Re=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return Re},set:function(e){Re=e!==void 0?e:[]}})};H(bt,mt);var yt=function(){var Re,e;lt.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return Re},set:function(Me){Re=Me}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(Me){e=Me}});var t,Pe={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var Me=function(ke){return ke};this.scope&&(Me=this.scope.internal.getEncryptor(this.objId));var Ie,Be=[];for(Ie in Be.push("<<"),Pe)Be.push("/"+Ie+" ("+R(Me(Pe[Ie]))+")");return Be.push(">>"),Be.join(`
`)},set:function(Me){_typeof(Me)==="object"&&(Pe=Me)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return Pe.CA||""},set:function(Me){typeof Me=="string"&&(Pe.CA=Me)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(Me){t=Me}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(Me){t="/"+Me}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=At.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};H(yt,lt),bt.prototype.setAppearance=function(Re){if(!("createAppearanceStream"in Re)||!("getCA"in Re))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=Re.createAppearanceStream(t.optionName),t.caption=Re.getCA()}},bt.prototype.createOption=function(Re){var e=new yt;return e.Parent=this,e.optionName=Re,this.Kids.push(e),xt.call(this.scope,e),e};var wt=function(){mt.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=At.CheckBox.createAppearanceStream()};H(wt,mt);var Nt=function(){lt.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return Boolean(X(this.Ff,13))},set:function(e){Boolean(e)===!0?this.Ff=K(this.Ff,13):this.Ff=Z(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(X(this.Ff,21))},set:function(e){Boolean(e)===!0?this.Ff=K(this.Ff,21):this.Ff=Z(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(X(this.Ff,23))},set:function(e){Boolean(e)===!0?this.Ff=K(this.Ff,23):this.Ff=Z(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return Boolean(X(this.Ff,24))},set:function(e){Boolean(e)===!0?this.Ff=K(this.Ff,24):this.Ff=Z(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return Boolean(X(this.Ff,25))},set:function(e){Boolean(e)===!0?this.Ff=K(this.Ff,25):this.Ff=Z(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return Boolean(X(this.Ff,26))},set:function(e){Boolean(e)===!0?this.Ff=K(this.Ff,26):this.Ff=Z(this.Ff,26)}});var Re=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return Re},set:function(e){Re=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return Re},set:function(e){Number.isInteger(e)&&(Re=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};H(Nt,lt);var Lt=function(){Nt.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return Boolean(X(this.Ff,14))},set:function(Re){Boolean(Re)===!0?this.Ff=K(this.Ff,14):this.Ff=Z(this.Ff,14)}}),this.password=!0};H(Lt,Nt);var At={CheckBox:{createAppearanceStream:function(){return{N:{On:At.CheckBox.YesNormal},D:{On:At.CheckBox.YesPushDown,Off:At.CheckBox.OffPushDown}}},YesPushDown:function(Re){var e=V(Re);e.scope=Re.scope;var t=[],Pe=Re.scope.internal.getFont(Re.fontName,Re.fontStyle).id,Me=Re.scope.__private__.encodeColorString(Re.color),Ie=tt(Re,Re.caption);return t.push("0.749023 g"),t.push("0 0 "+U(At.internal.getWidth(Re))+" "+U(At.internal.getHeight(Re))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+Pe+" "+U(Ie.fontSize)+" Tf "+Me),t.push("BT"),t.push(Ie.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(Re){var e=V(Re);e.scope=Re.scope;var t=Re.scope.internal.getFont(Re.fontName,Re.fontStyle).id,Pe=Re.scope.__private__.encodeColorString(Re.color),Me=[],Ie=At.internal.getHeight(Re),Be=At.internal.getWidth(Re),ke=tt(Re,Re.caption);return Me.push("1 g"),Me.push("0 0 "+U(Be)+" "+U(Ie)+" re"),Me.push("f"),Me.push("q"),Me.push("0 0 1 rg"),Me.push("0 0 "+U(Be-1)+" "+U(Ie-1)+" re"),Me.push("W"),Me.push("n"),Me.push("0 g"),Me.push("BT"),Me.push("/"+t+" "+U(ke.fontSize)+" Tf "+Pe),Me.push(ke.text),Me.push("ET"),Me.push("Q"),e.stream=Me.join(`
`),e},OffPushDown:function(Re){var e=V(Re);e.scope=Re.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+U(At.internal.getWidth(Re))+" "+U(At.internal.getHeight(Re))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(Re){var e={D:{Off:At.RadioButton.Circle.OffPushDown},N:{}};return e.N[Re]=At.RadioButton.Circle.YesNormal,e.D[Re]=At.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(Re){var e=V(Re);e.scope=Re.scope;var t=[],Pe=At.internal.getWidth(Re)<=At.internal.getHeight(Re)?At.internal.getWidth(Re)/4:At.internal.getHeight(Re)/4;Pe=Number((.9*Pe).toFixed(5));var Me=At.internal.Bezier_C,Ie=Number((Pe*Me).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+z(At.internal.getWidth(Re)/2)+" "+z(At.internal.getHeight(Re)/2)+" cm"),t.push(Pe+" 0 m"),t.push(Pe+" "+Ie+" "+Ie+" "+Pe+" 0 "+Pe+" c"),t.push("-"+Ie+" "+Pe+" -"+Pe+" "+Ie+" -"+Pe+" 0 c"),t.push("-"+Pe+" -"+Ie+" -"+Ie+" -"+Pe+" 0 -"+Pe+" c"),t.push(Ie+" -"+Pe+" "+Pe+" -"+Ie+" "+Pe+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(Re){var e=V(Re);e.scope=Re.scope;var t=[],Pe=At.internal.getWidth(Re)<=At.internal.getHeight(Re)?At.internal.getWidth(Re)/4:At.internal.getHeight(Re)/4;Pe=Number((.9*Pe).toFixed(5));var Me=Number((2*Pe).toFixed(5)),Ie=Number((Me*At.internal.Bezier_C).toFixed(5)),Be=Number((Pe*At.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+z(At.internal.getWidth(Re)/2)+" "+z(At.internal.getHeight(Re)/2)+" cm"),t.push(Me+" 0 m"),t.push(Me+" "+Ie+" "+Ie+" "+Me+" 0 "+Me+" c"),t.push("-"+Ie+" "+Me+" -"+Me+" "+Ie+" -"+Me+" 0 c"),t.push("-"+Me+" -"+Ie+" -"+Ie+" -"+Me+" 0 -"+Me+" c"),t.push(Ie+" -"+Me+" "+Me+" -"+Ie+" "+Me+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+z(At.internal.getWidth(Re)/2)+" "+z(At.internal.getHeight(Re)/2)+" cm"),t.push(Pe+" 0 m"),t.push(Pe+" "+Be+" "+Be+" "+Pe+" 0 "+Pe+" c"),t.push("-"+Be+" "+Pe+" -"+Pe+" "+Be+" -"+Pe+" 0 c"),t.push("-"+Pe+" -"+Be+" -"+Be+" -"+Pe+" 0 -"+Pe+" c"),t.push(Be+" -"+Pe+" "+Pe+" -"+Be+" "+Pe+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(Re){var e=V(Re);e.scope=Re.scope;var t=[],Pe=At.internal.getWidth(Re)<=At.internal.getHeight(Re)?At.internal.getWidth(Re)/4:At.internal.getHeight(Re)/4;Pe=Number((.9*Pe).toFixed(5));var Me=Number((2*Pe).toFixed(5)),Ie=Number((Me*At.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+z(At.internal.getWidth(Re)/2)+" "+z(At.internal.getHeight(Re)/2)+" cm"),t.push(Me+" 0 m"),t.push(Me+" "+Ie+" "+Ie+" "+Me+" 0 "+Me+" c"),t.push("-"+Ie+" "+Me+" -"+Me+" "+Ie+" -"+Me+" 0 c"),t.push("-"+Me+" -"+Ie+" -"+Ie+" -"+Me+" 0 -"+Me+" c"),t.push(Ie+" -"+Me+" "+Me+" -"+Ie+" "+Me+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(Re){var e={D:{Off:At.RadioButton.Cross.OffPushDown},N:{}};return e.N[Re]=At.RadioButton.Cross.YesNormal,e.D[Re]=At.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(Re){var e=V(Re);e.scope=Re.scope;var t=[],Pe=At.internal.calculateCross(Re);return t.push("q"),t.push("1 1 "+U(At.internal.getWidth(Re)-2)+" "+U(At.internal.getHeight(Re)-2)+" re"),t.push("W"),t.push("n"),t.push(U(Pe.x1.x)+" "+U(Pe.x1.y)+" m"),t.push(U(Pe.x2.x)+" "+U(Pe.x2.y)+" l"),t.push(U(Pe.x4.x)+" "+U(Pe.x4.y)+" m"),t.push(U(Pe.x3.x)+" "+U(Pe.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(Re){var e=V(Re);e.scope=Re.scope;var t=At.internal.calculateCross(Re),Pe=[];return Pe.push("0.749023 g"),Pe.push("0 0 "+U(At.internal.getWidth(Re))+" "+U(At.internal.getHeight(Re))+" re"),Pe.push("f"),Pe.push("q"),Pe.push("1 1 "+U(At.internal.getWidth(Re)-2)+" "+U(At.internal.getHeight(Re)-2)+" re"),Pe.push("W"),Pe.push("n"),Pe.push(U(t.x1.x)+" "+U(t.x1.y)+" m"),Pe.push(U(t.x2.x)+" "+U(t.x2.y)+" l"),Pe.push(U(t.x4.x)+" "+U(t.x4.y)+" m"),Pe.push(U(t.x3.x)+" "+U(t.x3.y)+" l"),Pe.push("s"),Pe.push("Q"),e.stream=Pe.join(`
`),e},OffPushDown:function(Re){var e=V(Re);e.scope=Re.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+U(At.internal.getWidth(Re))+" "+U(At.internal.getHeight(Re))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(Re){var e=Re.scope.internal.getFont(Re.fontName,Re.fontStyle).id,t=Re.scope.__private__.encodeColorString(Re.color);return"/"+e+" "+Re.fontSize+" Tf "+t}};At.internal={Bezier_C:.551915024494,calculateCross:function(Re){var e=At.internal.getWidth(Re),t=At.internal.getHeight(Re),Pe=Math.min(e,t);return{x1:{x:(e-Pe)/2,y:(t-Pe)/2+Pe},x2:{x:(e-Pe)/2+Pe,y:(t-Pe)/2},x3:{x:(e-Pe)/2,y:(t-Pe)/2},x4:{x:(e-Pe)/2+Pe,y:(t-Pe)/2+Pe}}}},At.internal.getWidth=function(Re){var e=0;return _typeof(Re)==="object"&&(e=W(Re.Rect[2])),e},At.internal.getHeight=function(Re){var e=0;return _typeof(Re)==="object"&&(e=W(Re.Rect[3])),e};var xt=q.addField=function(Re){if(at(this,Re),!(Re instanceof lt))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=Re).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),Re.page=Re.scope.internal.getCurrentPageInfo().pageNumber,this};q.AcroFormChoiceField=ft,q.AcroFormListBox=dt,q.AcroFormComboBox=pt,q.AcroFormEditBox=gt,q.AcroFormButton=mt,q.AcroFormPushButton=vt,q.AcroFormRadioButton=bt,q.AcroFormCheckBox=wt,q.AcroFormTextField=Nt,q.AcroFormPasswordField=Lt,q.AcroFormAppearance=At,q.AcroForm={ChoiceField:ft,ListBox:dt,ComboBox:pt,EditBox:gt,Button:mt,PushButton:vt,RadioButton:bt,CheckBox:wt,TextField:Nt,PasswordField:Lt,Appearance:At},E.AcroForm={ChoiceField:ft,ListBox:dt,ComboBox:pt,EditBox:gt,Button:mt,PushButton:vt,RadioButton:bt,CheckBox:wt,TextField:Nt,PasswordField:Lt,Appearance:At};function _t(Re){return Re.reduce(function(e,t,Pe){return e[t]=Pe,e},{})}(function(Re){Re.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},Pe=Re.__addimage__.getImageFileTypeByImageData=function(Qe,nr){var ir,cr,br,wr,xr,Sr=e;if((nr=nr||e)==="RGBA"||Qe.data!==void 0&&Qe.data instanceof Uint8ClampedArray&&"height"in Qe&&"width"in Qe)return"RGBA";if(Ge(Qe))for(xr in t)for(br=t[xr],ir=0;ir<br.length;ir+=1){for(wr=!0,cr=0;cr<br[ir].length;cr+=1)if(br[ir][cr]!==void 0&&br[ir][cr]!==Qe[cr]){wr=!1;break}if(wr===!0){Sr=xr;break}}else for(xr in t)for(br=t[xr],ir=0;ir<br.length;ir+=1){for(wr=!0,cr=0;cr<br[ir].length;cr+=1)if(br[ir][cr]!==void 0&&br[ir][cr]!==Qe.charCodeAt(cr)){wr=!1;break}if(wr===!0){Sr=xr;break}}return Sr===e&&nr!==e&&(Sr=nr),Sr},Me=function Qe(nr){for(var ir=this.internal.write,cr=this.internal.putStream,br=(0,this.internal.getFilters)();br.indexOf("FlateEncode")!==-1;)br.splice(br.indexOf("FlateEncode"),1);nr.objectId=this.internal.newObject();var wr=[];if(wr.push({key:"Type",value:"/XObject"}),wr.push({key:"Subtype",value:"/Image"}),wr.push({key:"Width",value:nr.width}),wr.push({key:"Height",value:nr.height}),nr.colorSpace===Ae.INDEXED?wr.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(nr.palette.length/3-1)+" "+("sMask"in nr&&nr.sMask!==void 0?nr.objectId+2:nr.objectId+1)+" 0 R]"}):(wr.push({key:"ColorSpace",value:"/"+nr.colorSpace}),nr.colorSpace===Ae.DEVICE_CMYK&&wr.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),wr.push({key:"BitsPerComponent",value:nr.bitsPerComponent}),"decodeParameters"in nr&&nr.decodeParameters!==void 0&&wr.push({key:"DecodeParms",value:"<<"+nr.decodeParameters+">>"}),"transparency"in nr&&Array.isArray(nr.transparency)){for(var xr="",Sr=0,lr=nr.transparency.length;Sr<lr;Sr++)xr+=nr.transparency[Sr]+" "+nr.transparency[Sr]+" ";wr.push({key:"Mask",value:"["+xr+"]"})}nr.sMask!==void 0&&wr.push({key:"SMask",value:nr.objectId+1+" 0 R"});var fr=nr.filter!==void 0?["/"+nr.filter]:void 0;if(cr({data:nr.data,additionalKeyValues:wr,alreadyAppliedFilters:fr,objectId:nr.objectId}),ir("endobj"),"sMask"in nr&&nr.sMask!==void 0){var $e="/Predictor "+nr.predictor+" /Colors 1 /BitsPerComponent "+nr.bitsPerComponent+" /Columns "+nr.width,Ve={width:nr.width,height:nr.height,colorSpace:"DeviceGray",bitsPerComponent:nr.bitsPerComponent,decodeParameters:$e,data:nr.sMask};"filter"in nr&&(Ve.filter=nr.filter),Qe.call(this,Ve)}if(nr.colorSpace===Ae.INDEXED){var Je=this.internal.newObject();cr({data:Xe(new Uint8Array(nr.palette)),objectId:Je}),ir("endobj")}},Ie=function(){var Qe=this.internal.collections.addImage_images;for(var nr in Qe)Me.call(this,Qe[nr])},Be=function(){var Qe,nr=this.internal.collections.addImage_images,ir=this.internal.write;for(var cr in nr)ir("/I"+(Qe=nr[cr]).index,Qe.objectId,"0","R")},ke=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",Ie),this.internal.events.subscribe("putXobjectDict",Be))},_e=function(){var Qe=this.internal.collections.addImage_images;return ke.call(this),Qe},Ce=function(){return Object.keys(this.internal.collections.addImage_images).length},Te=function(Qe){return typeof Re["process"+Qe.toUpperCase()]=="function"},Se=function(Qe){return _typeof(Qe)==="object"&&Qe.nodeType===1},xe=function(Qe,nr){if(Qe.nodeName==="IMG"&&Qe.hasAttribute("src")){var ir=""+Qe.getAttribute("src");if(ir.indexOf("data:image/")===0)return u(unescape(ir).split("base64,").pop());var cr=Re.loadFile(ir,!0);if(cr!==void 0)return cr}if(Qe.nodeName==="CANVAS"){if(Qe.width===0||Qe.height===0)throw new Error("Given canvas must have data. Canvas width: "+Qe.width+", height: "+Qe.height);var br;switch(nr){case"PNG":br="image/png";break;case"WEBP":br="image/webp";break;case"JPEG":case"JPG":default:br="image/jpeg"}return u(Qe.toDataURL(br,1).split("base64,").pop())}},r=function(Qe){var nr=this.internal.collections.addImage_images;if(nr){for(var ir in nr)if(Qe===nr[ir].alias)return nr[ir]}},Oe=function(Qe,nr,ir){return Qe||nr||(Qe=-96,nr=-96),Qe<0&&(Qe=-1*ir.width*72/Qe/this.internal.scaleFactor),nr<0&&(nr=-1*ir.height*72/nr/this.internal.scaleFactor),Qe===0&&(Qe=nr*ir.width/ir.height),nr===0&&(nr=Qe*ir.height/ir.width),[Qe,nr]},Ee=function(Qe,nr,ir,cr,br,wr){var xr=Oe.call(this,ir,cr,br),Sr=this.internal.getCoordinateString,lr=this.internal.getVerticalCoordinateString,fr=_e.call(this);if(ir=xr[0],cr=xr[1],fr[br.index]=br,wr){wr*=Math.PI/180;var $e=Math.cos(wr),Ve=Math.sin(wr),Je=function(St){return St.toFixed(4)},Ze=[Je($e),Je(Ve),Je(-1*Ve),Je($e),0,0,"cm"]}this.internal.write("q"),wr?(this.internal.write([1,"0","0",1,Sr(Qe),lr(nr+cr),"cm"].join(" ")),this.internal.write(Ze.join(" ")),this.internal.write([Sr(ir),"0","0",Sr(cr),"0","0","cm"].join(" "))):this.internal.write([Sr(ir),"0","0",Sr(cr),Sr(Qe),lr(nr+cr),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+br.index+" Do"),this.internal.write("Q")},Ae=Re.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};Re.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var Fe=Re.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},De=Re.__addimage__.sHashCode=function(Qe){var nr,ir,cr=0;if(typeof Qe=="string")for(ir=Qe.length,nr=0;nr<ir;nr++)cr=(cr<<5)-cr+Qe.charCodeAt(nr),cr|=0;else if(Ge(Qe))for(ir=Qe.byteLength/2,nr=0;nr<ir;nr++)cr=(cr<<5)-cr+Qe[nr],cr|=0;return cr},ze=Re.__addimage__.validateStringAsBase64=function(Qe){(Qe=Qe||"").toString().trim();var nr=!0;return Qe.length===0&&(nr=!1),Qe.length%4!=0&&(nr=!1),/^[A-Za-z0-9+/]+$/.test(Qe.substr(0,Qe.length-2))===!1&&(nr=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(Qe.substr(-2))===!1&&(nr=!1),nr},je=Re.__addimage__.extractImageFromDataUrl=function(Qe){var nr=(Qe=Qe||"").split("base64,"),ir=null;if(nr.length===2){var cr=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(nr[0]);Array.isArray(cr)&&(ir={mimeType:cr[1],charset:cr[2],data:nr[1]})}return ir},We=Re.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer!="undefined"&&typeof Uint8Array!="undefined"};Re.__addimage__.isArrayBuffer=function(Qe){return We()&&Qe instanceof ArrayBuffer};var Ge=Re.__addimage__.isArrayBufferView=function(Qe){return We()&&typeof Uint32Array!="undefined"&&(Qe instanceof Int8Array||Qe instanceof Uint8Array||typeof Uint8ClampedArray!="undefined"&&Qe instanceof Uint8ClampedArray||Qe instanceof Int16Array||Qe instanceof Uint16Array||Qe instanceof Int32Array||Qe instanceof Uint32Array||Qe instanceof Float32Array||Qe instanceof Float64Array)},Ye=Re.__addimage__.binaryStringToUint8Array=function(Qe){for(var nr=Qe.length,ir=new Uint8Array(nr),cr=0;cr<nr;cr++)ir[cr]=Qe.charCodeAt(cr);return ir},Xe=Re.__addimage__.arrayBufferToBinaryString=function(Qe){for(var nr="",ir=Ge(Qe)?Qe:new Uint8Array(Qe),cr=0;cr<ir.length;cr+=8192)nr+=String.fromCharCode.apply(null,ir.subarray(cr,cr+8192));return nr};Re.addImage=function(){var Qe,nr,ir,cr,br,wr,xr,Sr,lr;if(typeof arguments[1]=="number"?(nr=e,ir=arguments[1],cr=arguments[2],br=arguments[3],wr=arguments[4],xr=arguments[5],Sr=arguments[6],lr=arguments[7]):(nr=arguments[1],ir=arguments[2],cr=arguments[3],br=arguments[4],wr=arguments[5],xr=arguments[6],Sr=arguments[7],lr=arguments[8]),_typeof(Qe=arguments[0])==="object"&&!Se(Qe)&&"imageData"in Qe){var fr=Qe;Qe=fr.imageData,nr=fr.format||nr||e,ir=fr.x||ir||0,cr=fr.y||cr||0,br=fr.w||fr.width||br,wr=fr.h||fr.height||wr,xr=fr.alias||xr,Sr=fr.compression||Sr,lr=fr.rotation||fr.angle||lr}var $e=this.internal.getFilters();if(Sr===void 0&&$e.indexOf("FlateEncode")!==-1&&(Sr="SLOW"),isNaN(ir)||isNaN(cr))throw new Error("Invalid coordinates passed to jsPDF.addImage");ke.call(this);var Ve=Ke.call(this,Qe,nr,xr,Sr);return Ee.call(this,ir,cr,br,wr,Ve,lr),this};var Ke=function(Qe,nr,ir,cr){var br,wr,xr;if(typeof Qe=="string"&&Pe(Qe)===e){Qe=unescape(Qe);var Sr=er(Qe,!1);(Sr!==""||(Sr=Re.loadFile(Qe,!0))!==void 0)&&(Qe=Sr)}if(Se(Qe)&&(Qe=xe(Qe,nr)),nr=Pe(Qe,nr),!Te(nr))throw new Error("addImage does not support files of type '"+nr+"', please ensure that a plugin for '"+nr+"' support is added.");if(((xr=ir)==null||xr.length===0)&&(ir=function(lr){return typeof lr=="string"||Ge(lr)?De(lr):Ge(lr.data)?De(lr.data):null}(Qe)),(br=r.call(this,ir))||(We()&&(Qe instanceof Uint8Array||nr==="RGBA"||(wr=Qe,Qe=Ye(Qe))),br=this["process"+nr.toUpperCase()](Qe,Ce.call(this),ir,function(lr){return lr&&typeof lr=="string"&&(lr=lr.toUpperCase()),lr in Re.image_compression?lr:Fe.NONE}(cr),wr)),!br)throw new Error("An unknown error occurred whilst processing the image.");return br},er=Re.__addimage__.convertBase64ToBinaryString=function(Qe,nr){var ir;nr=typeof nr!="boolean"||nr;var cr,br="";if(typeof Qe=="string"){cr=(ir=je(Qe))!==null?ir.data:Qe;try{br=u(cr)}catch(wr){if(nr)throw ze(cr)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+wr.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return br};Re.getImageProperties=function(Qe){var nr,ir,cr="";if(Se(Qe)&&(Qe=xe(Qe)),typeof Qe=="string"&&Pe(Qe)===e&&((cr=er(Qe,!1))===""&&(cr=Re.loadFile(Qe)||""),Qe=cr),ir=Pe(Qe),!Te(ir))throw new Error("addImage does not support files of type '"+ir+"', please ensure that a plugin for '"+ir+"' support is added.");if(!We()||Qe instanceof Uint8Array||(Qe=Ye(Qe)),!(nr=this["process"+ir.toUpperCase()](Qe)))throw new Error("An unknown error occurred whilst processing the image");return nr.fileType=ir,nr}})(E.API),function(Re){var e=function(t){if(t!==void 0&&t!="")return!0};E.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),Re.events.push(["putPage",function(t){for(var Pe,Me,Ie,Be=this.internal.getCoordinateString,ke=this.internal.getVerticalCoordinateString,_e=this.internal.getPageInfoByObjId(t.objId),Ce=t.pageContext.annotations,Te=!1,Se=0;Se<Ce.length&&!Te;Se++)switch((Pe=Ce[Se]).type){case"link":(e(Pe.options.url)||e(Pe.options.pageNumber))&&(Te=!0);break;case"reference":case"text":case"freetext":Te=!0}if(Te!=0){this.internal.write("/Annots [");for(var xe=0;xe<Ce.length;xe++){Pe=Ce[xe];var r=this.internal.pdfEscape,Oe=this.internal.getEncryptor(t.objId);switch(Pe.type){case"reference":this.internal.write(" "+Pe.object.objId+" 0 R ");break;case"text":var Ee=this.internal.newAdditionalObject(),Ae=this.internal.newAdditionalObject(),Fe=this.internal.getEncryptor(Ee.objId),De=Pe.title||"Note";Ie="<</Type /Annot /Subtype /Text "+(Me="/Rect ["+Be(Pe.bounds.x)+" "+ke(Pe.bounds.y+Pe.bounds.h)+" "+Be(Pe.bounds.x+Pe.bounds.w)+" "+ke(Pe.bounds.y)+"] ")+"/Contents ("+r(Fe(Pe.contents))+")",Ie+=" /Popup "+Ae.objId+" 0 R",Ie+=" /P "+_e.objId+" 0 R",Ie+=" /T ("+r(Fe(De))+") >>",Ee.content=Ie;var ze=Ee.objId+" 0 R";Ie="<</Type /Annot /Subtype /Popup "+(Me="/Rect ["+Be(Pe.bounds.x+30)+" "+ke(Pe.bounds.y+Pe.bounds.h)+" "+Be(Pe.bounds.x+Pe.bounds.w+30)+" "+ke(Pe.bounds.y)+"] ")+" /Parent "+ze,Pe.open&&(Ie+=" /Open true"),Ie+=" >>",Ae.content=Ie,this.internal.write(Ee.objId,"0 R",Ae.objId,"0 R");break;case"freetext":Me="/Rect ["+Be(Pe.bounds.x)+" "+ke(Pe.bounds.y)+" "+Be(Pe.bounds.x+Pe.bounds.w)+" "+ke(Pe.bounds.y+Pe.bounds.h)+"] ";var je=Pe.color||"#000000";Ie="<</Type /Annot /Subtype /FreeText "+Me+"/Contents ("+r(Oe(Pe.contents))+")",Ie+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+je+")",Ie+=" /Border [0 0 0]",Ie+=" >>",this.internal.write(Ie);break;case"link":if(Pe.options.name){var We=this.annotations._nameMap[Pe.options.name];Pe.options.pageNumber=We.page,Pe.options.top=We.y}else Pe.options.top||(Pe.options.top=0);if(Me="/Rect ["+Pe.finalBounds.x+" "+Pe.finalBounds.y+" "+Pe.finalBounds.w+" "+Pe.finalBounds.h+"] ",Ie="",Pe.options.url)Ie="<</Type /Annot /Subtype /Link "+Me+"/Border [0 0 0] /A <</S /URI /URI ("+r(Oe(Pe.options.url))+") >>";else if(Pe.options.pageNumber)switch(Ie="<</Type /Annot /Subtype /Link "+Me+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(Pe.options.pageNumber).objId+" 0 R",Pe.options.magFactor=Pe.options.magFactor||"XYZ",Pe.options.magFactor){case"Fit":Ie+=" /Fit]";break;case"FitH":Ie+=" /FitH "+Pe.options.top+"]";break;case"FitV":Pe.options.left=Pe.options.left||0,Ie+=" /FitV "+Pe.options.left+"]";break;case"XYZ":default:var Ge=ke(Pe.options.top);Pe.options.left=Pe.options.left||0,Pe.options.zoom===void 0&&(Pe.options.zoom=0),Ie+=" /XYZ "+Pe.options.left+" "+Ge+" "+Pe.options.zoom+"]"}Ie!=""&&(Ie+=" >>",this.internal.write(Ie))}}this.internal.write("]")}}]),Re.createAnnotation=function(t){var Pe=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":Pe.pageContext.annotations.push(t)}},Re.link=function(t,Pe,Me,Ie,Be){var ke=this.internal.getCurrentPageInfo(),_e=this.internal.getCoordinateString,Ce=this.internal.getVerticalCoordinateString;ke.pageContext.annotations.push({finalBounds:{x:_e(t),y:Ce(Pe),w:_e(t+Me),h:Ce(Pe+Ie)},options:Be,type:"link"})},Re.textWithLink=function(t,Pe,Me,Ie){var Be,ke,_e=this.getTextWidth(t),Ce=this.internal.getLineHeight()/this.internal.scaleFactor;if(Ie.maxWidth!==void 0){ke=Ie.maxWidth;var Te=this.splitTextToSize(t,ke).length;Be=Math.ceil(Ce*Te)}else ke=_e,Be=Ce;return this.text(t,Pe,Me,Ie),Me+=.2*Ce,Ie.align==="center"&&(Pe-=_e/2),Ie.align==="right"&&(Pe-=_e),this.link(Pe,Me-Ce,ke,Be,Ie),_e},Re.getTextWidth=function(t){var Pe=this.internal.getFontSize();return this.getStringUnitWidth(t)*Pe/this.internal.scaleFactor}}(E.API),function(Re){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},Pe={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},Me=[1570,1571,1573,1575];Re.__arabicParser__={};var Ie=Re.__arabicParser__.isInArabicSubstitutionA=function(Ee){return e[Ee.charCodeAt(0)]!==void 0},Be=Re.__arabicParser__.isArabicLetter=function(Ee){return typeof Ee=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(Ee)},ke=Re.__arabicParser__.isArabicEndLetter=function(Ee){return Be(Ee)&&Ie(Ee)&&e[Ee.charCodeAt(0)].length<=2},_e=Re.__arabicParser__.isArabicAlfLetter=function(Ee){return Be(Ee)&&Me.indexOf(Ee.charCodeAt(0))>=0};Re.__arabicParser__.arabicLetterHasIsolatedForm=function(Ee){return Be(Ee)&&Ie(Ee)&&e[Ee.charCodeAt(0)].length>=1};var Ce=Re.__arabicParser__.arabicLetterHasFinalForm=function(Ee){return Be(Ee)&&Ie(Ee)&&e[Ee.charCodeAt(0)].length>=2};Re.__arabicParser__.arabicLetterHasInitialForm=function(Ee){return Be(Ee)&&Ie(Ee)&&e[Ee.charCodeAt(0)].length>=3};var Te=Re.__arabicParser__.arabicLetterHasMedialForm=function(Ee){return Be(Ee)&&Ie(Ee)&&e[Ee.charCodeAt(0)].length==4},Se=Re.__arabicParser__.resolveLigatures=function(Ee){var Ae=0,Fe=t,De="",ze=0;for(Ae=0;Ae<Ee.length;Ae+=1)Fe[Ee.charCodeAt(Ae)]!==void 0?(ze++,typeof(Fe=Fe[Ee.charCodeAt(Ae)])=="number"&&(De+=String.fromCharCode(Fe),Fe=t,ze=0),Ae===Ee.length-1&&(Fe=t,De+=Ee.charAt(Ae-(ze-1)),Ae-=ze-1,ze=0)):(Fe=t,De+=Ee.charAt(Ae-ze),Ae-=ze,ze=0);return De};Re.__arabicParser__.isArabicDiacritic=function(Ee){return Ee!==void 0&&Pe[Ee.charCodeAt(0)]!==void 0};var xe=Re.__arabicParser__.getCorrectForm=function(Ee,Ae,Fe){return Be(Ee)?Ie(Ee)===!1?-1:!Ce(Ee)||!Be(Ae)&&!Be(Fe)||!Be(Fe)&&ke(Ae)||ke(Ee)&&!Be(Ae)||ke(Ee)&&_e(Ae)||ke(Ee)&&ke(Ae)?0:Te(Ee)&&Be(Ae)&&!ke(Ae)&&Be(Fe)&&Ce(Fe)?3:ke(Ee)||!Be(Fe)?1:2:-1},r=function(Ee){var Ae=0,Fe=0,De=0,ze="",je="",We="",Ge=(Ee=Ee||"").split("\\s+"),Ye=[];for(Ae=0;Ae<Ge.length;Ae+=1){for(Ye.push(""),Fe=0;Fe<Ge[Ae].length;Fe+=1)ze=Ge[Ae][Fe],je=Ge[Ae][Fe-1],We=Ge[Ae][Fe+1],Be(ze)?(De=xe(ze,je,We),Ye[Ae]+=De!==-1?String.fromCharCode(e[ze.charCodeAt(0)][De]):ze):Ye[Ae]+=ze;Ye[Ae]=Se(Ye[Ae])}return Ye.join(" ")},Oe=Re.__arabicParser__.processArabic=Re.processArabic=function(){var Ee,Ae=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,Fe=[];if(Array.isArray(Ae)){var De=0;for(Fe=[],De=0;De<Ae.length;De+=1)Array.isArray(Ae[De])?Fe.push([r(Ae[De][0]),Ae[De][1],Ae[De][2]]):Fe.push([r(Ae[De])]);Ee=Fe}else Ee=r(Ae);return typeof arguments[0]=="string"?Ee:(arguments[0].text=Ee,arguments[0])};Re.events.push(["preProcessText",Oe])}(E.API),E.API.autoPrint=function(Re){var e;switch((Re=Re||{}).variant=Re.variant||"non-conform",Re.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(Re){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(ke){t=ke}});var Pe=150;Object.defineProperty(this,"width",{get:function(){return Pe},set:function(ke){Pe=isNaN(ke)||Number.isInteger(ke)===!1||ke<0?150:ke,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=Pe+1)}});var Me=300;Object.defineProperty(this,"height",{get:function(){return Me},set:function(ke){Me=isNaN(ke)||Number.isInteger(ke)===!1||ke<0?300:ke,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=Me+1)}});var Ie=[];Object.defineProperty(this,"childNodes",{get:function(){return Ie},set:function(ke){Ie=ke}});var Be={};Object.defineProperty(this,"style",{get:function(){return Be},set:function(ke){Be=ke}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,Pe){var Me;if((t=t||"2d")!=="2d")return null;for(Me in Pe)this.pdf.context2d.hasOwnProperty(Me)&&(this.pdf.context2d[Me]=Pe[Me]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},Re.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(E.API),function(Re){var e={left:0,top:0,bottom:0,right:0},t=!1,Pe=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),Me.call(this))},Me=function(){this.internal.__cell__.lastCell=new Ie,this.internal.__cell__.pages=1},Ie=function(){var _e=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return _e},set:function(Ee){_e=Ee}});var Ce=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Ce},set:function(Ee){Ce=Ee}});var Te=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return Te},set:function(Ee){Te=Ee}});var Se=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return Se},set:function(Ee){Se=Ee}});var xe=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return xe},set:function(Ee){xe=Ee}});var r=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return r},set:function(Ee){r=Ee}});var Oe=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return Oe},set:function(Ee){Oe=Ee}}),this};Ie.prototype.clone=function(){return new Ie(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},Ie.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},Re.setHeaderFunction=function(_e){return Pe.call(this),this.internal.__cell__.headerFunction=typeof _e=="function"?_e:void 0,this},Re.getTextDimensions=function(_e,Ce){Pe.call(this);var Te=(Ce=Ce||{}).fontSize||this.getFontSize(),Se=Ce.font||this.getFont(),xe=Ce.scaleFactor||this.internal.scaleFactor,r=0,Oe=0,Ee=0,Ae=this;if(!Array.isArray(_e)&&typeof _e!="string"){if(typeof _e!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");_e=String(_e)}var Fe=Ce.maxWidth;Fe>0?typeof _e=="string"?_e=this.splitTextToSize(_e,Fe):Object.prototype.toString.call(_e)==="[object Array]"&&(_e=_e.reduce(function(ze,je){return ze.concat(Ae.splitTextToSize(je,Fe))},[])):_e=Array.isArray(_e)?_e:[_e];for(var De=0;De<_e.length;De++)r<(Ee=this.getStringUnitWidth(_e[De],{font:Se})*Te)&&(r=Ee);return r!==0&&(Oe=_e.length),{w:r/=xe,h:Math.max((Oe*Te*this.getLineHeightFactor()-Te*(this.getLineHeightFactor()-1))/xe,0)}},Re.cellAddPage=function(){Pe.call(this),this.addPage();var _e=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new Ie(_e.left,_e.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var Be=Re.cell=function(){var _e;_e=arguments[0]instanceof Ie?arguments[0]:new Ie(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),Pe.call(this);var Ce=this.internal.__cell__.lastCell,Te=this.internal.__cell__.padding,Se=this.internal.__cell__.margins||e,xe=this.internal.__cell__.tableHeaderRow,r=this.internal.__cell__.printHeaders;return Ce.lineNumber!==void 0&&(Ce.lineNumber===_e.lineNumber?(_e.x=(Ce.x||0)+(Ce.width||0),_e.y=Ce.y||0):Ce.y+Ce.height+_e.height+Se.bottom>this.getPageHeight()?(this.cellAddPage(),_e.y=Se.top,r&&xe&&(this.printHeaderRow(_e.lineNumber,!0),_e.y+=xe[0].height)):_e.y=Ce.y+Ce.height||_e.y),_e.text[0]!==void 0&&(this.rect(_e.x,_e.y,_e.width,_e.height,t===!0?"FD":void 0),_e.align==="right"?this.text(_e.text,_e.x+_e.width-Te,_e.y+Te,{align:"right",baseline:"top"}):_e.align==="center"?this.text(_e.text,_e.x+_e.width/2,_e.y+Te,{align:"center",baseline:"top",maxWidth:_e.width-Te-Te}):this.text(_e.text,_e.x+Te,_e.y+Te,{align:"left",baseline:"top",maxWidth:_e.width-Te-Te})),this.internal.__cell__.lastCell=_e,this};Re.table=function(_e,Ce,Te,Se,xe){if(Pe.call(this),!Te)throw new Error("No data for PDF table.");var r,Oe,Ee,Ae,Fe=[],De=[],ze=[],je={},We={},Ge=[],Ye=[],Xe=(xe=xe||{}).autoSize||!1,Ke=xe.printHeaders!==!1,er=xe.css&&xe.css["font-size"]!==void 0?16*xe.css["font-size"]:xe.fontSize||12,Qe=xe.margins||Object.assign({width:this.getPageWidth()},e),nr=typeof xe.padding=="number"?xe.padding:3,ir=xe.headerBackgroundColor||"#c8c8c8",cr=xe.headerTextColor||"#000";if(Me.call(this),this.internal.__cell__.printHeaders=Ke,this.internal.__cell__.margins=Qe,this.internal.__cell__.table_font_size=er,this.internal.__cell__.padding=nr,this.internal.__cell__.headerBackgroundColor=ir,this.internal.__cell__.headerTextColor=cr,this.setFontSize(er),Se==null)De=Fe=Object.keys(Te[0]),ze=Fe.map(function(){return"left"});else if(Array.isArray(Se)&&_typeof(Se[0])==="object")for(Fe=Se.map(function(fr){return fr.name}),De=Se.map(function(fr){return fr.prompt||fr.name||""}),ze=Se.map(function(fr){return fr.align||"left"}),r=0;r<Se.length;r+=1)We[Se[r].name]=Se[r].width*(19.049976/25.4);else Array.isArray(Se)&&typeof Se[0]=="string"&&(De=Fe=Se,ze=Fe.map(function(){return"left"}));if(Xe||Array.isArray(Se)&&typeof Se[0]=="string")for(r=0;r<Fe.length;r+=1){for(je[Ae=Fe[r]]=Te.map(function(fr){return fr[Ae]}),this.setFont(void 0,"bold"),Ge.push(this.getTextDimensions(De[r],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),Oe=je[Ae],this.setFont(void 0,"normal"),Ee=0;Ee<Oe.length;Ee+=1)Ge.push(this.getTextDimensions(Oe[Ee],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);We[Ae]=Math.max.apply(null,Ge)+nr+nr,Ge=[]}if(Ke){var br={};for(r=0;r<Fe.length;r+=1)br[Fe[r]]={},br[Fe[r]].text=De[r],br[Fe[r]].align=ze[r];var wr=ke.call(this,br,We);Ye=Fe.map(function(fr){return new Ie(_e,Ce,We[fr],wr,br[fr].text,void 0,br[fr].align)}),this.setTableHeaderRow(Ye),this.printHeaderRow(1,!1)}var xr=Se.reduce(function(fr,$e){return fr[$e.name]=$e.align,fr},{});for(r=0;r<Te.length;r+=1){"rowStart"in xe&&xe.rowStart instanceof Function&&xe.rowStart({row:r,data:Te[r]},this);var Sr=ke.call(this,Te[r],We);for(Ee=0;Ee<Fe.length;Ee+=1){var lr=Te[r][Fe[Ee]];"cellStart"in xe&&xe.cellStart instanceof Function&&xe.cellStart({row:r,col:Ee,data:lr},this),Be.call(this,new Ie(_e,Ce,We[Fe[Ee]],Sr,lr,r+2,xr[Fe[Ee]]))}}return this.internal.__cell__.table_x=_e,this.internal.__cell__.table_y=Ce,this};var ke=function(_e,Ce){var Te=this.internal.__cell__.padding,Se=this.internal.__cell__.table_font_size,xe=this.internal.scaleFactor;return Object.keys(_e).map(function(r){var Oe=_e[r];return this.splitTextToSize(Oe.hasOwnProperty("text")?Oe.text:Oe,Ce[r]-Te-Te)},this).map(function(r){return this.getLineHeightFactor()*r.length*Se/xe+Te+Te},this).reduce(function(r,Oe){return Math.max(r,Oe)},0)};Re.setTableHeaderRow=function(_e){Pe.call(this),this.internal.__cell__.tableHeaderRow=_e},Re.printHeaderRow=function(_e,Ce){if(Pe.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var Te;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var Se=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new Ie(Se[0],Se[1],Se[2],Se[3],void 0,-1)}this.setFont(void 0,"bold");for(var xe=[],r=0;r<this.internal.__cell__.tableHeaderRow.length;r+=1){Te=this.internal.__cell__.tableHeaderRow[r].clone(),Ce&&(Te.y=this.internal.__cell__.margins.top||0,xe.push(Te)),Te.lineNumber=_e;var Oe=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),Be.call(this,Te),this.setTextColor(Oe)}xe.length>0&&this.setTableHeaderRow(xe),this.setFont(void 0,"normal"),t=!1}}(E.API);var Pt={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},kt=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],It=_t(kt),Ft=[100,200,300,400,500,600,700,800,900],Ct=_t(Ft);function jt(Re){var e=Re.family.replace(/"|'/g,"").toLowerCase(),t=function(Ie){return Pt[Ie=Ie||"normal"]?Ie:"normal"}(Re.style),Pe=function(Ie){if(!Ie)return 400;if(typeof Ie=="number")return Ie>=100&&Ie<=900&&Ie%100==0?Ie:400;if(/^\d00$/.test(Ie))return parseInt(Ie);switch(Ie){case"bold":return 700;case"normal":default:return 400}}(Re.weight),Me=function(Ie){return typeof It[Ie=Ie||"normal"]=="number"?Ie:"normal"}(Re.stretch);return{family:e,style:t,weight:Pe,stretch:Me,src:Re.src||[],ref:Re.ref||{name:e,style:[Me,t,Pe].join(" ")}}}function Ot(Re,e,t,Pe){var Me;for(Me=t;Me>=0&&Me<e.length;Me+=Pe)if(Re[e[Me]])return Re[e[Me]];for(Me=t;Me>=0&&Me<e.length;Me-=Pe)if(Re[e[Me]])return Re[e[Me]]}var Bt={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Mt={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Et(Re){return[Re.stretch,Re.style,Re.weight,Re.family].join(" ")}function qt(Re,e,t){for(var Pe=(t=t||{}).defaultFontFamily||"times",Me=Object.assign({},Bt,t.genericFontFamilies||{}),Ie=null,Be=null,ke=0;ke<e.length;++ke)if(Me[(Ie=jt(e[ke])).family]&&(Ie.family=Me[Ie.family]),Re.hasOwnProperty(Ie.family)){Be=Re[Ie.family];break}if(!(Be=Be||Re[Pe]))throw new Error("Could not find a font-family for the rule '"+Et(Ie)+"' and default family '"+Pe+"'.");if(Be=function(_e,Ce){if(Ce[_e])return Ce[_e];var Te=It[_e],Se=Te<=It.normal?-1:1,xe=Ot(Ce,kt,Te,Se);if(!xe)throw new Error("Could not find a matching font-stretch value for "+_e);return xe}(Ie.stretch,Be),Be=function(_e,Ce){if(Ce[_e])return Ce[_e];for(var Te=Pt[_e],Se=0;Se<Te.length;++Se)if(Ce[Te[Se]])return Ce[Te[Se]];throw new Error("Could not find a matching font-style for "+_e)}(Ie.style,Be),!(Be=function(_e,Ce){if(Ce[_e])return Ce[_e];if(_e===400&&Ce[500])return Ce[500];if(_e===500&&Ce[400])return Ce[400];var Te=Ct[_e],Se=Ot(Ce,Ft,Te,_e<400?-1:1);if(!Se)throw new Error("Could not find a matching font-weight for value "+_e);return Se}(Ie.weight,Be)))throw new Error("Failed to resolve a font for the rule '"+Et(Ie)+"'.");return Be}function Dt(Re){return Re.trimLeft()}function Rt(Re,e){for(var t=0;t<Re.length;){if(Re.charAt(t)===e)return[Re.substring(0,t),Re.substring(t+1)];t+=1}return null}function Tt(Re){var e=Re.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],Re.substring(e[0].length)]}var Ut,zt,Ht,Wt=["times"];(function(Re){var e,t,Pe,Me,Ie,Be,ke,_e,Ce,Te=function(Ve){return Ve=Ve||{},this.isStrokeTransparent=Ve.isStrokeTransparent||!1,this.strokeOpacity=Ve.strokeOpacity||1,this.strokeStyle=Ve.strokeStyle||"#000000",this.fillStyle=Ve.fillStyle||"#000000",this.isFillTransparent=Ve.isFillTransparent||!1,this.fillOpacity=Ve.fillOpacity||1,this.font=Ve.font||"10px sans-serif",this.textBaseline=Ve.textBaseline||"alphabetic",this.textAlign=Ve.textAlign||"left",this.lineWidth=Ve.lineWidth||1,this.lineJoin=Ve.lineJoin||"miter",this.lineCap=Ve.lineCap||"butt",this.path=Ve.path||[],this.transform=Ve.transform!==void 0?Ve.transform.clone():new _e,this.globalCompositeOperation=Ve.globalCompositeOperation||"normal",this.globalAlpha=Ve.globalAlpha||1,this.clip_path=Ve.clip_path||[],this.currentPoint=Ve.currentPoint||new Be,this.miterLimit=Ve.miterLimit||10,this.lastPoint=Ve.lastPoint||new Be,this.lineDashOffset=Ve.lineDashOffset||0,this.lineDash=Ve.lineDash||[],this.margin=Ve.margin||[0,0,0,0],this.prevPageLastElemOffset=Ve.prevPageLastElemOffset||0,this.ignoreClearRect=typeof Ve.ignoreClearRect!="boolean"||Ve.ignoreClearRect,this};Re.events.push(["initialized",function(){this.context2d=new Se(this),e=this.internal.f2,t=this.internal.getCoordinateString,Pe=this.internal.getVerticalCoordinateString,Me=this.internal.getHorizontalCoordinate,Ie=this.internal.getVerticalCoordinate,Be=this.internal.Point,ke=this.internal.Rectangle,_e=this.internal.Matrix,Ce=new Te}]);var Se=function(Ve){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Je=Ve;Object.defineProperty(this,"pdf",{get:function(){return Je}});var Ze=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Ze},set:function(hr){Ze=Boolean(hr)}});var St=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return St},set:function(hr){St=Boolean(hr)}});var vr=0;Object.defineProperty(this,"posX",{get:function(){return vr},set:function(hr){isNaN(hr)||(vr=hr)}});var mr=0;Object.defineProperty(this,"posY",{get:function(){return mr},set:function(hr){isNaN(hr)||(mr=hr)}}),Object.defineProperty(this,"margin",{get:function(){return Ce.margin},set:function(hr){var sr;typeof hr=="number"?sr=[hr,hr,hr,hr]:((sr=new Array(4))[0]=hr[0],sr[1]=hr.length>=2?hr[1]:sr[0],sr[2]=hr.length>=3?hr[2]:sr[0],sr[3]=hr.length>=4?hr[3]:sr[1]),Ce.margin=sr}});var Cr=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Cr},set:function(hr){Cr=hr}});var _r=0;Object.defineProperty(this,"lastBreak",{get:function(){return _r},set:function(hr){_r=hr}});var pr=[];Object.defineProperty(this,"pageBreaks",{get:function(){return pr},set:function(hr){pr=hr}}),Object.defineProperty(this,"ctx",{get:function(){return Ce},set:function(hr){hr instanceof Te&&(Ce=hr)}}),Object.defineProperty(this,"path",{get:function(){return Ce.path},set:function(hr){Ce.path=hr}});var dr=[];Object.defineProperty(this,"ctxStack",{get:function(){return dr},set:function(hr){dr=hr}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(hr){var sr;sr=xe(hr),this.ctx.fillStyle=sr.style,this.ctx.isFillTransparent=sr.a===0,this.ctx.fillOpacity=sr.a,this.pdf.setFillColor(sr.r,sr.g,sr.b,{a:sr.a}),this.pdf.setTextColor(sr.r,sr.g,sr.b,{a:sr.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(hr){var sr=xe(hr);this.ctx.strokeStyle=sr.style,this.ctx.isStrokeTransparent=sr.a===0,this.ctx.strokeOpacity=sr.a,sr.a===0?this.pdf.setDrawColor(255,255,255):(sr.a,this.pdf.setDrawColor(sr.r,sr.g,sr.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(hr){["butt","round","square"].indexOf(hr)!==-1&&(this.ctx.lineCap=hr,this.pdf.setLineCap(hr))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(hr){isNaN(hr)||(this.ctx.lineWidth=hr,this.pdf.setLineWidth(hr))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(hr){["bevel","round","miter"].indexOf(hr)!==-1&&(this.ctx.lineJoin=hr,this.pdf.setLineJoin(hr))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(hr){isNaN(hr)||(this.ctx.miterLimit=hr,this.pdf.setMiterLimit(hr))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(hr){this.ctx.textBaseline=hr}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(hr){["right","end","center","left","start"].indexOf(hr)!==-1&&(this.ctx.textAlign=hr)}});var ur=null;function rr(hr,sr){if(ur===null){var Ar=function(Or){var Mr=[];return Object.keys(Or).forEach(function(Gr){Or[Gr].forEach(function(zr){var Ir=null;switch(zr){case"bold":Ir={family:Gr,weight:"bold"};break;case"italic":Ir={family:Gr,style:"italic"};break;case"bolditalic":Ir={family:Gr,weight:"bold",style:"italic"};break;case"":case"normal":Ir={family:Gr}}Ir!==null&&(Ir.ref={name:Gr,style:zr},Mr.push(Ir))})}),Mr}(hr.getFontList());ur=function(Or){for(var Mr={},Gr=0;Gr<Or.length;++Gr){var zr=jt(Or[Gr]),Ir=zr.family,Qr=zr.stretch,rn=zr.style,sn=zr.weight;Mr[Ir]=Mr[Ir]||{},Mr[Ir][Qr]=Mr[Ir][Qr]||{},Mr[Ir][Qr][rn]=Mr[Ir][Qr][rn]||{},Mr[Ir][Qr][rn][sn]=zr}return Mr}(Ar.concat(sr))}return ur}var gr=null;Object.defineProperty(this,"fontFaces",{get:function(){return gr},set:function(hr){ur=null,gr=hr}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(hr){var sr;if(this.ctx.font=hr,(sr=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(hr))!==null){var Ar=sr[1],Or=(sr[2],sr[3]),Mr=sr[4],Gr=(sr[5],sr[6]),zr=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Mr)[2];Mr=Math.floor(zr==="px"?parseFloat(Mr)*this.pdf.internal.scaleFactor:zr==="em"?parseFloat(Mr)*this.pdf.getFontSize():parseFloat(Mr)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Mr);var Ir=function(Cn){var Xr,Er,Rr=[],Dr=Cn.trim();if(Dr==="")return Wt;if(Dr in Mt)return[Mt[Dr]];for(;Dr!=="";){switch(Er=null,Xr=(Dr=Dt(Dr)).charAt(0)){case'"':case"'":Er=Rt(Dr.substring(1),Xr);break;default:Er=Tt(Dr)}if(Er===null||(Rr.push(Er[0]),(Dr=Dt(Er[1]))!==""&&Dr.charAt(0)!==","))return Wt;Dr=Dr.replace(/^,/,"")}return Rr}(Gr);if(this.fontFaces){var Qr=qt(rr(this.pdf,this.fontFaces),Ir.map(function(Cn){return{family:Cn,stretch:"normal",weight:Or,style:Ar}}));this.pdf.setFont(Qr.ref.name,Qr.ref.style)}else{var rn="";(Or==="bold"||parseInt(Or,10)>=700||Ar==="bold")&&(rn="bold"),Ar==="italic"&&(rn+="italic"),rn.length===0&&(rn="normal");for(var sn="",pn={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},mn=0;mn<Ir.length;mn++){if(this.pdf.internal.getFont(Ir[mn],rn,{noFallback:!0,disableWarning:!0})!==void 0){sn=Ir[mn];break}if(rn==="bolditalic"&&this.pdf.internal.getFont(Ir[mn],"bold",{noFallback:!0,disableWarning:!0})!==void 0)sn=Ir[mn],rn="bold";else if(this.pdf.internal.getFont(Ir[mn],"normal",{noFallback:!0,disableWarning:!0})!==void 0){sn=Ir[mn],rn="normal";break}}if(sn===""){for(var Sn=0;Sn<Ir.length;Sn++)if(pn[Ir[Sn]]){sn=pn[Ir[Sn]];break}}sn=sn===""?"Times":sn,this.pdf.setFont(sn,rn)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(hr){this.ctx.globalCompositeOperation=hr}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(hr){this.ctx.globalAlpha=hr}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(hr){this.ctx.lineDashOffset=hr,$e.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(hr){this.ctx.lineDash=hr,$e.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(hr){this.ctx.ignoreClearRect=Boolean(hr)}})};Se.prototype.setLineDash=function(Ve){this.lineDash=Ve},Se.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},Se.prototype.fill=function(){je.call(this,"fill",!1)},Se.prototype.stroke=function(){je.call(this,"stroke",!1)},Se.prototype.beginPath=function(){this.path=[{type:"begin"}]},Se.prototype.moveTo=function(Ve,Je){if(isNaN(Ve)||isNaN(Je))throw a.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Ze=this.ctx.transform.applyToPoint(new Be(Ve,Je));this.path.push({type:"mt",x:Ze.x,y:Ze.y}),this.ctx.lastPoint=new Be(Ve,Je)},Se.prototype.closePath=function(){var Ve=new Be(0,0),Je=0;for(Je=this.path.length-1;Je!==-1;Je--)if(this.path[Je].type==="begin"&&_typeof(this.path[Je+1])==="object"&&typeof this.path[Je+1].x=="number"){Ve=new Be(this.path[Je+1].x,this.path[Je+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new Be(Ve.x,Ve.y)},Se.prototype.lineTo=function(Ve,Je){if(isNaN(Ve)||isNaN(Je))throw a.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Ze=this.ctx.transform.applyToPoint(new Be(Ve,Je));this.path.push({type:"lt",x:Ze.x,y:Ze.y}),this.ctx.lastPoint=new Be(Ze.x,Ze.y)},Se.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),je.call(this,null,!0)},Se.prototype.quadraticCurveTo=function(Ve,Je,Ze,St){if(isNaN(Ze)||isNaN(St)||isNaN(Ve)||isNaN(Je))throw a.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var vr=this.ctx.transform.applyToPoint(new Be(Ze,St)),mr=this.ctx.transform.applyToPoint(new Be(Ve,Je));this.path.push({type:"qct",x1:mr.x,y1:mr.y,x:vr.x,y:vr.y}),this.ctx.lastPoint=new Be(vr.x,vr.y)},Se.prototype.bezierCurveTo=function(Ve,Je,Ze,St,vr,mr){if(isNaN(vr)||isNaN(mr)||isNaN(Ve)||isNaN(Je)||isNaN(Ze)||isNaN(St))throw a.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Cr=this.ctx.transform.applyToPoint(new Be(vr,mr)),_r=this.ctx.transform.applyToPoint(new Be(Ve,Je)),pr=this.ctx.transform.applyToPoint(new Be(Ze,St));this.path.push({type:"bct",x1:_r.x,y1:_r.y,x2:pr.x,y2:pr.y,x:Cr.x,y:Cr.y}),this.ctx.lastPoint=new Be(Cr.x,Cr.y)},Se.prototype.arc=function(Ve,Je,Ze,St,vr,mr){if(isNaN(Ve)||isNaN(Je)||isNaN(Ze)||isNaN(St)||isNaN(vr))throw a.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(mr=Boolean(mr),!this.ctx.transform.isIdentity){var Cr=this.ctx.transform.applyToPoint(new Be(Ve,Je));Ve=Cr.x,Je=Cr.y;var _r=this.ctx.transform.applyToPoint(new Be(0,Ze)),pr=this.ctx.transform.applyToPoint(new Be(0,0));Ze=Math.sqrt(Math.pow(_r.x-pr.x,2)+Math.pow(_r.y-pr.y,2))}Math.abs(vr-St)>=2*Math.PI&&(St=0,vr=2*Math.PI),this.path.push({type:"arc",x:Ve,y:Je,radius:Ze,startAngle:St,endAngle:vr,counterclockwise:mr})},Se.prototype.arcTo=function(Ve,Je,Ze,St,vr){throw new Error("arcTo not implemented.")},Se.prototype.rect=function(Ve,Je,Ze,St){if(isNaN(Ve)||isNaN(Je)||isNaN(Ze)||isNaN(St))throw a.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(Ve,Je),this.lineTo(Ve+Ze,Je),this.lineTo(Ve+Ze,Je+St),this.lineTo(Ve,Je+St),this.lineTo(Ve,Je),this.lineTo(Ve+Ze,Je),this.lineTo(Ve,Je)},Se.prototype.fillRect=function(Ve,Je,Ze,St){if(isNaN(Ve)||isNaN(Je)||isNaN(Ze)||isNaN(St))throw a.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!r.call(this)){var vr={};this.lineCap!=="butt"&&(vr.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(vr.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(Ve,Je,Ze,St),this.fill(),vr.hasOwnProperty("lineCap")&&(this.lineCap=vr.lineCap),vr.hasOwnProperty("lineJoin")&&(this.lineJoin=vr.lineJoin)}},Se.prototype.strokeRect=function(Ve,Je,Ze,St){if(isNaN(Ve)||isNaN(Je)||isNaN(Ze)||isNaN(St))throw a.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");Oe.call(this)||(this.beginPath(),this.rect(Ve,Je,Ze,St),this.stroke())},Se.prototype.clearRect=function(Ve,Je,Ze,St){if(isNaN(Ve)||isNaN(Je)||isNaN(Ze)||isNaN(St))throw a.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(Ve,Je,Ze,St))},Se.prototype.save=function(Ve){Ve=typeof Ve!="boolean"||Ve;for(var Je=this.pdf.internal.getCurrentPageInfo().pageNumber,Ze=0;Ze<this.pdf.internal.getNumberOfPages();Ze++)this.pdf.setPage(Ze+1),this.pdf.internal.out("q");if(this.pdf.setPage(Je),Ve){this.ctx.fontSize=this.pdf.internal.getFontSize();var St=new Te(this.ctx);this.ctxStack.push(this.ctx),this.ctx=St}},Se.prototype.restore=function(Ve){Ve=typeof Ve!="boolean"||Ve;for(var Je=this.pdf.internal.getCurrentPageInfo().pageNumber,Ze=0;Ze<this.pdf.internal.getNumberOfPages();Ze++)this.pdf.setPage(Ze+1),this.pdf.internal.out("Q");this.pdf.setPage(Je),Ve&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},Se.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var xe=function(Ve){var Je,Ze,St,vr;if(Ve.isCanvasGradient===!0&&(Ve=Ve.getColor()),!Ve)return{r:0,g:0,b:0,a:0,style:Ve};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(Ve))Je=0,Ze=0,St=0,vr=0;else{var mr=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(Ve);if(mr!==null)Je=parseInt(mr[1]),Ze=parseInt(mr[2]),St=parseInt(mr[3]),vr=1;else if((mr=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(Ve))!==null)Je=parseInt(mr[1]),Ze=parseInt(mr[2]),St=parseInt(mr[3]),vr=parseFloat(mr[4]);else{if(vr=1,typeof Ve=="string"&&Ve.charAt(0)!=="#"){var Cr=new f(Ve);Ve=Cr.ok?Cr.toHex():"#000000"}Ve.length===4?(Je=Ve.substring(1,2),Je+=Je,Ze=Ve.substring(2,3),Ze+=Ze,St=Ve.substring(3,4),St+=St):(Je=Ve.substring(1,3),Ze=Ve.substring(3,5),St=Ve.substring(5,7)),Je=parseInt(Je,16),Ze=parseInt(Ze,16),St=parseInt(St,16)}}return{r:Je,g:Ze,b:St,a:vr,style:Ve}},r=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},Oe=function(){return Boolean(this.ctx.isStrokeTransparent||this.globalAlpha==0)};Se.prototype.fillText=function(Ve,Je,Ze,St){if(isNaN(Je)||isNaN(Ze)||typeof Ve!="string")throw a.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(St=isNaN(St)?void 0:St,!r.call(this)){var vr=Sr(this.ctx.transform.rotation),mr=this.ctx.transform.scaleX;nr.call(this,{text:Ve,x:Je,y:Ze,scale:mr,angle:vr,align:this.textAlign,maxWidth:St})}},Se.prototype.strokeText=function(Ve,Je,Ze,St){if(isNaN(Je)||isNaN(Ze)||typeof Ve!="string")throw a.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!Oe.call(this)){St=isNaN(St)?void 0:St;var vr=Sr(this.ctx.transform.rotation),mr=this.ctx.transform.scaleX;nr.call(this,{text:Ve,x:Je,y:Ze,scale:mr,renderingMode:"stroke",angle:vr,align:this.textAlign,maxWidth:St})}},Se.prototype.measureText=function(Ve){if(typeof Ve!="string")throw a.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Je=this.pdf,Ze=this.pdf.internal.scaleFactor,St=Je.internal.getFontSize(),vr=Je.getStringUnitWidth(Ve)*St/Je.internal.scaleFactor,mr=function(Cr){var _r=(Cr=Cr||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return _r}}),this};return new mr({width:vr*=Math.round(96*Ze/72*1e4)/1e4})},Se.prototype.scale=function(Ve,Je){if(isNaN(Ve)||isNaN(Je))throw a.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Ze=new _e(Ve,0,0,Je,0,0);this.ctx.transform=this.ctx.transform.multiply(Ze)},Se.prototype.rotate=function(Ve){if(isNaN(Ve))throw a.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Je=new _e(Math.cos(Ve),Math.sin(Ve),-Math.sin(Ve),Math.cos(Ve),0,0);this.ctx.transform=this.ctx.transform.multiply(Je)},Se.prototype.translate=function(Ve,Je){if(isNaN(Ve)||isNaN(Je))throw a.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Ze=new _e(1,0,0,1,Ve,Je);this.ctx.transform=this.ctx.transform.multiply(Ze)},Se.prototype.transform=function(Ve,Je,Ze,St,vr,mr){if(isNaN(Ve)||isNaN(Je)||isNaN(Ze)||isNaN(St)||isNaN(vr)||isNaN(mr))throw a.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Cr=new _e(Ve,Je,Ze,St,vr,mr);this.ctx.transform=this.ctx.transform.multiply(Cr)},Se.prototype.setTransform=function(Ve,Je,Ze,St,vr,mr){Ve=isNaN(Ve)?1:Ve,Je=isNaN(Je)?0:Je,Ze=isNaN(Ze)?0:Ze,St=isNaN(St)?1:St,vr=isNaN(vr)?0:vr,mr=isNaN(mr)?0:mr,this.ctx.transform=new _e(Ve,Je,Ze,St,vr,mr)};var Ee=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};Se.prototype.drawImage=function(Ve,Je,Ze,St,vr,mr,Cr,_r,pr){var dr=this.pdf.getImageProperties(Ve),ur=1,rr=1,gr=1,hr=1;St!==void 0&&_r!==void 0&&(gr=_r/St,hr=pr/vr,ur=dr.width/St*_r/St,rr=dr.height/vr*pr/vr),mr===void 0&&(mr=Je,Cr=Ze,Je=0,Ze=0),St!==void 0&&_r===void 0&&(_r=St,pr=vr),St===void 0&&_r===void 0&&(_r=dr.width,pr=dr.height);for(var sr,Ar=this.ctx.transform.decompose(),Or=Sr(Ar.rotate.shx),Mr=new _e,Gr=(Mr=(Mr=(Mr=Mr.multiply(Ar.translate)).multiply(Ar.skew)).multiply(Ar.scale)).applyToRectangle(new ke(mr-Je*gr,Cr-Ze*hr,St*ur,vr*rr)),zr=Ae.call(this,Gr),Ir=[],Qr=0;Qr<zr.length;Qr+=1)Ir.indexOf(zr[Qr])===-1&&Ir.push(zr[Qr]);if(ze(Ir),this.autoPaging)for(var rn=Ir[0],sn=Ir[Ir.length-1],pn=rn;pn<sn+1;pn++){this.pdf.setPage(pn);var mn=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Sn=pn===1?this.posY+this.margin[0]:this.margin[0],Cn=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Xr=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Er=pn===1?0:Cn+(pn-2)*Xr;if(this.ctx.clip_path.length!==0){var Rr=this.path;sr=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=De(sr,this.posX+this.margin[3],-Er+Sn+this.ctx.prevPageLastElemOffset),We.call(this,"fill",!0),this.path=Rr}var Dr=JSON.parse(JSON.stringify(Gr));Dr=De([Dr],this.posX+this.margin[3],-Er+Sn+this.ctx.prevPageLastElemOffset)[0];var Br=(pn>rn||pn<sn)&&Ee.call(this);Br&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],mn,Xr,null).clip().discardPath()),this.pdf.addImage(Ve,"JPEG",Dr.x,Dr.y,Dr.w,Dr.h,null,null,Or),Br&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(Ve,"JPEG",Gr.x,Gr.y,Gr.w,Gr.h,null,null,Or)};var Ae=function(Ve,Je,Ze){var St=[];Je=Je||this.pdf.internal.pageSize.width,Ze=Ze||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var vr=this.posY+this.ctx.prevPageLastElemOffset;switch(Ve.type){default:case"mt":case"lt":St.push(Math.floor((Ve.y+vr)/Ze)+1);break;case"arc":St.push(Math.floor((Ve.y+vr-Ve.radius)/Ze)+1),St.push(Math.floor((Ve.y+vr+Ve.radius)/Ze)+1);break;case"qct":var mr=lr(this.ctx.lastPoint.x,this.ctx.lastPoint.y,Ve.x1,Ve.y1,Ve.x,Ve.y);St.push(Math.floor((mr.y+vr)/Ze)+1),St.push(Math.floor((mr.y+mr.h+vr)/Ze)+1);break;case"bct":var Cr=fr(this.ctx.lastPoint.x,this.ctx.lastPoint.y,Ve.x1,Ve.y1,Ve.x2,Ve.y2,Ve.x,Ve.y);St.push(Math.floor((Cr.y+vr)/Ze)+1),St.push(Math.floor((Cr.y+Cr.h+vr)/Ze)+1);break;case"rect":St.push(Math.floor((Ve.y+vr)/Ze)+1),St.push(Math.floor((Ve.y+Ve.h+vr)/Ze)+1)}for(var _r=0;_r<St.length;_r+=1)for(;this.pdf.internal.getNumberOfPages()<St[_r];)Fe.call(this);return St},Fe=function(){var Ve=this.fillStyle,Je=this.strokeStyle,Ze=this.font,St=this.lineCap,vr=this.lineWidth,mr=this.lineJoin;this.pdf.addPage(),this.fillStyle=Ve,this.strokeStyle=Je,this.font=Ze,this.lineCap=St,this.lineWidth=vr,this.lineJoin=mr},De=function(Ve,Je,Ze){for(var St=0;St<Ve.length;St++)switch(Ve[St].type){case"bct":Ve[St].x2+=Je,Ve[St].y2+=Ze;case"qct":Ve[St].x1+=Je,Ve[St].y1+=Ze;case"mt":case"lt":case"arc":default:Ve[St].x+=Je,Ve[St].y+=Ze}return Ve},ze=function(Ve){return Ve.sort(function(Je,Ze){return Je-Ze})},je=function(Ve,Je){for(var Ze,St,vr=this.fillStyle,mr=this.strokeStyle,Cr=this.lineCap,_r=this.lineWidth,pr=Math.abs(_r*this.ctx.transform.scaleX),dr=this.lineJoin,ur=JSON.parse(JSON.stringify(this.path)),rr=JSON.parse(JSON.stringify(this.path)),gr=[],hr=0;hr<rr.length;hr++)if(rr[hr].x!==void 0)for(var sr=Ae.call(this,rr[hr]),Ar=0;Ar<sr.length;Ar+=1)gr.indexOf(sr[Ar])===-1&&gr.push(sr[Ar]);for(var Or=0;Or<gr.length;Or++)for(;this.pdf.internal.getNumberOfPages()<gr[Or];)Fe.call(this);if(ze(gr),this.autoPaging)for(var Mr=gr[0],Gr=gr[gr.length-1],zr=Mr;zr<Gr+1;zr++){this.pdf.setPage(zr),this.fillStyle=vr,this.strokeStyle=mr,this.lineCap=Cr,this.lineWidth=pr,this.lineJoin=dr;var Ir=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Qr=zr===1?this.posY+this.margin[0]:this.margin[0],rn=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],sn=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],pn=zr===1?0:rn+(zr-2)*sn;if(this.ctx.clip_path.length!==0){var mn=this.path;Ze=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=De(Ze,this.posX+this.margin[3],-pn+Qr+this.ctx.prevPageLastElemOffset),We.call(this,Ve,!0),this.path=mn}if(St=JSON.parse(JSON.stringify(ur)),this.path=De(St,this.posX+this.margin[3],-pn+Qr+this.ctx.prevPageLastElemOffset),Je===!1||zr===0){var Sn=(zr>Mr||zr<Gr)&&Ee.call(this);Sn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ir,sn,null).clip().discardPath()),We.call(this,Ve,Je),Sn&&this.pdf.restoreGraphicsState()}this.lineWidth=_r}else this.lineWidth=pr,We.call(this,Ve,Je),this.lineWidth=_r;this.path=ur},We=function(Ve,Je){if((Ve!=="stroke"||Je||!Oe.call(this))&&(Ve==="stroke"||Je||!r.call(this))){for(var Ze,St,vr=[],mr=this.path,Cr=0;Cr<mr.length;Cr++){var _r=mr[Cr];switch(_r.type){case"begin":vr.push({begin:!0});break;case"close":vr.push({close:!0});break;case"mt":vr.push({start:_r,deltas:[],abs:[]});break;case"lt":var pr=vr.length;if(mr[Cr-1]&&!isNaN(mr[Cr-1].x)&&(Ze=[_r.x-mr[Cr-1].x,_r.y-mr[Cr-1].y],pr>0)){for(;pr>=0;pr--)if(vr[pr-1].close!==!0&&vr[pr-1].begin!==!0){vr[pr-1].deltas.push(Ze),vr[pr-1].abs.push(_r);break}}break;case"bct":Ze=[_r.x1-mr[Cr-1].x,_r.y1-mr[Cr-1].y,_r.x2-mr[Cr-1].x,_r.y2-mr[Cr-1].y,_r.x-mr[Cr-1].x,_r.y-mr[Cr-1].y],vr[vr.length-1].deltas.push(Ze);break;case"qct":var dr=mr[Cr-1].x+2/3*(_r.x1-mr[Cr-1].x),ur=mr[Cr-1].y+2/3*(_r.y1-mr[Cr-1].y),rr=_r.x+2/3*(_r.x1-_r.x),gr=_r.y+2/3*(_r.y1-_r.y),hr=_r.x,sr=_r.y;Ze=[dr-mr[Cr-1].x,ur-mr[Cr-1].y,rr-mr[Cr-1].x,gr-mr[Cr-1].y,hr-mr[Cr-1].x,sr-mr[Cr-1].y],vr[vr.length-1].deltas.push(Ze);break;case"arc":vr.push({deltas:[],abs:[],arc:!0}),Array.isArray(vr[vr.length-1].abs)&&vr[vr.length-1].abs.push(_r)}}St=Je?null:Ve==="stroke"?"stroke":"fill";for(var Ar=!1,Or=0;Or<vr.length;Or++)if(vr[Or].arc)for(var Mr=vr[Or].abs,Gr=0;Gr<Mr.length;Gr++){var zr=Mr[Gr];zr.type==="arc"?Xe.call(this,zr.x,zr.y,zr.radius,zr.startAngle,zr.endAngle,zr.counterclockwise,void 0,Je,!Ar):ir.call(this,zr.x,zr.y),Ar=!0}else if(vr[Or].close===!0)this.pdf.internal.out("h"),Ar=!1;else if(vr[Or].begin!==!0){var Ir=vr[Or].start.x,Qr=vr[Or].start.y;cr.call(this,vr[Or].deltas,Ir,Qr),Ar=!0}St&&Ke.call(this,St),Je&&er.call(this)}},Ge=function(Ve){var Je=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Ze=Je*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return Ve-Ze;case"top":return Ve+Je-Ze;case"hanging":return Ve+Je-2*Ze;case"middle":return Ve+Je/2-Ze;case"ideographic":return Ve;case"alphabetic":default:return Ve}},Ye=function(Ve){return Ve+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};Se.prototype.createLinearGradient=function(){var Ve=function(){};return Ve.colorStops=[],Ve.addColorStop=function(Je,Ze){this.colorStops.push([Je,Ze])},Ve.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},Ve.isCanvasGradient=!0,Ve},Se.prototype.createPattern=function(){return this.createLinearGradient()},Se.prototype.createRadialGradient=function(){return this.createLinearGradient()};var Xe=function(Ve,Je,Ze,St,vr,mr,Cr,_r,pr){for(var dr=wr.call(this,Ze,St,vr,mr),ur=0;ur<dr.length;ur++){var rr=dr[ur];ur===0&&(pr?Qe.call(this,rr.x1+Ve,rr.y1+Je):ir.call(this,rr.x1+Ve,rr.y1+Je)),br.call(this,Ve,Je,rr.x2,rr.y2,rr.x3,rr.y3,rr.x4,rr.y4)}_r?er.call(this):Ke.call(this,Cr)},Ke=function(Ve){switch(Ve){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},er=function(){this.pdf.clip(),this.pdf.discardPath()},Qe=function(Ve,Je){this.pdf.internal.out(t(Ve)+" "+Pe(Je)+" m")},nr=function(Ve){var Je;switch(Ve.align){case"right":case"end":Je="right";break;case"center":Je="center";break;case"left":case"start":default:Je="left"}var Ze=this.pdf.getTextDimensions(Ve.text),St=Ge.call(this,Ve.y),vr=Ye.call(this,St)-Ze.h,mr=this.ctx.transform.applyToPoint(new Be(Ve.x,St)),Cr=this.ctx.transform.decompose(),_r=new _e;_r=(_r=(_r=_r.multiply(Cr.translate)).multiply(Cr.skew)).multiply(Cr.scale);for(var pr,dr,ur,rr=this.ctx.transform.applyToRectangle(new ke(Ve.x,St,Ze.w,Ze.h)),gr=_r.applyToRectangle(new ke(Ve.x,vr,Ze.w,Ze.h)),hr=Ae.call(this,gr),sr=[],Ar=0;Ar<hr.length;Ar+=1)sr.indexOf(hr[Ar])===-1&&sr.push(hr[Ar]);if(ze(sr),this.autoPaging)for(var Or=sr[0],Mr=sr[sr.length-1],Gr=Or;Gr<Mr+1;Gr++){this.pdf.setPage(Gr);var zr=Gr===1?this.posY+this.margin[0]:this.margin[0],Ir=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Qr=this.pdf.internal.pageSize.height-this.margin[2],rn=Qr-this.margin[0],sn=this.pdf.internal.pageSize.width-this.margin[1],pn=sn-this.margin[3],mn=Gr===1?0:Ir+(Gr-2)*rn;if(this.ctx.clip_path.length!==0){var Sn=this.path;pr=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=De(pr,this.posX+this.margin[3],-1*mn+zr),We.call(this,"fill",!0),this.path=Sn}var Cn=De([JSON.parse(JSON.stringify(gr))],this.posX+this.margin[3],-mn+zr+this.ctx.prevPageLastElemOffset)[0];Ve.scale>=.01&&(dr=this.pdf.internal.getFontSize(),this.pdf.setFontSize(dr*Ve.scale),ur=this.lineWidth,this.lineWidth=ur*Ve.scale);var Xr=this.autoPaging!=="text";if(Xr||Cn.y+Cn.h<=Qr){if(Xr||Cn.y>=zr&&Cn.x<=sn){var Er=Xr?Ve.text:this.pdf.splitTextToSize(Ve.text,Ve.maxWidth||sn-Cn.x)[0],Rr=De([JSON.parse(JSON.stringify(rr))],this.posX+this.margin[3],-mn+zr+this.ctx.prevPageLastElemOffset)[0],Dr=Xr&&(Gr>Or||Gr<Mr)&&Ee.call(this);Dr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],pn,rn,null).clip().discardPath()),this.pdf.text(Er,Rr.x,Rr.y,{angle:Ve.angle,align:Je,renderingMode:Ve.renderingMode}),Dr&&this.pdf.restoreGraphicsState()}}else Cn.y<Qr&&(this.ctx.prevPageLastElemOffset+=Qr-Cn.y);Ve.scale>=.01&&(this.pdf.setFontSize(dr),this.lineWidth=ur)}else Ve.scale>=.01&&(dr=this.pdf.internal.getFontSize(),this.pdf.setFontSize(dr*Ve.scale),ur=this.lineWidth,this.lineWidth=ur*Ve.scale),this.pdf.text(Ve.text,mr.x+this.posX,mr.y+this.posY,{angle:Ve.angle,align:Je,renderingMode:Ve.renderingMode,maxWidth:Ve.maxWidth}),Ve.scale>=.01&&(this.pdf.setFontSize(dr),this.lineWidth=ur)},ir=function(Ve,Je,Ze,St){Ze=Ze||0,St=St||0,this.pdf.internal.out(t(Ve+Ze)+" "+Pe(Je+St)+" l")},cr=function(Ve,Je,Ze){return this.pdf.lines(Ve,Je,Ze,null,null)},br=function(Ve,Je,Ze,St,vr,mr,Cr,_r){this.pdf.internal.out([e(Me(Ze+Ve)),e(Ie(St+Je)),e(Me(vr+Ve)),e(Ie(mr+Je)),e(Me(Cr+Ve)),e(Ie(_r+Je)),"c"].join(" "))},wr=function(Ve,Je,Ze,St){for(var vr=2*Math.PI,mr=Math.PI/2;Je>Ze;)Je-=vr;var Cr=Math.abs(Ze-Je);Cr<vr&&St&&(Cr=vr-Cr);for(var _r=[],pr=St?-1:1,dr=Je;Cr>1e-5;){var ur=dr+pr*Math.min(Cr,mr);_r.push(xr.call(this,Ve,dr,ur)),Cr-=Math.abs(ur-dr),dr=ur}return _r},xr=function(Ve,Je,Ze){var St=(Ze-Je)/2,vr=Ve*Math.cos(St),mr=Ve*Math.sin(St),Cr=vr,_r=-mr,pr=Cr*Cr+_r*_r,dr=pr+Cr*vr+_r*mr,ur=4/3*(Math.sqrt(2*pr*dr)-dr)/(Cr*mr-_r*vr),rr=Cr-ur*_r,gr=_r+ur*Cr,hr=rr,sr=-gr,Ar=St+Je,Or=Math.cos(Ar),Mr=Math.sin(Ar);return{x1:Ve*Math.cos(Je),y1:Ve*Math.sin(Je),x2:rr*Or-gr*Mr,y2:rr*Mr+gr*Or,x3:hr*Or-sr*Mr,y3:hr*Mr+sr*Or,x4:Ve*Math.cos(Ze),y4:Ve*Math.sin(Ze)}},Sr=function(Ve){return 180*Ve/Math.PI},lr=function(Ve,Je,Ze,St,vr,mr){var Cr=Ve+.5*(Ze-Ve),_r=Je+.5*(St-Je),pr=vr+.5*(Ze-vr),dr=mr+.5*(St-mr),ur=Math.min(Ve,vr,Cr,pr),rr=Math.max(Ve,vr,Cr,pr),gr=Math.min(Je,mr,_r,dr),hr=Math.max(Je,mr,_r,dr);return new ke(ur,gr,rr-ur,hr-gr)},fr=function(Ve,Je,Ze,St,vr,mr,Cr,_r){var pr,dr,ur,rr,gr,hr,sr,Ar,Or,Mr,Gr,zr,Ir,Qr,rn=Ze-Ve,sn=St-Je,pn=vr-Ze,mn=mr-St,Sn=Cr-vr,Cn=_r-mr;for(dr=0;dr<41;dr++)Or=(sr=(ur=Ve+(pr=dr/40)*rn)+pr*((gr=Ze+pr*pn)-ur))+pr*(gr+pr*(vr+pr*Sn-gr)-sr),Mr=(Ar=(rr=Je+pr*sn)+pr*((hr=St+pr*mn)-rr))+pr*(hr+pr*(mr+pr*Cn-hr)-Ar),dr==0?(Gr=Or,zr=Mr,Ir=Or,Qr=Mr):(Gr=Math.min(Gr,Or),zr=Math.min(zr,Mr),Ir=Math.max(Ir,Or),Qr=Math.max(Qr,Mr));return new ke(Math.round(Gr),Math.round(zr),Math.round(Ir-Gr),Math.round(Qr-zr))},$e=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var Ve,Je,Ze=(Ve=this.ctx.lineDash,Je=this.ctx.lineDashOffset,JSON.stringify({lineDash:Ve,lineDashOffset:Je}));this.prevLineDash!==Ze&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Ze)}}})(E.API),function(Re){var e=function(Ie){var Be,ke,_e,Ce,Te,Se,xe,r,Oe,Ee;for(/[^\x00-\xFF]/.test(Ie),ke=[],_e=0,Ce=(Ie+=Be="\0\0\0\0".slice(Ie.length%4||4)).length;Ce>_e;_e+=4)(Te=(Ie.charCodeAt(_e)<<24)+(Ie.charCodeAt(_e+1)<<16)+(Ie.charCodeAt(_e+2)<<8)+Ie.charCodeAt(_e+3))!==0?(Se=(Te=((Te=((Te=((Te=(Te-(Ee=Te%85))/85)-(Oe=Te%85))/85)-(r=Te%85))/85)-(xe=Te%85))/85)%85,ke.push(Se+33,xe+33,r+33,Oe+33,Ee+33)):ke.push(122);return function(Ae,Fe){for(var De=Fe;De>0;De--)Ae.pop()}(ke,Be.length),String.fromCharCode.apply(String,ke)+"~>"},t=function(Ie){var Be,ke,_e,Ce,Te,Se=String,xe="length",r=255,Oe="charCodeAt",Ee="slice",Ae="replace";for(Ie[Ee](-2),Ie=Ie[Ee](0,-2)[Ae](/\s/g,"")[Ae]("z","!!!!!"),_e=[],Ce=0,Te=(Ie+=Be="uuuuu"[Ee](Ie[xe]%5||5))[xe];Te>Ce;Ce+=5)ke=52200625*(Ie[Oe](Ce)-33)+614125*(Ie[Oe](Ce+1)-33)+7225*(Ie[Oe](Ce+2)-33)+85*(Ie[Oe](Ce+3)-33)+(Ie[Oe](Ce+4)-33),_e.push(r&ke>>24,r&ke>>16,r&ke>>8,r&ke);return function(Fe,De){for(var ze=De;ze>0;ze--)Fe.pop()}(_e,Be[xe]),Se.fromCharCode.apply(Se,_e)},Pe=function(Ie){var Be=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((Ie=Ie.replace(/\s/g,"")).indexOf(">")!==-1&&(Ie=Ie.substr(0,Ie.indexOf(">"))),Ie.length%2&&(Ie+="0"),Be.test(Ie)===!1)return"";for(var ke="",_e=0;_e<Ie.length;_e+=2)ke+=String.fromCharCode("0x"+(Ie[_e]+Ie[_e+1]));return ke},Me=function(Ie){for(var Be=new Uint8Array(Ie.length),ke=Ie.length;ke--;)Be[ke]=Ie.charCodeAt(ke);return Ie=(Be=zlibSync(Be)).reduce(function(_e,Ce){return _e+String.fromCharCode(Ce)},"")};Re.processDataByFilters=function(Ie,Be){var ke=0,_e=Ie||"",Ce=[];for(typeof(Be=Be||[])=="string"&&(Be=[Be]),ke=0;ke<Be.length;ke+=1)switch(Be[ke]){case"ASCII85Decode":case"/ASCII85Decode":_e=t(_e),Ce.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":_e=e(_e),Ce.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":_e=Pe(_e),Ce.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":_e=_e.split("").map(function(Te){return("0"+Te.charCodeAt().toString(16)).slice(-2)}).join("")+">",Ce.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":_e=Me(_e),Ce.push("/FlateDecode");break;default:throw new Error('The filter: "'+Be[ke]+'" is not implemented')}return{data:_e,reverseChain:Ce.reverse().join(" ")}}}(E.API),function(Re){Re.loadFile=function(e,t,Pe){return function(Me,Ie,Be){Ie=Ie!==!1,Be=typeof Be=="function"?Be:function(){};var ke=void 0;try{ke=function(_e,Ce,Te){var Se=new XMLHttpRequest,xe=0,r=function(Oe){var Ee=Oe.length,Ae=[],Fe=String.fromCharCode;for(xe=0;xe<Ee;xe+=1)Ae.push(Fe(255&Oe.charCodeAt(xe)));return Ae.join("")};if(Se.open("GET",_e,!Ce),Se.overrideMimeType("text/plain; charset=x-user-defined"),Ce===!1&&(Se.onload=function(){Se.status===200?Te(r(this.responseText)):Te(void 0)}),Se.send(null),Ce&&Se.status===200)return r(Se.responseText)}(Me,Ie,Be)}catch{}return ke}(e,t,Pe)},Re.loadImageFile=Re.loadFile}(E.API),function(Re){function e(){return(n.html2canvas?Promise.resolve(n.html2canvas):import("./html2canvas.esm.6400c1eb.js")).catch(function(Be){return Promise.reject(new Error("Could not load html2canvas: "+Be))}).then(function(Be){return Be.default?Be.default:Be})}function t(){return(n.DOMPurify?Promise.resolve(n.DOMPurify):import("./purify.es.79959259.js")).catch(function(Be){return Promise.reject(new Error("Could not load dompurify: "+Be))}).then(function(Be){return Be.default?Be.default:Be})}var Pe=function(Be){var ke=_typeof(Be);return ke==="undefined"?"undefined":ke==="string"||Be instanceof String?"string":ke==="number"||Be instanceof Number?"number":ke==="function"||Be instanceof Function?"function":Be&&Be.constructor===Array?"array":Be&&Be.nodeType===1?"element":ke==="object"?"object":"unknown"},Me=function(Be,ke){var _e=document.createElement(Be);for(var Ce in ke.className&&(_e.className=ke.className),ke.innerHTML&&ke.dompurify&&(_e.innerHTML=ke.dompurify.sanitize(ke.innerHTML)),ke.style)_e.style[Ce]=ke.style[Ce];return _e},Ie=function Be(ke){var _e=Object.assign(Be.convert(Promise.resolve()),JSON.parse(JSON.stringify(Be.template))),Ce=Be.convert(Promise.resolve(),_e);return Ce=(Ce=Ce.setProgress(1,Be,1,[Be])).set(ke)};(Ie.prototype=Object.create(Promise.prototype)).constructor=Ie,Ie.convert=function(Be,ke){return Be.__proto__=ke||Ie.prototype,Be},Ie.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},Ie.prototype.from=function(Be,ke){return this.then(function(){switch(ke=ke||function(_e){switch(Pe(_e)){case"string":return"string";case"element":return _e.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(Be)){case"string":return this.then(t).then(function(_e){return this.set({src:Me("div",{innerHTML:Be,dompurify:_e})})});case"element":return this.set({src:Be});case"canvas":return this.set({canvas:Be});case"img":return this.set({img:Be});default:return this.error("Unknown source type.")}})},Ie.prototype.to=function(Be){switch(Be){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},Ie.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var Be={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},ke=function _e(Ce,Te){for(var Se=Ce.nodeType===3?document.createTextNode(Ce.nodeValue):Ce.cloneNode(!1),xe=Ce.firstChild;xe;xe=xe.nextSibling)Te!==!0&&xe.nodeType===1&&xe.nodeName==="SCRIPT"||Se.appendChild(_e(xe,Te));return Ce.nodeType===1&&(Ce.nodeName==="CANVAS"?(Se.width=Ce.width,Se.height=Ce.height,Se.getContext("2d").drawImage(Ce,0,0)):Ce.nodeName!=="TEXTAREA"&&Ce.nodeName!=="SELECT"||(Se.value=Ce.value),Se.addEventListener("load",function(){Se.scrollTop=Ce.scrollTop,Se.scrollLeft=Ce.scrollLeft},!0)),Se}(this.prop.src,this.opt.html2canvas.javascriptEnabled);ke.tagName==="BODY"&&(Be.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=Me("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=Me("div",{className:"html2pdf__container",style:Be}),this.prop.container.appendChild(ke),this.prop.container.firstChild.appendChild(Me("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},Ie.prototype.toCanvas=function(){var Be=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(Be).then(e).then(function(ke){var _e=Object.assign({},this.opt.html2canvas);return delete _e.onrendered,ke(this.prop.container,_e)}).then(function(ke){(this.opt.html2canvas.onrendered||function(){})(ke),this.prop.canvas=ke,document.body.removeChild(this.prop.overlay)})},Ie.prototype.toContext2d=function(){var Be=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(Be).then(e).then(function(ke){var _e=this.opt.jsPDF,Ce=this.opt.fontFaces,Te=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,Se=Object.assign({async:!0,allowTaint:!0,scale:Te,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete Se.onrendered,_e.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,_e.context2d.posX=this.opt.x,_e.context2d.posY=this.opt.y,_e.context2d.margin=this.opt.margin,_e.context2d.fontFaces=Ce,Ce)for(var xe=0;xe<Ce.length;++xe){var r=Ce[xe],Oe=r.src.find(function(Ee){return Ee.format==="truetype"});Oe&&_e.addFont(Oe.url,r.ref.name,r.ref.style)}return Se.windowHeight=Se.windowHeight||0,Se.windowHeight=Se.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):Se.windowHeight,_e.context2d.save(!0),ke(this.prop.container,Se)}).then(function(ke){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(ke),this.prop.canvas=ke,document.body.removeChild(this.prop.overlay)})},Ie.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var Be=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=Be})},Ie.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},Ie.prototype.output=function(Be,ke,_e){return(_e=_e||"pdf").toLowerCase()==="img"||_e.toLowerCase()==="image"?this.outputImg(Be,ke):this.outputPdf(Be,ke)},Ie.prototype.outputPdf=function(Be,ke){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(Be,ke)})},Ie.prototype.outputImg=function(Be){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(Be){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+Be+'" is not supported.'}})},Ie.prototype.save=function(Be){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(Be?{filename:Be}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},Ie.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},Ie.prototype.set=function(Be){if(Pe(Be)!=="object")return this;var ke=Object.keys(Be||{}).map(function(_e){if(_e in Ie.template.prop)return function(){this.prop[_e]=Be[_e]};switch(_e){case"margin":return this.setMargin.bind(this,Be.margin);case"jsPDF":return function(){return this.opt.jsPDF=Be.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,Be.pageSize);default:return function(){this.opt[_e]=Be[_e]}}},this);return this.then(function(){return this.thenList(ke)})},Ie.prototype.get=function(Be,ke){return this.then(function(){var _e=Be in Ie.template.prop?this.prop[Be]:this.opt[Be];return ke?ke(_e):_e})},Ie.prototype.setMargin=function(Be){return this.then(function(){switch(Pe(Be)){case"number":Be=[Be,Be,Be,Be];case"array":if(Be.length===2&&(Be=[Be[0],Be[1],Be[0],Be[1]]),Be.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=Be}).then(this.setPageSize)},Ie.prototype.setPageSize=function(Be){function ke(_e,Ce){return Math.floor(_e*Ce/72*96)}return this.then(function(){(Be=Be||E.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(Be.inner={width:Be.width-this.opt.margin[1]-this.opt.margin[3],height:Be.height-this.opt.margin[0]-this.opt.margin[2]},Be.inner.px={width:ke(Be.inner.width,Be.k),height:ke(Be.inner.height,Be.k)},Be.inner.ratio=Be.inner.height/Be.inner.width),this.prop.pageSize=Be})},Ie.prototype.setProgress=function(Be,ke,_e,Ce){return Be!=null&&(this.progress.val=Be),ke!=null&&(this.progress.state=ke),_e!=null&&(this.progress.n=_e),Ce!=null&&(this.progress.stack=Ce),this.progress.ratio=this.progress.val/this.progress.state,this},Ie.prototype.updateProgress=function(Be,ke,_e,Ce){return this.setProgress(Be?this.progress.val+Be:null,ke||null,_e?this.progress.n+_e:null,Ce?this.progress.stack.concat(Ce):null)},Ie.prototype.then=function(Be,ke){var _e=this;return this.thenCore(Be,ke,function(Ce,Te){return _e.updateProgress(null,null,1,[Ce]),Promise.prototype.then.call(this,function(Se){return _e.updateProgress(null,Ce),Se}).then(Ce,Te).then(function(Se){return _e.updateProgress(1),Se})})},Ie.prototype.thenCore=function(Be,ke,_e){_e=_e||Promise.prototype.then,Be&&(Be=Be.bind(this)),ke&&(ke=ke.bind(this));var Ce=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:Ie.convert(Object.assign({},this),Promise.prototype),Te=_e.call(Ce,Be,ke);return Ie.convert(Te,this.__proto__)},Ie.prototype.thenExternal=function(Be,ke){return Promise.prototype.then.call(this,Be,ke)},Ie.prototype.thenList=function(Be){var ke=this;return Be.forEach(function(_e){ke=ke.thenCore(_e)}),ke},Ie.prototype.catch=function(Be){Be&&(Be=Be.bind(this));var ke=Promise.prototype.catch.call(this,Be);return Ie.convert(ke,this)},Ie.prototype.catchExternal=function(Be){return Promise.prototype.catch.call(this,Be)},Ie.prototype.error=function(Be){return this.then(function(){throw new Error(Be)})},Ie.prototype.using=Ie.prototype.set,Ie.prototype.saveAs=Ie.prototype.save,Ie.prototype.export=Ie.prototype.output,Ie.prototype.run=Ie.prototype.then,E.getPageSize=function(Be,ke,_e){if(_typeof(Be)==="object"){var Ce=Be;Be=Ce.orientation,ke=Ce.unit||ke,_e=Ce.format||_e}ke=ke||"mm",_e=_e||"a4",Be=(""+(Be||"P")).toLowerCase();var Te,Se=(""+_e).toLowerCase(),xe={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(ke){case"pt":Te=1;break;case"mm":Te=72/25.4;break;case"cm":Te=72/2.54;break;case"in":Te=72;break;case"px":Te=.75;break;case"pc":case"em":Te=12;break;case"ex":Te=6;break;default:throw"Invalid unit: "+ke}var r,Oe=0,Ee=0;if(xe.hasOwnProperty(Se))Oe=xe[Se][1]/Te,Ee=xe[Se][0]/Te;else try{Oe=_e[1],Ee=_e[0]}catch{throw new Error("Invalid format: "+_e)}if(Be==="p"||Be==="portrait")Be="p",Ee>Oe&&(r=Ee,Ee=Oe,Oe=r);else{if(Be!=="l"&&Be!=="landscape")throw"Invalid orientation: "+Be;Be="l",Oe>Ee&&(r=Ee,Ee=Oe,Oe=r)}return{width:Ee,height:Oe,unit:ke,k:Te,orientation:Be}},Re.html=function(Be,ke){(ke=ke||{}).callback=ke.callback||function(){},ke.html2canvas=ke.html2canvas||{},ke.html2canvas.canvas=ke.html2canvas.canvas||this.canvas,ke.jsPDF=ke.jsPDF||this,ke.fontFaces=ke.fontFaces?ke.fontFaces.map(jt):null;var _e=new Ie(ke);return ke.worker?_e:_e.from(Be).doCallback()}}(E.API),E.API.addJS=function(Re){return Ht=Re,this.internal.events.subscribe("postPutResources",function(){Ut=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Ut+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),zt=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Ht+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Ut!==void 0&&zt!==void 0&&this.internal.out("/Names <</JavaScript "+Ut+" 0 R>>")}),this},function(Re){var e;Re.events.push(["postPutResources",function(){var t=this,Pe=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var Me=t.outline.render().split(/\r\n/),Ie=0;Ie<Me.length;Ie++){var Be=Me[Ie],ke=Pe.exec(Be);if(ke!=null){var _e=ke[1];t.internal.newObjectDeferredBegin(_e,!1)}t.internal.write(Be)}if(this.outline.createNamedDestinations){var Ce=this.internal.pages.length,Te=[];for(Ie=0;Ie<Ce;Ie++){var Se=t.internal.newObject();Te.push(Se);var xe=t.internal.getPageInfo(Ie+1);t.internal.write("<< /D["+xe.objId+" 0 R /XYZ null null null]>> endobj")}var r=t.internal.newObject();for(t.internal.write("<< /Names [ "),Ie=0;Ie<Te.length;Ie++)t.internal.write("(page_"+(Ie+1)+")"+Te[Ie]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+r+" 0 R"),t.internal.write(">>","endobj")}}]),Re.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),Re.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(Pe,Me,Ie){var Be={title:Me,options:Ie,children:[]};return Pe==null&&(Pe=this.root),Pe.children.push(Be),Be},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(Pe){Pe.id=t.internal.newObjectDeferred();for(var Me=0;Me<Pe.children.length;Me++)this.genIds_r(Pe.children[Me])},t.outline.renderRoot=function(Pe){this.objStart(Pe),this.line("/Type /Outlines"),Pe.children.length>0&&(this.line("/First "+this.makeRef(Pe.children[0])),this.line("/Last "+this.makeRef(Pe.children[Pe.children.length-1]))),this.line("/Count "+this.count_r({count:0},Pe)),this.objEnd()},t.outline.renderItems=function(Pe){for(var Me=this.ctx.pdf.internal.getVerticalCoordinateString,Ie=0;Ie<Pe.children.length;Ie++){var Be=Pe.children[Ie];this.objStart(Be),this.line("/Title "+this.makeString(Be.title)),this.line("/Parent "+this.makeRef(Pe)),Ie>0&&this.line("/Prev "+this.makeRef(Pe.children[Ie-1])),Ie<Pe.children.length-1&&this.line("/Next "+this.makeRef(Pe.children[Ie+1])),Be.children.length>0&&(this.line("/First "+this.makeRef(Be.children[0])),this.line("/Last "+this.makeRef(Be.children[Be.children.length-1])));var ke=this.count=this.count_r({count:0},Be);if(ke>0&&this.line("/Count "+ke),Be.options&&Be.options.pageNumber){var _e=t.internal.getPageInfo(Be.options.pageNumber);this.line("/Dest ["+_e.objId+" 0 R /XYZ 0 "+Me(0)+" 0]")}this.objEnd()}for(var Ce=0;Ce<Pe.children.length;Ce++)this.renderItems(Pe.children[Ce])},t.outline.line=function(Pe){this.ctx.val+=Pe+`\r
`},t.outline.makeRef=function(Pe){return Pe.id+" 0 R"},t.outline.makeString=function(Pe){return"("+t.internal.pdfEscape(Pe)+")"},t.outline.objStart=function(Pe){this.ctx.val+=`\r
`+Pe.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(Pe,Me){for(var Ie=0;Ie<Me.children.length;Ie++)Pe.count++,this.count_r(Pe,Me.children[Ie]);return Pe.count}}])}(E.API),function(Re){var e=[192,193,194,195,196,197,198,199];Re.processJPEG=function(t,Pe,Me,Ie,Be,ke){var _e,Ce=this.decode.DCT_DECODE,Te=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=Be||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(_e=function(Se){for(var xe,r=256*Se.charCodeAt(4)+Se.charCodeAt(5),Oe=Se.length,Ee={width:0,height:0,numcomponents:1},Ae=4;Ae<Oe;Ae+=2){if(Ae+=r,e.indexOf(Se.charCodeAt(Ae+1))!==-1){xe=256*Se.charCodeAt(Ae+5)+Se.charCodeAt(Ae+6),Ee={width:256*Se.charCodeAt(Ae+7)+Se.charCodeAt(Ae+8),height:xe,numcomponents:Se.charCodeAt(Ae+9)};break}r=256*Se.charCodeAt(Ae+2)+Se.charCodeAt(Ae+3)}return Ee}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:ke=this.color_spaces.DEVICE_GRAY;break;case 4:ke=this.color_spaces.DEVICE_CMYK;break;case 3:ke=this.color_spaces.DEVICE_RGB}Te={data:t,width:_e.width,height:_e.height,colorSpace:ke,bitsPerComponent:8,filter:Ce,index:Pe,alias:Me}}return Te}}(E.API);var Vt,Gt,Yt,Jt,Xt,Kt=function(){var Re,e,t;function Pe(Ie){var Be,ke,_e,Ce,Te,Se,xe,r,Oe,Ee,Ae,Fe,De,ze;for(this.data=Ie,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},Se=null;;){switch(Be=this.readUInt32(),Oe=function(){var je,We;for(We=[],je=0;je<4;++je)We.push(String.fromCharCode(this.data[this.pos++]));return We}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(Be);break;case"fcTL":Se&&this.animation.frames.push(Se),this.pos+=4,Se={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},Te=this.readUInt16(),Ce=this.readUInt16()||100,Se.delay=1e3*Te/Ce,Se.disposeOp=this.data[this.pos++],Se.blendOp=this.data[this.pos++],Se.data=[];break;case"IDAT":case"fdAT":for(Oe==="fdAT"&&(this.pos+=4,Be-=4),Ie=(Se!=null?Se.data:void 0)||this.imgData,Fe=0;0<=Be?Fe<Be:Fe>Be;0<=Be?++Fe:--Fe)Ie.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(_e=this.palette.length/3,this.transparency.indexed=this.read(Be),this.transparency.indexed.length>_e)throw new Error("More transparent colors than palette size");if((Ee=_e-this.transparency.indexed.length)>0)for(De=0;0<=Ee?De<Ee:De>Ee;0<=Ee?++De:--De)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(Be)[0];break;case 2:this.transparency.rgb=this.read(Be)}break;case"tEXt":xe=(Ae=this.read(Be)).indexOf(0),r=String.fromCharCode.apply(String,Ae.slice(0,xe)),this.text[r]=String.fromCharCode.apply(String,Ae.slice(xe+1));break;case"IEND":return Se&&this.animation.frames.push(Se),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=(ze=this.colorType)===4||ze===6,ke=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*ke,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=Be}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}Pe.prototype.read=function(Ie){var Be,ke;for(ke=[],Be=0;0<=Ie?Be<Ie:Be>Ie;0<=Ie?++Be:--Be)ke.push(this.data[this.pos++]);return ke},Pe.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},Pe.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},Pe.prototype.decodePixels=function(Ie){var Be=this.pixelBitlength/8,ke=new Uint8Array(this.width*this.height*Be),_e=0,Ce=this;if(Ie==null&&(Ie=this.imgData),Ie.length===0)return new Uint8Array(0);function Te(Se,xe,r,Oe){var Ee,Ae,Fe,De,ze,je,We,Ge,Ye,Xe,Ke,er,Qe,nr,ir,cr,br,wr,xr,Sr,lr,fr=Math.ceil((Ce.width-Se)/r),$e=Math.ceil((Ce.height-xe)/Oe),Ve=Ce.width==fr&&Ce.height==$e;for(nr=Be*fr,er=Ve?ke:new Uint8Array(nr*$e),je=Ie.length,Qe=0,Ae=0;Qe<$e&&_e<je;){switch(Ie[_e++]){case 0:for(De=br=0;br<nr;De=br+=1)er[Ae++]=Ie[_e++];break;case 1:for(De=wr=0;wr<nr;De=wr+=1)Ee=Ie[_e++],ze=De<Be?0:er[Ae-Be],er[Ae++]=(Ee+ze)%256;break;case 2:for(De=xr=0;xr<nr;De=xr+=1)Ee=Ie[_e++],Fe=(De-De%Be)/Be,ir=Qe&&er[(Qe-1)*nr+Fe*Be+De%Be],er[Ae++]=(ir+Ee)%256;break;case 3:for(De=Sr=0;Sr<nr;De=Sr+=1)Ee=Ie[_e++],Fe=(De-De%Be)/Be,ze=De<Be?0:er[Ae-Be],ir=Qe&&er[(Qe-1)*nr+Fe*Be+De%Be],er[Ae++]=(Ee+Math.floor((ze+ir)/2))%256;break;case 4:for(De=lr=0;lr<nr;De=lr+=1)Ee=Ie[_e++],Fe=(De-De%Be)/Be,ze=De<Be?0:er[Ae-Be],Qe===0?ir=cr=0:(ir=er[(Qe-1)*nr+Fe*Be+De%Be],cr=Fe&&er[(Qe-1)*nr+(Fe-1)*Be+De%Be]),We=ze+ir-cr,Ge=Math.abs(We-ze),Xe=Math.abs(We-ir),Ke=Math.abs(We-cr),Ye=Ge<=Xe&&Ge<=Ke?ze:Xe<=Ke?ir:cr,er[Ae++]=(Ee+Ye)%256;break;default:throw new Error("Invalid filter algorithm: "+Ie[_e-1])}if(!Ve){var Je=((xe+Qe*Oe)*Ce.width+Se)*Be,Ze=Qe*nr;for(De=0;De<fr;De+=1){for(var St=0;St<Be;St+=1)ke[Je++]=er[Ze++];Je+=(r-1)*Be}}Qe++}}return Ie=unzlibSync(Ie),Ce.interlaceMethod==1?(Te(0,0,8,8),Te(4,0,8,8),Te(0,4,4,8),Te(2,0,4,4),Te(0,2,2,4),Te(1,0,2,2),Te(0,1,1,2)):Te(0,0,1,1),ke},Pe.prototype.decodePalette=function(){var Ie,Be,ke,_e,Ce,Te,Se,xe,r;for(ke=this.palette,Te=this.transparency.indexed||[],Ce=new Uint8Array((Te.length||0)+ke.length),_e=0,Ie=0,Be=Se=0,xe=ke.length;Se<xe;Be=Se+=3)Ce[_e++]=ke[Be],Ce[_e++]=ke[Be+1],Ce[_e++]=ke[Be+2],Ce[_e++]=(r=Te[Ie++])!=null?r:255;return Ce},Pe.prototype.copyToImageData=function(Ie,Be){var ke,_e,Ce,Te,Se,xe,r,Oe,Ee,Ae,Fe;if(_e=this.colors,Ee=null,ke=this.hasAlphaChannel,this.palette.length&&(Ee=(Fe=this._decodedPalette)!=null?Fe:this._decodedPalette=this.decodePalette(),_e=4,ke=!0),Oe=(Ce=Ie.data||Ie).length,Se=Ee||Be,Te=xe=0,_e===1)for(;Te<Oe;)r=Ee?4*Be[Te/4]:xe,Ae=Se[r++],Ce[Te++]=Ae,Ce[Te++]=Ae,Ce[Te++]=Ae,Ce[Te++]=ke?Se[r++]:255,xe=r;else for(;Te<Oe;)r=Ee?4*Be[Te/4]:xe,Ce[Te++]=Se[r++],Ce[Te++]=Se[r++],Ce[Te++]=Se[r++],Ce[Te++]=ke?Se[r++]:255,xe=r},Pe.prototype.decode=function(){var Ie;return Ie=new Uint8Array(this.width*this.height*4),this.copyToImageData(Ie,this.decodePixels()),Ie};var Me=function(){if(Object.prototype.toString.call(n)==="[object Window]"){try{e=n.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return Me(),Re=function(Ie){var Be;if(Me()===!0)return t.width=Ie.width,t.height=Ie.height,t.clearRect(0,0,Ie.width,Ie.height),t.putImageData(Ie,0,0),(Be=new Image).src=e.toDataURL(),Be;throw new Error("This method requires a Browser with Canvas-capability.")},Pe.prototype.decodeFrames=function(Ie){var Be,ke,_e,Ce,Te,Se,xe,r;if(this.animation){for(r=[],ke=Te=0,Se=(xe=this.animation.frames).length;Te<Se;ke=++Te)Be=xe[ke],_e=Ie.createImageData(Be.width,Be.height),Ce=this.decodePixels(new Uint8Array(Be.data)),this.copyToImageData(_e,Ce),Be.imageData=_e,r.push(Be.image=Re(_e));return r}},Pe.prototype.renderFrame=function(Ie,Be){var ke,_e,Ce;return ke=(_e=this.animation.frames)[Be],Ce=_e[Be-1],Be===0&&Ie.clearRect(0,0,this.width,this.height),(Ce!=null?Ce.disposeOp:void 0)===1?Ie.clearRect(Ce.xOffset,Ce.yOffset,Ce.width,Ce.height):(Ce!=null?Ce.disposeOp:void 0)===2&&Ie.putImageData(Ce.imageData,Ce.xOffset,Ce.yOffset),ke.blendOp===0&&Ie.clearRect(ke.xOffset,ke.yOffset,ke.width,ke.height),Ie.drawImage(ke.image,ke.xOffset,ke.yOffset)},Pe.prototype.animate=function(Ie){var Be,ke,_e,Ce,Te,Se,xe=this;return ke=0,Se=this.animation,Ce=Se.numFrames,_e=Se.frames,Te=Se.numPlays,(Be=function(){var r,Oe;if(r=ke++%Ce,Oe=_e[r],xe.renderFrame(Ie,r),Ce>1&&ke/Ce<Te)return xe.animation._timeout=setTimeout(Be,Oe.delay)})()},Pe.prototype.stopAnimation=function(){var Ie;return clearTimeout((Ie=this.animation)!=null?Ie._timeout:void 0)},Pe.prototype.render=function(Ie){var Be,ke;return Ie._png&&Ie._png.stopAnimation(),Ie._png=this,Ie.width=this.width,Ie.height=this.height,Be=Ie.getContext("2d"),this.animation?(this.decodeFrames(Be),this.animate(Be)):(ke=Be.createImageData(this.width,this.height),this.copyToImageData(ke,this.decodePixels()),Be.putImageData(ke,0,0))},Pe}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Zt(Re){var e=0;if(Re[e++]!==71||Re[e++]!==73||Re[e++]!==70||Re[e++]!==56||(Re[e++]+1&253)!=56||Re[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=Re[e++]|Re[e++]<<8,Pe=Re[e++]|Re[e++]<<8,Me=Re[e++],Ie=Me>>7,Be=1<<(7&Me)+1;Re[e++],Re[e++];var ke=null,_e=null;Ie&&(ke=e,_e=Be,e+=3*Be);var Ce=!0,Te=[],Se=0,xe=null,r=0,Oe=null;for(this.width=t,this.height=Pe;Ce&&e<Re.length;)switch(Re[e++]){case 33:switch(Re[e++]){case 255:if(Re[e]!==11||Re[e+1]==78&&Re[e+2]==69&&Re[e+3]==84&&Re[e+4]==83&&Re[e+5]==67&&Re[e+6]==65&&Re[e+7]==80&&Re[e+8]==69&&Re[e+9]==50&&Re[e+10]==46&&Re[e+11]==48&&Re[e+12]==3&&Re[e+13]==1&&Re[e+16]==0)e+=14,Oe=Re[e++]|Re[e++]<<8,e++;else for(e+=12;;){if(!((Qe=Re[e++])>=0))throw Error("Invalid block size");if(Qe===0)break;e+=Qe}break;case 249:if(Re[e++]!==4||Re[e+4]!==0)throw new Error("Invalid graphics extension block.");var Ee=Re[e++];Se=Re[e++]|Re[e++]<<8,xe=Re[e++],(1&Ee)==0&&(xe=null),r=Ee>>2&7,e++;break;case 254:for(;;){if(!((Qe=Re[e++])>=0))throw Error("Invalid block size");if(Qe===0)break;e+=Qe}break;default:throw new Error("Unknown graphic control label: 0x"+Re[e-1].toString(16))}break;case 44:var Ae=Re[e++]|Re[e++]<<8,Fe=Re[e++]|Re[e++]<<8,De=Re[e++]|Re[e++]<<8,ze=Re[e++]|Re[e++]<<8,je=Re[e++],We=je>>6&1,Ge=1<<(7&je)+1,Ye=ke,Xe=_e,Ke=!1;je>>7&&(Ke=!0,Ye=e,Xe=Ge,e+=3*Ge);var er=e;for(e++;;){var Qe;if(!((Qe=Re[e++])>=0))throw Error("Invalid block size");if(Qe===0)break;e+=Qe}Te.push({x:Ae,y:Fe,width:De,height:ze,has_local_palette:Ke,palette_offset:Ye,palette_size:Xe,data_offset:er,data_length:e-er,transparent_index:xe,interlaced:!!We,delay:Se,disposal:r});break;case 59:Ce=!1;break;default:throw new Error("Unknown gif block: 0x"+Re[e-1].toString(16))}this.numFrames=function(){return Te.length},this.loopCount=function(){return Oe},this.frameInfo=function(nr){if(nr<0||nr>=Te.length)throw new Error("Frame index out of range.");return Te[nr]},this.decodeAndBlitFrameBGRA=function(nr,ir){var cr=this.frameInfo(nr),br=cr.width*cr.height,wr=new Uint8Array(br);$t(Re,cr.data_offset,wr,br);var xr=cr.palette_offset,Sr=cr.transparent_index;Sr===null&&(Sr=256);var lr=cr.width,fr=t-lr,$e=lr,Ve=4*(cr.y*t+cr.x),Je=4*((cr.y+cr.height)*t+cr.x),Ze=Ve,St=4*fr;cr.interlaced===!0&&(St+=4*t*7);for(var vr=8,mr=0,Cr=wr.length;mr<Cr;++mr){var _r=wr[mr];if($e===0&&($e=lr,(Ze+=St)>=Je&&(St=4*fr+4*t*(vr-1),Ze=Ve+(lr+fr)*(vr<<1),vr>>=1)),_r===Sr)Ze+=4;else{var pr=Re[xr+3*_r],dr=Re[xr+3*_r+1],ur=Re[xr+3*_r+2];ir[Ze++]=ur,ir[Ze++]=dr,ir[Ze++]=pr,ir[Ze++]=255}--$e}},this.decodeAndBlitFrameRGBA=function(nr,ir){var cr=this.frameInfo(nr),br=cr.width*cr.height,wr=new Uint8Array(br);$t(Re,cr.data_offset,wr,br);var xr=cr.palette_offset,Sr=cr.transparent_index;Sr===null&&(Sr=256);var lr=cr.width,fr=t-lr,$e=lr,Ve=4*(cr.y*t+cr.x),Je=4*((cr.y+cr.height)*t+cr.x),Ze=Ve,St=4*fr;cr.interlaced===!0&&(St+=4*t*7);for(var vr=8,mr=0,Cr=wr.length;mr<Cr;++mr){var _r=wr[mr];if($e===0&&($e=lr,(Ze+=St)>=Je&&(St=4*fr+4*t*(vr-1),Ze=Ve+(lr+fr)*(vr<<1),vr>>=1)),_r===Sr)Ze+=4;else{var pr=Re[xr+3*_r],dr=Re[xr+3*_r+1],ur=Re[xr+3*_r+2];ir[Ze++]=pr,ir[Ze++]=dr,ir[Ze++]=ur,ir[Ze++]=255}--$e}}}function $t(Re,e,t,Pe){for(var Me=Re[e++],Ie=1<<Me,Be=Ie+1,ke=Be+1,_e=Me+1,Ce=(1<<_e)-1,Te=0,Se=0,xe=0,r=Re[e++],Oe=new Int32Array(4096),Ee=null;;){for(;Te<16&&r!==0;)Se|=Re[e++]<<Te,Te+=8,r===1?r=Re[e++]:--r;if(Te<_e)break;var Ae=Se&Ce;if(Se>>=_e,Te-=_e,Ae!==Ie){if(Ae===Be)break;for(var Fe=Ae<ke?Ae:Ee,De=0,ze=Fe;ze>Ie;)ze=Oe[ze]>>8,++De;var je=ze;if(xe+De+(Fe!==Ae?1:0)>Pe)return void a.log("Warning, gif stream longer than expected.");t[xe++]=je;var We=xe+=De;for(Fe!==Ae&&(t[xe++]=je),ze=Fe;De--;)ze=Oe[ze],t[--We]=255&ze,ze>>=8;Ee!==null&&ke<4096&&(Oe[ke++]=Ee<<8|je,ke>=Ce+1&&_e<12&&(++_e,Ce=Ce<<1|1)),Ee=Ae}else ke=Be+1,Ce=(1<<(_e=Me+1))-1,Ee=null}return xe!==Pe&&a.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Qt(Re){var e,t,Pe,Me,Ie,Be=Math.floor,ke=new Array(64),_e=new Array(64),Ce=new Array(64),Te=new Array(64),Se=new Array(65535),xe=new Array(65535),r=new Array(64),Oe=new Array(64),Ee=[],Ae=0,Fe=7,De=new Array(64),ze=new Array(64),je=new Array(64),We=new Array(256),Ge=new Array(2048),Ye=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],Xe=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Ke=[0,1,2,3,4,5,6,7,8,9,10,11],er=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],Qe=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],nr=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],ir=[0,1,2,3,4,5,6,7,8,9,10,11],cr=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],br=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function wr(Ve,Je){for(var Ze=0,St=0,vr=new Array,mr=1;mr<=16;mr++){for(var Cr=1;Cr<=Ve[mr];Cr++)vr[Je[St]]=[],vr[Je[St]][0]=Ze,vr[Je[St]][1]=mr,St++,Ze++;Ze*=2}return vr}function xr(Ve){for(var Je=Ve[0],Ze=Ve[1]-1;Ze>=0;)Je&1<<Ze&&(Ae|=1<<Fe),Ze--,--Fe<0&&(Ae==255?(Sr(255),Sr(0)):Sr(Ae),Fe=7,Ae=0)}function Sr(Ve){Ee.push(Ve)}function lr(Ve){Sr(Ve>>8&255),Sr(255&Ve)}function fr(Ve,Je,Ze,St,vr){for(var mr,Cr=vr[0],_r=vr[240],pr=function(Mr,Gr){var zr,Ir,Qr,rn,sn,pn,mn,Sn,Cn,Xr,Er=0;for(Cn=0;Cn<8;++Cn){zr=Mr[Er],Ir=Mr[Er+1],Qr=Mr[Er+2],rn=Mr[Er+3],sn=Mr[Er+4],pn=Mr[Er+5],mn=Mr[Er+6];var Rr=zr+(Sn=Mr[Er+7]),Dr=zr-Sn,Br=Ir+mn,Wr=Ir-mn,Ur=Qr+pn,Hr=Qr-pn,$r=rn+sn,Kr=rn-sn,tn=Rr+$r,yn=Rr-$r,Pn=Br+Ur,bn=Br-Ur;Mr[Er]=tn+Pn,Mr[Er+4]=tn-Pn;var dn=.707106781*(bn+yn);Mr[Er+2]=yn+dn,Mr[Er+6]=yn-dn;var Tn=.382683433*((tn=Kr+Hr)-(bn=Wr+Dr)),xn=.5411961*tn+Tn,Nn=1.306562965*bn+Tn,In=.707106781*(Pn=Hr+Wr),Bn=Dr+In,Fn=Dr-In;Mr[Er+5]=Fn+xn,Mr[Er+3]=Fn-xn,Mr[Er+1]=Bn+Nn,Mr[Er+7]=Bn-Nn,Er+=8}for(Er=0,Cn=0;Cn<8;++Cn){zr=Mr[Er],Ir=Mr[Er+8],Qr=Mr[Er+16],rn=Mr[Er+24],sn=Mr[Er+32],pn=Mr[Er+40],mn=Mr[Er+48];var qn=zr+(Sn=Mr[Er+56]),ni=zr-Sn,si=Ir+mn,ii=Ir-mn,fi=Qr+pn,ki=Qr-pn,Zr=rn+sn,_n=rn-sn,Jr=qn+Zr,cn=qn-Zr,jn=si+fi,Vn=si-fi;Mr[Er]=Jr+jn,Mr[Er+32]=Jr-jn;var Yn=.707106781*(Vn+cn);Mr[Er+16]=cn+Yn,Mr[Er+48]=cn-Yn;var Xn=.382683433*((Jr=_n+ki)-(Vn=ii+ni)),li=.5411961*Jr+Xn,Pi=1.306562965*Vn+Xn,Gi=.707106781*(jn=ki+ii),gi=ni+Gi,ji=ni-Gi;Mr[Er+40]=ji+li,Mr[Er+24]=ji-li,Mr[Er+8]=gi+Pi,Mr[Er+56]=gi-Pi,Er++}for(Cn=0;Cn<64;++Cn)Xr=Mr[Cn]*Gr[Cn],r[Cn]=Xr>0?Xr+.5|0:Xr-.5|0;return r}(Ve,Je),dr=0;dr<64;++dr)Oe[Ye[dr]]=pr[dr];var ur=Oe[0]-Ze;Ze=Oe[0],ur==0?xr(St[0]):(xr(St[xe[mr=32767+ur]]),xr(Se[mr]));for(var rr=63;rr>0&&Oe[rr]==0;)rr--;if(rr==0)return xr(Cr),Ze;for(var gr,hr=1;hr<=rr;){for(var sr=hr;Oe[hr]==0&&hr<=rr;)++hr;var Ar=hr-sr;if(Ar>=16){gr=Ar>>4;for(var Or=1;Or<=gr;++Or)xr(_r);Ar&=15}mr=32767+Oe[hr],xr(vr[(Ar<<4)+xe[mr]]),xr(Se[mr]),hr++}return rr!=63&&xr(Cr),Ze}function $e(Ve){Ve=Math.min(Math.max(Ve,1),100),Ie!=Ve&&(function(Je){for(var Ze=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],St=0;St<64;St++){var vr=Be((Ze[St]*Je+50)/100);vr=Math.min(Math.max(vr,1),255),ke[Ye[St]]=vr}for(var mr=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Cr=0;Cr<64;Cr++){var _r=Be((mr[Cr]*Je+50)/100);_r=Math.min(Math.max(_r,1),255),_e[Ye[Cr]]=_r}for(var pr=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],dr=0,ur=0;ur<8;ur++)for(var rr=0;rr<8;rr++)Ce[dr]=1/(ke[Ye[dr]]*pr[ur]*pr[rr]*8),Te[dr]=1/(_e[Ye[dr]]*pr[ur]*pr[rr]*8),dr++}(Ve<50?Math.floor(5e3/Ve):Math.floor(200-2*Ve)),Ie=Ve)}this.encode=function(Ve,Je){Je&&$e(Je),Ee=new Array,Ae=0,Fe=7,lr(65496),lr(65504),lr(16),Sr(74),Sr(70),Sr(73),Sr(70),Sr(0),Sr(1),Sr(1),Sr(0),lr(1),lr(1),Sr(0),Sr(0),function(){lr(65499),lr(132),Sr(0);for(var Ir=0;Ir<64;Ir++)Sr(ke[Ir]);Sr(1);for(var Qr=0;Qr<64;Qr++)Sr(_e[Qr])}(),function(Ir,Qr){lr(65472),lr(17),Sr(8),lr(Qr),lr(Ir),Sr(3),Sr(1),Sr(17),Sr(0),Sr(2),Sr(17),Sr(1),Sr(3),Sr(17),Sr(1)}(Ve.width,Ve.height),function(){lr(65476),lr(418),Sr(0);for(var Ir=0;Ir<16;Ir++)Sr(Xe[Ir+1]);for(var Qr=0;Qr<=11;Qr++)Sr(Ke[Qr]);Sr(16);for(var rn=0;rn<16;rn++)Sr(er[rn+1]);for(var sn=0;sn<=161;sn++)Sr(Qe[sn]);Sr(1);for(var pn=0;pn<16;pn++)Sr(nr[pn+1]);for(var mn=0;mn<=11;mn++)Sr(ir[mn]);Sr(17);for(var Sn=0;Sn<16;Sn++)Sr(cr[Sn+1]);for(var Cn=0;Cn<=161;Cn++)Sr(br[Cn])}(),lr(65498),lr(12),Sr(3),Sr(1),Sr(0),Sr(2),Sr(17),Sr(3),Sr(17),Sr(0),Sr(63),Sr(0);var Ze=0,St=0,vr=0;Ae=0,Fe=7,this.encode.displayName="_encode_";for(var mr,Cr,_r,pr,dr,ur,rr,gr,hr,sr=Ve.data,Ar=Ve.width,Or=Ve.height,Mr=4*Ar,Gr=0;Gr<Or;){for(mr=0;mr<Mr;){for(dr=Mr*Gr+mr,rr=-1,gr=0,hr=0;hr<64;hr++)ur=dr+(gr=hr>>3)*Mr+(rr=4*(7&hr)),Gr+gr>=Or&&(ur-=Mr*(Gr+1+gr-Or)),mr+rr>=Mr&&(ur-=mr+rr-Mr+4),Cr=sr[ur++],_r=sr[ur++],pr=sr[ur++],De[hr]=(Ge[Cr]+Ge[_r+256>>0]+Ge[pr+512>>0]>>16)-128,ze[hr]=(Ge[Cr+768>>0]+Ge[_r+1024>>0]+Ge[pr+1280>>0]>>16)-128,je[hr]=(Ge[Cr+1280>>0]+Ge[_r+1536>>0]+Ge[pr+1792>>0]>>16)-128;Ze=fr(De,Ce,Ze,e,Pe),St=fr(ze,Te,St,t,Me),vr=fr(je,Te,vr,t,Me),mr+=32}Gr+=8}if(Fe>=0){var zr=[];zr[1]=Fe+1,zr[0]=(1<<Fe+1)-1,xr(zr)}return lr(65497),new Uint8Array(Ee)},Re=Re||50,function(){for(var Ve=String.fromCharCode,Je=0;Je<256;Je++)We[Je]=Ve(Je)}(),e=wr(Xe,Ke),t=wr(nr,ir),Pe=wr(er,Qe),Me=wr(cr,br),function(){for(var Ve=1,Je=2,Ze=1;Ze<=15;Ze++){for(var St=Ve;St<Je;St++)xe[32767+St]=Ze,Se[32767+St]=[],Se[32767+St][1]=Ze,Se[32767+St][0]=St;for(var vr=-(Je-1);vr<=-Ve;vr++)xe[32767+vr]=Ze,Se[32767+vr]=[],Se[32767+vr][1]=Ze,Se[32767+vr][0]=Je-1+vr;Ve<<=1,Je<<=1}}(),function(){for(var Ve=0;Ve<256;Ve++)Ge[Ve]=19595*Ve,Ge[Ve+256>>0]=38470*Ve,Ge[Ve+512>>0]=7471*Ve+32768,Ge[Ve+768>>0]=-11059*Ve,Ge[Ve+1024>>0]=-21709*Ve,Ge[Ve+1280>>0]=32768*Ve+8421375,Ge[Ve+1536>>0]=-27439*Ve,Ge[Ve+1792>>0]=-5329*Ve}(),$e(Re)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function te(Re,e){if(this.pos=0,this.buffer=Re,this.datav=new DataView(Re.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function ee(Re){function e(Xe){if(!Xe)throw Error("assert :P")}function t(Xe,Ke,er){for(var Qe=0;4>Qe;Qe++)if(Xe[Ke+Qe]!=er.charCodeAt(Qe))return!0;return!1}function Pe(Xe,Ke,er,Qe,nr){for(var ir=0;ir<nr;ir++)Xe[Ke+ir]=er[Qe+ir]}function Me(Xe,Ke,er,Qe){for(var nr=0;nr<Qe;nr++)Xe[Ke+nr]=er}function Ie(Xe){return new Int32Array(Xe)}function Be(Xe,Ke){for(var er=[],Qe=0;Qe<Xe;Qe++)er.push(new Ke);return er}function ke(Xe,Ke){var er=[];return function Qe(nr,ir,cr){for(var br=cr[ir],wr=0;wr<br&&(nr.push(cr.length>ir+1?[]:new Ke),!(cr.length<ir+1));wr++)Qe(nr[wr],ir+1,cr)}(er,0,Xe),er}var _e=function(){var Xe=this;function Ke(Ue,qe){for(var or=1<<qe-1>>>0;Ue&or;)or>>>=1;return or?(Ue&or-1)+or:Ue}function er(Ue,qe,or,yr,Pr){e(!(yr%or));do Ue[qe+(yr-=or)]=Pr;while(0<yr)}function Qe(Ue,qe,or,yr,Pr){if(e(2328>=Pr),512>=Pr)var Lr=Ie(512);else if((Lr=Ie(Pr))==null)return 0;return function(Fr,Nr,jr,Vr,nn,vn){var gn,un,Rn=Nr,wn=1<<jr,an=Ie(16),on=Ie(16);for(e(nn!=0),e(Vr!=null),e(Fr!=null),e(0<jr),un=0;un<nn;++un){if(15<Vr[un])return 0;++an[Vr[un]]}if(an[0]==nn)return 0;for(on[1]=0,gn=1;15>gn;++gn){if(an[gn]>1<<gn)return 0;on[gn+1]=on[gn]+an[gn]}for(un=0;un<nn;++un)gn=Vr[un],0<Vr[un]&&(vn[on[gn]++]=un);if(on[15]==1)return(Vr=new nr).g=0,Vr.value=vn[0],er(Fr,Rn,1,wn,Vr),wn;var On,Mn=-1,En=wn-1,Hn=0,zn=1,Jn=1,Un=1<<jr;for(un=0,gn=1,nn=2;gn<=jr;++gn,nn<<=1){if(zn+=Jn<<=1,0>(Jn-=an[gn]))return 0;for(;0<an[gn];--an[gn])(Vr=new nr).g=gn,Vr.value=vn[un++],er(Fr,Rn+Hn,nn,Un,Vr),Hn=Ke(Hn,gn)}for(gn=jr+1,nn=2;15>=gn;++gn,nn<<=1){if(zn+=Jn<<=1,0>(Jn-=an[gn]))return 0;for(;0<an[gn];--an[gn]){if(Vr=new nr,(Hn&En)!=Mn){for(Rn+=Un,On=1<<(Mn=gn)-jr;15>Mn&&!(0>=(On-=an[Mn]));)++Mn,On<<=1;wn+=Un=1<<(On=Mn-jr),Fr[Nr+(Mn=Hn&En)].g=On+jr,Fr[Nr+Mn].value=Rn-Nr-Mn}Vr.g=gn-jr,Vr.value=vn[un++],er(Fr,Rn+(Hn>>jr),nn,Un,Vr),Hn=Ke(Hn,gn)}}return zn!=2*on[15]-1?0:wn}(Ue,qe,or,yr,Pr,Lr)}function nr(){this.value=this.g=0}function ir(){this.value=this.g=0}function cr(){this.G=Be(5,nr),this.H=Ie(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=Be(ca,ir)}function br(Ue,qe,or,yr){e(Ue!=null),e(qe!=null),e(2147483648>yr),Ue.Ca=254,Ue.I=0,Ue.b=-8,Ue.Ka=0,Ue.oa=qe,Ue.pa=or,Ue.Jd=qe,Ue.Yc=or+yr,Ue.Zc=4<=yr?or+yr-4+1:or,mr(Ue)}function wr(Ue,qe){for(var or=0;0<qe--;)or|=_r(Ue,128)<<qe;return or}function xr(Ue,qe){var or=wr(Ue,qe);return Cr(Ue)?-or:or}function Sr(Ue,qe,or,yr){var Pr,Lr=0;for(e(Ue!=null),e(qe!=null),e(4294967288>yr),Ue.Sb=yr,Ue.Ra=0,Ue.u=0,Ue.h=0,4<yr&&(yr=4),Pr=0;Pr<yr;++Pr)Lr+=qe[or+Pr]<<8*Pr;Ue.Ra=Lr,Ue.bb=yr,Ue.oa=qe,Ue.pa=or}function lr(Ue){for(;8<=Ue.u&&Ue.bb<Ue.Sb;)Ue.Ra>>>=8,Ue.Ra+=Ue.oa[Ue.pa+Ue.bb]<<Xo-8>>>0,++Ue.bb,Ue.u-=8;Ze(Ue)&&(Ue.h=1,Ue.u=0)}function fr(Ue,qe){if(e(0<=qe),!Ue.h&&qe<=Lo){var or=Je(Ue)&Ma[qe];return Ue.u+=qe,lr(Ue),or}return Ue.h=1,Ue.u=0}function $e(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function Ve(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Je(Ue){return Ue.Ra>>>(Ue.u&Xo-1)>>>0}function Ze(Ue){return e(Ue.bb<=Ue.Sb),Ue.h||Ue.bb==Ue.Sb&&Ue.u>Xo}function St(Ue,qe){Ue.u=qe,Ue.h=Ze(Ue)}function vr(Ue){Ue.u>=_o&&(e(Ue.u>=_o),lr(Ue))}function mr(Ue){e(Ue!=null&&Ue.oa!=null),Ue.pa<Ue.Zc?(Ue.I=(Ue.oa[Ue.pa++]|Ue.I<<8)>>>0,Ue.b+=8):(e(Ue!=null&&Ue.oa!=null),Ue.pa<Ue.Yc?(Ue.b+=8,Ue.I=Ue.oa[Ue.pa++]|Ue.I<<8):Ue.Ka?Ue.b=0:(Ue.I<<=8,Ue.b+=8,Ue.Ka=1))}function Cr(Ue){return wr(Ue,1)}function _r(Ue,qe){var or=Ue.Ca;0>Ue.b&&mr(Ue);var yr=Ue.b,Pr=or*qe>>>8,Lr=(Ue.I>>>yr>Pr)+0;for(Lr?(or-=Pr,Ue.I-=Pr+1<<yr>>>0):or=Pr+1,yr=or,Pr=0;256<=yr;)Pr+=8,yr>>=8;return yr=7^Pr+ha[yr],Ue.b-=yr,Ue.Ca=(or<<yr)-1,Lr}function pr(Ue,qe,or){Ue[qe+0]=or>>24&255,Ue[qe+1]=or>>16&255,Ue[qe+2]=or>>8&255,Ue[qe+3]=or>>0&255}function dr(Ue,qe){return Ue[qe+0]<<0|Ue[qe+1]<<8}function ur(Ue,qe){return dr(Ue,qe)|Ue[qe+2]<<16}function rr(Ue,qe){return dr(Ue,qe)|dr(Ue,qe+2)<<16}function gr(Ue,qe){var or=1<<qe;return e(Ue!=null),e(0<qe),Ue.X=Ie(or),Ue.X==null?0:(Ue.Mb=32-qe,Ue.Xa=qe,1)}function hr(Ue,qe){e(Ue!=null),e(qe!=null),e(Ue.Xa==qe.Xa),Pe(qe.X,0,Ue.X,0,1<<qe.Xa)}function sr(){this.X=[],this.Xa=this.Mb=0}function Ar(Ue,qe,or,yr){e(or!=null),e(yr!=null);var Pr=or[0],Lr=yr[0];return Pr==0&&(Pr=(Ue*Lr+qe/2)/qe),Lr==0&&(Lr=(qe*Pr+Ue/2)/Ue),0>=Pr||0>=Lr?0:(or[0]=Pr,yr[0]=Lr,1)}function Or(Ue,qe){return Ue+(1<<qe)-1>>>qe}function Mr(Ue,qe){return((4278255360&Ue)+(4278255360&qe)>>>0&4278255360)+((16711935&Ue)+(16711935&qe)>>>0&16711935)>>>0}function Gr(Ue,qe){Xe[qe]=function(or,yr,Pr,Lr,Fr,Nr,jr){var Vr;for(Vr=0;Vr<Fr;++Vr){var nn=Xe[Ue](Nr[jr+Vr-1],Pr,Lr+Vr);Nr[jr+Vr]=Mr(or[yr+Vr],nn)}}}function zr(){this.ud=this.hd=this.jd=0}function Ir(Ue,qe){return((4278124286&(Ue^qe))>>>1)+(Ue&qe)>>>0}function Qr(Ue){return 0<=Ue&&256>Ue?Ue:0>Ue?0:255<Ue?255:void 0}function rn(Ue,qe){return Qr(Ue+(Ue-qe+.5>>1))}function sn(Ue,qe,or){return Math.abs(qe-or)-Math.abs(Ue-or)}function pn(Ue,qe,or,yr,Pr,Lr,Fr){for(yr=Lr[Fr-1],or=0;or<Pr;++or)Lr[Fr+or]=yr=Mr(Ue[qe+or],yr)}function mn(Ue,qe,or,yr,Pr){var Lr;for(Lr=0;Lr<or;++Lr){var Fr=Ue[qe+Lr],Nr=Fr>>8&255,jr=16711935&(jr=(jr=16711935&Fr)+((Nr<<16)+Nr));yr[Pr+Lr]=(4278255360&Fr)+jr>>>0}}function Sn(Ue,qe){qe.jd=Ue>>0&255,qe.hd=Ue>>8&255,qe.ud=Ue>>16&255}function Cn(Ue,qe,or,yr,Pr,Lr){var Fr;for(Fr=0;Fr<yr;++Fr){var Nr=qe[or+Fr],jr=Nr>>>8,Vr=Nr,nn=255&(nn=(nn=Nr>>>16)+((Ue.jd<<24>>24)*(jr<<24>>24)>>>5));Vr=255&(Vr=(Vr=Vr+((Ue.hd<<24>>24)*(jr<<24>>24)>>>5))+((Ue.ud<<24>>24)*(nn<<24>>24)>>>5)),Pr[Lr+Fr]=(4278255360&Nr)+(nn<<16)+Vr}}function Xr(Ue,qe,or,yr,Pr){Xe[qe]=function(Lr,Fr,Nr,jr,Vr,nn,vn,gn,un){for(jr=vn;jr<gn;++jr)for(vn=0;vn<un;++vn)Vr[nn++]=Pr(Nr[yr(Lr[Fr++])])},Xe[Ue]=function(Lr,Fr,Nr,jr,Vr,nn,vn){var gn=8>>Lr.b,un=Lr.Ea,Rn=Lr.K[0],wn=Lr.w;if(8>gn)for(Lr=(1<<Lr.b)-1,wn=(1<<gn)-1;Fr<Nr;++Fr){var an,on=0;for(an=0;an<un;++an)an&Lr||(on=yr(jr[Vr++])),nn[vn++]=Pr(Rn[on&wn]),on>>=gn}else Xe["VP8LMapColor"+or](jr,Vr,Rn,wn,nn,vn,Fr,Nr,un)}}function Er(Ue,qe,or,yr,Pr){for(or=qe+or;qe<or;){var Lr=Ue[qe++];yr[Pr++]=Lr>>16&255,yr[Pr++]=Lr>>8&255,yr[Pr++]=Lr>>0&255}}function Rr(Ue,qe,or,yr,Pr){for(or=qe+or;qe<or;){var Lr=Ue[qe++];yr[Pr++]=Lr>>16&255,yr[Pr++]=Lr>>8&255,yr[Pr++]=Lr>>0&255,yr[Pr++]=Lr>>24&255}}function Dr(Ue,qe,or,yr,Pr){for(or=qe+or;qe<or;){var Lr=(Fr=Ue[qe++])>>16&240|Fr>>12&15,Fr=Fr>>0&240|Fr>>28&15;yr[Pr++]=Lr,yr[Pr++]=Fr}}function Br(Ue,qe,or,yr,Pr){for(or=qe+or;qe<or;){var Lr=(Fr=Ue[qe++])>>16&248|Fr>>13&7,Fr=Fr>>5&224|Fr>>3&31;yr[Pr++]=Lr,yr[Pr++]=Fr}}function Wr(Ue,qe,or,yr,Pr){for(or=qe+or;qe<or;){var Lr=Ue[qe++];yr[Pr++]=Lr>>0&255,yr[Pr++]=Lr>>8&255,yr[Pr++]=Lr>>16&255}}function Ur(Ue,qe,or,yr,Pr,Lr){if(Lr==0)for(or=qe+or;qe<or;)pr(yr,((Lr=Ue[qe++])[0]>>24|Lr[1]>>8&65280|Lr[2]<<8&16711680|Lr[3]<<24)>>>0),Pr+=32;else Pe(yr,Pr,Ue,qe,or)}function Hr(Ue,qe){Xe[qe][0]=Xe[Ue+"0"],Xe[qe][1]=Xe[Ue+"1"],Xe[qe][2]=Xe[Ue+"2"],Xe[qe][3]=Xe[Ue+"3"],Xe[qe][4]=Xe[Ue+"4"],Xe[qe][5]=Xe[Ue+"5"],Xe[qe][6]=Xe[Ue+"6"],Xe[qe][7]=Xe[Ue+"7"],Xe[qe][8]=Xe[Ue+"8"],Xe[qe][9]=Xe[Ue+"9"],Xe[qe][10]=Xe[Ue+"10"],Xe[qe][11]=Xe[Ue+"11"],Xe[qe][12]=Xe[Ue+"12"],Xe[qe][13]=Xe[Ue+"13"],Xe[qe][14]=Xe[Ue+"0"],Xe[qe][15]=Xe[Ue+"0"]}function $r(Ue){return Ue==ul||Ue==cl||Ue==Us||Ue==Jo}function Kr(){this.eb=[],this.size=this.A=this.fb=0}function tn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function yn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Kr,this.f.kb=new tn,this.sd=null}function Pn(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function bn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function dn(Ue){return alert("todo:WebPSamplerProcessPlane"),Ue.T}function Tn(Ue,qe){var or=Ue.T,yr=qe.ba.f.RGBA,Pr=yr.eb,Lr=yr.fb+Ue.ka*yr.A,Fr=ri[qe.ba.S],Nr=Ue.y,jr=Ue.O,Vr=Ue.f,nn=Ue.N,vn=Ue.ea,gn=Ue.W,un=qe.cc,Rn=qe.dc,wn=qe.Mc,an=qe.Nc,on=Ue.ka,On=Ue.ka+Ue.T,Mn=Ue.U,En=Mn+1>>1;for(on==0?Fr(Nr,jr,null,null,Vr,nn,vn,gn,Vr,nn,vn,gn,Pr,Lr,null,null,Mn):(Fr(qe.ec,qe.fc,Nr,jr,un,Rn,wn,an,Vr,nn,vn,gn,Pr,Lr-yr.A,Pr,Lr,Mn),++or);on+2<On;on+=2)un=Vr,Rn=nn,wn=vn,an=gn,nn+=Ue.Rc,gn+=Ue.Rc,Lr+=2*yr.A,Fr(Nr,(jr+=2*Ue.fa)-Ue.fa,Nr,jr,un,Rn,wn,an,Vr,nn,vn,gn,Pr,Lr-yr.A,Pr,Lr,Mn);return jr+=Ue.fa,Ue.j+On<Ue.o?(Pe(qe.ec,qe.fc,Nr,jr,Mn),Pe(qe.cc,qe.dc,Vr,nn,En),Pe(qe.Mc,qe.Nc,vn,gn,En),or--):1&On||Fr(Nr,jr,null,null,Vr,nn,vn,gn,Vr,nn,vn,gn,Pr,Lr+yr.A,null,null,Mn),or}function xn(Ue,qe,or){var yr=Ue.F,Pr=[Ue.J];if(yr!=null){var Lr=Ue.U,Fr=qe.ba.S,Nr=Fr==Ss||Fr==Us;qe=qe.ba.f.RGBA;var jr=[0],Vr=Ue.ka;jr[0]=Ue.T,Ue.Kb&&(Vr==0?--jr[0]:(--Vr,Pr[0]-=Ue.width),Ue.j+Ue.ka+Ue.T==Ue.o&&(jr[0]=Ue.o-Ue.j-Vr));var nn=qe.eb;Vr=qe.fb+Vr*qe.A,Ue=Ds(yr,Pr[0],Ue.width,Lr,jr,nn,Vr+(Nr?0:3),qe.A),e(or==jr),Ue&&$r(Fr)&&wo(nn,Vr,Nr,Lr,jr,qe.A)}return 0}function Nn(Ue){var qe=Ue.ma,or=qe.ba.S,yr=11>or,Pr=or==_s||or==zs||or==Ss||or==ll||or==12||$r(or);if(qe.memory=null,qe.Ib=null,qe.Jb=null,qe.Nd=null,!yo(qe.Oa,Ue,Pr?11:12))return 0;if(Pr&&$r(or)&&Wn(),Ue.da)alert("todo:use_scaling");else{if(yr){if(qe.Ib=dn,Ue.Kb){if(or=Ue.U+1>>1,qe.memory=Ie(Ue.U+2*or),qe.memory==null)return 0;qe.ec=qe.memory,qe.fc=0,qe.cc=qe.ec,qe.dc=qe.fc+Ue.U,qe.Mc=qe.cc,qe.Nc=qe.dc+or,qe.Ib=Tn,Wn()}}else alert("todo:EmitYUV");Pr&&(qe.Jb=xn,yr&&An())}if(yr&&!Yl){for(Ue=0;256>Ue;++Ue)vu[Ue]=89858*(Ue-128)+Al>>xl,yu[Ue]=-22014*(Ue-128)+Al,mu[Ue]=-45773*(Ue-128),gu[Ue]=113618*(Ue-128)+Al>>xl;for(Ue=pl;Ue<Il;++Ue)qe=76283*(Ue-16)+Al>>xl,bu[Ue-pl]=qi(qe,255),_u[Ue-pl]=qi(qe+8>>4,15);Yl=1}return 1}function In(Ue){var qe=Ue.ma,or=Ue.U,yr=Ue.T;return e(!(1&Ue.ka)),0>=or||0>=yr?0:(or=qe.Ib(Ue,qe),qe.Jb!=null&&qe.Jb(Ue,qe,or),qe.Dc+=or,1)}function Bn(Ue){Ue.ma.memory=null}function Fn(Ue,qe,or,yr){return fr(Ue,8)!=47?0:(qe[0]=fr(Ue,14)+1,or[0]=fr(Ue,14)+1,yr[0]=fr(Ue,1),fr(Ue,3)!=0?0:!Ue.h)}function qn(Ue,qe){if(4>Ue)return Ue+1;var or=Ue-2>>1;return(2+(1&Ue)<<or)+fr(qe,or)+1}function ni(Ue,qe){return 120<qe?qe-120:1<=(or=((or=hn[qe-1])>>4)*Ue+(8-(15&or)))?or:1;var or}function si(Ue,qe,or){var yr=Je(or),Pr=Ue[qe+=255&yr].g-8;return 0<Pr&&(St(or,or.u+8),yr=Je(or),qe+=Ue[qe].value,qe+=yr&(1<<Pr)-1),St(or,or.u+Ue[qe].g),Ue[qe].value}function ii(Ue,qe,or){return or.g+=Ue.g,or.value+=Ue.value<<qe>>>0,e(8>=or.g),Ue.g}function fi(Ue,qe,or){var yr=Ue.xc;return e((qe=yr==0?0:Ue.vc[Ue.md*(or>>yr)+(qe>>yr)])<Ue.Wb),Ue.Ya[qe]}function ki(Ue,qe,or,yr){var Pr=Ue.ab,Lr=Ue.c*qe,Fr=Ue.C;qe=Fr+qe;var Nr=or,jr=yr;for(yr=Ue.Ta,or=Ue.Ua;0<Pr--;){var Vr=Ue.gc[Pr],nn=Fr,vn=qe,gn=Nr,un=jr,Rn=(jr=yr,Nr=or,Vr.Ea);switch(e(nn<vn),e(vn<=Vr.nc),Vr.hc){case 2:Is(gn,un,(vn-nn)*Rn,jr,Nr);break;case 0:var wn=nn,an=vn,on=jr,On=Nr,Mn=(Un=Vr).Ea;wn==0&&(nl(gn,un,null,null,1,on,On),pn(gn,un+1,0,0,Mn-1,on,On+1),un+=Mn,On+=Mn,++wn);for(var En=1<<Un.b,Hn=En-1,zn=Or(Mn,Un.b),Jn=Un.K,Un=Un.w+(wn>>Un.b)*zn;wn<an;){var yi=Jn,Si=Un,vi=1;for(vs(gn,un,on,On-Mn,1,on,On);vi<Mn;){var hi=(vi&~Hn)+En;hi>Mn&&(hi=Mn),(0,So[yi[Si++]>>8&15])(gn,un+ +vi,on,On+vi-Mn,hi-vi,on,On+vi),vi=hi}un+=Mn,On+=Mn,++wn&Hn||(Un+=zn)}vn!=Vr.nc&&Pe(jr,Nr-Rn,jr,Nr+(vn-nn-1)*Rn,Rn);break;case 1:for(Rn=gn,an=un,Mn=(gn=Vr.Ea)-(On=gn&~(on=(un=1<<Vr.b)-1)),wn=Or(gn,Vr.b),En=Vr.K,Vr=Vr.w+(nn>>Vr.b)*wn;nn<vn;){for(Hn=En,zn=Vr,Jn=new zr,Un=an+On,yi=an+gn;an<Un;)Sn(Hn[zn++],Jn),Pa(Jn,Rn,an,un,jr,Nr),an+=un,Nr+=un;an<yi&&(Sn(Hn[zn++],Jn),Pa(Jn,Rn,an,Mn,jr,Nr),an+=Mn,Nr+=Mn),++nn&on||(Vr+=wn)}break;case 3:if(gn==jr&&un==Nr&&0<Vr.b){for(an=jr,gn=Rn=Nr+(vn-nn)*Rn-(On=(vn-nn)*Or(Vr.Ea,Vr.b)),un=jr,on=Nr,wn=[],On=(Mn=On)-1;0<=On;--On)wn[On]=un[on+On];for(On=Mn-1;0<=On;--On)an[gn+On]=wn[On];Na(Vr,nn,vn,jr,Rn,jr,Nr)}else Na(Vr,nn,vn,gn,un,jr,Nr)}Nr=yr,jr=or}jr!=or&&Pe(yr,or,Nr,jr,Lr)}function Zr(Ue,qe){var or=Ue.V,yr=Ue.Ba+Ue.c*Ue.C,Pr=qe-Ue.C;if(e(qe<=Ue.l.o),e(16>=Pr),0<Pr){var Lr=Ue.l,Fr=Ue.Ta,Nr=Ue.Ua,jr=Lr.width;if(ki(Ue,Pr,or,yr),Pr=Nr=[Nr],e((or=Ue.C)<(yr=qe)),e(Lr.v<Lr.va),yr>Lr.o&&(yr=Lr.o),or<Lr.j){var Vr=Lr.j-or;or=Lr.j,Pr[0]+=Vr*jr}if(or>=yr?or=0:(Pr[0]+=4*Lr.v,Lr.ka=or-Lr.j,Lr.U=Lr.va-Lr.v,Lr.T=yr-or,or=1),or){if(Nr=Nr[0],11>(or=Ue.ca).S){var nn=or.f.RGBA,vn=(yr=or.S,Pr=Lr.U,Lr=Lr.T,Vr=nn.eb,nn.A),gn=Lr;for(nn=nn.fb+Ue.Ma*nn.A;0<gn--;){var un=Fr,Rn=Nr,wn=Pr,an=Vr,on=nn;switch(yr){case Bs:Ia(un,Rn,wn,an,on);break;case _s:io(un,Rn,wn,an,on);break;case ul:io(un,Rn,wn,an,on),wo(an,on,0,wn,1,0);break;case sl:da(un,Rn,wn,an,on);break;case zs:Ur(un,Rn,wn,an,on,1);break;case cl:Ur(un,Rn,wn,an,on,1),wo(an,on,0,wn,1,0);break;case Ss:Ur(un,Rn,wn,an,on,0);break;case Us:Ur(un,Rn,wn,an,on,0),wo(an,on,1,wn,1,0);break;case ll:Ha(un,Rn,wn,an,on);break;case Jo:Ha(un,Rn,wn,an,on),$o(an,on,wn,1,0);break;case Sl:ao(un,Rn,wn,an,on);break;default:e(0)}Nr+=jr,nn+=vn}Ue.Ma+=Lr}else alert("todo:EmitRescaledRowsYUVA");e(Ue.Ma<=or.height)}}Ue.C=qe,e(Ue.C<=Ue.i)}function _n(Ue){var qe;if(0<Ue.ua)return 0;for(qe=0;qe<Ue.Wb;++qe){var or=Ue.Ya[qe].G,yr=Ue.Ya[qe].H;if(0<or[1][yr[1]+0].g||0<or[2][yr[2]+0].g||0<or[3][yr[3]+0].g)return 0}return 1}function Jr(Ue,qe,or,yr,Pr,Lr){if(Ue.Z!=0){var Fr=Ue.qd,Nr=Ue.rd;for(e($n[Ue.Z]!=null);qe<or;++qe)$n[Ue.Z](Fr,Nr,yr,Pr,yr,Pr,Lr),Fr=yr,Nr=Pr,Pr+=Lr;Ue.qd=Fr,Ue.rd=Nr}}function cn(Ue,qe){var or=Ue.l.ma,yr=or.Z==0||or.Z==1?Ue.l.j:Ue.C;if(yr=Ue.C<yr?yr:Ue.C,e(qe<=Ue.l.o),qe>yr){var Pr=Ue.l.width,Lr=or.ca,Fr=or.tb+Pr*yr,Nr=Ue.V,jr=Ue.Ba+Ue.c*yr,Vr=Ue.gc;e(Ue.ab==1),e(Vr[0].hc==3),il(Vr[0],yr,qe,Nr,jr,Lr,Fr),Jr(or,yr,qe,Lr,Fr,Pr)}Ue.C=Ue.Ma=qe}function jn(Ue,qe,or,yr,Pr,Lr,Fr){var Nr=Ue.$/yr,jr=Ue.$%yr,Vr=Ue.m,nn=Ue.s,vn=or+Ue.$,gn=vn;Pr=or+yr*Pr;var un=or+yr*Lr,Rn=280+nn.ua,wn=Ue.Pb?Nr:16777216,an=0<nn.ua?nn.Wa:null,on=nn.wc,On=vn<un?fi(nn,jr,Nr):null;e(Ue.C<Lr),e(un<=Pr);var Mn=!1;e:for(;;){for(;Mn||vn<un;){var En=0;if(Nr>=wn){var Hn=vn-or;e((wn=Ue).Pb),wn.wd=wn.m,wn.xd=Hn,0<wn.s.ua&&hr(wn.s.Wa,wn.s.vb),wn=Nr+Dn}if(jr&on||(On=fi(nn,jr,Nr)),e(On!=null),On.Qb&&(qe[vn]=On.qb,Mn=!0),!Mn)if(vr(Vr),On.jc){En=Vr,Hn=qe;var zn=vn,Jn=On.pd[Je(En)&ca-1];e(On.jc),256>Jn.g?(St(En,En.u+Jn.g),Hn[zn]=Jn.value,En=0):(St(En,En.u+Jn.g-256),e(256<=Jn.value),En=Jn.value),En==0&&(Mn=!0)}else En=si(On.G[0],On.H[0],Vr);if(Vr.h)break;if(Mn||256>En){if(!Mn)if(On.nd)qe[vn]=(On.qb|En<<8)>>>0;else{if(vr(Vr),Mn=si(On.G[1],On.H[1],Vr),vr(Vr),Hn=si(On.G[2],On.H[2],Vr),zn=si(On.G[3],On.H[3],Vr),Vr.h)break;qe[vn]=(zn<<24|Mn<<16|En<<8|Hn)>>>0}if(Mn=!1,++vn,++jr>=yr&&(jr=0,++Nr,Fr!=null&&Nr<=Lr&&!(Nr%16)&&Fr(Ue,Nr),an!=null))for(;gn<vn;)En=qe[gn++],an.X[(506832829*En&4294967295)>>>an.Mb]=En}else if(280>En){if(En=qn(En-256,Vr),Hn=si(On.G[4],On.H[4],Vr),vr(Vr),Hn=ni(yr,Hn=qn(Hn,Vr)),Vr.h)break;if(vn-or<Hn||Pr-vn<En)break e;for(zn=0;zn<En;++zn)qe[vn+zn]=qe[vn+zn-Hn];for(vn+=En,jr+=En;jr>=yr;)jr-=yr,++Nr,Fr!=null&&Nr<=Lr&&!(Nr%16)&&Fr(Ue,Nr);if(e(vn<=Pr),jr&on&&(On=fi(nn,jr,Nr)),an!=null)for(;gn<vn;)En=qe[gn++],an.X[(506832829*En&4294967295)>>>an.Mb]=En}else{if(!(En<Rn))break e;for(Mn=En-280,e(an!=null);gn<vn;)En=qe[gn++],an.X[(506832829*En&4294967295)>>>an.Mb]=En;En=vn,e(!(Mn>>>(Hn=an).Xa)),qe[En]=Hn.X[Mn],Mn=!0}Mn||e(Vr.h==Ze(Vr))}if(Ue.Pb&&Vr.h&&vn<Pr)e(Ue.m.h),Ue.a=5,Ue.m=Ue.wd,Ue.$=Ue.xd,0<Ue.s.ua&&hr(Ue.s.vb,Ue.s.Wa);else{if(Vr.h)break e;Fr!=null&&Fr(Ue,Nr>Lr?Lr:Nr),Ue.a=0,Ue.$=vn-or}return 1}return Ue.a=3,0}function Vn(Ue){e(Ue!=null),Ue.vc=null,Ue.yc=null,Ue.Ya=null;var qe=Ue.Wa;qe!=null&&(qe.X=null),Ue.vb=null,e(Ue!=null)}function Yn(){var Ue=new Ro;return Ue==null?null:(Ue.a=0,Ue.xb=Ri,Hr("Predictor","VP8LPredictors"),Hr("Predictor","VP8LPredictors_C"),Hr("PredictorAdd","VP8LPredictorsAdd"),Hr("PredictorAdd","VP8LPredictorsAdd_C"),Is=mn,Pa=Cn,Ia=Er,io=Rr,Ha=Dr,ao=Br,da=Wr,Xe.VP8LMapColor32b=gs,Xe.VP8LMapColor8b=al,Ue)}function Xn(Ue,qe,or,yr,Pr){var Lr=1,Fr=[Ue],Nr=[qe],jr=yr.m,Vr=yr.s,nn=null,vn=0;e:for(;;){if(or)for(;Lr&&fr(jr,1);){var gn=Fr,un=Nr,Rn=yr,wn=1,an=Rn.m,on=Rn.gc[Rn.ab],On=fr(an,2);if(Rn.Oc&1<<On)Lr=0;else{switch(Rn.Oc|=1<<On,on.hc=On,on.Ea=gn[0],on.nc=un[0],on.K=[null],++Rn.ab,e(4>=Rn.ab),On){case 0:case 1:on.b=fr(an,3)+2,wn=Xn(Or(on.Ea,on.b),Or(on.nc,on.b),0,Rn,on.K),on.K=on.K[0];break;case 3:var Mn,En=fr(an,8)+1,Hn=16<En?0:4<En?1:2<En?2:3;if(gn[0]=Or(on.Ea,Hn),on.b=Hn,Mn=wn=Xn(En,1,0,Rn,on.K)){var zn,Jn=En,Un=on,yi=1<<(8>>Un.b),Si=Ie(yi);if(Si==null)Mn=0;else{var vi=Un.K[0],hi=Un.w;for(Si[0]=Un.K[0][0],zn=1;zn<1*Jn;++zn)Si[zn]=Mr(vi[hi+zn],Si[zn-1]);for(;zn<4*yi;++zn)Si[zn]=0;Un.K[0]=null,Un.K[0]=Si,Mn=1}}wn=Mn;break;case 2:break;default:e(0)}Lr=wn}}if(Fr=Fr[0],Nr=Nr[0],Lr&&fr(jr,1)&&!(Lr=1<=(vn=fr(jr,4))&&11>=vn)){yr.a=3;break e}var Ci;if(Ci=Lr)t:{var Ai,oi,$i,Oa=yr,Ki=Fr,Ea=Nr,wi=vn,ja=or,za=Oa.m,ea=Oa.s,oa=[null],ga=1,Ka=0,Co=kn[wi];r:for(;;){if(ja&&fr(za,1)){var ta=fr(za,3)+2,Do=Or(Ki,ta),ws=Or(Ea,ta),Ws=Do*ws;if(!Xn(Do,ws,0,Oa,oa))break r;for(oa=oa[0],ea.xc=ta,Ai=0;Ai<Ws;++Ai){var es=oa[Ai]>>8&65535;oa[Ai]=es,es>=ga&&(ga=es+1)}}if(za.h)break r;for(oi=0;5>oi;++oi){var Vi=ar[oi];!oi&&0<wi&&(Vi+=1<<wi),Ka<Vi&&(Ka=Vi)}var Dl=Be(ga*Co,nr),Jl=ga,Ql=Be(Jl,cr);if(Ql==null)var kl=null;else e(65536>=Jl),kl=Ql;var vl=Ie(Ka);if(kl==null||vl==null||Dl==null){Oa.a=1;break r}var Pl=Dl;for(Ai=$i=0;Ai<ga;++Ai){var uo=kl[Ai],Vs=uo.G,Gs=uo.H,Zl=0,Tl=1,eu=0;for(oi=0;5>oi;++oi){Vi=ar[oi],Vs[oi]=Pl,Gs[oi]=$i,!oi&&0<wi&&(Vi+=1<<wi);i:{var Ol,Bl=Vi,El=Oa,gl=vl,xu=Pl,Au=$i,jl=0,ts=El.m,Cu=fr(ts,1);if(Me(gl,0,0,Bl),Cu){var ku=fr(ts,1)+1,Pu=fr(ts,1),tu=fr(ts,Pu==0?1:8);gl[tu]=1,ku==2&&(gl[tu=fr(ts,8)]=1);var Rl=1}else{var ru=Ie(19),nu=fr(ts,4)+4;if(19<nu){El.a=3;var Ll=0;break i}for(Ol=0;Ol<nu;++Ol)ru[Yr[Ol]]=fr(ts,3);var zl=void 0,ml=void 0,iu=El,Tu=ru,Fl=Bl,au=gl,Ul=0,rs=iu.m,ou=8,su=Be(128,nr);n:for(;Qe(su,0,7,Tu,19);){if(fr(rs,1)){var Ou=2+2*fr(rs,3);if((zl=2+fr(rs,Ou))>Fl)break n}else zl=Fl;for(ml=0;ml<Fl&&zl--;){vr(rs);var lu=su[0+(127&Je(rs))];St(rs,rs.u+lu.g);var Hs=lu.value;if(16>Hs)au[ml++]=Hs,Hs!=0&&(ou=Hs);else{var Eu=Hs==16,uu=Hs-16,Ru=He[uu],cu=fr(rs,wl[uu])+Ru;if(ml+cu>Fl)break n;for(var Lu=Eu?ou:0;0<cu--;)au[ml++]=Lu}}Ul=1;break n}Ul||(iu.a=3),Rl=Ul}(Rl=Rl&&!ts.h)&&(jl=Qe(xu,Au,8,gl,Bl)),Rl&&jl!=0?Ll=jl:(El.a=3,Ll=0)}if(Ll==0)break r;if(Tl&&kr[oi]==1&&(Tl=Pl[$i].g==0),Zl+=Pl[$i].g,$i+=Ll,3>=oi){var yl,Wl=vl[0];for(yl=1;yl<Vi;++yl)vl[yl]>Wl&&(Wl=vl[yl]);eu+=Wl}}if(uo.nd=Tl,uo.Qb=0,Tl&&(uo.qb=(Vs[3][Gs[3]+0].value<<24|Vs[1][Gs[1]+0].value<<16|Vs[2][Gs[2]+0].value)>>>0,Zl==0&&256>Vs[0][Gs[0]+0].value&&(uo.Qb=1,uo.qb+=Vs[0][Gs[0]+0].value<<8)),uo.jc=!uo.Qb&&6>eu,uo.jc){var Ml,Bo=uo;for(Ml=0;Ml<ca;++Ml){var ns=Ml,is=Bo.pd[ns],Nl=Bo.G[0][Bo.H[0]+ns];256<=Nl.value?(is.g=Nl.g+256,is.value=Nl.value):(is.g=0,is.value=0,ns>>=ii(Nl,8,is),ns>>=ii(Bo.G[1][Bo.H[1]+ns],16,is),ns>>=ii(Bo.G[2][Bo.H[2]+ns],0,is),ii(Bo.G[3][Bo.H[3]+ns],24,is))}}}ea.vc=oa,ea.Wb=ga,ea.Ya=kl,ea.yc=Dl,Ci=1;break t}Ci=0}if(!(Lr=Ci)){yr.a=3;break e}if(0<vn){if(Vr.ua=1<<vn,!gr(Vr.Wa,vn)){yr.a=1,Lr=0;break e}}else Vr.ua=0;var Vl=yr,hu=Fr,Fu=Nr,Gl=Vl.s,Hl=Gl.xc;if(Vl.c=hu,Vl.i=Fu,Gl.md=Or(hu,Hl),Gl.wc=Hl==0?-1:(1<<Hl)-1,or){yr.xb=so;break e}if((nn=Ie(Fr*Nr))==null){yr.a=1,Lr=0;break e}Lr=(Lr=jn(yr,nn,0,Fr,Nr,Nr,null))&&!jr.h;break e}return Lr?(Pr!=null?Pr[0]=nn:(e(nn==null),e(or)),yr.$=0,or||Vn(Vr)):Vn(Vr),Lr}function li(Ue,qe){var or=Ue.c*Ue.i,yr=or+qe+16*qe;return e(Ue.c<=qe),Ue.V=Ie(yr),Ue.V==null?(Ue.Ta=null,Ue.Ua=0,Ue.a=1,0):(Ue.Ta=Ue.V,Ue.Ua=Ue.Ba+or+qe,1)}function Pi(Ue,qe){var or=Ue.C,yr=qe-or,Pr=Ue.V,Lr=Ue.Ba+Ue.c*or;for(e(qe<=Ue.l.o);0<yr;){var Fr=16<yr?16:yr,Nr=Ue.l.ma,jr=Ue.l.width,Vr=jr*Fr,nn=Nr.ca,vn=Nr.tb+jr*or,gn=Ue.Ta,un=Ue.Ua;ki(Ue,Fr,Pr,Lr),bl(gn,un,nn,vn,Vr),Jr(Nr,or,or+Fr,nn,vn,jr),yr-=Fr,Pr+=Fr*Ue.c,or+=Fr}e(or==qe),Ue.C=Ue.Ma=qe}function Gi(){this.ub=this.yd=this.td=this.Rb=0}function gi(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function ji(){this.Fb=this.Bb=this.Cb=0,this.Zb=Ie(4),this.Lb=Ie(4)}function mi(){this.Yb=function(){var Ue=[];return function qe(or,yr,Pr){for(var Lr=Pr[yr],Fr=0;Fr<Lr&&(or.push(Pr.length>yr+1?[]:0),!(Pr.length<yr+1));Fr++)qe(or[Fr],yr+1,Pr)}(Ue,0,[3,11]),Ue}()}function Ua(){this.jb=Ie(3),this.Wc=ke([4,8],mi),this.Xc=ke([4,17],mi)}function Li(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new Ie(4),this.od=new Ie(4)}function sa(){this.ld=this.La=this.dd=this.tc=0}function ma(){this.Na=this.la=0}function co(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ja(){this.ad=Ie(384),this.Za=0,this.Ob=Ie(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function ko(){this.uc=this.M=this.Nb=0,this.wa=Array(new sa),this.Y=0,this.ya=Array(new Ja),this.aa=0,this.l=new Po}function ya(){this.y=Ie(16),this.f=Ie(8),this.ea=Ie(8)}function Mi(){this.cb=this.a=0,this.sc="",this.m=new $e,this.Od=new Gi,this.Kc=new gi,this.ed=new Li,this.Qa=new ji,this.Ic=this.$c=this.Aa=0,this.D=new ko,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=Be(8,$e),this.ia=0,this.pb=Be(4,co),this.Pa=new Ua,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ya),this.Hd=0,this.rb=Array(new ma),this.sb=0,this.wa=Array(new sa),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ja),this.L=this.aa=0,this.gd=ke([4,2],sa),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function qi(Ue,qe){return 0>Ue?0:Ue>qe?qe:Ue}function Po(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function xs(){var Ue=new Mi;return Ue!=null&&(Ue.a=0,Ue.sc="OK",Ue.cb=0,Ue.Xb=0,ti||(ti=Wa)),Ue}function Ni(Ue,qe,or){return Ue.a==0&&(Ue.a=qe,Ue.sc=or,Ue.cb=0),0}function jo(Ue,qe,or){return 3<=or&&Ue[qe+0]==157&&Ue[qe+1]==1&&Ue[qe+2]==42}function Qa(Ue,qe){if(Ue==null)return 0;if(Ue.a=0,Ue.sc="OK",qe==null)return Ni(Ue,2,"null VP8Io passed to VP8GetHeaders()");var or=qe.data,yr=qe.w,Pr=qe.ha;if(4>Pr)return Ni(Ue,7,"Truncated header.");var Lr=or[yr+0]|or[yr+1]<<8|or[yr+2]<<16,Fr=Ue.Od;if(Fr.Rb=!(1&Lr),Fr.td=Lr>>1&7,Fr.yd=Lr>>4&1,Fr.ub=Lr>>5,3<Fr.td)return Ni(Ue,3,"Incorrect keyframe parameters.");if(!Fr.yd)return Ni(Ue,4,"Frame not displayable.");yr+=3,Pr-=3;var Nr=Ue.Kc;if(Fr.Rb){if(7>Pr)return Ni(Ue,7,"cannot parse picture header");if(!jo(or,yr,Pr))return Ni(Ue,3,"Bad code word");Nr.c=16383&(or[yr+4]<<8|or[yr+3]),Nr.Td=or[yr+4]>>6,Nr.i=16383&(or[yr+6]<<8|or[yr+5]),Nr.Ud=or[yr+6]>>6,yr+=7,Pr-=7,Ue.za=Nr.c+15>>4,Ue.Ub=Nr.i+15>>4,qe.width=Nr.c,qe.height=Nr.i,qe.Da=0,qe.j=0,qe.v=0,qe.va=qe.width,qe.o=qe.height,qe.da=0,qe.ib=qe.width,qe.hb=qe.height,qe.U=qe.width,qe.T=qe.height,Me((Lr=Ue.Pa).jb,0,255,Lr.jb.length),e((Lr=Ue.Qa)!=null),Lr.Cb=0,Lr.Bb=0,Lr.Fb=1,Me(Lr.Zb,0,0,Lr.Zb.length),Me(Lr.Lb,0,0,Lr.Lb)}if(Fr.ub>Pr)return Ni(Ue,7,"bad partition length");br(Lr=Ue.m,or,yr,Fr.ub),yr+=Fr.ub,Pr-=Fr.ub,Fr.Rb&&(Nr.Ld=Cr(Lr),Nr.Kd=Cr(Lr)),Nr=Ue.Qa;var jr,Vr=Ue.Pa;if(e(Lr!=null),e(Nr!=null),Nr.Cb=Cr(Lr),Nr.Cb){if(Nr.Bb=Cr(Lr),Cr(Lr)){for(Nr.Fb=Cr(Lr),jr=0;4>jr;++jr)Nr.Zb[jr]=Cr(Lr)?xr(Lr,7):0;for(jr=0;4>jr;++jr)Nr.Lb[jr]=Cr(Lr)?xr(Lr,6):0}if(Nr.Bb)for(jr=0;3>jr;++jr)Vr.jb[jr]=Cr(Lr)?wr(Lr,8):255}else Nr.Bb=0;if(Lr.Ka)return Ni(Ue,3,"cannot parse segment header");if((Nr=Ue.ed).zd=Cr(Lr),Nr.Tb=wr(Lr,6),Nr.wb=wr(Lr,3),Nr.Pc=Cr(Lr),Nr.Pc&&Cr(Lr)){for(Vr=0;4>Vr;++Vr)Cr(Lr)&&(Nr.vd[Vr]=xr(Lr,6));for(Vr=0;4>Vr;++Vr)Cr(Lr)&&(Nr.od[Vr]=xr(Lr,6))}if(Ue.L=Nr.Tb==0?0:Nr.zd?1:2,Lr.Ka)return Ni(Ue,3,"cannot parse filter header");var nn=Pr;if(Pr=jr=yr,yr=jr+nn,Nr=nn,Ue.Xb=(1<<wr(Ue.m,2))-1,nn<3*(Vr=Ue.Xb))or=7;else{for(jr+=3*Vr,Nr-=3*Vr,nn=0;nn<Vr;++nn){var vn=or[Pr+0]|or[Pr+1]<<8|or[Pr+2]<<16;vn>Nr&&(vn=Nr),br(Ue.Jc[+nn],or,jr,vn),jr+=vn,Nr-=vn,Pr+=3}br(Ue.Jc[+Vr],or,jr,Nr),or=jr<yr?0:5}if(or!=0)return Ni(Ue,or,"cannot parse partitions");for(or=wr(jr=Ue.m,7),Pr=Cr(jr)?xr(jr,4):0,yr=Cr(jr)?xr(jr,4):0,Nr=Cr(jr)?xr(jr,4):0,Vr=Cr(jr)?xr(jr,4):0,jr=Cr(jr)?xr(jr,4):0,nn=Ue.Qa,vn=0;4>vn;++vn){if(nn.Cb){var gn=nn.Zb[vn];nn.Fb||(gn+=or)}else{if(0<vn){Ue.pb[vn]=Ue.pb[0];continue}gn=or}var un=Ue.pb[vn];un.Sc[0]=Gn[qi(gn+Pr,127)],un.Sc[1]=ei[qi(gn+0,127)],un.Eb[0]=2*Gn[qi(gn+yr,127)],un.Eb[1]=101581*ei[qi(gn+Nr,127)]>>16,8>un.Eb[1]&&(un.Eb[1]=8),un.Qc[0]=Gn[qi(gn+Vr,117)],un.Qc[1]=ei[qi(gn+jr,127)],un.lc=gn+jr}if(!Fr.Rb)return Ni(Ue,4,"Not a key frame.");for(Cr(Lr),Fr=Ue.Pa,or=0;4>or;++or){for(Pr=0;8>Pr;++Pr)for(yr=0;3>yr;++yr)for(Nr=0;11>Nr;++Nr)Vr=_r(Lr,Ao[or][Pr][yr][Nr])?wr(Lr,8):Ba[or][Pr][yr][Nr],Fr.Wc[or][Pr].Yb[yr][Nr]=Vr;for(Pr=0;17>Pr;++Pr)Fr.Xc[or][Pr]=Fr.Wc[or][Ya[Pr]]}return Ue.kc=Cr(Lr),Ue.kc&&(Ue.Bd=wr(Lr,8)),Ue.cb=1}function Wa(Ue,qe,or,yr,Pr,Lr,Fr){var Nr=qe[Pr].Yb[or];for(or=0;16>Pr;++Pr){if(!_r(Ue,Nr[or+0]))return Pr;for(;!_r(Ue,Nr[or+1]);)if(Nr=qe[++Pr].Yb[0],or=0,Pr==16)return 16;var jr=qe[Pr+1].Yb;if(_r(Ue,Nr[or+2])){var Vr=Ue,nn=0;if(_r(Vr,(gn=Nr)[(vn=or)+3]))if(_r(Vr,gn[vn+6])){for(Nr=0,vn=2*(nn=_r(Vr,gn[vn+8]))+(gn=_r(Vr,gn[vn+9+nn])),nn=0,gn=ui[vn];gn[Nr];++Nr)nn+=nn+_r(Vr,gn[Nr]);nn+=3+(8<<vn)}else _r(Vr,gn[vn+7])?(nn=7+2*_r(Vr,165),nn+=_r(Vr,145)):nn=5+_r(Vr,159);else nn=_r(Vr,gn[vn+4])?3+_r(Vr,gn[vn+5]):2;Nr=jr[2]}else nn=1,Nr=jr[1];jr=Fr+di[Pr],0>(Vr=Ue).b&&mr(Vr);var vn,gn=Vr.b,un=(vn=Vr.Ca>>1)-(Vr.I>>gn)>>31;--Vr.b,Vr.Ca+=un,Vr.Ca|=1,Vr.I-=(vn+1&un)<<gn,Lr[jr]=((nn^un)-un)*yr[(0<Pr)+0]}return 16}function as(Ue){var qe=Ue.rb[Ue.sb-1];qe.la=0,qe.Na=0,Me(Ue.zc,0,0,Ue.zc.length),Ue.ja=0}function zo(Ue,qe){if(Ue==null)return 0;if(qe==null)return Ni(Ue,2,"NULL VP8Io parameter in VP8Decode().");if(!Ue.cb&&!Qa(Ue,qe))return 0;if(e(Ue.cb),qe.ac==null||qe.ac(qe)){qe.ob&&(Ue.L=0);var or=Cl[Ue.L];if(Ue.L==2?(Ue.yb=0,Ue.zb=0):(Ue.yb=qe.v-or>>4,Ue.zb=qe.j-or>>4,0>Ue.yb&&(Ue.yb=0),0>Ue.zb&&(Ue.zb=0)),Ue.Va=qe.o+15+or>>4,Ue.Hb=qe.va+15+or>>4,Ue.Hb>Ue.za&&(Ue.Hb=Ue.za),Ue.Va>Ue.Ub&&(Ue.Va=Ue.Ub),0<Ue.L){var yr=Ue.ed;for(or=0;4>or;++or){var Pr;if(Ue.Qa.Cb){var Lr=Ue.Qa.Lb[or];Ue.Qa.Fb||(Lr+=yr.Tb)}else Lr=yr.Tb;for(Pr=0;1>=Pr;++Pr){var Fr=Ue.gd[or][Pr],Nr=Lr;if(yr.Pc&&(Nr+=yr.vd[0],Pr&&(Nr+=yr.od[0])),0<(Nr=0>Nr?0:63<Nr?63:Nr)){var jr=Nr;0<yr.wb&&(jr=4<yr.wb?jr>>2:jr>>1)>9-yr.wb&&(jr=9-yr.wb),1>jr&&(jr=1),Fr.dd=jr,Fr.tc=2*Nr+jr,Fr.ld=40<=Nr?2:15<=Nr?1:0}else Fr.tc=0;Fr.La=Pr}}}or=0}else Ni(Ue,6,"Frame setup failed"),or=Ue.a;if(or=or==0){if(or){Ue.$c=0,0<Ue.Aa||(Ue.Ic=wu);e:{or=Ue.Ic,yr=4*(jr=Ue.za);var Vr=32*jr,nn=jr+1,vn=0<Ue.L?jr*(0<Ue.Aa?2:1):0,gn=(Ue.Aa==2?2:1)*jr;if((Fr=yr+832+(Pr=3*(16*or+Cl[Ue.L])/2*Vr)+(Lr=Ue.Fa!=null&&0<Ue.Fa.length?Ue.Kc.c*Ue.Kc.i:0))!=Fr)or=0;else{if(Fr>Ue.Vb){if(Ue.Vb=0,Ue.Ec=Ie(Fr),Ue.Fc=0,Ue.Ec==null){or=Ni(Ue,1,"no memory during frame initialization.");break e}Ue.Vb=Fr}Fr=Ue.Ec,Nr=Ue.Fc,Ue.Ac=Fr,Ue.Bc=Nr,Nr+=yr,Ue.Gd=Be(Vr,ya),Ue.Hd=0,Ue.rb=Be(nn+1,ma),Ue.sb=1,Ue.wa=vn?Be(vn,sa):null,Ue.Y=0,Ue.D.Nb=0,Ue.D.wa=Ue.wa,Ue.D.Y=Ue.Y,0<Ue.Aa&&(Ue.D.Y+=jr),e(!0),Ue.oc=Fr,Ue.pc=Nr,Nr+=832,Ue.ya=Be(gn,Ja),Ue.aa=0,Ue.D.ya=Ue.ya,Ue.D.aa=Ue.aa,Ue.Aa==2&&(Ue.D.aa+=jr),Ue.R=16*jr,Ue.B=8*jr,jr=(Vr=Cl[Ue.L])*Ue.R,Vr=Vr/2*Ue.B,Ue.sa=Fr,Ue.ta=Nr+jr,Ue.qa=Ue.sa,Ue.ra=Ue.ta+16*or*Ue.R+Vr,Ue.Ha=Ue.qa,Ue.Ia=Ue.ra+8*or*Ue.B+Vr,Ue.$c=0,Nr+=Pr,Ue.mb=Lr?Fr:null,Ue.nb=Lr?Nr:null,e(Nr+Lr<=Ue.Fc+Ue.Vb),as(Ue),Me(Ue.Ac,Ue.Bc,0,yr),or=1}}if(or){if(qe.ka=0,qe.y=Ue.sa,qe.O=Ue.ta,qe.f=Ue.qa,qe.N=Ue.ra,qe.ea=Ue.Ha,qe.Vd=Ue.Ia,qe.fa=Ue.R,qe.Rc=Ue.B,qe.F=null,qe.J=0,!bs){for(or=-255;255>=or;++or)ms[255+or]=0>or?-or:or;for(or=-1020;1020>=or;++or)_l[1020+or]=-128>or?-128:127<or?127:or;for(or=-112;112>=or;++or)ol[112+or]=-16>or?-16:15<or?15:or;for(or=-255;510>=or;++or)ys[255+or]=0>or?0:255<or?255:or;bs=1}pa=ks,Fo=As,ia=Xs,Yi=Cs,Hi=Ys,Mo=qs,Da=po,No=tl,va=ds,oo=Vo,Yo=eo,aa=rl,qa=Ms,bi=to,_i=Za,Oi=Va,Ui=Ls,Xa=Fs,Wi[0]=Uo,Wi[1]=$s,Wi[2]=ls,Wi[3]=Sa,Wi[4]=Ts,Wi[5]=us,Wi[6]=Wo,Wi[7]=Qs,Wi[8]=Zs,Wi[9]=wa,Ei[0]=Ii,Ei[1]=fa,Ei[2]=To,Ei[3]=Js,Ei[4]=fo,Ei[5]=Oo,Ei[6]=Ps,Bi[0]=hs,Bi[1]=Ks,Bi[2]=cs,Bi[3]=Os,Bi[4]=La,Bi[5]=Ra,Bi[6]=el,or=1}else or=0}or&&(or=function(un,Rn){for(un.M=0;un.M<un.Va;++un.M){var wn,an=un.Jc[un.M&un.Xb],on=un.m,On=un;for(wn=0;wn<On.za;++wn){var Mn=on,En=On,Hn=En.Ac,zn=En.Bc+4*wn,Jn=En.zc,Un=En.ya[En.aa+wn];if(En.Qa.Bb?Un.$b=_r(Mn,En.Pa.jb[0])?2+_r(Mn,En.Pa.jb[2]):_r(Mn,En.Pa.jb[1]):Un.$b=0,En.kc&&(Un.Ad=_r(Mn,En.Bd)),Un.Za=!_r(Mn,145)+0,Un.Za){var yi=Un.Ob,Si=0;for(En=0;4>En;++En){var vi,hi=Jn[0+En];for(vi=0;4>vi;++vi){hi=Qo[Hn[zn+vi]][hi];for(var Ci=Di[_r(Mn,hi[0])];0<Ci;)Ci=Di[2*Ci+_r(Mn,hi[Ci])];hi=-Ci,Hn[zn+vi]=hi}Pe(yi,Si,Hn,zn,4),Si+=4,Jn[0+En]=hi}}else hi=_r(Mn,156)?_r(Mn,128)?1:3:_r(Mn,163)?2:0,Un.Ob[0]=hi,Me(Hn,zn,hi,4),Me(Jn,0,hi,4);Un.Dd=_r(Mn,142)?_r(Mn,114)?_r(Mn,183)?1:3:2:0}if(On.m.Ka)return Ni(un,7,"Premature end-of-partition0 encountered.");for(;un.ja<un.za;++un.ja){if(On=an,Mn=(on=un).rb[on.sb-1],Hn=on.rb[on.sb+on.ja],wn=on.ya[on.aa+on.ja],zn=on.kc?wn.Ad:0)Mn.la=Hn.la=0,wn.Za||(Mn.Na=Hn.Na=0),wn.Hc=0,wn.Gc=0,wn.ia=0;else{var Ai,oi;if(Mn=Hn,Hn=On,zn=on.Pa.Xc,Jn=on.ya[on.aa+on.ja],Un=on.pb[Jn.$b],En=Jn.ad,yi=0,Si=on.rb[on.sb-1],hi=vi=0,Me(En,yi,0,384),Jn.Za)var $i=0,Oa=zn[3];else{Ci=Ie(16);var Ki=Mn.Na+Si.Na;if(Ki=ti(Hn,zn[1],Ki,Un.Eb,0,Ci,0),Mn.Na=Si.Na=(0<Ki)+0,1<Ki)pa(Ci,0,En,yi);else{var Ea=Ci[0]+3>>3;for(Ci=0;256>Ci;Ci+=16)En[yi+Ci]=Ea}$i=1,Oa=zn[0]}var wi=15&Mn.la,ja=15&Si.la;for(Ci=0;4>Ci;++Ci){var za=1&ja;for(Ea=oi=0;4>Ea;++Ea)wi=wi>>1|(za=(Ki=ti(Hn,Oa,Ki=za+(1&wi),Un.Sc,$i,En,yi))>$i)<<7,oi=oi<<2|(3<Ki?3:1<Ki?2:En[yi+0]!=0),yi+=16;wi>>=4,ja=ja>>1|za<<7,vi=(vi<<8|oi)>>>0}for(Oa=wi,$i=ja>>4,Ai=0;4>Ai;Ai+=2){for(oi=0,wi=Mn.la>>4+Ai,ja=Si.la>>4+Ai,Ci=0;2>Ci;++Ci){for(za=1&ja,Ea=0;2>Ea;++Ea)Ki=za+(1&wi),wi=wi>>1|(za=0<(Ki=ti(Hn,zn[2],Ki,Un.Qc,0,En,yi)))<<3,oi=oi<<2|(3<Ki?3:1<Ki?2:En[yi+0]!=0),yi+=16;wi>>=2,ja=ja>>1|za<<5}hi|=oi<<4*Ai,Oa|=wi<<4<<Ai,$i|=(240&ja)<<Ai}Mn.la=Oa,Si.la=$i,Jn.Hc=vi,Jn.Gc=hi,Jn.ia=43690&hi?0:Un.ia,zn=!(vi|hi)}if(0<on.L&&(on.wa[on.Y+on.ja]=on.gd[wn.$b][wn.Za],on.wa[on.Y+on.ja].La|=!zn),On.Ka)return Ni(un,7,"Premature end-of-file encountered.")}if(as(un),on=Rn,On=1,wn=(an=un).D,Mn=0<an.L&&an.M>=an.zb&&an.M<=an.Va,an.Aa==0)e:{if(wn.M=an.M,wn.uc=Mn,mo(an,wn),On=1,wn=(oi=an.D).Nb,Mn=(hi=Cl[an.L])*an.R,Hn=hi/2*an.B,Ci=16*wn*an.R,Ea=8*wn*an.B,zn=an.sa,Jn=an.ta-Mn+Ci,Un=an.qa,En=an.ra-Hn+Ea,yi=an.Ha,Si=an.Ia-Hn+Ea,ja=(wi=oi.M)==0,vi=wi>=an.Va-1,an.Aa==2&&mo(an,oi),oi.uc)for(za=(Ki=an).D.M,e(Ki.D.uc),oi=Ki.yb;oi<Ki.Hb;++oi){$i=oi,Oa=za;var ea=(oa=(Vi=Ki).D).Nb;Ai=Vi.R;var oa=oa.wa[oa.Y+$i],ga=Vi.sa,Ka=Vi.ta+16*ea*Ai+16*$i,Co=oa.dd,ta=oa.tc;if(ta!=0)if(e(3<=ta),Vi.L==1)0<$i&&Oi(ga,Ka,Ai,ta+4),oa.La&&Xa(ga,Ka,Ai,ta),0<Oa&&_i(ga,Ka,Ai,ta+4),oa.La&&Ui(ga,Ka,Ai,ta);else{var Do=Vi.B,ws=Vi.qa,Ws=Vi.ra+8*ea*Do+8*$i,es=Vi.Ha,Vi=Vi.Ia+8*ea*Do+8*$i;ea=oa.ld,0<$i&&(No(ga,Ka,Ai,ta+4,Co,ea),oo(ws,Ws,es,Vi,Do,ta+4,Co,ea)),oa.La&&(aa(ga,Ka,Ai,ta,Co,ea),bi(ws,Ws,es,Vi,Do,ta,Co,ea)),0<Oa&&(Da(ga,Ka,Ai,ta+4,Co,ea),va(ws,Ws,es,Vi,Do,ta+4,Co,ea)),oa.La&&(Yo(ga,Ka,Ai,ta,Co,ea),qa(ws,Ws,es,Vi,Do,ta,Co,ea))}}if(an.ia&&alert("todo:DitherRow"),on.put!=null){if(oi=16*wi,wi=16*(wi+1),ja?(on.y=an.sa,on.O=an.ta+Ci,on.f=an.qa,on.N=an.ra+Ea,on.ea=an.Ha,on.W=an.Ia+Ea):(oi-=hi,on.y=zn,on.O=Jn,on.f=Un,on.N=En,on.ea=yi,on.W=Si),vi||(wi-=hi),wi>on.o&&(wi=on.o),on.F=null,on.J=null,an.Fa!=null&&0<an.Fa.length&&oi<wi&&(on.J=tr(an,on,oi,wi-oi),on.F=an.mb,on.F==null&&on.F.length==0)){On=Ni(an,3,"Could not decode alpha data.");break e}oi<on.j&&(hi=on.j-oi,oi=on.j,e(!(1&hi)),on.O+=an.R*hi,on.N+=an.B*(hi>>1),on.W+=an.B*(hi>>1),on.F!=null&&(on.J+=on.width*hi)),oi<wi&&(on.O+=on.v,on.N+=on.v>>1,on.W+=on.v>>1,on.F!=null&&(on.J+=on.v),on.ka=oi-on.j,on.U=on.va-on.v,on.T=wi-oi,On=on.put(on))}wn+1!=an.Ic||vi||(Pe(an.sa,an.ta-Mn,zn,Jn+16*an.R,Mn),Pe(an.qa,an.ra-Hn,Un,En+8*an.B,Hn),Pe(an.Ha,an.Ia-Hn,yi,Si+8*an.B,Hn))}if(!On)return Ni(un,6,"Output aborted.")}return 1}(Ue,qe)),qe.bc!=null&&qe.bc(qe),or&=1}return or?(Ue.cb=0,or):0}function ra(Ue,qe,or,yr,Pr){Pr=Ue[qe+or+32*yr]+(Pr>>3),Ue[qe+or+32*yr]=-256&Pr?0>Pr?0:255:Pr}function na(Ue,qe,or,yr,Pr,Lr){ra(Ue,qe,0,or,yr+Pr),ra(Ue,qe,1,or,yr+Lr),ra(Ue,qe,2,or,yr-Lr),ra(Ue,qe,3,or,yr-Pr)}function ba(Ue){return(20091*Ue>>16)+Ue}function os(Ue,qe,or,yr){var Pr,Lr=0,Fr=Ie(16);for(Pr=0;4>Pr;++Pr){var Nr=Ue[qe+0]+Ue[qe+8],jr=Ue[qe+0]-Ue[qe+8],Vr=(35468*Ue[qe+4]>>16)-ba(Ue[qe+12]),nn=ba(Ue[qe+4])+(35468*Ue[qe+12]>>16);Fr[Lr+0]=Nr+nn,Fr[Lr+1]=jr+Vr,Fr[Lr+2]=jr-Vr,Fr[Lr+3]=Nr-nn,Lr+=4,qe++}for(Pr=Lr=0;4>Pr;++Pr)Nr=(Ue=Fr[Lr+0]+4)+Fr[Lr+8],jr=Ue-Fr[Lr+8],Vr=(35468*Fr[Lr+4]>>16)-ba(Fr[Lr+12]),ra(or,yr,0,0,Nr+(nn=ba(Fr[Lr+4])+(35468*Fr[Lr+12]>>16))),ra(or,yr,1,0,jr+Vr),ra(or,yr,2,0,jr-Vr),ra(or,yr,3,0,Nr-nn),Lr++,yr+=32}function qs(Ue,qe,or,yr){var Pr=Ue[qe+0]+4,Lr=35468*Ue[qe+4]>>16,Fr=ba(Ue[qe+4]),Nr=35468*Ue[qe+1]>>16;na(or,yr,0,Pr+Fr,Ue=ba(Ue[qe+1]),Nr),na(or,yr,1,Pr+Lr,Ue,Nr),na(or,yr,2,Pr-Lr,Ue,Nr),na(or,yr,3,Pr-Fr,Ue,Nr)}function As(Ue,qe,or,yr,Pr){os(Ue,qe,or,yr),Pr&&os(Ue,qe+16,or,yr+4)}function Xs(Ue,qe,or,yr){Fo(Ue,qe+0,or,yr,1),Fo(Ue,qe+32,or,yr+128,1)}function Cs(Ue,qe,or,yr){var Pr;for(Ue=Ue[qe+0]+4,Pr=0;4>Pr;++Pr)for(qe=0;4>qe;++qe)ra(or,yr,qe,Pr,Ue)}function Ys(Ue,qe,or,yr){Ue[qe+0]&&Yi(Ue,qe+0,or,yr),Ue[qe+16]&&Yi(Ue,qe+16,or,yr+4),Ue[qe+32]&&Yi(Ue,qe+32,or,yr+128),Ue[qe+48]&&Yi(Ue,qe+48,or,yr+128+4)}function ks(Ue,qe,or,yr){var Pr,Lr=Ie(16);for(Pr=0;4>Pr;++Pr){var Fr=Ue[qe+0+Pr]+Ue[qe+12+Pr],Nr=Ue[qe+4+Pr]+Ue[qe+8+Pr],jr=Ue[qe+4+Pr]-Ue[qe+8+Pr],Vr=Ue[qe+0+Pr]-Ue[qe+12+Pr];Lr[0+Pr]=Fr+Nr,Lr[8+Pr]=Fr-Nr,Lr[4+Pr]=Vr+jr,Lr[12+Pr]=Vr-jr}for(Pr=0;4>Pr;++Pr)Fr=(Ue=Lr[0+4*Pr]+3)+Lr[3+4*Pr],Nr=Lr[1+4*Pr]+Lr[2+4*Pr],jr=Lr[1+4*Pr]-Lr[2+4*Pr],Vr=Ue-Lr[3+4*Pr],or[yr+0]=Fr+Nr>>3,or[yr+16]=Vr+jr>>3,or[yr+32]=Fr-Nr>>3,or[yr+48]=Vr-jr>>3,yr+=64}function ss(Ue,qe,or){var yr,Pr=qe-32,Lr=Zi,Fr=255-Ue[Pr-1];for(yr=0;yr<or;++yr){var Nr,jr=Lr,Vr=Fr+Ue[qe-1];for(Nr=0;Nr<or;++Nr)Ue[qe+Nr]=jr[Vr+Ue[Pr+Nr]];qe+=32}}function $s(Ue,qe){ss(Ue,qe,4)}function Ks(Ue,qe){ss(Ue,qe,8)}function fa(Ue,qe){ss(Ue,qe,16)}function To(Ue,qe){var or;for(or=0;16>or;++or)Pe(Ue,qe+32*or,Ue,qe-32,16)}function Js(Ue,qe){var or;for(or=16;0<or;--or)Me(Ue,qe,Ue[qe-1],16),qe+=32}function ho(Ue,qe,or){var yr;for(yr=0;16>yr;++yr)Me(qe,or+32*yr,Ue,16)}function Ii(Ue,qe){var or,yr=16;for(or=0;16>or;++or)yr+=Ue[qe-1+32*or]+Ue[qe+or-32];ho(yr>>5,Ue,qe)}function fo(Ue,qe){var or,yr=8;for(or=0;16>or;++or)yr+=Ue[qe-1+32*or];ho(yr>>4,Ue,qe)}function Oo(Ue,qe){var or,yr=8;for(or=0;16>or;++or)yr+=Ue[qe+or-32];ho(yr>>4,Ue,qe)}function Ps(Ue,qe){ho(128,Ue,qe)}function Qn(Ue,qe,or){return Ue+2*qe+or+2>>2}function ls(Ue,qe){var or,yr=qe-32;for(yr=new Uint8Array([Qn(Ue[yr-1],Ue[yr+0],Ue[yr+1]),Qn(Ue[yr+0],Ue[yr+1],Ue[yr+2]),Qn(Ue[yr+1],Ue[yr+2],Ue[yr+3]),Qn(Ue[yr+2],Ue[yr+3],Ue[yr+4])]),or=0;4>or;++or)Pe(Ue,qe+32*or,yr,0,yr.length)}function Sa(Ue,qe){var or=Ue[qe-1],yr=Ue[qe-1+32],Pr=Ue[qe-1+64],Lr=Ue[qe-1+96];pr(Ue,qe+0,16843009*Qn(Ue[qe-1-32],or,yr)),pr(Ue,qe+32,16843009*Qn(or,yr,Pr)),pr(Ue,qe+64,16843009*Qn(yr,Pr,Lr)),pr(Ue,qe+96,16843009*Qn(Pr,Lr,Lr))}function Uo(Ue,qe){var or,yr=4;for(or=0;4>or;++or)yr+=Ue[qe+or-32]+Ue[qe-1+32*or];for(yr>>=3,or=0;4>or;++or)Me(Ue,qe+32*or,yr,4)}function Ts(Ue,qe){var or=Ue[qe-1+0],yr=Ue[qe-1+32],Pr=Ue[qe-1+64],Lr=Ue[qe-1-32],Fr=Ue[qe+0-32],Nr=Ue[qe+1-32],jr=Ue[qe+2-32],Vr=Ue[qe+3-32];Ue[qe+0+96]=Qn(yr,Pr,Ue[qe-1+96]),Ue[qe+1+96]=Ue[qe+0+64]=Qn(or,yr,Pr),Ue[qe+2+96]=Ue[qe+1+64]=Ue[qe+0+32]=Qn(Lr,or,yr),Ue[qe+3+96]=Ue[qe+2+64]=Ue[qe+1+32]=Ue[qe+0+0]=Qn(Fr,Lr,or),Ue[qe+3+64]=Ue[qe+2+32]=Ue[qe+1+0]=Qn(Nr,Fr,Lr),Ue[qe+3+32]=Ue[qe+2+0]=Qn(jr,Nr,Fr),Ue[qe+3+0]=Qn(Vr,jr,Nr)}function Wo(Ue,qe){var or=Ue[qe+1-32],yr=Ue[qe+2-32],Pr=Ue[qe+3-32],Lr=Ue[qe+4-32],Fr=Ue[qe+5-32],Nr=Ue[qe+6-32],jr=Ue[qe+7-32];Ue[qe+0+0]=Qn(Ue[qe+0-32],or,yr),Ue[qe+1+0]=Ue[qe+0+32]=Qn(or,yr,Pr),Ue[qe+2+0]=Ue[qe+1+32]=Ue[qe+0+64]=Qn(yr,Pr,Lr),Ue[qe+3+0]=Ue[qe+2+32]=Ue[qe+1+64]=Ue[qe+0+96]=Qn(Pr,Lr,Fr),Ue[qe+3+32]=Ue[qe+2+64]=Ue[qe+1+96]=Qn(Lr,Fr,Nr),Ue[qe+3+64]=Ue[qe+2+96]=Qn(Fr,Nr,jr),Ue[qe+3+96]=Qn(Nr,jr,jr)}function us(Ue,qe){var or=Ue[qe-1+0],yr=Ue[qe-1+32],Pr=Ue[qe-1+64],Lr=Ue[qe-1-32],Fr=Ue[qe+0-32],Nr=Ue[qe+1-32],jr=Ue[qe+2-32],Vr=Ue[qe+3-32];Ue[qe+0+0]=Ue[qe+1+64]=Lr+Fr+1>>1,Ue[qe+1+0]=Ue[qe+2+64]=Fr+Nr+1>>1,Ue[qe+2+0]=Ue[qe+3+64]=Nr+jr+1>>1,Ue[qe+3+0]=jr+Vr+1>>1,Ue[qe+0+96]=Qn(Pr,yr,or),Ue[qe+0+64]=Qn(yr,or,Lr),Ue[qe+0+32]=Ue[qe+1+96]=Qn(or,Lr,Fr),Ue[qe+1+32]=Ue[qe+2+96]=Qn(Lr,Fr,Nr),Ue[qe+2+32]=Ue[qe+3+96]=Qn(Fr,Nr,jr),Ue[qe+3+32]=Qn(Nr,jr,Vr)}function Qs(Ue,qe){var or=Ue[qe+0-32],yr=Ue[qe+1-32],Pr=Ue[qe+2-32],Lr=Ue[qe+3-32],Fr=Ue[qe+4-32],Nr=Ue[qe+5-32],jr=Ue[qe+6-32],Vr=Ue[qe+7-32];Ue[qe+0+0]=or+yr+1>>1,Ue[qe+1+0]=Ue[qe+0+64]=yr+Pr+1>>1,Ue[qe+2+0]=Ue[qe+1+64]=Pr+Lr+1>>1,Ue[qe+3+0]=Ue[qe+2+64]=Lr+Fr+1>>1,Ue[qe+0+32]=Qn(or,yr,Pr),Ue[qe+1+32]=Ue[qe+0+96]=Qn(yr,Pr,Lr),Ue[qe+2+32]=Ue[qe+1+96]=Qn(Pr,Lr,Fr),Ue[qe+3+32]=Ue[qe+2+96]=Qn(Lr,Fr,Nr),Ue[qe+3+64]=Qn(Fr,Nr,jr),Ue[qe+3+96]=Qn(Nr,jr,Vr)}function wa(Ue,qe){var or=Ue[qe-1+0],yr=Ue[qe-1+32],Pr=Ue[qe-1+64],Lr=Ue[qe-1+96];Ue[qe+0+0]=or+yr+1>>1,Ue[qe+2+0]=Ue[qe+0+32]=yr+Pr+1>>1,Ue[qe+2+32]=Ue[qe+0+64]=Pr+Lr+1>>1,Ue[qe+1+0]=Qn(or,yr,Pr),Ue[qe+3+0]=Ue[qe+1+32]=Qn(yr,Pr,Lr),Ue[qe+3+32]=Ue[qe+1+64]=Qn(Pr,Lr,Lr),Ue[qe+3+64]=Ue[qe+2+64]=Ue[qe+0+96]=Ue[qe+1+96]=Ue[qe+2+96]=Ue[qe+3+96]=Lr}function Zs(Ue,qe){var or=Ue[qe-1+0],yr=Ue[qe-1+32],Pr=Ue[qe-1+64],Lr=Ue[qe-1+96],Fr=Ue[qe-1-32],Nr=Ue[qe+0-32],jr=Ue[qe+1-32],Vr=Ue[qe+2-32];Ue[qe+0+0]=Ue[qe+2+32]=or+Fr+1>>1,Ue[qe+0+32]=Ue[qe+2+64]=yr+or+1>>1,Ue[qe+0+64]=Ue[qe+2+96]=Pr+yr+1>>1,Ue[qe+0+96]=Lr+Pr+1>>1,Ue[qe+3+0]=Qn(Nr,jr,Vr),Ue[qe+2+0]=Qn(Fr,Nr,jr),Ue[qe+1+0]=Ue[qe+3+32]=Qn(or,Fr,Nr),Ue[qe+1+32]=Ue[qe+3+64]=Qn(yr,or,Fr),Ue[qe+1+64]=Ue[qe+3+96]=Qn(Pr,yr,or),Ue[qe+1+96]=Qn(Lr,Pr,yr)}function cs(Ue,qe){var or;for(or=0;8>or;++or)Pe(Ue,qe+32*or,Ue,qe-32,8)}function Os(Ue,qe){var or;for(or=0;8>or;++or)Me(Ue,qe,Ue[qe-1],8),qe+=32}function la(Ue,qe,or){var yr;for(yr=0;8>yr;++yr)Me(qe,or+32*yr,Ue,8)}function hs(Ue,qe){var or,yr=8;for(or=0;8>or;++or)yr+=Ue[qe+or-32]+Ue[qe-1+32*or];la(yr>>4,Ue,qe)}function Ra(Ue,qe){var or,yr=4;for(or=0;8>or;++or)yr+=Ue[qe+or-32];la(yr>>3,Ue,qe)}function La(Ue,qe){var or,yr=4;for(or=0;8>or;++or)yr+=Ue[qe-1+32*or];la(yr>>3,Ue,qe)}function el(Ue,qe){la(128,Ue,qe)}function Eo(Ue,qe,or){var yr=Ue[qe-or],Pr=Ue[qe+0],Lr=3*(Pr-yr)+Ko[1020+Ue[qe-2*or]-Ue[qe+or]],Fr=xo[112+(Lr+4>>3)];Ue[qe-or]=Zi[255+yr+xo[112+(Lr+3>>3)]],Ue[qe+0]=Zi[255+Pr-Fr]}function Es(Ue,qe,or,yr){var Pr=Ue[qe+0],Lr=Ue[qe+or];return Ta[255+Ue[qe-2*or]-Ue[qe-or]]>yr||Ta[255+Lr-Pr]>yr}function Rs(Ue,qe,or,yr){return 4*Ta[255+Ue[qe-or]-Ue[qe+0]]+Ta[255+Ue[qe-2*or]-Ue[qe+or]]<=yr}function fs(Ue,qe,or,yr,Pr){var Lr=Ue[qe-3*or],Fr=Ue[qe-2*or],Nr=Ue[qe-or],jr=Ue[qe+0],Vr=Ue[qe+or],nn=Ue[qe+2*or],vn=Ue[qe+3*or];return 4*Ta[255+Nr-jr]+Ta[255+Fr-Vr]>yr?0:Ta[255+Ue[qe-4*or]-Lr]<=Pr&&Ta[255+Lr-Fr]<=Pr&&Ta[255+Fr-Nr]<=Pr&&Ta[255+vn-nn]<=Pr&&Ta[255+nn-Vr]<=Pr&&Ta[255+Vr-jr]<=Pr}function Za(Ue,qe,or,yr){var Pr=2*yr+1;for(yr=0;16>yr;++yr)Rs(Ue,qe+yr,or,Pr)&&Eo(Ue,qe+yr,or)}function Va(Ue,qe,or,yr){var Pr=2*yr+1;for(yr=0;16>yr;++yr)Rs(Ue,qe+yr*or,1,Pr)&&Eo(Ue,qe+yr*or,1)}function Ls(Ue,qe,or,yr){var Pr;for(Pr=3;0<Pr;--Pr)Za(Ue,qe+=4*or,or,yr)}function Fs(Ue,qe,or,yr){var Pr;for(Pr=3;0<Pr;--Pr)Va(Ue,qe+=4,or,yr)}function Ji(Ue,qe,or,yr,Pr,Lr,Fr,Nr){for(Lr=2*Lr+1;0<Pr--;){if(fs(Ue,qe,or,Lr,Fr))if(Es(Ue,qe,or,Nr))Eo(Ue,qe,or);else{var jr=Ue,Vr=qe,nn=or,vn=jr[Vr-2*nn],gn=jr[Vr-nn],un=jr[Vr+0],Rn=jr[Vr+nn],wn=jr[Vr+2*nn],an=27*(On=Ko[1020+3*(un-gn)+Ko[1020+vn-Rn]])+63>>7,on=18*On+63>>7,On=9*On+63>>7;jr[Vr-3*nn]=Zi[255+jr[Vr-3*nn]+On],jr[Vr-2*nn]=Zi[255+vn+on],jr[Vr-nn]=Zi[255+gn+an],jr[Vr+0]=Zi[255+un-an],jr[Vr+nn]=Zi[255+Rn-on],jr[Vr+2*nn]=Zi[255+wn-On]}qe+=yr}}function xa(Ue,qe,or,yr,Pr,Lr,Fr,Nr){for(Lr=2*Lr+1;0<Pr--;){if(fs(Ue,qe,or,Lr,Fr))if(Es(Ue,qe,or,Nr))Eo(Ue,qe,or);else{var jr=Ue,Vr=qe,nn=or,vn=jr[Vr-nn],gn=jr[Vr+0],un=jr[Vr+nn],Rn=xo[112+((wn=3*(gn-vn))+4>>3)],wn=xo[112+(wn+3>>3)],an=Rn+1>>1;jr[Vr-2*nn]=Zi[255+jr[Vr-2*nn]+an],jr[Vr-nn]=Zi[255+vn+wn],jr[Vr+0]=Zi[255+gn-Rn],jr[Vr+nn]=Zi[255+un-an]}qe+=yr}}function po(Ue,qe,or,yr,Pr,Lr){Ji(Ue,qe,or,1,16,yr,Pr,Lr)}function tl(Ue,qe,or,yr,Pr,Lr){Ji(Ue,qe,1,or,16,yr,Pr,Lr)}function eo(Ue,qe,or,yr,Pr,Lr){var Fr;for(Fr=3;0<Fr;--Fr)xa(Ue,qe+=4*or,or,1,16,yr,Pr,Lr)}function rl(Ue,qe,or,yr,Pr,Lr){var Fr;for(Fr=3;0<Fr;--Fr)xa(Ue,qe+=4,1,or,16,yr,Pr,Lr)}function ds(Ue,qe,or,yr,Pr,Lr,Fr,Nr){Ji(Ue,qe,Pr,1,8,Lr,Fr,Nr),Ji(or,yr,Pr,1,8,Lr,Fr,Nr)}function Vo(Ue,qe,or,yr,Pr,Lr,Fr,Nr){Ji(Ue,qe,1,Pr,8,Lr,Fr,Nr),Ji(or,yr,1,Pr,8,Lr,Fr,Nr)}function Ms(Ue,qe,or,yr,Pr,Lr,Fr,Nr){xa(Ue,qe+4*Pr,Pr,1,8,Lr,Fr,Nr),xa(or,yr+4*Pr,Pr,1,8,Lr,Fr,Nr)}function to(Ue,qe,or,yr,Pr,Lr,Fr,Nr){xa(Ue,qe+4,1,Pr,8,Lr,Fr,Nr),xa(or,yr+4,1,Pr,8,Lr,Fr,Nr)}function Go(){this.ba=new yn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new bn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Ho(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Ns(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function ps(){this.ua=0,this.Wa=new sr,this.vb=new sr,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new cr,this.yc=new nr}function Ro(){this.xb=this.a=0,this.l=new Po,this.ca=new yn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new Ve,this.Pb=0,this.wd=new Ve,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new ps,this.ab=0,this.gc=Be(4,Ns),this.Oc=0}function vo(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Po,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function ro(Ue,qe,or,yr,Pr,Lr,Fr){for(Ue=Ue==null?0:Ue[qe+0],qe=0;qe<Fr;++qe)Pr[Lr+qe]=Ue+or[yr+qe]&255,Ue=Pr[Lr+qe]}function ua(Ue,qe,or,yr,Pr,Lr,Fr){var Nr;if(Ue==null)ro(null,null,or,yr,Pr,Lr,Fr);else for(Nr=0;Nr<Fr;++Nr)Pr[Lr+Nr]=Ue[qe+Nr]+or[yr+Nr]&255}function no(Ue,qe,or,yr,Pr,Lr,Fr){if(Ue==null)ro(null,null,or,yr,Pr,Lr,Fr);else{var Nr,jr=Ue[qe+0],Vr=jr,nn=jr;for(Nr=0;Nr<Fr;++Nr)Vr=nn+(jr=Ue[qe+Nr])-Vr,nn=or[yr+Nr]+(-256&Vr?0>Vr?0:255:Vr)&255,Vr=jr,Pr[Lr+Nr]=nn}}function tr(Ue,qe,or,yr){var Pr=qe.width,Lr=qe.o;if(e(Ue!=null&&qe!=null),0>or||0>=yr||or+yr>Lr)return null;if(!Ue.Cc){if(Ue.ga==null){var Fr;if(Ue.ga=new vo,(Fr=Ue.ga==null)||(Fr=qe.width*qe.o,e(Ue.Gb.length==0),Ue.Gb=Ie(Fr),Ue.Uc=0,Ue.Gb==null?Fr=0:(Ue.mb=Ue.Gb,Ue.nb=Ue.Uc,Ue.rc=null,Fr=1),Fr=!Fr),!Fr){Fr=Ue.ga;var Nr=Ue.Fa,jr=Ue.P,Vr=Ue.qc,nn=Ue.mb,vn=Ue.nb,gn=jr+1,un=Vr-1,Rn=Fr.l;if(e(Nr!=null&&nn!=null&&qe!=null),$n[0]=null,$n[1]=ro,$n[2]=ua,$n[3]=no,Fr.ca=nn,Fr.tb=vn,Fr.c=qe.width,Fr.i=qe.height,e(0<Fr.c&&0<Fr.i),1>=Vr)qe=0;else if(Fr.$a=Nr[jr+0]>>0&3,Fr.Z=Nr[jr+0]>>2&3,Fr.Lc=Nr[jr+0]>>4&3,jr=Nr[jr+0]>>6&3,0>Fr.$a||1<Fr.$a||4<=Fr.Z||1<Fr.Lc||jr)qe=0;else if(Rn.put=In,Rn.ac=Nn,Rn.bc=Bn,Rn.ma=Fr,Rn.width=qe.width,Rn.height=qe.height,Rn.Da=qe.Da,Rn.v=qe.v,Rn.va=qe.va,Rn.j=qe.j,Rn.o=qe.o,Fr.$a)e:{e(Fr.$a==1),qe=Yn();t:for(;;){if(qe==null){qe=0;break e}if(e(Fr!=null),Fr.mc=qe,qe.c=Fr.c,qe.i=Fr.i,qe.l=Fr.l,qe.l.ma=Fr,qe.l.width=Fr.c,qe.l.height=Fr.i,qe.a=0,Sr(qe.m,Nr,gn,un),!Xn(Fr.c,Fr.i,1,qe,null)||(qe.ab==1&&qe.gc[0].hc==3&&_n(qe.s)?(Fr.ic=1,Nr=qe.c*qe.i,qe.Ta=null,qe.Ua=0,qe.V=Ie(Nr),qe.Ba=0,qe.V==null?(qe.a=1,qe=0):qe=1):(Fr.ic=0,qe=li(qe,Fr.c)),!qe))break t;qe=1;break e}Fr.mc=null,qe=0}else qe=un>=Fr.c*Fr.i;Fr=!qe}if(Fr)return null;Ue.ga.Lc!=1?Ue.Ga=0:yr=Lr-or}e(Ue.ga!=null),e(or+yr<=Lr);e:{if(qe=(Nr=Ue.ga).c,Lr=Nr.l.o,Nr.$a==0){if(gn=Ue.rc,un=Ue.Vc,Rn=Ue.Fa,jr=Ue.P+1+or*qe,Vr=Ue.mb,nn=Ue.nb+or*qe,e(jr<=Ue.P+Ue.qc),Nr.Z!=0)for(e($n[Nr.Z]!=null),Fr=0;Fr<yr;++Fr)$n[Nr.Z](gn,un,Rn,jr,Vr,nn,qe),gn=Vr,un=nn,nn+=qe,jr+=qe;else for(Fr=0;Fr<yr;++Fr)Pe(Vr,nn,Rn,jr,qe),gn=Vr,un=nn,nn+=qe,jr+=qe;Ue.rc=gn,Ue.Vc=un}else{if(e(Nr.mc!=null),qe=or+yr,e((Fr=Nr.mc)!=null),e(qe<=Fr.i),Fr.C>=qe)qe=1;else if(Nr.ic||An(),Nr.ic){Nr=Fr.V,gn=Fr.Ba,un=Fr.c;var wn=Fr.i,an=(Rn=1,jr=Fr.$/un,Vr=Fr.$%un,nn=Fr.m,vn=Fr.s,Fr.$),on=un*wn,On=un*qe,Mn=vn.wc,En=an<On?fi(vn,Vr,jr):null;e(an<=on),e(qe<=wn),e(_n(vn));t:for(;;){for(;!nn.h&&an<On;){if(Vr&Mn||(En=fi(vn,Vr,jr)),e(En!=null),vr(nn),256>(wn=si(En.G[0],En.H[0],nn)))Nr[gn+an]=wn,++an,++Vr>=un&&(Vr=0,++jr<=qe&&!(jr%16)&&cn(Fr,jr));else{if(!(280>wn)){Rn=0;break t}wn=qn(wn-256,nn);var Hn,zn=si(En.G[4],En.H[4],nn);if(vr(nn),!(an>=(zn=ni(un,zn=qn(zn,nn)))&&on-an>=wn)){Rn=0;break t}for(Hn=0;Hn<wn;++Hn)Nr[gn+an+Hn]=Nr[gn+an+Hn-zn];for(an+=wn,Vr+=wn;Vr>=un;)Vr-=un,++jr<=qe&&!(jr%16)&&cn(Fr,jr);an<On&&Vr&Mn&&(En=fi(vn,Vr,jr))}e(nn.h==Ze(nn))}cn(Fr,jr>qe?qe:jr);break t}!Rn||nn.h&&an<on?(Rn=0,Fr.a=nn.h?5:3):Fr.$=an,qe=Rn}else qe=jn(Fr,Fr.V,Fr.Ba,Fr.c,Fr.i,qe,Pi);if(!qe){yr=0;break e}}or+yr>=Lr&&(Ue.Cc=1),yr=1}if(!yr)return null;if(Ue.Cc&&((yr=Ue.ga)!=null&&(yr.mc=null),Ue.ga=null,0<Ue.Ga))return alert("todo:WebPDequantizeLevels"),null}return Ue.nb+or*Pr}function Tr(Ue,qe,or,yr,Pr,Lr){for(;0<Pr--;){var Fr,Nr=Ue,jr=qe+(or?1:0),Vr=Ue,nn=qe+(or?0:3);for(Fr=0;Fr<yr;++Fr){var vn=Vr[nn+4*Fr];vn!=255&&(vn*=32897,Nr[jr+4*Fr+0]=Nr[jr+4*Fr+0]*vn>>23,Nr[jr+4*Fr+1]=Nr[jr+4*Fr+1]*vn>>23,Nr[jr+4*Fr+2]=Nr[jr+4*Fr+2]*vn>>23)}qe+=Lr}}function qr(Ue,qe,or,yr,Pr){for(;0<yr--;){var Lr;for(Lr=0;Lr<or;++Lr){var Fr=Ue[qe+2*Lr+0],Nr=15&(Vr=Ue[qe+2*Lr+1]),jr=4369*Nr,Vr=(240&Vr|Vr>>4)*jr>>16;Ue[qe+2*Lr+0]=(240&Fr|Fr>>4)*jr>>16&240|(15&Fr|Fr<<4)*jr>>16>>4&15,Ue[qe+2*Lr+1]=240&Vr|Nr}qe+=Pr}}function en(Ue,qe,or,yr,Pr,Lr,Fr,Nr){var jr,Vr,nn=255;for(Vr=0;Vr<Pr;++Vr){for(jr=0;jr<yr;++jr){var vn=Ue[qe+jr];Lr[Fr+4*jr]=vn,nn&=vn}qe+=or,Fr+=Nr}return nn!=255}function fn(Ue,qe,or,yr,Pr){var Lr;for(Lr=0;Lr<Pr;++Lr)or[yr+Lr]=Ue[qe+Lr]>>8}function An(){wo=Tr,$o=qr,Ds=en,bl=fn}function Ln(Ue,qe,or){Xe[Ue]=function(yr,Pr,Lr,Fr,Nr,jr,Vr,nn,vn,gn,un,Rn,wn,an,on,On,Mn){var En,Hn=Mn-1>>1,zn=Nr[jr+0]|Vr[nn+0]<<16,Jn=vn[gn+0]|un[Rn+0]<<16;e(yr!=null);var Un=3*zn+Jn+131074>>2;for(qe(yr[Pr+0],255&Un,Un>>16,wn,an),Lr!=null&&(Un=3*Jn+zn+131074>>2,qe(Lr[Fr+0],255&Un,Un>>16,on,On)),En=1;En<=Hn;++En){var yi=Nr[jr+En]|Vr[nn+En]<<16,Si=vn[gn+En]|un[Rn+En]<<16,vi=zn+yi+Jn+Si+524296,hi=vi+2*(yi+Jn)>>3;Un=hi+zn>>1,zn=(vi=vi+2*(zn+Si)>>3)+yi>>1,qe(yr[Pr+2*En-1],255&Un,Un>>16,wn,an+(2*En-1)*or),qe(yr[Pr+2*En-0],255&zn,zn>>16,wn,an+(2*En-0)*or),Lr!=null&&(Un=vi+Jn>>1,zn=hi+Si>>1,qe(Lr[Fr+2*En-1],255&Un,Un>>16,on,On+(2*En-1)*or),qe(Lr[Fr+2*En+0],255&zn,zn>>16,on,On+(2*En+0)*or)),zn=yi,Jn=Si}1&Mn||(Un=3*zn+Jn+131074>>2,qe(yr[Pr+Mn-1],255&Un,Un>>16,wn,an+(Mn-1)*or),Lr!=null&&(Un=3*Jn+zn+131074>>2,qe(Lr[Fr+Mn-1],255&Un,Un>>16,on,On+(Mn-1)*or)))}}function Wn(){ri[Bs]=Fi,ri[_s]=lo,ri[sl]=$a,ri[zs]=Io,ri[Ss]=Zo,ri[ll]=hl,ri[Sl]=dl,ri[ul]=lo,ri[cl]=Io,ri[Us]=Zo,ri[Jo]=hl}function Kn(Ue){return Ue&~pu?0>Ue?0:255:Ue>>Xl}function Zn(Ue,qe){return Kn((19077*Ue>>8)+(26149*qe>>8)-14234)}function ai(Ue,qe,or){return Kn((19077*Ue>>8)-(6419*qe>>8)-(13320*or>>8)+8708)}function ci(Ue,qe){return Kn((19077*Ue>>8)+(33050*qe>>8)-17685)}function xi(Ue,qe,or,yr,Pr){yr[Pr+0]=Zn(Ue,or),yr[Pr+1]=ai(Ue,qe,or),yr[Pr+2]=ci(Ue,qe)}function Ti(Ue,qe,or,yr,Pr){yr[Pr+0]=ci(Ue,qe),yr[Pr+1]=ai(Ue,qe,or),yr[Pr+2]=Zn(Ue,or)}function zi(Ue,qe,or,yr,Pr){var Lr=ai(Ue,qe,or);qe=Lr<<3&224|ci(Ue,qe)>>3,yr[Pr+0]=248&Zn(Ue,or)|Lr>>5,yr[Pr+1]=qe}function Qi(Ue,qe,or,yr,Pr){var Lr=240&ci(Ue,qe)|15;yr[Pr+0]=240&Zn(Ue,or)|ai(Ue,qe,or)>>4,yr[Pr+1]=Lr}function Xi(Ue,qe,or,yr,Pr){yr[Pr+0]=255,xi(Ue,qe,or,yr,Pr+1)}function Aa(Ue,qe,or,yr,Pr){Ti(Ue,qe,or,yr,Pr),yr[Pr+3]=255}function Fa(Ue,qe,or,yr,Pr){xi(Ue,qe,or,yr,Pr),yr[Pr+3]=255}function qi(Ue,qe){return 0>Ue?0:Ue>qe?qe:Ue}function Ca(Ue,qe,or){Xe[Ue]=function(yr,Pr,Lr,Fr,Nr,jr,Vr,nn,vn){for(var gn=nn+(-2&vn)*or;nn!=gn;)qe(yr[Pr+0],Lr[Fr+0],Nr[jr+0],Vr,nn),qe(yr[Pr+1],Lr[Fr+0],Nr[jr+0],Vr,nn+or),Pr+=2,++Fr,++jr,nn+=2*or;1&vn&&qe(yr[Pr+0],Lr[Fr+0],Nr[jr+0],Vr,nn)}}function go(Ue,qe,or){return or==0?Ue==0?qe==0?6:5:qe==0?4:0:or}function qo(Ue,qe,or,yr,Pr){switch(Ue>>>30){case 3:Fo(qe,or,yr,Pr,0);break;case 2:Mo(qe,or,yr,Pr);break;case 1:Yi(qe,or,yr,Pr)}}function mo(Ue,qe){var or,yr,Pr=qe.M,Lr=qe.Nb,Fr=Ue.oc,Nr=Ue.pc+40,jr=Ue.oc,Vr=Ue.pc+584,nn=Ue.oc,vn=Ue.pc+600;for(or=0;16>or;++or)Fr[Nr+32*or-1]=129;for(or=0;8>or;++or)jr[Vr+32*or-1]=129,nn[vn+32*or-1]=129;for(0<Pr?Fr[Nr-1-32]=jr[Vr-1-32]=nn[vn-1-32]=129:(Me(Fr,Nr-32-1,127,21),Me(jr,Vr-32-1,127,9),Me(nn,vn-32-1,127,9)),yr=0;yr<Ue.za;++yr){var gn=qe.ya[qe.aa+yr];if(0<yr){for(or=-1;16>or;++or)Pe(Fr,Nr+32*or-4,Fr,Nr+32*or+12,4);for(or=-1;8>or;++or)Pe(jr,Vr+32*or-4,jr,Vr+32*or+4,4),Pe(nn,vn+32*or-4,nn,vn+32*or+4,4)}var un=Ue.Gd,Rn=Ue.Hd+yr,wn=gn.ad,an=gn.Hc;if(0<Pr&&(Pe(Fr,Nr-32,un[Rn].y,0,16),Pe(jr,Vr-32,un[Rn].f,0,8),Pe(nn,vn-32,un[Rn].ea,0,8)),gn.Za){var on=Fr,On=Nr-32+16;for(0<Pr&&(yr>=Ue.za-1?Me(on,On,un[Rn].y[15],4):Pe(on,On,un[Rn+1].y,0,4)),or=0;4>or;or++)on[On+128+or]=on[On+256+or]=on[On+384+or]=on[On+0+or];for(or=0;16>or;++or,an<<=2)on=Fr,On=Nr+$l[or],Wi[gn.Ob[or]](on,On),qo(an,wn,16*+or,on,On)}else if(on=go(yr,Pr,gn.Ob[0]),Ei[on](Fr,Nr),an!=0)for(or=0;16>or;++or,an<<=2)qo(an,wn,16*+or,Fr,Nr+$l[or]);for(or=gn.Gc,on=go(yr,Pr,gn.Dd),Bi[on](jr,Vr),Bi[on](nn,vn),an=wn,on=jr,On=Vr,255&(gn=or>>0)&&(170&gn?ia(an,256,on,On):Hi(an,256,on,On)),gn=nn,an=vn,255&(or>>=8)&&(170&or?ia(wn,320,gn,an):Hi(wn,320,gn,an)),Pr<Ue.Ub-1&&(Pe(un[Rn].y,0,Fr,Nr+480,16),Pe(un[Rn].f,0,jr,Vr+224,8),Pe(un[Rn].ea,0,nn,vn+224,8)),or=8*Lr*Ue.B,un=Ue.sa,Rn=Ue.ta+16*yr+16*Lr*Ue.R,wn=Ue.qa,gn=Ue.ra+8*yr+or,an=Ue.Ha,on=Ue.Ia+8*yr+or,or=0;16>or;++or)Pe(un,Rn+or*Ue.R,Fr,Nr+32*or,16);for(or=0;8>or;++or)Pe(wn,gn+or*Ue.B,jr,Vr+32*or,8),Pe(an,on+or*Ue.B,nn,vn+32*or,8)}}function Ga(Ue,qe,or,yr,Pr,Lr,Fr,Nr,jr){var Vr=[0],nn=[0],vn=0,gn=jr!=null?jr.kd:0,un=jr!=null?jr:new Ho;if(Ue==null||12>or)return 7;un.data=Ue,un.w=qe,un.ha=or,qe=[qe],or=[or],un.gb=[un.gb];e:{var Rn=qe,wn=or,an=un.gb;if(e(Ue!=null),e(wn!=null),e(an!=null),an[0]=0,12<=wn[0]&&!t(Ue,Rn[0],"RIFF")){if(t(Ue,Rn[0]+8,"WEBP")){an=3;break e}var on=rr(Ue,Rn[0]+4);if(12>on||4294967286<on){an=3;break e}if(gn&&on>wn[0]-8){an=7;break e}an[0]=on,Rn[0]+=12,wn[0]-=12}an=0}if(an!=0)return an;for(on=0<un.gb[0],or=or[0];;){e:{var On=Ue;wn=qe,an=or;var Mn=Vr,En=nn,Hn=Rn=[0];if((Un=vn=[vn])[0]=0,8>an[0])an=7;else{if(!t(On,wn[0],"VP8X")){if(rr(On,wn[0]+4)!=10){an=3;break e}if(18>an[0]){an=7;break e}var zn=rr(On,wn[0]+8),Jn=1+ur(On,wn[0]+12);if(2147483648<=Jn*(On=1+ur(On,wn[0]+15))){an=3;break e}Hn!=null&&(Hn[0]=zn),Mn!=null&&(Mn[0]=Jn),En!=null&&(En[0]=On),wn[0]+=18,an[0]-=18,Un[0]=1}an=0}}if(vn=vn[0],Rn=Rn[0],an!=0)return an;if(wn=!!(2&Rn),!on&&vn)return 3;if(Lr!=null&&(Lr[0]=!!(16&Rn)),Fr!=null&&(Fr[0]=wn),Nr!=null&&(Nr[0]=0),Fr=Vr[0],Rn=nn[0],vn&&wn&&jr==null){an=0;break}if(4>or){an=7;break}if(on&&vn||!on&&!vn&&!t(Ue,qe[0],"ALPH")){or=[or],un.na=[un.na],un.P=[un.P],un.Sa=[un.Sa];e:{zn=Ue,an=qe,on=or;var Un=un.gb;Mn=un.na,En=un.P,Hn=un.Sa,Jn=22,e(zn!=null),e(on!=null),On=an[0];var yi=on[0];for(e(Mn!=null),e(Hn!=null),Mn[0]=null,En[0]=null,Hn[0]=0;;){if(an[0]=On,on[0]=yi,8>yi){an=7;break e}var Si=rr(zn,On+4);if(4294967286<Si){an=3;break e}var vi=8+Si+1&-2;if(Jn+=vi,0<Un&&Jn>Un){an=3;break e}if(!t(zn,On,"VP8 ")||!t(zn,On,"VP8L")){an=0;break e}if(yi[0]<vi){an=7;break e}t(zn,On,"ALPH")||(Mn[0]=zn,En[0]=On+8,Hn[0]=Si),On+=vi,yi-=vi}}if(or=or[0],un.na=un.na[0],un.P=un.P[0],un.Sa=un.Sa[0],an!=0)break}or=[or],un.Ja=[un.Ja],un.xa=[un.xa];e:if(Un=Ue,an=qe,on=or,Mn=un.gb[0],En=un.Ja,Hn=un.xa,zn=an[0],On=!t(Un,zn,"VP8 "),Jn=!t(Un,zn,"VP8L"),e(Un!=null),e(on!=null),e(En!=null),e(Hn!=null),8>on[0])an=7;else{if(On||Jn){if(Un=rr(Un,zn+4),12<=Mn&&Un>Mn-12){an=3;break e}if(gn&&Un>on[0]-8){an=7;break e}En[0]=Un,an[0]+=8,on[0]-=8,Hn[0]=Jn}else Hn[0]=5<=on[0]&&Un[zn+0]==47&&!(Un[zn+4]>>5),En[0]=on[0];an=0}if(or=or[0],un.Ja=un.Ja[0],un.xa=un.xa[0],qe=qe[0],an!=0)break;if(4294967286<un.Ja)return 3;if(Nr==null||wn||(Nr[0]=un.xa?2:1),Fr=[Fr],Rn=[Rn],un.xa){if(5>or){an=7;break}Nr=Fr,gn=Rn,wn=Lr,Ue==null||5>or?Ue=0:5<=or&&Ue[qe+0]==47&&!(Ue[qe+4]>>5)?(on=[0],Un=[0],Mn=[0],Sr(En=new Ve,Ue,qe,or),Fn(En,on,Un,Mn)?(Nr!=null&&(Nr[0]=on[0]),gn!=null&&(gn[0]=Un[0]),wn!=null&&(wn[0]=Mn[0]),Ue=1):Ue=0):Ue=0}else{if(10>or){an=7;break}Nr=Rn,Ue==null||10>or||!jo(Ue,qe+3,or-3)?Ue=0:(gn=Ue[qe+0]|Ue[qe+1]<<8|Ue[qe+2]<<16,wn=16383&(Ue[qe+7]<<8|Ue[qe+6]),Ue=16383&(Ue[qe+9]<<8|Ue[qe+8]),1&gn||3<(gn>>1&7)||!(gn>>4&1)||gn>>5>=un.Ja||!wn||!Ue?Ue=0:(Fr&&(Fr[0]=wn),Nr&&(Nr[0]=Ue),Ue=1))}if(!Ue||(Fr=Fr[0],Rn=Rn[0],vn&&(Vr[0]!=Fr||nn[0]!=Rn)))return 3;jr!=null&&(jr[0]=un,jr.offset=qe-jr.w,e(4294967286>qe-jr.w),e(jr.offset==jr.ha-or));break}return an==0||an==7&&vn&&jr==null?(Lr!=null&&(Lr[0]|=un.na!=null&&0<un.na.length),yr!=null&&(yr[0]=Fr),Pr!=null&&(Pr[0]=Rn),0):an}function yo(Ue,qe,or){var yr=qe.width,Pr=qe.height,Lr=0,Fr=0,Nr=yr,jr=Pr;if(qe.Da=Ue!=null&&0<Ue.Da,qe.Da&&(Nr=Ue.cd,jr=Ue.bd,Lr=Ue.v,Fr=Ue.j,11>or||(Lr&=-2,Fr&=-2),0>Lr||0>Fr||0>=Nr||0>=jr||Lr+Nr>yr||Fr+jr>Pr))return 0;if(qe.v=Lr,qe.j=Fr,qe.va=Lr+Nr,qe.o=Fr+jr,qe.U=Nr,qe.T=jr,qe.da=Ue!=null&&0<Ue.da,qe.da){if(!Ar(Nr,jr,or=[Ue.ib],Lr=[Ue.hb]))return 0;qe.ib=or[0],qe.hb=Lr[0]}return qe.ob=Ue!=null&&Ue.ob,qe.Kb=Ue==null||!Ue.Sd,qe.da&&(qe.ob=qe.ib<3*yr/4&&qe.hb<3*Pr/4,qe.Kb=0),1}function ka(Ue){if(Ue==null)return 2;if(11>Ue.S){var qe=Ue.f.RGBA;qe.fb+=(Ue.height-1)*qe.A,qe.A=-qe.A}else qe=Ue.f.kb,Ue=Ue.height,qe.O+=(Ue-1)*qe.fa,qe.fa=-qe.fa,qe.N+=(Ue-1>>1)*qe.Ab,qe.Ab=-qe.Ab,qe.W+=(Ue-1>>1)*qe.Db,qe.Db=-qe.Db,qe.F!=null&&(qe.J+=(Ue-1)*qe.lb,qe.lb=-qe.lb);return 0}function bo(Ue,qe,or,yr){if(yr==null||0>=Ue||0>=qe)return 2;if(or!=null){if(or.Da){var Pr=or.cd,Lr=or.bd,Fr=-2&or.v,Nr=-2&or.j;if(0>Fr||0>Nr||0>=Pr||0>=Lr||Fr+Pr>Ue||Nr+Lr>qe)return 2;Ue=Pr,qe=Lr}if(or.da){if(!Ar(Ue,qe,Pr=[or.ib],Lr=[or.hb]))return 2;Ue=Pr[0],qe=Lr[0]}}yr.width=Ue,yr.height=qe;e:{var jr=yr.width,Vr=yr.height;if(Ue=yr.S,0>=jr||0>=Vr||!(Ue>=Bs&&13>Ue))Ue=2;else{if(0>=yr.Rd&&yr.sd==null){Fr=Lr=Pr=qe=0;var nn=(Nr=jr*Kl[Ue])*Vr;if(11>Ue||(Lr=(Vr+1)/2*(qe=(jr+1)/2),Ue==12&&(Fr=(Pr=jr)*Vr)),(Vr=Ie(nn+2*Lr+Fr))==null){Ue=1;break e}yr.sd=Vr,11>Ue?((jr=yr.f.RGBA).eb=Vr,jr.fb=0,jr.A=Nr,jr.size=nn):((jr=yr.f.kb).y=Vr,jr.O=0,jr.fa=Nr,jr.Fd=nn,jr.f=Vr,jr.N=0+nn,jr.Ab=qe,jr.Cd=Lr,jr.ea=Vr,jr.W=0+nn+Lr,jr.Db=qe,jr.Ed=Lr,Ue==12&&(jr.F=Vr,jr.J=0+nn+2*Lr),jr.Tc=Fr,jr.lb=Pr)}if(qe=1,Pr=yr.S,Lr=yr.width,Fr=yr.height,Pr>=Bs&&13>Pr)if(11>Pr)Ue=yr.f.RGBA,qe&=(Nr=Math.abs(Ue.A))*(Fr-1)+Lr<=Ue.size,qe&=Nr>=Lr*Kl[Pr],qe&=Ue.eb!=null;else{Ue=yr.f.kb,Nr=(Lr+1)/2,nn=(Fr+1)/2,jr=Math.abs(Ue.fa),Vr=Math.abs(Ue.Ab);var vn=Math.abs(Ue.Db),gn=Math.abs(Ue.lb),un=gn*(Fr-1)+Lr;qe&=jr*(Fr-1)+Lr<=Ue.Fd,qe&=Vr*(nn-1)+Nr<=Ue.Cd,qe=(qe&=vn*(nn-1)+Nr<=Ue.Ed)&jr>=Lr&Vr>=Nr&vn>=Nr,qe&=Ue.y!=null,qe&=Ue.f!=null,qe&=Ue.ea!=null,Pr==12&&(qe&=gn>=Lr,qe&=un<=Ue.Tc,qe&=Ue.F!=null)}else qe=0;Ue=qe?0:2}}return Ue!=0||or!=null&&or.fd&&(Ue=ka(yr)),Ue}var ca=64,Ma=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Lo=24,Xo=32,_o=8,ha=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Gr("Predictor0","PredictorAdd0"),Xe.Predictor0=function(){return 4278190080},Xe.Predictor1=function(Ue){return Ue},Xe.Predictor2=function(Ue,qe,or){return qe[or+0]},Xe.Predictor3=function(Ue,qe,or){return qe[or+1]},Xe.Predictor4=function(Ue,qe,or){return qe[or-1]},Xe.Predictor5=function(Ue,qe,or){return Ir(Ir(Ue,qe[or+1]),qe[or+0])},Xe.Predictor6=function(Ue,qe,or){return Ir(Ue,qe[or-1])},Xe.Predictor7=function(Ue,qe,or){return Ir(Ue,qe[or+0])},Xe.Predictor8=function(Ue,qe,or){return Ir(qe[or-1],qe[or+0])},Xe.Predictor9=function(Ue,qe,or){return Ir(qe[or+0],qe[or+1])},Xe.Predictor10=function(Ue,qe,or){return Ir(Ir(Ue,qe[or-1]),Ir(qe[or+0],qe[or+1]))},Xe.Predictor11=function(Ue,qe,or){var yr=qe[or+0];return 0>=sn(yr>>24&255,Ue>>24&255,(qe=qe[or-1])>>24&255)+sn(yr>>16&255,Ue>>16&255,qe>>16&255)+sn(yr>>8&255,Ue>>8&255,qe>>8&255)+sn(255&yr,255&Ue,255&qe)?yr:Ue},Xe.Predictor12=function(Ue,qe,or){var yr=qe[or+0];return(Qr((Ue>>24&255)+(yr>>24&255)-((qe=qe[or-1])>>24&255))<<24|Qr((Ue>>16&255)+(yr>>16&255)-(qe>>16&255))<<16|Qr((Ue>>8&255)+(yr>>8&255)-(qe>>8&255))<<8|Qr((255&Ue)+(255&yr)-(255&qe)))>>>0},Xe.Predictor13=function(Ue,qe,or){var yr=qe[or-1];return(rn((Ue=Ir(Ue,qe[or+0]))>>24&255,yr>>24&255)<<24|rn(Ue>>16&255,yr>>16&255)<<16|rn(Ue>>8&255,yr>>8&255)<<8|rn(Ue>>0&255,yr>>0&255))>>>0};var nl=Xe.PredictorAdd0;Xe.PredictorAdd1=pn,Gr("Predictor2","PredictorAdd2"),Gr("Predictor3","PredictorAdd3"),Gr("Predictor4","PredictorAdd4"),Gr("Predictor5","PredictorAdd5"),Gr("Predictor6","PredictorAdd6"),Gr("Predictor7","PredictorAdd7"),Gr("Predictor8","PredictorAdd8"),Gr("Predictor9","PredictorAdd9"),Gr("Predictor10","PredictorAdd10"),Gr("Predictor11","PredictorAdd11"),Gr("Predictor12","PredictorAdd12"),Gr("Predictor13","PredictorAdd13");var vs=Xe.PredictorAdd2;Xr("ColorIndexInverseTransform","MapARGB","32b",function(Ue){return Ue>>8&255},function(Ue){return Ue}),Xr("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(Ue){return Ue},function(Ue){return Ue>>8&255});var Is,Na=Xe.ColorIndexInverseTransform,gs=Xe.MapARGB,il=Xe.VP8LColorIndexInverseTransformAlpha,al=Xe.MapAlpha,So=Xe.VP8LPredictorsAdd=[];So.length=16,(Xe.VP8LPredictors=[]).length=16,(Xe.VP8LPredictorsAdd_C=[]).length=16,(Xe.VP8LPredictors_C=[]).length=16;var Pa,Ia,io,Ha,ao,da,pa,Fo,Mo,ia,Yi,Hi,Da,No,va,oo,Yo,aa,qa,bi,_i,Oi,Ui,Xa,wo,$o,Ds,bl,ms=Ie(511),_l=Ie(2041),ol=Ie(225),ys=Ie(767),bs=0,Ko=_l,xo=ol,Zi=ys,Ta=ms,Bs=0,_s=1,sl=2,zs=3,Ss=4,ll=5,Sl=6,ul=7,cl=8,Us=9,Jo=10,wl=[2,3,7],He=[3,3,11],ar=[280,256,256,256,40],kr=[0,1,1,1,0],Yr=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],hn=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],kn=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Dn=8,Gn=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],ei=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ti=null,ui=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],di=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Di=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Ba=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Qo=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Ao=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Ya=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ei=[],Wi=[],Bi=[],so=1,Ri=2,$n=[],ri=[];Ln("UpsampleRgbLinePair",xi,3),Ln("UpsampleBgrLinePair",Ti,3),Ln("UpsampleRgbaLinePair",Fa,4),Ln("UpsampleBgraLinePair",Aa,4),Ln("UpsampleArgbLinePair",Xi,4),Ln("UpsampleRgba4444LinePair",Qi,2),Ln("UpsampleRgb565LinePair",zi,2);var Fi=Xe.UpsampleRgbLinePair,$a=Xe.UpsampleBgrLinePair,lo=Xe.UpsampleRgbaLinePair,Io=Xe.UpsampleBgraLinePair,Zo=Xe.UpsampleArgbLinePair,hl=Xe.UpsampleRgba4444LinePair,dl=Xe.UpsampleRgb565LinePair,xl=16,Al=1<<xl-1,pl=-227,Il=482,Xl=6,pu=(256<<Xl)-1,Yl=0,vu=Ie(256),gu=Ie(256),mu=Ie(256),yu=Ie(256),bu=Ie(Il-pl),_u=Ie(Il-pl);Ca("YuvToRgbRow",xi,3),Ca("YuvToBgrRow",Ti,3),Ca("YuvToRgbaRow",Fa,4),Ca("YuvToBgraRow",Aa,4),Ca("YuvToArgbRow",Xi,4),Ca("YuvToRgba4444Row",Qi,2),Ca("YuvToRgb565Row",zi,2);var $l=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Cl=[0,2,8],Su=[8,7,6,4,4,2,2,2,1,1,1,1],wu=1;this.WebPDecodeRGBA=function(Ue,qe,or,yr,Pr){var Lr=_s,Fr=new Go,Nr=new yn;Fr.ba=Nr,Nr.S=Lr,Nr.width=[Nr.width],Nr.height=[Nr.height];var jr=Nr.width,Vr=Nr.height,nn=new Pn;if(nn==null||Ue==null)var vn=2;else e(nn!=null),vn=Ga(Ue,qe,or,nn.width,nn.height,nn.Pd,nn.Qd,nn.format,null);if(vn!=0?jr=0:(jr!=null&&(jr[0]=nn.width[0]),Vr!=null&&(Vr[0]=nn.height[0]),jr=1),jr){Nr.width=Nr.width[0],Nr.height=Nr.height[0],yr!=null&&(yr[0]=Nr.width),Pr!=null&&(Pr[0]=Nr.height);e:{if(yr=new Po,(Pr=new Ho).data=Ue,Pr.w=qe,Pr.ha=or,Pr.kd=1,qe=[0],e(Pr!=null),((Ue=Ga(Pr.data,Pr.w,Pr.ha,null,null,null,qe,null,Pr))==0||Ue==7)&&qe[0]&&(Ue=4),(qe=Ue)==0){if(e(Fr!=null),yr.data=Pr.data,yr.w=Pr.w+Pr.offset,yr.ha=Pr.ha-Pr.offset,yr.put=In,yr.ac=Nn,yr.bc=Bn,yr.ma=Fr,Pr.xa){if((Ue=Yn())==null){Fr=1;break e}if(function(gn,un){var Rn=[0],wn=[0],an=[0];t:for(;;){if(gn==null)return 0;if(un==null)return gn.a=2,0;if(gn.l=un,gn.a=0,Sr(gn.m,un.data,un.w,un.ha),!Fn(gn.m,Rn,wn,an)){gn.a=3;break t}if(gn.xb=Ri,un.width=Rn[0],un.height=wn[0],!Xn(Rn[0],wn[0],1,gn,null))break t;return 1}return e(gn.a!=0),0}(Ue,yr)){if(yr=(qe=bo(yr.width,yr.height,Fr.Oa,Fr.ba))==0){t:{yr=Ue;r:for(;;){if(yr==null){yr=0;break t}if(e(yr.s.yc!=null),e(yr.s.Ya!=null),e(0<yr.s.Wb),e((or=yr.l)!=null),e((Pr=or.ma)!=null),yr.xb!=0){if(yr.ca=Pr.ba,yr.tb=Pr.tb,e(yr.ca!=null),!yo(Pr.Oa,or,zs)){yr.a=2;break r}if(!li(yr,or.width)||or.da)break r;if((or.da||$r(yr.ca.S))&&An(),11>yr.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),yr.ca.f.kb.F!=null&&An()),yr.Pb&&0<yr.s.ua&&yr.s.vb.X==null&&!gr(yr.s.vb,yr.s.Wa.Xa)){yr.a=1;break r}yr.xb=0}if(!jn(yr,yr.V,yr.Ba,yr.c,yr.i,or.o,Zr))break r;Pr.Dc=yr.Ma,yr=1;break t}e(yr.a!=0),yr=0}yr=!yr}yr&&(qe=Ue.a)}else qe=Ue.a}else{if((Ue=new xs)==null){Fr=1;break e}if(Ue.Fa=Pr.na,Ue.P=Pr.P,Ue.qc=Pr.Sa,Qa(Ue,yr)){if((qe=bo(yr.width,yr.height,Fr.Oa,Fr.ba))==0){if(Ue.Aa=0,or=Fr.Oa,e((Pr=Ue)!=null),or!=null){if(0<(jr=0>(jr=or.Md)?0:100<jr?255:255*jr/100)){for(Vr=nn=0;4>Vr;++Vr)12>(vn=Pr.pb[Vr]).lc&&(vn.ia=jr*Su[0>vn.lc?0:vn.lc]>>3),nn|=vn.ia;nn&&(alert("todo:VP8InitRandom"),Pr.ia=1)}Pr.Ga=or.Id,100<Pr.Ga?Pr.Ga=100:0>Pr.Ga&&(Pr.Ga=0)}zo(Ue,yr)||(qe=Ue.a)}}else qe=Ue.a}qe==0&&Fr.Oa!=null&&Fr.Oa.fd&&(qe=ka(Fr.ba))}Fr=qe}Lr=Fr!=0?null:11>Lr?Nr.f.RGBA.eb:Nr.f.kb.y}else Lr=null;return Lr};var Kl=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function Ce(Xe,Ke){for(var er="",Qe=0;Qe<4;Qe++)er+=String.fromCharCode(Xe[Ke++]);return er}function Te(Xe,Ke){return(Xe[Ke+0]<<0|Xe[Ke+1]<<8|Xe[Ke+2]<<16)>>>0}function Se(Xe,Ke){return(Xe[Ke+0]<<0|Xe[Ke+1]<<8|Xe[Ke+2]<<16|Xe[Ke+3]<<24)>>>0}new _e;var xe=[0],r=[0],Oe=[],Ee=new _e,Ae=Re,Fe=function(Xe,Ke){var er={},Qe=0,nr=!1,ir=0,cr=0;if(er.frames=[],!function(Je,Ze,St,vr){for(var mr=0;mr<vr;mr++)if(Je[Ze+mr]!=St.charCodeAt(mr))return!0;return!1}(Xe,Ke,"RIFF",4)){var br,wr;for(Se(Xe,Ke+=4),Ke+=8;Ke<Xe.length;){var xr=Ce(Xe,Ke),Sr=Se(Xe,Ke+=4);Ke+=4;var lr=Sr+(1&Sr);switch(xr){case"VP8 ":case"VP8L":er.frames[Qe]===void 0&&(er.frames[Qe]={}),(Ve=er.frames[Qe]).src_off=nr?cr:Ke-8,Ve.src_size=ir+Sr+8,Qe++,nr&&(nr=!1,ir=0,cr=0);break;case"VP8X":(Ve=er.header={}).feature_flags=Xe[Ke];var fr=Ke+4;Ve.canvas_width=1+Te(Xe,fr),fr+=3,Ve.canvas_height=1+Te(Xe,fr),fr+=3;break;case"ALPH":nr=!0,ir=lr+8,cr=Ke-8;break;case"ANIM":(Ve=er.header).bgcolor=Se(Xe,Ke),fr=Ke+4,Ve.loop_count=(br=Xe)[(wr=fr)+0]<<0|br[wr+1]<<8,fr+=2;break;case"ANMF":var $e,Ve;(Ve=er.frames[Qe]={}).offset_x=2*Te(Xe,Ke),Ke+=3,Ve.offset_y=2*Te(Xe,Ke),Ke+=3,Ve.width=1+Te(Xe,Ke),Ke+=3,Ve.height=1+Te(Xe,Ke),Ke+=3,Ve.duration=Te(Xe,Ke),Ke+=3,$e=Xe[Ke++],Ve.dispose=1&$e,Ve.blend=$e>>1&1}xr!="ANMF"&&(Ke+=lr)}return er}}(Ae,0);Fe.response=Ae,Fe.rgbaoutput=!0,Fe.dataurl=!1;var De=Fe.header?Fe.header:null,ze=Fe.frames?Fe.frames:null;if(De){De.loop_counter=De.loop_count,xe=[De.canvas_height],r=[De.canvas_width];for(var je=0;je<ze.length&&ze[je].blend!=0;je++);}var We=ze[0],Ge=Ee.WebPDecodeRGBA(Ae,We.src_off,We.src_size,r,xe);We.rgba=Ge,We.imgwidth=r[0],We.imgheight=xe[0];for(var Ye=0;Ye<r[0]*xe[0]*4;Ye++)Oe[Ye]=Ge[Ye];return this.width=r,this.height=xe,this.data=Oe,this}(function(Re){var e=function(){return typeof zlibSync=="function"},t=function(xe,r,Oe,Ee){var Ae=4,Fe=Be;switch(Ee){case Re.image_compression.FAST:Ae=1,Fe=Ie;break;case Re.image_compression.MEDIUM:Ae=6,Fe=ke;break;case Re.image_compression.SLOW:Ae=9,Fe=_e}xe=Pe(xe,r,Oe,Fe);var De=zlibSync(xe,{level:Ae});return Re.__addimage__.arrayBufferToBinaryString(De)},Pe=function(xe,r,Oe,Ee){for(var Ae,Fe,De,ze=xe.length/r,je=new Uint8Array(xe.length+ze),We=Te(),Ge=0;Ge<ze;Ge+=1){if(De=Ge*r,Ae=xe.subarray(De,De+r),Ee)je.set(Ee(Ae,Oe,Fe),De+Ge);else{for(var Ye,Xe=We.length,Ke=[];Ye<Xe;Ye+=1)Ke[Ye]=We[Ye](Ae,Oe,Fe);var er=Se(Ke.concat());je.set(Ke[er],De+Ge)}Fe=Ae}return je},Me=function(xe){var r=Array.apply([],xe);return r.unshift(0),r},Ie=function(xe,r){var Oe,Ee=[],Ae=xe.length;Ee[0]=1;for(var Fe=0;Fe<Ae;Fe+=1)Oe=xe[Fe-r]||0,Ee[Fe+1]=xe[Fe]-Oe+256&255;return Ee},Be=function(xe,r,Oe){var Ee,Ae=[],Fe=xe.length;Ae[0]=2;for(var De=0;De<Fe;De+=1)Ee=Oe&&Oe[De]||0,Ae[De+1]=xe[De]-Ee+256&255;return Ae},ke=function(xe,r,Oe){var Ee,Ae,Fe=[],De=xe.length;Fe[0]=3;for(var ze=0;ze<De;ze+=1)Ee=xe[ze-r]||0,Ae=Oe&&Oe[ze]||0,Fe[ze+1]=xe[ze]+256-(Ee+Ae>>>1)&255;return Fe},_e=function(xe,r,Oe){var Ee,Ae,Fe,De,ze=[],je=xe.length;ze[0]=4;for(var We=0;We<je;We+=1)Ee=xe[We-r]||0,Ae=Oe&&Oe[We]||0,Fe=Oe&&Oe[We-r]||0,De=Ce(Ee,Ae,Fe),ze[We+1]=xe[We]-De+256&255;return ze},Ce=function(xe,r,Oe){if(xe===r&&r===Oe)return xe;var Ee=Math.abs(r-Oe),Ae=Math.abs(xe-Oe),Fe=Math.abs(xe+r-Oe-Oe);return Ee<=Ae&&Ee<=Fe?xe:Ae<=Fe?r:Oe},Te=function(){return[Me,Ie,Be,ke,_e]},Se=function(xe){var r=xe.map(function(Oe){return Oe.reduce(function(Ee,Ae){return Ee+Math.abs(Ae)},0)});return r.indexOf(Math.min.apply(null,r))};Re.processPNG=function(xe,r,Oe,Ee){var Ae,Fe,De,ze,je,We,Ge,Ye,Xe,Ke,er,Qe,nr,ir,cr,br=this.decode.FLATE_DECODE,wr="";if(this.__addimage__.isArrayBuffer(xe)&&(xe=new Uint8Array(xe)),this.__addimage__.isArrayBufferView(xe)){if(xe=(De=new Kt(xe)).imgData,Fe=De.bits,Ae=De.colorSpace,je=De.colors,[4,6].indexOf(De.colorType)!==-1){if(De.bits===8){Xe=(Ye=De.pixelBitlength==32?new Uint32Array(De.decodePixels().buffer):De.pixelBitlength==16?new Uint16Array(De.decodePixels().buffer):new Uint8Array(De.decodePixels().buffer)).length,er=new Uint8Array(Xe*De.colors),Ke=new Uint8Array(Xe);var xr,Sr=De.pixelBitlength-De.bits;for(ir=0,cr=0;ir<Xe;ir++){for(nr=Ye[ir],xr=0;xr<Sr;)er[cr++]=nr>>>xr&255,xr+=De.bits;Ke[ir]=nr>>>xr&255}}if(De.bits===16){Xe=(Ye=new Uint32Array(De.decodePixels().buffer)).length,er=new Uint8Array(Xe*(32/De.pixelBitlength)*De.colors),Ke=new Uint8Array(Xe*(32/De.pixelBitlength)),Qe=De.colors>1,ir=0,cr=0;for(var lr=0;ir<Xe;)nr=Ye[ir++],er[cr++]=nr>>>0&255,Qe&&(er[cr++]=nr>>>16&255,nr=Ye[ir++],er[cr++]=nr>>>0&255),Ke[lr++]=nr>>>16&255;Fe=8}Ee!==Re.image_compression.NONE&&e()?(xe=t(er,De.width*De.colors,De.colors,Ee),Ge=t(Ke,De.width,1,Ee)):(xe=er,Ge=Ke,br=void 0)}if(De.colorType===3&&(Ae=this.color_spaces.INDEXED,We=De.palette,De.transparency.indexed)){var fr=De.transparency.indexed,$e=0;for(ir=0,Xe=fr.length;ir<Xe;++ir)$e+=fr[ir];if(($e/=255)==Xe-1&&fr.indexOf(0)!==-1)ze=[fr.indexOf(0)];else if($e!==Xe){for(Ye=De.decodePixels(),Ke=new Uint8Array(Ye.length),ir=0,Xe=Ye.length;ir<Xe;ir++)Ke[ir]=fr[Ye[ir]];Ge=t(Ke,De.width,1)}}var Ve=function(Je){var Ze;switch(Je){case Re.image_compression.FAST:Ze=11;break;case Re.image_compression.MEDIUM:Ze=13;break;case Re.image_compression.SLOW:Ze=14;break;default:Ze=12}return Ze}(Ee);return br===this.decode.FLATE_DECODE&&(wr="/Predictor "+Ve+" "),wr+="/Colors "+je+" /BitsPerComponent "+Fe+" /Columns "+De.width,(this.__addimage__.isArrayBuffer(xe)||this.__addimage__.isArrayBufferView(xe))&&(xe=this.__addimage__.arrayBufferToBinaryString(xe)),(Ge&&this.__addimage__.isArrayBuffer(Ge)||this.__addimage__.isArrayBufferView(Ge))&&(Ge=this.__addimage__.arrayBufferToBinaryString(Ge)),{alias:Oe,data:xe,index:r,filter:br,decodeParameters:wr,transparency:ze,palette:We,sMask:Ge,predictor:Ve,width:De.width,height:De.height,bitsPerComponent:Fe,colorSpace:Ae}}}})(E.API),function(Re){Re.processGIF89A=function(e,t,Pe,Me){var Ie=new Zt(e),Be=Ie.width,ke=Ie.height,_e=[];Ie.decodeAndBlitFrameRGBA(0,_e);var Ce={data:_e,width:Be,height:ke},Te=new Qt(100).encode(Ce,100);return Re.processJPEG.call(this,Te,t,Pe,Me)},Re.processGIF87A=Re.processGIF89A}(E.API),te.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var Re=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(Re);for(var e=0;e<Re;e++){var t=this.datav.getUint8(this.pos++,!0),Pe=this.datav.getUint8(this.pos++,!0),Me=this.datav.getUint8(this.pos++,!0),Ie=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:Me,green:Pe,blue:t,quad:Ie}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},te.prototype.parseBGR=function(){this.pos=this.offset;try{var Re="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[Re]()}catch(t){a.log("bit decode error:"+t)}},te.prototype.bit1=function(){var Re,e=Math.ceil(this.width/8),t=e%4;for(Re=this.height-1;Re>=0;Re--){for(var Pe=this.bottom_up?Re:this.height-1-Re,Me=0;Me<e;Me++)for(var Ie=this.datav.getUint8(this.pos++,!0),Be=Pe*this.width*4+8*Me*4,ke=0;ke<8&&8*Me+ke<this.width;ke++){var _e=this.palette[Ie>>7-ke&1];this.data[Be+4*ke]=_e.blue,this.data[Be+4*ke+1]=_e.green,this.data[Be+4*ke+2]=_e.red,this.data[Be+4*ke+3]=255}t!==0&&(this.pos+=4-t)}},te.prototype.bit4=function(){for(var Re=Math.ceil(this.width/2),e=Re%4,t=this.height-1;t>=0;t--){for(var Pe=this.bottom_up?t:this.height-1-t,Me=0;Me<Re;Me++){var Ie=this.datav.getUint8(this.pos++,!0),Be=Pe*this.width*4+2*Me*4,ke=Ie>>4,_e=15&Ie,Ce=this.palette[ke];if(this.data[Be]=Ce.blue,this.data[Be+1]=Ce.green,this.data[Be+2]=Ce.red,this.data[Be+3]=255,2*Me+1>=this.width)break;Ce=this.palette[_e],this.data[Be+4]=Ce.blue,this.data[Be+4+1]=Ce.green,this.data[Be+4+2]=Ce.red,this.data[Be+4+3]=255}e!==0&&(this.pos+=4-e)}},te.prototype.bit8=function(){for(var Re=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,Pe=0;Pe<this.width;Pe++){var Me=this.datav.getUint8(this.pos++,!0),Ie=t*this.width*4+4*Pe;if(Me<this.palette.length){var Be=this.palette[Me];this.data[Ie]=Be.red,this.data[Ie+1]=Be.green,this.data[Ie+2]=Be.blue,this.data[Ie+3]=255}else this.data[Ie]=255,this.data[Ie+1]=255,this.data[Ie+2]=255,this.data[Ie+3]=255}Re!==0&&(this.pos+=4-Re)}},te.prototype.bit15=function(){for(var Re=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var Pe=this.bottom_up?t:this.height-1-t,Me=0;Me<this.width;Me++){var Ie=this.datav.getUint16(this.pos,!0);this.pos+=2;var Be=(Ie&e)/e*255|0,ke=(Ie>>5&e)/e*255|0,_e=(Ie>>10&e)/e*255|0,Ce=Ie>>15?255:0,Te=Pe*this.width*4+4*Me;this.data[Te]=_e,this.data[Te+1]=ke,this.data[Te+2]=Be,this.data[Te+3]=Ce}this.pos+=Re}},te.prototype.bit16=function(){for(var Re=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),Pe=this.height-1;Pe>=0;Pe--){for(var Me=this.bottom_up?Pe:this.height-1-Pe,Ie=0;Ie<this.width;Ie++){var Be=this.datav.getUint16(this.pos,!0);this.pos+=2;var ke=(Be&e)/e*255|0,_e=(Be>>5&t)/t*255|0,Ce=(Be>>11)/e*255|0,Te=Me*this.width*4+4*Ie;this.data[Te]=Ce,this.data[Te+1]=_e,this.data[Te+2]=ke,this.data[Te+3]=255}this.pos+=Re}},te.prototype.bit24=function(){for(var Re=this.height-1;Re>=0;Re--){for(var e=this.bottom_up?Re:this.height-1-Re,t=0;t<this.width;t++){var Pe=this.datav.getUint8(this.pos++,!0),Me=this.datav.getUint8(this.pos++,!0),Ie=this.datav.getUint8(this.pos++,!0),Be=e*this.width*4+4*t;this.data[Be]=Ie,this.data[Be+1]=Me,this.data[Be+2]=Pe,this.data[Be+3]=255}this.pos+=this.width%4}},te.prototype.bit32=function(){for(var Re=this.height-1;Re>=0;Re--)for(var e=this.bottom_up?Re:this.height-1-Re,t=0;t<this.width;t++){var Pe=this.datav.getUint8(this.pos++,!0),Me=this.datav.getUint8(this.pos++,!0),Ie=this.datav.getUint8(this.pos++,!0),Be=this.datav.getUint8(this.pos++,!0),ke=e*this.width*4+4*t;this.data[ke]=Ie,this.data[ke+1]=Me,this.data[ke+2]=Pe,this.data[ke+3]=Be}},te.prototype.getData=function(){return this.data},function(Re){Re.processBMP=function(e,t,Pe,Me){var Ie=new te(e,!1),Be=Ie.width,ke=Ie.height,_e={data:Ie.getData(),width:Be,height:ke},Ce=new Qt(100).encode(_e,100);return Re.processJPEG.call(this,Ce,t,Pe,Me)}}(E.API),ee.prototype.getData=function(){return this.data},function(Re){Re.processWEBP=function(e,t,Pe,Me){var Ie=new ee(e,!1),Be=Ie.width,ke=Ie.height,_e={data:Ie.getData(),width:Be,height:ke},Ce=new Qt(100).encode(_e,100);return Re.processJPEG.call(this,Ce,t,Pe,Me)}}(E.API),E.API.processRGBA=function(Re,e,t){for(var Pe=Re.data,Me=Pe.length,Ie=new Uint8Array(Me/4*3),Be=new Uint8Array(Me/4),ke=0,_e=0,Ce=0;Ce<Me;Ce+=4){var Te=Pe[Ce],Se=Pe[Ce+1],xe=Pe[Ce+2],r=Pe[Ce+3];Ie[ke++]=Te,Ie[ke++]=Se,Ie[ke++]=xe,Be[_e++]=r}var Oe=this.__addimage__.arrayBufferToBinaryString(Ie);return{alpha:this.__addimage__.arrayBufferToBinaryString(Be),data:Oe,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:Re.width,height:Re.height}},E.API.setLanguage=function(Re){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[Re]!==void 0&&(this.internal.languageSettings.languageCode=Re,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Vt=E.API,Gt=Vt.getCharWidthsArray=function(Re,e){var t,Pe,Me=(e=e||{}).font||this.internal.getFont(),Ie=e.fontSize||this.internal.getFontSize(),Be=e.charSpace||this.internal.getCharSpace(),ke=e.widths?e.widths:Me.metadata.Unicode.widths,_e=ke.fof?ke.fof:1,Ce=e.kerning?e.kerning:Me.metadata.Unicode.kerning,Te=Ce.fof?Ce.fof:1,Se=e.doKerning!==!1,xe=0,r=Re.length,Oe=0,Ee=ke[0]||_e,Ae=[];for(t=0;t<r;t++)Pe=Re.charCodeAt(t),typeof Me.metadata.widthOfString=="function"?Ae.push((Me.metadata.widthOfGlyph(Me.metadata.characterToGlyph(Pe))+Be*(1e3/Ie)||0)/1e3):(xe=Se&&_typeof(Ce[Pe])==="object"&&!isNaN(parseInt(Ce[Pe][Oe],10))?Ce[Pe][Oe]/Te:0,Ae.push((ke[Pe]||Ee)/_e+xe)),Oe=Pe;return Ae},Yt=Vt.getStringUnitWidth=function(Re,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),Pe=e.font||this.internal.getFont(),Me=e.charSpace||this.internal.getCharSpace();return Vt.processArabic&&(Re=Vt.processArabic(Re)),typeof Pe.metadata.widthOfString=="function"?Pe.metadata.widthOfString(Re,t,Me)/t:Gt.apply(this,arguments).reduce(function(Ie,Be){return Ie+Be},0)},Jt=function(Re,e,t,Pe){for(var Me=[],Ie=0,Be=Re.length,ke=0;Ie!==Be&&ke+e[Ie]<t;)ke+=e[Ie],Ie++;Me.push(Re.slice(0,Ie));var _e=Ie;for(ke=0;Ie!==Be;)ke+e[Ie]>Pe&&(Me.push(Re.slice(_e,Ie)),ke=0,_e=Ie),ke+=e[Ie],Ie++;return _e!==Ie&&Me.push(Re.slice(_e,Ie)),Me},Xt=function(Re,e,t){t||(t={});var Pe,Me,Ie,Be,ke,_e,Ce,Te=[],Se=[Te],xe=t.textIndent||0,r=0,Oe=0,Ee=Re.split(" "),Ae=Gt.apply(this,[" ",t])[0];if(_e=t.lineIndent===-1?Ee[0].length+2:t.lineIndent||0){var Fe=Array(_e).join(" "),De=[];Ee.map(function(je){(je=je.split(/\s*\n/)).length>1?De=De.concat(je.map(function(We,Ge){return(Ge&&We.length?`
`:"")+We})):De.push(je[0])}),Ee=De,_e=Yt.apply(this,[Fe,t])}for(Ie=0,Be=Ee.length;Ie<Be;Ie++){var ze=0;if(Pe=Ee[Ie],_e&&Pe[0]==`
`&&(Pe=Pe.substr(1),ze=1),xe+r+(Oe=(Me=Gt.apply(this,[Pe,t])).reduce(function(je,We){return je+We},0))>e||ze){if(Oe>e){for(ke=Jt.apply(this,[Pe,Me,e-(xe+r),e]),Te.push(ke.shift()),Te=[ke.pop()];ke.length;)Se.push([ke.shift()]);Oe=Me.slice(Pe.length-(Te[0]?Te[0].length:0)).reduce(function(je,We){return je+We},0)}else Te=[Pe];Se.push(Te),xe=Oe+_e,r=Ae}else Te.push(Pe),xe+=r+Oe,r=Ae}return Ce=_e?function(je,We){return(We?Fe:"")+je.join(" ")}:function(je){return je.join(" ")},Se.map(Ce)},Vt.splitTextToSize=function(Re,e,t){var Pe,Me=(t=t||{}).fontSize||this.internal.getFontSize(),Ie=function(Te){if(Te.widths&&Te.kerning)return{widths:Te.widths,kerning:Te.kerning};var Se=this.internal.getFont(Te.fontName,Te.fontStyle);return Se.metadata.Unicode?{widths:Se.metadata.Unicode.widths||{0:1},kerning:Se.metadata.Unicode.kerning||{}}:{font:Se.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,t);Pe=Array.isArray(Re)?Re:String(Re).split(/\r?\n/);var Be=1*this.internal.scaleFactor*e/Me;Ie.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/Me:0,Ie.lineIndent=t.lineIndent;var ke,_e,Ce=[];for(ke=0,_e=Pe.length;ke<_e;ke++)Ce=Ce.concat(Xt.apply(this,[Pe[ke],Be,Ie]));return Ce},function(Re){Re.__fontmetrics__=Re.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},Pe={},Me=0;Me<e.length;Me++)t[e[Me]]="0123456789abcdef"[Me],Pe["0123456789abcdef"[Me]]=e[Me];var Ie=function(Se){return"0x"+parseInt(Se,10).toString(16)},Be=Re.__fontmetrics__.compress=function(Se){var xe,r,Oe,Ee,Ae=["{"];for(var Fe in Se){if(xe=Se[Fe],isNaN(parseInt(Fe,10))?r="'"+Fe+"'":(Fe=parseInt(Fe,10),r=(r=Ie(Fe).slice(2)).slice(0,-1)+Pe[r.slice(-1)]),typeof xe=="number")xe<0?(Oe=Ie(xe).slice(3),Ee="-"):(Oe=Ie(xe).slice(2),Ee=""),Oe=Ee+Oe.slice(0,-1)+Pe[Oe.slice(-1)];else{if(_typeof(xe)!=="object")throw new Error("Don't know what to do with value type "+_typeof(xe)+".");Oe=Be(xe)}Ae.push(r+Oe)}return Ae.push("}"),Ae.join("")},ke=Re.__fontmetrics__.uncompress=function(Se){if(typeof Se!="string")throw new Error("Invalid argument passed to uncompress.");for(var xe,r,Oe,Ee,Ae={},Fe=1,De=Ae,ze=[],je="",We="",Ge=Se.length-1,Ye=1;Ye<Ge;Ye+=1)(Ee=Se[Ye])=="'"?xe?(Oe=xe.join(""),xe=void 0):xe=[]:xe?xe.push(Ee):Ee=="{"?(ze.push([De,Oe]),De={},Oe=void 0):Ee=="}"?((r=ze.pop())[0][r[1]]=De,Oe=void 0,De=r[0]):Ee=="-"?Fe=-1:Oe===void 0?t.hasOwnProperty(Ee)?(je+=t[Ee],Oe=parseInt(je,16)*Fe,Fe=1,je=""):je+=Ee:t.hasOwnProperty(Ee)?(We+=t[Ee],De[Oe]=parseInt(We,16)*Fe,Fe=1,Oe=void 0,We=""):We+=Ee;return Ae},_e={codePages:["WinAnsiEncoding"],WinAnsiEncoding:ke("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},Ce={Unicode:{Courier:_e,"Courier-Bold":_e,"Courier-BoldOblique":_e,"Courier-Oblique":_e,Helvetica:_e,"Helvetica-Bold":_e,"Helvetica-BoldOblique":_e,"Helvetica-Oblique":_e,"Times-Roman":_e,"Times-Bold":_e,"Times-BoldItalic":_e,"Times-Italic":_e}},Te={Unicode:{"Courier-Oblique":ke("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":ke("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":ke("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:ke("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":ke("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":ke("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:ke("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:ke("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":ke("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:ke("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":ke("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":ke("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":ke("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":ke("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};Re.events.push(["addFont",function(Se){var xe=Se.font,r=Te.Unicode[xe.postScriptName];r&&(xe.metadata.Unicode={},xe.metadata.Unicode.widths=r.widths,xe.metadata.Unicode.kerning=r.kerning);var Oe=Ce.Unicode[xe.postScriptName];Oe&&(xe.metadata.Unicode.encoding=Oe,xe.encoding=Oe.codePages[0])}])}(E.API),function(Re){var e=function(t){for(var Pe=t.length,Me=new Uint8Array(Pe),Ie=0;Ie<Pe;Ie++)Me[Ie]=t.charCodeAt(Ie);return Me};Re.API.events.push(["addFont",function(t){var Pe=void 0,Me=t.font,Ie=t.instance;if(!Me.isStandardFont){if(Ie===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+Me.postScriptName+"').");if(typeof(Pe=Ie.existsFileInVFS(Me.postScriptName)===!1?Ie.loadFile(Me.postScriptName):Ie.getFileFromVFS(Me.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+Me.postScriptName+"').");(function(Be,ke){ke=/^\x00\x01\x00\x00/.test(ke)?e(ke):e(u(ke)),Be.metadata=Re.API.TTFFont.open(ke),Be.metadata.Unicode=Be.metadata.Unicode||{encoding:{},kerning:{},widths:[]},Be.metadata.glyIdsUsed=[0]})(Me,Pe)}}])}(E),function(Re){function e(){return(n.canvg?Promise.resolve(n.canvg):import("./index.es.85f0af85.js")).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}E.API.addSvgAsImage=function(t,Pe,Me,Ie,Be,ke,_e,Ce){if(isNaN(Pe)||isNaN(Me))throw a.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(Ie)||isNaN(Be))throw a.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var Te=document.createElement("canvas");Te.width=Ie,Te.height=Be;var Se=Te.getContext("2d");Se.fillStyle="#fff",Se.fillRect(0,0,Te.width,Te.height);var xe={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},r=this;return e().then(function(Oe){return Oe.fromString(Se,t,xe)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(Oe){return Oe.render(xe)}).then(function(){r.addImage(Te.toDataURL("image/jpeg",1),Pe,Me,Ie,Be,_e,Ce)})}}(),E.API.putTotalPages=function(Re){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(Re,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(Re,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var Pe=1;Pe<=this.internal.getNumberOfPages();Pe++)for(var Me=0;Me<this.internal.pages[Pe].length;Me++)this.internal.pages[Pe][Me]=this.internal.pages[Pe][Me].replace(e,t);return this},E.API.viewerPreferences=function(Re,e){var t;Re=Re||{},e=e||!1;var Pe,Me,Ie,Be={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},ke=Object.keys(Be),_e=[],Ce=0,Te=0,Se=0;function xe(Oe,Ee){var Ae,Fe=!1;for(Ae=0;Ae<Oe.length;Ae+=1)Oe[Ae]===Ee&&(Fe=!0);return Fe}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(Be)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,Re==="reset"||e===!0){var r=ke.length;for(Se=0;Se<r;Se+=1)t[ke[Se]].value=t[ke[Se]].defaultValue,t[ke[Se]].explicitSet=!1}if(_typeof(Re)==="object"){for(Me in Re)if(Ie=Re[Me],xe(ke,Me)&&Ie!==void 0){if(t[Me].type==="boolean"&&typeof Ie=="boolean")t[Me].value=Ie;else if(t[Me].type==="name"&&xe(t[Me].valueSet,Ie))t[Me].value=Ie;else if(t[Me].type==="integer"&&Number.isInteger(Ie))t[Me].value=Ie;else if(t[Me].type==="array"){for(Ce=0;Ce<Ie.length;Ce+=1)if(Pe=!0,Ie[Ce].length===1&&typeof Ie[Ce][0]=="number")_e.push(String(Ie[Ce]-1));else if(Ie[Ce].length>1){for(Te=0;Te<Ie[Ce].length;Te+=1)typeof Ie[Ce][Te]!="number"&&(Pe=!1);Pe===!0&&_e.push([Ie[Ce][0]-1,Ie[Ce][1]-1].join(" "))}t[Me].value="["+_e.join(" ")+"]"}else t[Me].value=t[Me].defaultValue;t[Me].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var Oe,Ee=[];for(Oe in t)t[Oe].explicitSet===!0&&(t[Oe].type==="name"?Ee.push("/"+Oe+" /"+t[Oe].value):Ee.push("/"+Oe+" "+t[Oe].value));Ee.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+Ee.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(Re){var e=function(){var Pe='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',Me=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),Ie=unescape(encodeURIComponent(Pe)),Be=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),ke=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),_e=unescape(encodeURIComponent("</x:xmpmeta>")),Ce=Ie.length+Be.length+ke.length+Me.length+_e.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+Ce+" >>"),this.internal.write("stream"),this.internal.write(Me+Ie+Be+ke+_e),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};Re.addMetadata=function(Pe,Me){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:Pe,namespaceuri:Me||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(E.API),function(Re){var e=Re.API,t=e.pdfEscape16=function(Ie,Be){for(var ke,_e=Be.metadata.Unicode.widths,Ce=["","0","00","000","0000"],Te=[""],Se=0,xe=Ie.length;Se<xe;++Se){if(ke=Be.metadata.characterToGlyph(Ie.charCodeAt(Se)),Be.metadata.glyIdsUsed.push(ke),Be.metadata.toUnicode[ke]=Ie.charCodeAt(Se),_e.indexOf(ke)==-1&&(_e.push(ke),_e.push([parseInt(Be.metadata.widthOfGlyph(ke),10)])),ke=="0")return Te.join("");ke=ke.toString(16),Te.push(Ce[4-ke.length],ke)}return Te.join("")},Pe=function(Ie){var Be,ke,_e,Ce,Te,Se,xe;for(Te=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,_e=[],Se=0,xe=(ke=Object.keys(Ie).sort(function(r,Oe){return r-Oe})).length;Se<xe;Se++)Be=ke[Se],_e.length>=100&&(Te+=`
`+_e.length+` beginbfchar
`+_e.join(`
`)+`
endbfchar`,_e=[]),Ie[Be]!==void 0&&Ie[Be]!==null&&typeof Ie[Be].toString=="function"&&(Ce=("0000"+Ie[Be].toString(16)).slice(-4),Be=("0000"+(+Be).toString(16)).slice(-4),_e.push("<"+Be+"><"+Ce+">"));return _e.length&&(Te+=`
`+_e.length+` beginbfchar
`+_e.join(`
`)+`
endbfchar
`),Te+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(Ie){(function(Be){var ke=Be.font,_e=Be.out,Ce=Be.newObject,Te=Be.putStream;if(ke.metadata instanceof Re.API.TTFFont&&ke.encoding==="Identity-H"){for(var Se=ke.metadata.Unicode.widths,xe=ke.metadata.subset.encode(ke.metadata.glyIdsUsed,1),r="",Oe=0;Oe<xe.length;Oe++)r+=String.fromCharCode(xe[Oe]);var Ee=Ce();Te({data:r,addLength1:!0,objectId:Ee}),_e("endobj");var Ae=Ce();Te({data:Pe(ke.metadata.toUnicode),addLength1:!0,objectId:Ae}),_e("endobj");var Fe=Ce();_e("<<"),_e("/Type /FontDescriptor"),_e("/FontName /"+F(ke.fontName)),_e("/FontFile2 "+Ee+" 0 R"),_e("/FontBBox "+Re.API.PDFObject.convert(ke.metadata.bbox)),_e("/Flags "+ke.metadata.flags),_e("/StemV "+ke.metadata.stemV),_e("/ItalicAngle "+ke.metadata.italicAngle),_e("/Ascent "+ke.metadata.ascender),_e("/Descent "+ke.metadata.decender),_e("/CapHeight "+ke.metadata.capHeight),_e(">>"),_e("endobj");var De=Ce();_e("<<"),_e("/Type /Font"),_e("/BaseFont /"+F(ke.fontName)),_e("/FontDescriptor "+Fe+" 0 R"),_e("/W "+Re.API.PDFObject.convert(Se)),_e("/CIDToGIDMap /Identity"),_e("/DW 1000"),_e("/Subtype /CIDFontType2"),_e("/CIDSystemInfo"),_e("<<"),_e("/Supplement 0"),_e("/Registry (Adobe)"),_e("/Ordering ("+ke.encoding+")"),_e(">>"),_e(">>"),_e("endobj"),ke.objectNumber=Ce(),_e("<<"),_e("/Type /Font"),_e("/Subtype /Type0"),_e("/ToUnicode "+Ae+" 0 R"),_e("/BaseFont /"+F(ke.fontName)),_e("/Encoding /"+ke.encoding),_e("/DescendantFonts ["+De+" 0 R]"),_e(">>"),_e("endobj"),ke.isAlreadyPutted=!0}})(Ie)}]),e.events.push(["putFont",function(Ie){(function(Be){var ke=Be.font,_e=Be.out,Ce=Be.newObject,Te=Be.putStream;if(ke.metadata instanceof Re.API.TTFFont&&ke.encoding==="WinAnsiEncoding"){for(var Se=ke.metadata.rawData,xe="",r=0;r<Se.length;r++)xe+=String.fromCharCode(Se[r]);var Oe=Ce();Te({data:xe,addLength1:!0,objectId:Oe}),_e("endobj");var Ee=Ce();Te({data:Pe(ke.metadata.toUnicode),addLength1:!0,objectId:Ee}),_e("endobj");var Ae=Ce();_e("<<"),_e("/Descent "+ke.metadata.decender),_e("/CapHeight "+ke.metadata.capHeight),_e("/StemV "+ke.metadata.stemV),_e("/Type /FontDescriptor"),_e("/FontFile2 "+Oe+" 0 R"),_e("/Flags 96"),_e("/FontBBox "+Re.API.PDFObject.convert(ke.metadata.bbox)),_e("/FontName /"+F(ke.fontName)),_e("/ItalicAngle "+ke.metadata.italicAngle),_e("/Ascent "+ke.metadata.ascender),_e(">>"),_e("endobj"),ke.objectNumber=Ce();for(var Fe=0;Fe<ke.metadata.hmtx.widths.length;Fe++)ke.metadata.hmtx.widths[Fe]=parseInt(ke.metadata.hmtx.widths[Fe]*(1e3/ke.metadata.head.unitsPerEm));_e("<</Subtype/TrueType/Type/Font/ToUnicode "+Ee+" 0 R/BaseFont/"+F(ke.fontName)+"/FontDescriptor "+Ae+" 0 R/Encoding/"+ke.encoding+" /FirstChar 29 /LastChar 255 /Widths "+Re.API.PDFObject.convert(ke.metadata.hmtx.widths)+">>"),_e("endobj"),ke.isAlreadyPutted=!0}})(Ie)}]);var Me=function(Ie){var Be,ke=Ie.text||"",_e=Ie.x,Ce=Ie.y,Te=Ie.options||{},Se=Ie.mutex||{},xe=Se.pdfEscape,r=Se.activeFontKey,Oe=Se.fonts,Ee=r,Ae="",Fe=0,De="",ze=Oe[Ee].encoding;if(Oe[Ee].encoding!=="Identity-H")return{text:ke,x:_e,y:Ce,options:Te,mutex:Se};for(De=ke,Ee=r,Array.isArray(ke)&&(De=ke[0]),Fe=0;Fe<De.length;Fe+=1)Oe[Ee].metadata.hasOwnProperty("cmap")&&(Be=Oe[Ee].metadata.cmap.unicode.codeMap[De[Fe].charCodeAt(0)]),Be||De[Fe].charCodeAt(0)<256&&Oe[Ee].metadata.hasOwnProperty("Unicode")?Ae+=De[Fe]:Ae+="";var je="";return parseInt(Ee.slice(1))<14||ze==="WinAnsiEncoding"?je=xe(Ae,Ee).split("").map(function(We){return We.charCodeAt(0).toString(16)}).join(""):ze==="Identity-H"&&(je=t(Ae,Oe[Ee])),Se.isHex=!0,{text:je,x:_e,y:Ce,options:Te,mutex:Se}};e.events.push(["postProcessText",function(Ie){var Be=Ie.text||"",ke=[],_e={text:Be,x:Ie.x,y:Ie.y,options:Ie.options,mutex:Ie.mutex};if(Array.isArray(Be)){var Ce=0;for(Ce=0;Ce<Be.length;Ce+=1)Array.isArray(Be[Ce])&&Be[Ce].length===3?ke.push([Me(Object.assign({},_e,{text:Be[Ce][0]})).text,Be[Ce][1],Be[Ce][2]]):ke.push(Me(Object.assign({},_e,{text:Be[Ce]})).text);Ie.text=ke}else Ie.text=Me(Object.assign({},_e,{text:Be})).text}])}(E),function(Re){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};Re.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},Re.addFileToVFS=function(t,Pe){return e.call(this),this.internal.vFS[t]=Pe,this},Re.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(E.API),function(Re){Re.__bidiEngine__=Re.prototype.__bidiEngine__=function(Pe){var Me,Ie,Be,ke,_e,Ce,Te,Se=e,xe=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],r=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],Oe={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},Ee={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},Ae=["(",")","(","<",">","<","[","]","[","{","}","{","\xAB","\xBB","\xAB","\u2039","\u203A","\u2039","\u2045","\u2046","\u2045","\u207D","\u207E","\u207D","\u208D","\u208E","\u208D","\u2264","\u2265","\u2264","\u2329","\u232A","\u2329","\uFE59","\uFE5A","\uFE59","\uFE5B","\uFE5C","\uFE5B","\uFE5D","\uFE5E","\uFE5D","\uFE64","\uFE65","\uFE64"],Fe=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),De=!1,ze=0;this.__bidiEngine__={};var je=function(Qe){var nr=Qe.charCodeAt(),ir=nr>>8,cr=Ee[ir];return cr!==void 0?Se[256*cr+(255&nr)]:ir===252||ir===253?"AL":Fe.test(ir)?"L":ir===8?"R":"N"},We=function(Qe){for(var nr,ir=0;ir<Qe.length;ir++){if((nr=je(Qe.charAt(ir)))==="L")return!1;if(nr==="R")return!0}return!1},Ge=function(Qe,nr,ir,cr){var br,wr,xr,Sr,lr=nr[cr];switch(lr){case"L":case"R":De=!1;break;case"N":case"AN":break;case"EN":De&&(lr="AN");break;case"AL":De=!0,lr="R";break;case"WS":lr="N";break;case"CS":cr<1||cr+1>=nr.length||(br=ir[cr-1])!=="EN"&&br!=="AN"||(wr=nr[cr+1])!=="EN"&&wr!=="AN"?lr="N":De&&(wr="AN"),lr=wr===br?wr:"N";break;case"ES":lr=(br=cr>0?ir[cr-1]:"B")==="EN"&&cr+1<nr.length&&nr[cr+1]==="EN"?"EN":"N";break;case"ET":if(cr>0&&ir[cr-1]==="EN"){lr="EN";break}if(De){lr="N";break}for(xr=cr+1,Sr=nr.length;xr<Sr&&nr[xr]==="ET";)xr++;lr=xr<Sr&&nr[xr]==="EN"?"EN":"N";break;case"NSM":if(Be&&!ke){for(Sr=nr.length,xr=cr+1;xr<Sr&&nr[xr]==="NSM";)xr++;if(xr<Sr){var fr=Qe[cr],$e=fr>=1425&&fr<=2303||fr===64286;if(br=nr[xr],$e&&(br==="R"||br==="AL")){lr="R";break}}}lr=cr<1||(br=nr[cr-1])==="B"?"N":ir[cr-1];break;case"B":De=!1,Me=!0,lr=ze;break;case"S":Ie=!0,lr="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":De=!1;break;case"BN":lr="N"}return lr},Ye=function(Qe,nr,ir){var cr=Qe.split("");return ir&&Xe(cr,ir,{hiLevel:ze}),cr.reverse(),nr&&nr.reverse(),cr.join("")},Xe=function(Qe,nr,ir){var cr,br,wr,xr,Sr,lr=-1,fr=Qe.length,$e=0,Ve=[],Je=ze?r:xe,Ze=[];for(De=!1,Me=!1,Ie=!1,br=0;br<fr;br++)Ze[br]=je(Qe[br]);for(wr=0;wr<fr;wr++){if(Sr=$e,Ve[wr]=Ge(Qe,Ze,Ve,wr),cr=240&($e=Je[Sr][Oe[Ve[wr]]]),$e&=15,nr[wr]=xr=Je[$e][5],cr>0)if(cr===16){for(br=lr;br<wr;br++)nr[br]=1;lr=-1}else lr=-1;if(Je[$e][6])lr===-1&&(lr=wr);else if(lr>-1){for(br=lr;br<wr;br++)nr[br]=xr;lr=-1}Ze[wr]==="B"&&(nr[wr]=0),ir.hiLevel|=xr}Ie&&function(St,vr,mr){for(var Cr=0;Cr<mr;Cr++)if(St[Cr]==="S"){vr[Cr]=ze;for(var _r=Cr-1;_r>=0&&St[_r]==="WS";_r--)vr[_r]=ze}}(Ze,nr,fr)},Ke=function(Qe,nr,ir,cr,br){if(!(br.hiLevel<Qe)){if(Qe===1&&ze===1&&!Me)return nr.reverse(),void(ir&&ir.reverse());for(var wr,xr,Sr,lr,fr=nr.length,$e=0;$e<fr;){if(cr[$e]>=Qe){for(Sr=$e+1;Sr<fr&&cr[Sr]>=Qe;)Sr++;for(lr=$e,xr=Sr-1;lr<xr;lr++,xr--)wr=nr[lr],nr[lr]=nr[xr],nr[xr]=wr,ir&&(wr=ir[lr],ir[lr]=ir[xr],ir[xr]=wr);$e=Sr}$e++}}},er=function(Qe,nr,ir){var cr=Qe.split(""),br={hiLevel:ze};return ir||(ir=[]),Xe(cr,ir,br),function(wr,xr,Sr){if(Sr.hiLevel!==0&&Te)for(var lr,fr=0;fr<wr.length;fr++)xr[fr]===1&&(lr=Ae.indexOf(wr[fr]))>=0&&(wr[fr]=Ae[lr+1])}(cr,ir,br),Ke(2,cr,nr,ir,br),Ke(1,cr,nr,ir,br),cr.join("")};return this.__bidiEngine__.doBidiReorder=function(Qe,nr,ir){if(function(br,wr){if(wr)for(var xr=0;xr<br.length;xr++)wr[xr]=xr;ke===void 0&&(ke=We(br)),Ce===void 0&&(Ce=We(br))}(Qe,nr),Be||!_e||Ce)if(Be&&_e&&ke^Ce)ze=ke?1:0,Qe=Ye(Qe,nr,ir);else if(!Be&&_e&&Ce)ze=ke?1:0,Qe=er(Qe,nr,ir),Qe=Ye(Qe,nr);else if(!Be||ke||_e||Ce){if(Be&&!_e&&ke^Ce)Qe=Ye(Qe,nr),ke?(ze=0,Qe=er(Qe,nr,ir)):(ze=1,Qe=er(Qe,nr,ir),Qe=Ye(Qe,nr));else if(Be&&ke&&!_e&&Ce)ze=1,Qe=er(Qe,nr,ir),Qe=Ye(Qe,nr);else if(!Be&&!_e&&ke^Ce){var cr=Te;ke?(ze=1,Qe=er(Qe,nr,ir),ze=0,Te=!1,Qe=er(Qe,nr,ir),Te=cr):(ze=0,Qe=er(Qe,nr,ir),Qe=Ye(Qe,nr),ze=1,Te=!1,Qe=er(Qe,nr,ir),Te=cr,Qe=Ye(Qe,nr))}}else ze=0,Qe=er(Qe,nr,ir);else ze=ke?1:0,Qe=er(Qe,nr,ir);return Qe},this.__bidiEngine__.setOptions=function(Qe){Qe&&(Be=Qe.isInputVisual,_e=Qe.isOutputVisual,ke=Qe.isInputRtl,Ce=Qe.isOutputRtl,Te=Qe.isSymmetricSwapping)},this.__bidiEngine__.setOptions(Pe),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new Re.__bidiEngine__({isInputVisual:!0});Re.API.events.push(["postProcessText",function(Pe){var Me=Pe.text,Ie=(Pe.x,Pe.y,Pe.options||{}),Be=(Pe.mutex,Ie.lang,[]);if(Ie.isInputVisual=typeof Ie.isInputVisual!="boolean"||Ie.isInputVisual,t.setOptions(Ie),Object.prototype.toString.call(Me)==="[object Array]"){var ke=0;for(Be=[],ke=0;ke<Me.length;ke+=1)Object.prototype.toString.call(Me[ke])==="[object Array]"?Be.push([t.doBidiReorder(Me[ke][0]),Me[ke][1],Me[ke][2]]):Be.push([t.doBidiReorder(Me[ke])]);Pe.text=Be}else Pe.text=t.doBidiReorder(Me);t.setOptions({isInputVisual:!0})}])}(E),E.API.TTFFont=function(){function Re(e){var t;if(this.rawData=e,t=this.contents=new ne(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new Le(this),this.registerTTF()}return Re.open=function(e){return new Re(e)},Re.prototype.parse=function(){return this.directory=new ie(this.contents),this.head=new se(this),this.name=new pe(this),this.cmap=new ue(this),this.toUnicode={},this.hhea=new he(this),this.maxp=new ge(this),this.hmtx=new me(this),this.post=new fe(this),this.os2=new le(this),this.loca=new Ne(this),this.glyf=new be(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},Re.prototype.registerTTF=function(){var e,t,Pe,Me,Ie;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var Be,ke,_e,Ce;for(Ce=[],Be=0,ke=(_e=this.bbox).length;Be<ke;Be++)e=_e[Be],Ce.push(Math.round(e*this.scaleFactor));return Ce}.call(this),this.stemV=0,this.post.exists?(Pe=255&(Me=this.post.italic_angle),(32768&(t=Me>>16))!=0&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+Pe)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(Ie=this.familyClass)===1||Ie===2||Ie===3||Ie===4||Ie===5||Ie===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},Re.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},Re.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},Re.prototype.widthOfString=function(e,t,Pe){var Me,Ie,Be,ke;for(Be=0,Ie=0,ke=(e=""+e).length;0<=ke?Ie<ke:Ie>ke;Ie=0<=ke?++Ie:--Ie)Me=e.charCodeAt(Ie),Be+=this.widthOfGlyph(this.characterToGlyph(Me))+Pe*(1e3/t)||0;return Be*(t/1e3)},Re.prototype.lineHeight=function(e,t){var Pe;return t==null&&(t=!1),Pe=t?this.lineGap:0,(this.ascender+Pe-this.decender)/1e3*e},Re}();var re,ne=function(){function Re(e){this.data=e!=null?e:[],this.pos=0,this.length=this.data.length}return Re.prototype.readByte=function(){return this.data[this.pos++]},Re.prototype.writeByte=function(e){return this.data[this.pos++]=e},Re.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},Re.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},Re.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},Re.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},Re.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},Re.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},Re.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},Re.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},Re.prototype.readString=function(e){var t,Pe;for(Pe=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)Pe[t]=String.fromCharCode(this.readByte());return Pe.join("")},Re.prototype.writeString=function(e){var t,Pe,Me;for(Me=[],t=0,Pe=e.length;0<=Pe?t<Pe:t>Pe;t=0<=Pe?++t:--t)Me.push(this.writeByte(e.charCodeAt(t)));return Me},Re.prototype.readShort=function(){return this.readInt16()},Re.prototype.writeShort=function(e){return this.writeInt16(e)},Re.prototype.readLongLong=function(){var e,t,Pe,Me,Ie,Be,ke,_e;return e=this.readByte(),t=this.readByte(),Pe=this.readByte(),Me=this.readByte(),Ie=this.readByte(),Be=this.readByte(),ke=this.readByte(),_e=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^Pe)+4294967296*(255^Me)+16777216*(255^Ie)+65536*(255^Be)+256*(255^ke)+(255^_e)+1):72057594037927940*e+281474976710656*t+1099511627776*Pe+4294967296*Me+16777216*Ie+65536*Be+256*ke+_e},Re.prototype.writeLongLong=function(e){var t,Pe;return t=Math.floor(e/4294967296),Pe=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(Pe>>24&255),this.writeByte(Pe>>16&255),this.writeByte(Pe>>8&255),this.writeByte(255&Pe)},Re.prototype.readInt=function(){return this.readInt32()},Re.prototype.writeInt=function(e){return this.writeInt32(e)},Re.prototype.read=function(e){var t,Pe;for(t=[],Pe=0;0<=e?Pe<e:Pe>e;Pe=0<=e?++Pe:--Pe)t.push(this.readByte());return t},Re.prototype.write=function(e){var t,Pe,Me,Ie;for(Ie=[],Pe=0,Me=e.length;Pe<Me;Pe++)t=e[Pe],Ie.push(this.writeByte(t));return Ie},Re}(),ie=function(){var Re;function e(t){var Pe,Me,Ie;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},Me=0,Ie=this.tableCount;0<=Ie?Me<Ie:Me>Ie;Me=0<=Ie?++Me:--Me)Pe={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[Pe.tag]=Pe}return e.prototype.encode=function(t){var Pe,Me,Ie,Be,ke,_e,Ce,Te,Se,xe,r,Oe,Ee;for(Ee in r=Object.keys(t).length,_e=Math.log(2),Se=16*Math.floor(Math.log(r)/_e),Be=Math.floor(Se/_e),Te=16*r-Se,(Me=new ne).writeInt(this.scalarType),Me.writeShort(r),Me.writeShort(Se),Me.writeShort(Be),Me.writeShort(Te),Ie=16*r,Ce=Me.pos+Ie,ke=null,Oe=[],t)for(xe=t[Ee],Me.writeString(Ee),Me.writeInt(Re(xe)),Me.writeInt(Ce),Me.writeInt(xe.length),Oe=Oe.concat(xe),Ee==="head"&&(ke=Ce),Ce+=xe.length;Ce%4;)Oe.push(0),Ce++;return Me.write(Oe),Pe=2981146554-Re(Me.data),Me.pos=ke+8,Me.writeUInt32(Pe),Me.data},Re=function(t){var Pe,Me,Ie,Be;for(t=ve.call(t);t.length%4;)t.push(0);for(Ie=new ne(t),Me=0,Pe=0,Be=t.length;Pe<Be;Pe=Pe+=4)Me+=Ie.readUInt32();return 4294967295&Me},e}(),ae={}.hasOwnProperty,oe=function(Re,e){for(var t in e)ae.call(e,t)&&(Re[t]=e[t]);function Pe(){this.constructor=Re}return Pe.prototype=e.prototype,Re.prototype=new Pe,Re.__super__=e.prototype,Re};re=function(){function Re(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return Re.prototype.parse=function(){},Re.prototype.encode=function(){},Re.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},Re}();var se=function(Re){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var Pe;return(Pe=new ne).writeInt(this.version),Pe.writeInt(this.revision),Pe.writeInt(this.checkSumAdjustment),Pe.writeInt(this.magicNumber),Pe.writeShort(this.flags),Pe.writeShort(this.unitsPerEm),Pe.writeLongLong(this.created),Pe.writeLongLong(this.modified),Pe.writeShort(this.xMin),Pe.writeShort(this.yMin),Pe.writeShort(this.xMax),Pe.writeShort(this.yMax),Pe.writeShort(this.macStyle),Pe.writeShort(this.lowestRecPPEM),Pe.writeShort(this.fontDirectionHint),Pe.writeShort(t),Pe.writeShort(this.glyphDataFormat),Pe.data},e}(),ce=function(){function Re(e,t){var Pe,Me,Ie,Be,ke,_e,Ce,Te,Se,xe,r,Oe,Ee,Ae,Fe,De,ze;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),Se=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(_e=0;_e<256;++_e)this.codeMap[_e]=e.readByte();break;case 4:for(r=e.readUInt16(),xe=r/2,e.pos+=6,Ie=function(){var je,We;for(We=[],_e=je=0;0<=xe?je<xe:je>xe;_e=0<=xe?++je:--je)We.push(e.readUInt16());return We}(),e.pos+=2,Ee=function(){var je,We;for(We=[],_e=je=0;0<=xe?je<xe:je>xe;_e=0<=xe?++je:--je)We.push(e.readUInt16());return We}(),Ce=function(){var je,We;for(We=[],_e=je=0;0<=xe?je<xe:je>xe;_e=0<=xe?++je:--je)We.push(e.readUInt16());return We}(),Te=function(){var je,We;for(We=[],_e=je=0;0<=xe?je<xe:je>xe;_e=0<=xe?++je:--je)We.push(e.readUInt16());return We}(),Me=(this.length-e.pos+this.offset)/2,ke=function(){var je,We;for(We=[],_e=je=0;0<=Me?je<Me:je>Me;_e=0<=Me?++je:--je)We.push(e.readUInt16());return We}(),_e=Fe=0,ze=Ie.length;Fe<ze;_e=++Fe)for(Ae=Ie[_e],Pe=De=Oe=Ee[_e];Oe<=Ae?De<=Ae:De>=Ae;Pe=Oe<=Ae?++De:--De)Te[_e]===0?Be=Pe+Ce[_e]:(Be=ke[Te[_e]/2+(Pe-Oe)-(xe-_e)]||0)!==0&&(Be+=Ce[_e]),this.codeMap[Pe]=65535&Be}e.pos=Se}return Re.encode=function(e,t){var Pe,Me,Ie,Be,ke,_e,Ce,Te,Se,xe,r,Oe,Ee,Ae,Fe,De,ze,je,We,Ge,Ye,Xe,Ke,er,Qe,nr,ir,cr,br,wr,xr,Sr,lr,fr,$e,Ve,Je,Ze,St,vr,mr,Cr,_r,pr,dr,ur;switch(cr=new ne,Be=Object.keys(e).sort(function(rr,gr){return rr-gr}),t){case"macroman":for(Ee=0,Ae=function(){var rr=[];for(Oe=0;Oe<256;++Oe)rr.push(0);return rr}(),De={0:0},Ie={},br=0,lr=Be.length;br<lr;br++)De[_r=e[Me=Be[br]]]==null&&(De[_r]=++Ee),Ie[Me]={old:e[Me],new:De[e[Me]]},Ae[Me]=De[e[Me]];return cr.writeUInt16(1),cr.writeUInt16(0),cr.writeUInt32(12),cr.writeUInt16(0),cr.writeUInt16(262),cr.writeUInt16(0),cr.write(Ae),{charMap:Ie,subtable:cr.data,maxGlyphID:Ee+1};case"unicode":for(nr=[],Se=[],ze=0,De={},Pe={},Fe=Ce=null,wr=0,fr=Be.length;wr<fr;wr++)De[We=e[Me=Be[wr]]]==null&&(De[We]=++ze),Pe[Me]={old:We,new:De[We]},ke=De[We]-Me,Fe!=null&&ke===Ce||(Fe&&Se.push(Fe),nr.push(Me),Ce=ke),Fe=Me;for(Fe&&Se.push(Fe),Se.push(65535),nr.push(65535),er=2*(Ke=nr.length),Xe=2*Math.pow(Math.log(Ke)/Math.LN2,2),xe=Math.log(Xe/2)/Math.LN2,Ye=2*Ke-Xe,_e=[],Ge=[],r=[],Oe=xr=0,$e=nr.length;xr<$e;Oe=++xr){if(Qe=nr[Oe],Te=Se[Oe],Qe===65535){_e.push(0),Ge.push(0);break}if(Qe-(ir=Pe[Qe].new)>=32768)for(_e.push(0),Ge.push(2*(r.length+Ke-Oe)),Me=Sr=Qe;Qe<=Te?Sr<=Te:Sr>=Te;Me=Qe<=Te?++Sr:--Sr)r.push(Pe[Me].new);else _e.push(ir-Qe),Ge.push(0)}for(cr.writeUInt16(3),cr.writeUInt16(1),cr.writeUInt32(12),cr.writeUInt16(4),cr.writeUInt16(16+8*Ke+2*r.length),cr.writeUInt16(0),cr.writeUInt16(er),cr.writeUInt16(Xe),cr.writeUInt16(xe),cr.writeUInt16(Ye),mr=0,Ve=Se.length;mr<Ve;mr++)Me=Se[mr],cr.writeUInt16(Me);for(cr.writeUInt16(0),Cr=0,Je=nr.length;Cr<Je;Cr++)Me=nr[Cr],cr.writeUInt16(Me);for(pr=0,Ze=_e.length;pr<Ze;pr++)ke=_e[pr],cr.writeUInt16(ke);for(dr=0,St=Ge.length;dr<St;dr++)je=Ge[dr],cr.writeUInt16(je);for(ur=0,vr=r.length;ur<vr;ur++)Ee=r[ur],cr.writeUInt16(Ee);return{charMap:Pe,subtable:cr.data,maxGlyphID:ze+1}}},Re}(),ue=function(Re){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="cmap",e.prototype.parse=function(t){var Pe,Me,Ie;for(t.pos=this.offset,this.version=t.readUInt16(),Ie=t.readUInt16(),this.tables=[],this.unicode=null,Me=0;0<=Ie?Me<Ie:Me>Ie;Me=0<=Ie?++Me:--Me)Pe=new ce(t,this.offset),this.tables.push(Pe),Pe.isUnicode&&this.unicode==null&&(this.unicode=Pe);return!0},e.encode=function(t,Pe){var Me,Ie;return Pe==null&&(Pe="macroman"),Me=ce.encode(t,Pe),(Ie=new ne).writeUInt16(0),Ie.writeUInt16(1),Me.table=Ie.data.concat(Me.subtable),Me},e}(),he=function(Re){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),le=function(Re){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var Pe,Me;for(Me=[],Pe=0;Pe<10;++Pe)Me.push(t.readByte());return Me}(),this.charRange=function(){var Pe,Me;for(Me=[],Pe=0;Pe<4;++Pe)Me.push(t.readInt());return Me}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var Pe,Me;for(Me=[],Pe=0;Pe<2;Pe=++Pe)Me.push(t.readInt());return Me}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),fe=function(Re){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="post",e.prototype.parse=function(t){var Pe,Me,Ie;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var Be;for(Me=t.readUInt16(),this.glyphNameIndex=[],Be=0;0<=Me?Be<Me:Be>Me;Be=0<=Me?++Be:--Be)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],Ie=[];t.pos<this.offset+this.length;)Pe=t.readByte(),Ie.push(this.names.push(t.readString(Pe)));return Ie;case 151552:return Me=t.readUInt16(),this.offsets=t.read(Me);case 196608:break;case 262144:return this.map=function(){var ke,_e,Ce;for(Ce=[],Be=ke=0,_e=this.file.maxp.numGlyphs;0<=_e?ke<_e:ke>_e;Be=0<=_e?++ke:--ke)Ce.push(t.readUInt32());return Ce}.call(this)}},e}(),de=function(Re,e){this.raw=Re,this.length=Re.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},pe=function(Re){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="name",e.prototype.parse=function(t){var Pe,Me,Ie,Be,ke,_e,Ce,Te,Se,xe,r;for(t.pos=this.offset,t.readShort(),Pe=t.readShort(),_e=t.readShort(),Me=[],Be=0;0<=Pe?Be<Pe:Be>Pe;Be=0<=Pe?++Be:--Be)Me.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+_e+t.readShort()});for(Ce={},Be=Se=0,xe=Me.length;Se<xe;Be=++Se)Ie=Me[Be],t.pos=Ie.offset,Te=t.readString(Ie.length),ke=new de(Te,Ie),Ce[r=Ie.nameID]==null&&(Ce[r]=[]),Ce[Ie.nameID].push(ke);this.strings=Ce,this.copyright=Ce[0],this.fontFamily=Ce[1],this.fontSubfamily=Ce[2],this.uniqueSubfamily=Ce[3],this.fontName=Ce[4],this.version=Ce[5];try{this.postscriptName=Ce[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=Ce[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=Ce[7],this.manufacturer=Ce[8],this.designer=Ce[9],this.description=Ce[10],this.vendorUrl=Ce[11],this.designerUrl=Ce[12],this.license=Ce[13],this.licenseUrl=Ce[14],this.preferredFamily=Ce[15],this.preferredSubfamily=Ce[17],this.compatibleFull=Ce[18],this.sampleText=Ce[19]},e}(),ge=function(Re){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),me=function(Re){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="hmtx",e.prototype.parse=function(t){var Pe,Me,Ie,Be,ke,_e,Ce;for(t.pos=this.offset,this.metrics=[],Pe=0,_e=this.file.hhea.numberOfMetrics;0<=_e?Pe<_e:Pe>_e;Pe=0<=_e?++Pe:--Pe)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(Ie=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var Te,Se;for(Se=[],Pe=Te=0;0<=Ie?Te<Ie:Te>Ie;Pe=0<=Ie?++Te:--Te)Se.push(t.readInt16());return Se}(),this.widths=function(){var Te,Se,xe,r;for(r=[],Te=0,Se=(xe=this.metrics).length;Te<Se;Te++)Be=xe[Te],r.push(Be.advance);return r}.call(this),Me=this.widths[this.widths.length-1],Ce=[],Pe=ke=0;0<=Ie?ke<Ie:ke>Ie;Pe=0<=Ie?++ke:--ke)Ce.push(this.widths.push(Me));return Ce},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),ve=[].slice,be=function(Re){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var Pe,Me,Ie,Be,ke,_e,Ce,Te,Se,xe;return t in this.cache?this.cache[t]:(Be=this.file.loca,Pe=this.file.contents,Me=Be.indexOf(t),(Ie=Be.lengthOf(t))===0?this.cache[t]=null:(Pe.pos=this.offset+Me,ke=(_e=new ne(Pe.read(Ie))).readShort(),Te=_e.readShort(),xe=_e.readShort(),Ce=_e.readShort(),Se=_e.readShort(),this.cache[t]=ke===-1?new we(_e,Te,xe,Ce,Se):new ye(_e,ke,Te,xe,Ce,Se),this.cache[t]))},e.prototype.encode=function(t,Pe,Me){var Ie,Be,ke,_e,Ce;for(ke=[],Be=[],_e=0,Ce=Pe.length;_e<Ce;_e++)Ie=t[Pe[_e]],Be.push(ke.length),Ie&&(ke=ke.concat(Ie.encode(Me)));return Be.push(ke.length),{table:ke,offsets:Be}},e}(),ye=function(){function Re(e,t,Pe,Me,Ie,Be){this.raw=e,this.numberOfContours=t,this.xMin=Pe,this.yMin=Me,this.xMax=Ie,this.yMax=Be,this.compound=!1}return Re.prototype.encode=function(){return this.raw.data},Re}(),we=function(){function Re(e,t,Pe,Me,Ie){var Be,ke;for(this.raw=e,this.xMin=t,this.yMin=Pe,this.xMax=Me,this.yMax=Ie,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],Be=this.raw;ke=Be.readShort(),this.glyphOffsets.push(Be.pos),this.glyphIDs.push(Be.readUInt16()),32&ke;)Be.pos+=1&ke?4:2,128&ke?Be.pos+=8:64&ke?Be.pos+=4:8&ke&&(Be.pos+=2)}return Re.prototype.encode=function(){var e,t,Pe;for(t=new ne(ve.call(this.raw.data)),e=0,Pe=this.glyphIDs.length;e<Pe;++e)t.pos=this.glyphOffsets[e];return t.data},Re}(),Ne=function(Re){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="loca",e.prototype.parse=function(t){var Pe,Me;return t.pos=this.offset,Pe=this.file.head.indexToLocFormat,this.offsets=Pe===0?function(){var Ie,Be;for(Be=[],Me=0,Ie=this.length;Me<Ie;Me+=2)Be.push(2*t.readUInt16());return Be}.call(this):function(){var Ie,Be;for(Be=[],Me=0,Ie=this.length;Me<Ie;Me+=4)Be.push(t.readUInt32());return Be}.call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,Pe){for(var Me=new Uint32Array(this.offsets.length),Ie=0,Be=0,ke=0;ke<Me.length;++ke)if(Me[ke]=Ie,Be<Pe.length&&Pe[Be]==ke){++Be,Me[ke]=Ie;var _e=this.offsets[ke],Ce=this.offsets[ke+1]-_e;Ce>0&&(Ie+=Ce)}for(var Te=new Array(4*Me.length),Se=0;Se<Me.length;++Se)Te[4*Se+3]=255&Me[Se],Te[4*Se+2]=(65280&Me[Se])>>8,Te[4*Se+1]=(16711680&Me[Se])>>16,Te[4*Se]=(4278190080&Me[Se])>>24;return Te},e}(),Le=function(){function Re(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return Re.prototype.generateCmap=function(){var e,t,Pe,Me,Ie;for(t in Me=this.font.cmap.tables[0].codeMap,e={},Ie=this.subset)Pe=Ie[t],e[t]=Me[Pe];return e},Re.prototype.glyphsFor=function(e){var t,Pe,Me,Ie,Be,ke,_e;for(Me={},Be=0,ke=e.length;Be<ke;Be++)Me[Ie=e[Be]]=this.font.glyf.glyphFor(Ie);for(Ie in t=[],Me)((Pe=Me[Ie])!=null?Pe.compound:void 0)&&t.push.apply(t,Pe.glyphIDs);if(t.length>0)for(Ie in _e=this.glyphsFor(t))Pe=_e[Ie],Me[Ie]=Pe;return Me},Re.prototype.encode=function(e,t){var Pe,Me,Ie,Be,ke,_e,Ce,Te,Se,xe,r,Oe,Ee,Ae,Fe;for(Me in Pe=ue.encode(this.generateCmap(),"unicode"),Be=this.glyphsFor(e),r={0:0},Fe=Pe.charMap)r[(_e=Fe[Me]).old]=_e.new;for(Oe in xe=Pe.maxGlyphID,Be)Oe in r||(r[Oe]=xe++);return Te=function(De){var ze,je;for(ze in je={},De)je[De[ze]]=ze;return je}(r),Se=Object.keys(Te).sort(function(De,ze){return De-ze}),Ee=function(){var De,ze,je;for(je=[],De=0,ze=Se.length;De<ze;De++)ke=Se[De],je.push(Te[ke]);return je}(),Ie=this.font.glyf.encode(Be,Ee,r),Ce=this.font.loca.encode(Ie.offsets,Ee),Ae={cmap:this.font.cmap.raw(),glyf:Ie.table,loca:Ce,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(Ae["OS/2"]=this.font.os2.raw()),this.font.directory.encode(Ae)},Re}();E.API.PDFObject=function(){var Re;function e(){}return Re=function(t,Pe){return(Array(Pe+1).join("0")+t).slice(-Pe)},e.convert=function(t){var Pe,Me,Ie,Be;if(Array.isArray(t))return"["+function(){var ke,_e,Ce;for(Ce=[],ke=0,_e=t.length;ke<_e;ke++)Pe=t[ke],Ce.push(e.convert(Pe));return Ce}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null?t.isString:void 0)return"("+t+")";if(t instanceof Date)return"(D:"+Re(t.getUTCFullYear(),4)+Re(t.getUTCMonth(),2)+Re(t.getUTCDate(),2)+Re(t.getUTCHours(),2)+Re(t.getUTCMinutes(),2)+Re(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(Me in Ie=["<<"],t)Be=t[Me],Ie.push("/"+Me+" "+e.convert(Be));return Ie.push(">>"),Ie.join(`
`)}return""+t},e}();var FileSaver_min={exports:{}};(function(Re,e){(function(t,Pe){Pe()})(commonjsGlobal,function(){function t(Ce,Te){return typeof Te=="undefined"?Te={autoBom:!1}:typeof Te!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),Te={autoBom:!Te}),Te.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(Ce.type)?new Blob(["\uFEFF",Ce],{type:Ce.type}):Ce}function Pe(Ce,Te,Se){var xe=new XMLHttpRequest;xe.open("GET",Ce),xe.responseType="blob",xe.onload=function(){_e(xe.response,Te,Se)},xe.onerror=function(){console.error("could not download file")},xe.send()}function Me(Ce){var Te=new XMLHttpRequest;Te.open("HEAD",Ce,!1);try{Te.send()}catch{}return 200<=Te.status&&299>=Te.status}function Ie(Ce){try{Ce.dispatchEvent(new MouseEvent("click"))}catch{var Te=document.createEvent("MouseEvents");Te.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),Ce.dispatchEvent(Te)}}var Be=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof commonjsGlobal=="object"&&commonjsGlobal.global===commonjsGlobal?commonjsGlobal:void 0,ke=Be.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),_e=Be.saveAs||(typeof window!="object"||window!==Be?function(){}:"download"in HTMLAnchorElement.prototype&&!ke?function(Ce,Te,Se){var xe=Be.URL||Be.webkitURL,r=document.createElement("a");Te=Te||Ce.name||"download",r.download=Te,r.rel="noopener",typeof Ce=="string"?(r.href=Ce,r.origin===location.origin?Ie(r):Me(r.href)?Pe(Ce,Te,Se):Ie(r,r.target="_blank")):(r.href=xe.createObjectURL(Ce),setTimeout(function(){xe.revokeObjectURL(r.href)},4e4),setTimeout(function(){Ie(r)},0))}:"msSaveOrOpenBlob"in navigator?function(Ce,Te,Se){if(Te=Te||Ce.name||"download",typeof Ce!="string")navigator.msSaveOrOpenBlob(t(Ce,Se),Te);else if(Me(Ce))Pe(Ce,Te,Se);else{var xe=document.createElement("a");xe.href=Ce,xe.target="_blank",setTimeout(function(){Ie(xe)})}}:function(Ce,Te,Se,xe){if(xe=xe||open("","_blank"),xe&&(xe.document.title=xe.document.body.innerText="downloading..."),typeof Ce=="string")return Pe(Ce,Te,Se);var r=Ce.type==="application/octet-stream",Oe=/constructor/i.test(Be.HTMLElement)||Be.safari,Ee=/CriOS\/[\d]+/.test(navigator.userAgent);if((Ee||r&&Oe||ke)&&typeof FileReader!="undefined"){var Ae=new FileReader;Ae.onloadend=function(){var ze=Ae.result;ze=Ee?ze:ze.replace(/^data:[^;]*;/,"data:attachment/file;"),xe?xe.location.href=ze:location=ze,xe=null},Ae.readAsDataURL(Ce)}else{var Fe=Be.URL||Be.webkitURL,De=Fe.createObjectURL(Ce);xe?xe.location=De:location.href=De,xe=null,setTimeout(function(){Fe.revokeObjectURL(De)},4e4)}});Be.saveAs=_e.saveAs=_e,Re.exports=_e})})(FileSaver_min);var fabric={};(function(Re){/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */var e=e||{version:"5.2.1"};if(Re.fabric=e,typeof document!="undefined"&&typeof window!="undefined")document instanceof(typeof HTMLDocument!="undefined"?HTMLDocument:Document)?e.document=document:e.document=document.implementation.createHTMLDocument(""),e.window=window;else{var t=require$$5,Pe=new t.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;e.document=Pe.document,e.jsdomImplForWrapper=require$$5.implForWrapper,e.nodeCanvas=require$$5.Canvas,e.window=Pe,DOMParser=e.window.DOMParser}e.isTouchSupported="ontouchstart"in e.window||"ontouchstart"in e.document||e.window&&e.window.navigator&&e.window.navigator.maxTouchPoints>0,e.isLikelyNode=typeof Buffer!="undefined"&&typeof window=="undefined",e.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],e.DPI=96,e.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",e.commaWsp="(?:\\s+,?\\s*|,\\s*)",e.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig,e.reNonWord=/[ \n\.,;!\?\-]/,e.fontPaths={},e.iMatrix=[1,0,0,1,0,0],e.svgNS="http://www.w3.org/2000/svg",e.perfLimitSizeTotal=2097152,e.maxCacheSideLimit=4096,e.minCacheSideLimit=256,e.charWidthsCache={},e.textureSize=2048,e.disableStyleCopyPaste=!1,e.enableGLFiltering=!0,e.devicePixelRatio=e.window.devicePixelRatio||e.window.webkitDevicePixelRatio||e.window.mozDevicePixelRatio||1,e.browserShadowBlurConstant=1,e.arcToSegmentsCache={},e.boundsOfCurveCache={},e.cachesBoundsOfCurve=!0,e.forceGLPutImageData=!1,e.initFilterBackend=function(){if(e.enableGLFiltering&&e.isWebglSupported&&e.isWebglSupported(e.textureSize))return console.log("max texture size: "+e.maxTextureSize),new e.WebglFilterBackend({tileSize:e.textureSize});if(e.Canvas2dFilterBackend)return new e.Canvas2dFilterBackend},typeof document!="undefined"&&typeof window!="undefined"&&(window.fabric=e),function(){function ke(r,Oe){if(!!this.__eventListeners[r]){var Ee=this.__eventListeners[r];Oe?Ee[Ee.indexOf(Oe)]=!1:e.util.array.fill(Ee,!1)}}function _e(r,Oe){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var Ee in r)this.on(Ee,r[Ee]);else this.__eventListeners[r]||(this.__eventListeners[r]=[]),this.__eventListeners[r].push(Oe);return this}function Ce(r,Oe){var Ee=function(){Oe.apply(this,arguments),this.off(r,Ee)}.bind(this);this.on(r,Ee)}function Te(r,Oe){if(arguments.length===1)for(var Ee in r)Ce.call(this,Ee,r[Ee]);else Ce.call(this,r,Oe);return this}function Se(r,Oe){if(!this.__eventListeners)return this;if(arguments.length===0)for(r in this.__eventListeners)ke.call(this,r);else if(arguments.length===1&&typeof arguments[0]=="object")for(var Ee in r)ke.call(this,Ee,r[Ee]);else ke.call(this,r,Oe);return this}function xe(r,Oe){if(!this.__eventListeners)return this;var Ee=this.__eventListeners[r];if(!Ee)return this;for(var Ae=0,Fe=Ee.length;Ae<Fe;Ae++)Ee[Ae]&&Ee[Ae].call(this,Oe||{});return this.__eventListeners[r]=Ee.filter(function(De){return De!==!1}),this}e.Observable={fire:xe,on:_e,once:Te,off:Se}}(),e.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var ke=0,_e=arguments.length;ke<_e;ke++)this._onObjectAdded(arguments[ke]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(ke,_e,Ce){var Te=this._objects;return Ce?Te[_e]=ke:Te.splice(_e,0,ke),this._onObjectAdded&&this._onObjectAdded(ke),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var ke=this._objects,_e,Ce=!1,Te=0,Se=arguments.length;Te<Se;Te++)_e=ke.indexOf(arguments[Te]),_e!==-1&&(Ce=!0,ke.splice(_e,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[Te]));return this.renderOnAddRemove&&Ce&&this.requestRenderAll(),this},forEachObject:function(ke,_e){for(var Ce=this.getObjects(),Te=0,Se=Ce.length;Te<Se;Te++)ke.call(_e,Ce[Te],Te,Ce);return this},getObjects:function(ke){return typeof ke=="undefined"?this._objects.concat():this._objects.filter(function(_e){return _e.type===ke})},item:function(ke){return this._objects[ke]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(ke,_e){return this._objects.indexOf(ke)>-1?!0:_e?this._objects.some(function(Ce){return typeof Ce.contains=="function"&&Ce.contains(ke,!0)}):!1},complexity:function(){return this._objects.reduce(function(ke,_e){return ke+=_e.complexity?_e.complexity():0,ke},0)}},e.CommonMethods={_setOptions:function(ke){for(var _e in ke)this.set(_e,ke[_e])},_initGradient:function(ke,_e){ke&&ke.colorStops&&!(ke instanceof e.Gradient)&&this.set(_e,new e.Gradient(ke))},_initPattern:function(ke,_e,Ce){ke&&ke.source&&!(ke instanceof e.Pattern)?this.set(_e,new e.Pattern(ke,Ce)):Ce&&Ce()},_setObject:function(ke){for(var _e in ke)this._set(_e,ke[_e])},set:function(ke,_e){return typeof ke=="object"?this._setObject(ke):this._set(ke,_e),this},_set:function(ke,_e){this[ke]=_e},toggle:function(ke){var _e=this.get(ke);return typeof _e=="boolean"&&this.set(ke,!_e),this},get:function(ke){return this[ke]}},function(ke){var _e=Math.sqrt,Ce=Math.atan2,Te=Math.pow,Se=Math.PI/180,xe=Math.PI/2;e.util={cos:function(r){if(r===0)return 1;r<0&&(r=-r);var Oe=r/xe;switch(Oe){case 1:case 3:return 0;case 2:return-1}return Math.cos(r)},sin:function(r){if(r===0)return 0;var Oe=r/xe,Ee=1;switch(r<0&&(Ee=-1),Oe){case 1:return Ee;case 2:return 0;case 3:return-Ee}return Math.sin(r)},removeFromArray:function(r,Oe){var Ee=r.indexOf(Oe);return Ee!==-1&&r.splice(Ee,1),r},getRandomInt:function(r,Oe){return Math.floor(Math.random()*(Oe-r+1))+r},degreesToRadians:function(r){return r*Se},radiansToDegrees:function(r){return r/Se},rotatePoint:function(r,Oe,Ee){var Ae=new e.Point(r.x-Oe.x,r.y-Oe.y),Fe=e.util.rotateVector(Ae,Ee);return new e.Point(Fe.x,Fe.y).addEquals(Oe)},rotateVector:function(r,Oe){var Ee=e.util.sin(Oe),Ae=e.util.cos(Oe),Fe=r.x*Ae-r.y*Ee,De=r.x*Ee+r.y*Ae;return{x:Fe,y:De}},createVector:function(r,Oe){return new e.Point(Oe.x-r.x,Oe.y-r.y)},calcAngleBetweenVectors:function(r,Oe){return Math.acos((r.x*Oe.x+r.y*Oe.y)/(Math.hypot(r.x,r.y)*Math.hypot(Oe.x,Oe.y)))},getHatVector:function(r){return new e.Point(r.x,r.y).multiply(1/Math.hypot(r.x,r.y))},getBisector:function(r,Oe,Ee){var Ae=e.util.createVector(r,Oe),Fe=e.util.createVector(r,Ee),De=e.util.calcAngleBetweenVectors(Ae,Fe),ze=e.util.calcAngleBetweenVectors(e.util.rotateVector(Ae,De),Fe),je=De*(ze===0?1:-1)/2;return{vector:e.util.getHatVector(e.util.rotateVector(Ae,je)),angle:De}},projectStrokeOnPoints:function(r,Oe,Ee){var Ae=[],Fe=Oe.strokeWidth/2,De=Oe.strokeUniform?new e.Point(1/Oe.scaleX,1/Oe.scaleY):new e.Point(1,1),ze=function(je){var We=Fe/Math.hypot(je.x,je.y);return new e.Point(je.x*We*De.x,je.y*We*De.y)};return r.length<=1||r.forEach(function(je,We){var Ge=new e.Point(je.x,je.y),Ye,Xe;We===0?(Xe=r[We+1],Ye=Ee?ze(e.util.createVector(Xe,Ge)).addEquals(Ge):r[r.length-1]):We===r.length-1?(Ye=r[We-1],Xe=Ee?ze(e.util.createVector(Ye,Ge)).addEquals(Ge):r[0]):(Ye=r[We-1],Xe=r[We+1]);var Ke=e.util.getBisector(Ge,Ye,Xe),er=Ke.vector,Qe=Ke.angle,nr,ir;if(Oe.strokeLineJoin==="miter"&&(nr=-Fe/Math.sin(Qe/2),ir=new e.Point(er.x*nr*De.x,er.y*nr*De.y),Math.hypot(ir.x,ir.y)/Fe<=Oe.strokeMiterLimit)){Ae.push(Ge.add(ir)),Ae.push(Ge.subtract(ir));return}nr=-Fe*Math.SQRT2,ir=new e.Point(er.x*nr*De.x,er.y*nr*De.y),Ae.push(Ge.add(ir)),Ae.push(Ge.subtract(ir))}),Ae},transformPoint:function(r,Oe,Ee){return Ee?new e.Point(Oe[0]*r.x+Oe[2]*r.y,Oe[1]*r.x+Oe[3]*r.y):new e.Point(Oe[0]*r.x+Oe[2]*r.y+Oe[4],Oe[1]*r.x+Oe[3]*r.y+Oe[5])},makeBoundingBoxFromPoints:function(r,Oe){if(Oe)for(var Ee=0;Ee<r.length;Ee++)r[Ee]=e.util.transformPoint(r[Ee],Oe);var Ae=[r[0].x,r[1].x,r[2].x,r[3].x],Fe=e.util.array.min(Ae),De=e.util.array.max(Ae),ze=De-Fe,je=[r[0].y,r[1].y,r[2].y,r[3].y],We=e.util.array.min(je),Ge=e.util.array.max(je),Ye=Ge-We;return{left:Fe,top:We,width:ze,height:Ye}},invertTransform:function(r){var Oe=1/(r[0]*r[3]-r[1]*r[2]),Ee=[Oe*r[3],-Oe*r[1],-Oe*r[2],Oe*r[0]],Ae=e.util.transformPoint({x:r[4],y:r[5]},Ee,!0);return Ee[4]=-Ae.x,Ee[5]=-Ae.y,Ee},toFixed:function(r,Oe){return parseFloat(Number(r).toFixed(Oe))},parseUnit:function(r,Oe){var Ee=/\D{0,2}$/.exec(r),Ae=parseFloat(r);switch(Oe||(Oe=e.Text.DEFAULT_SVG_FONT_SIZE),Ee[0]){case"mm":return Ae*e.DPI/25.4;case"cm":return Ae*e.DPI/2.54;case"in":return Ae*e.DPI;case"pt":return Ae*e.DPI/72;case"pc":return Ae*e.DPI/72*12;case"em":return Ae*Oe;default:return Ae}},falseFunction:function(){return!1},getKlass:function(r,Oe){return r=e.util.string.camelize(r.charAt(0).toUpperCase()+r.slice(1)),e.util.resolveNamespace(Oe)[r]},getSvgAttributes:function(r){var Oe=["instantiated_by_use","style","id","class"];switch(r){case"linearGradient":Oe=Oe.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":Oe=Oe.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":Oe=Oe.concat(["offset","stop-color","stop-opacity"]);break}return Oe},resolveNamespace:function(r){if(!r)return e;var Oe=r.split("."),Ee=Oe.length,Ae,Fe=ke||e.window;for(Ae=0;Ae<Ee;++Ae)Fe=Fe[Oe[Ae]];return Fe},loadImage:function(r,Oe,Ee,Ae){if(!r){Oe&&Oe.call(Ee,r);return}var Fe=e.util.createImage(),De=function(){Oe&&Oe.call(Ee,Fe,!1),Fe=Fe.onload=Fe.onerror=null};Fe.onload=De,Fe.onerror=function(){e.log("Error loading "+Fe.src),Oe&&Oe.call(Ee,null,!0),Fe=Fe.onload=Fe.onerror=null},r.indexOf("data")!==0&&Ae!==void 0&&Ae!==null&&(Fe.crossOrigin=Ae),r.substring(0,14)==="data:image/svg"&&(Fe.onload=null,e.util.loadImageInDom(Fe,De)),Fe.src=r},loadImageInDom:function(r,Oe){var Ee=e.document.createElement("div");Ee.style.width=Ee.style.height="1px",Ee.style.left=Ee.style.top="-100%",Ee.style.position="absolute",Ee.appendChild(r),e.document.querySelector("body").appendChild(Ee),r.onload=function(){Oe(),Ee.parentNode.removeChild(Ee),Ee=null}},enlivenObjects:function(r,Oe,Ee,Ae){r=r||[];var Fe=[],De=0,ze=r.length;function je(){++De===ze&&Oe&&Oe(Fe.filter(function(We){return We}))}if(!ze){Oe&&Oe(Fe);return}r.forEach(function(We,Ge){if(!We||!We.type){je();return}var Ye=e.util.getKlass(We.type,Ee);Ye.fromObject(We,function(Xe,Ke){Ke||(Fe[Ge]=Xe),Ae&&Ae(We,Xe,Ke),je()})})},enlivenObjectEnlivables:function(r,Oe,Ee){var Ae=e.Object.ENLIVEN_PROPS.filter(function(Fe){return!!r[Fe]});e.util.enlivenObjects(Ae.map(function(Fe){return r[Fe]}),function(Fe){var De={};Ae.forEach(function(ze,je){De[ze]=Fe[je],Oe&&(Oe[ze]=Fe[je])}),Ee&&Ee(De)})},enlivenPatterns:function(r,Oe){r=r||[];function Ee(){++Fe===De&&Oe&&Oe(Ae)}var Ae=[],Fe=0,De=r.length;if(!De){Oe&&Oe(Ae);return}r.forEach(function(ze,je){ze&&ze.source?new e.Pattern(ze,function(We){Ae[je]=We,Ee()}):(Ae[je]=ze,Ee())})},groupSVGElements:function(r,Oe,Ee){var Ae;return r&&r.length===1?r[0]:(Oe&&(Oe.width&&Oe.height?Oe.centerPoint={x:Oe.width/2,y:Oe.height/2}:(delete Oe.width,delete Oe.height)),Ae=new e.Group(r,Oe),typeof Ee!="undefined"&&(Ae.sourcePath=Ee),Ae)},populateWithProperties:function(r,Oe,Ee){if(Ee&&Array.isArray(Ee))for(var Ae=0,Fe=Ee.length;Ae<Fe;Ae++)Ee[Ae]in r&&(Oe[Ee[Ae]]=r[Ee[Ae]])},createCanvasElement:function(){return e.document.createElement("canvas")},copyCanvasElement:function(r){var Oe=e.util.createCanvasElement();return Oe.width=r.width,Oe.height=r.height,Oe.getContext("2d").drawImage(r,0,0),Oe},toDataURL:function(r,Oe,Ee){return r.toDataURL("image/"+Oe,Ee)},createImage:function(){return e.document.createElement("img")},multiplyTransformMatrices:function(r,Oe,Ee){return[r[0]*Oe[0]+r[2]*Oe[1],r[1]*Oe[0]+r[3]*Oe[1],r[0]*Oe[2]+r[2]*Oe[3],r[1]*Oe[2]+r[3]*Oe[3],Ee?0:r[0]*Oe[4]+r[2]*Oe[5]+r[4],Ee?0:r[1]*Oe[4]+r[3]*Oe[5]+r[5]]},qrDecompose:function(r){var Oe=Ce(r[1],r[0]),Ee=Te(r[0],2)+Te(r[1],2),Ae=_e(Ee),Fe=(r[0]*r[3]-r[2]*r[1])/Ae,De=Ce(r[0]*r[2]+r[1]*r[3],Ee);return{angle:Oe/Se,scaleX:Ae,scaleY:Fe,skewX:De/Se,skewY:0,translateX:r[4],translateY:r[5]}},calcRotateMatrix:function(r){if(!r.angle)return e.iMatrix.concat();var Oe=e.util.degreesToRadians(r.angle),Ee=e.util.cos(Oe),Ae=e.util.sin(Oe);return[Ee,Ae,-Ae,Ee,0,0]},calcDimensionsMatrix:function(r){var Oe=typeof r.scaleX=="undefined"?1:r.scaleX,Ee=typeof r.scaleY=="undefined"?1:r.scaleY,Ae=[r.flipX?-Oe:Oe,0,0,r.flipY?-Ee:Ee,0,0],Fe=e.util.multiplyTransformMatrices,De=e.util.degreesToRadians;return r.skewX&&(Ae=Fe(Ae,[1,0,Math.tan(De(r.skewX)),1],!0)),r.skewY&&(Ae=Fe(Ae,[1,Math.tan(De(r.skewY)),0,1],!0)),Ae},composeMatrix:function(r){var Oe=[1,0,0,1,r.translateX||0,r.translateY||0],Ee=e.util.multiplyTransformMatrices;return r.angle&&(Oe=Ee(Oe,e.util.calcRotateMatrix(r))),(r.scaleX!==1||r.scaleY!==1||r.skewX||r.skewY||r.flipX||r.flipY)&&(Oe=Ee(Oe,e.util.calcDimensionsMatrix(r))),Oe},resetObjectTransform:function(r){r.scaleX=1,r.scaleY=1,r.skewX=0,r.skewY=0,r.flipX=!1,r.flipY=!1,r.rotate(0)},saveObjectTransform:function(r){return{scaleX:r.scaleX,scaleY:r.scaleY,skewX:r.skewX,skewY:r.skewY,angle:r.angle,left:r.left,flipX:r.flipX,flipY:r.flipY,top:r.top}},isTransparent:function(r,Oe,Ee,Ae){Ae>0&&(Oe>Ae?Oe-=Ae:Oe=0,Ee>Ae?Ee-=Ae:Ee=0);var Fe=!0,De,ze,je=r.getImageData(Oe,Ee,Ae*2||1,Ae*2||1),We=je.data.length;for(De=3;De<We&&(ze=je.data[De],Fe=ze<=0,Fe!==!1);De+=4);return je=null,Fe},parsePreserveAspectRatioAttribute:function(r){var Oe="meet",Ee="Mid",Ae="Mid",Fe=r.split(" "),De;return Fe&&Fe.length&&(Oe=Fe.pop(),Oe!=="meet"&&Oe!=="slice"?(De=Oe,Oe="meet"):Fe.length&&(De=Fe.pop())),Ee=De!=="none"?De.slice(1,4):"none",Ae=De!=="none"?De.slice(5,8):"none",{meetOrSlice:Oe,alignX:Ee,alignY:Ae}},clearFabricFontCache:function(r){r=(r||"").toLowerCase(),r?e.charWidthsCache[r]&&delete e.charWidthsCache[r]:e.charWidthsCache={}},limitDimsByArea:function(r,Oe){var Ee=Math.sqrt(Oe*r),Ae=Math.floor(Oe/Ee);return{x:Math.floor(Ee),y:Ae}},capValue:function(r,Oe,Ee){return Math.max(r,Math.min(Oe,Ee))},findScaleToFit:function(r,Oe){return Math.min(Oe.width/r.width,Oe.height/r.height)},findScaleToCover:function(r,Oe){return Math.max(Oe.width/r.width,Oe.height/r.height)},matrixToSVG:function(r){return"matrix("+r.map(function(Oe){return e.util.toFixed(Oe,e.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(r,Oe){var Ee=e.util.invertTransform(Oe),Ae=e.util.multiplyTransformMatrices(Ee,r.calcOwnMatrix());e.util.applyTransformToObject(r,Ae)},addTransformToObject:function(r,Oe){e.util.applyTransformToObject(r,e.util.multiplyTransformMatrices(Oe,r.calcOwnMatrix()))},applyTransformToObject:function(r,Oe){var Ee=e.util.qrDecompose(Oe),Ae=new e.Point(Ee.translateX,Ee.translateY);r.flipX=!1,r.flipY=!1,r.set("scaleX",Ee.scaleX),r.set("scaleY",Ee.scaleY),r.skewX=Ee.skewX,r.skewY=Ee.skewY,r.angle=Ee.angle,r.setPositionByOrigin(Ae,"center","center")},sizeAfterTransform:function(r,Oe,Ee){var Ae=r/2,Fe=Oe/2,De=[{x:-Ae,y:-Fe},{x:Ae,y:-Fe},{x:-Ae,y:Fe},{x:Ae,y:Fe}],ze=e.util.calcDimensionsMatrix(Ee),je=e.util.makeBoundingBoxFromPoints(De,ze);return{x:je.width,y:je.height}},mergeClipPaths:function(r,Oe){var Ee=r,Ae=Oe;Ee.inverted&&!Ae.inverted&&(Ee=Oe,Ae=r),e.util.applyTransformToObject(Ae,e.util.multiplyTransformMatrices(e.util.invertTransform(Ee.calcTransformMatrix()),Ae.calcTransformMatrix()));var Fe=Ee.inverted&&Ae.inverted;return Fe&&(Ee.inverted=Ae.inverted=!1),new e.Group([Ee],{clipPath:Ae,inverted:Fe})}}}(Re),function(){var ke=Array.prototype.join,_e={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},Ce={m:"l",M:"L"};function Te(lr,fr,$e,Ve,Je,Ze,St,vr,mr,Cr,_r){var pr=e.util.cos(lr),dr=e.util.sin(lr),ur=e.util.cos(fr),rr=e.util.sin(fr),gr=$e*Je*ur-Ve*Ze*rr+St,hr=Ve*Je*ur+$e*Ze*rr+vr,sr=Cr+mr*(-$e*Je*dr-Ve*Ze*pr),Ar=_r+mr*(-Ve*Je*dr+$e*Ze*pr),Or=gr+mr*($e*Je*rr+Ve*Ze*ur),Mr=hr+mr*(Ve*Je*rr-$e*Ze*ur);return["C",sr,Ar,Or,Mr,gr,hr]}function Se(lr,fr,$e,Ve,Je,Ze,St){var vr=Math.PI,mr=St*vr/180,Cr=e.util.sin(mr),_r=e.util.cos(mr),pr=0,dr=0;$e=Math.abs($e),Ve=Math.abs(Ve);var ur=-_r*lr*.5-Cr*fr*.5,rr=-_r*fr*.5+Cr*lr*.5,gr=$e*$e,hr=Ve*Ve,sr=rr*rr,Ar=ur*ur,Or=gr*hr-gr*sr-hr*Ar,Mr=0;if(Or<0){var Gr=Math.sqrt(1-Or/(gr*hr));$e*=Gr,Ve*=Gr}else Mr=(Je===Ze?-1:1)*Math.sqrt(Or/(gr*sr+hr*Ar));var zr=Mr*$e*rr/Ve,Ir=-Mr*Ve*ur/$e,Qr=_r*zr-Cr*Ir+lr*.5,rn=Cr*zr+_r*Ir+fr*.5,sn=xe(1,0,(ur-zr)/$e,(rr-Ir)/Ve),pn=xe((ur-zr)/$e,(rr-Ir)/Ve,(-ur-zr)/$e,(-rr-Ir)/Ve);Ze===0&&pn>0?pn-=2*vr:Ze===1&&pn<0&&(pn+=2*vr);for(var mn=Math.ceil(Math.abs(pn/vr*2)),Sn=[],Cn=pn/mn,Xr=8/3*Math.sin(Cn/4)*Math.sin(Cn/4)/Math.sin(Cn/2),Er=sn+Cn,Rr=0;Rr<mn;Rr++)Sn[Rr]=Te(sn,Er,_r,Cr,$e,Ve,Qr,rn,Xr,pr,dr),pr=Sn[Rr][5],dr=Sn[Rr][6],sn=Er,Er+=Cn;return Sn}function xe(lr,fr,$e,Ve){var Je=Math.atan2(fr,lr),Ze=Math.atan2(Ve,$e);return Ze>=Je?Ze-Je:2*Math.PI-(Je-Ze)}function r(lr,fr,$e,Ve,Je,Ze,St,vr){var mr;if(e.cachesBoundsOfCurve&&(mr=ke.call(arguments),e.boundsOfCurveCache[mr]))return e.boundsOfCurveCache[mr];var Cr=Math.sqrt,_r=Math.min,pr=Math.max,dr=Math.abs,ur=[],rr=[[],[]],gr,hr,sr,Ar,Or,Mr,Gr,zr;hr=6*lr-12*$e+6*Je,gr=-3*lr+9*$e-9*Je+3*St,sr=3*$e-3*lr;for(var Ir=0;Ir<2;++Ir){if(Ir>0&&(hr=6*fr-12*Ve+6*Ze,gr=-3*fr+9*Ve-9*Ze+3*vr,sr=3*Ve-3*fr),dr(gr)<1e-12){if(dr(hr)<1e-12)continue;Ar=-sr/hr,0<Ar&&Ar<1&&ur.push(Ar);continue}Gr=hr*hr-4*sr*gr,!(Gr<0)&&(zr=Cr(Gr),Or=(-hr+zr)/(2*gr),0<Or&&Or<1&&ur.push(Or),Mr=(-hr-zr)/(2*gr),0<Mr&&Mr<1&&ur.push(Mr))}for(var Qr,rn,sn=ur.length,pn=sn,mn;sn--;)Ar=ur[sn],mn=1-Ar,Qr=mn*mn*mn*lr+3*mn*mn*Ar*$e+3*mn*Ar*Ar*Je+Ar*Ar*Ar*St,rr[0][sn]=Qr,rn=mn*mn*mn*fr+3*mn*mn*Ar*Ve+3*mn*Ar*Ar*Ze+Ar*Ar*Ar*vr,rr[1][sn]=rn;rr[0][pn]=lr,rr[1][pn]=fr,rr[0][pn+1]=St,rr[1][pn+1]=vr;var Sn=[{x:_r.apply(null,rr[0]),y:_r.apply(null,rr[1])},{x:pr.apply(null,rr[0]),y:pr.apply(null,rr[1])}];return e.cachesBoundsOfCurve&&(e.boundsOfCurveCache[mr]=Sn),Sn}function Oe(lr,fr,$e){for(var Ve=$e[1],Je=$e[2],Ze=$e[3],St=$e[4],vr=$e[5],mr=$e[6],Cr=$e[7],_r=Se(mr-lr,Cr-fr,Ve,Je,St,vr,Ze),pr=0,dr=_r.length;pr<dr;pr++)_r[pr][1]+=lr,_r[pr][2]+=fr,_r[pr][3]+=lr,_r[pr][4]+=fr,_r[pr][5]+=lr,_r[pr][6]+=fr;return _r}function Ee(lr){var fr=0,$e=0,Ve=lr.length,Je=0,Ze=0,St,vr,mr,Cr=[],_r,pr,dr;for(vr=0;vr<Ve;++vr){switch(mr=!1,St=lr[vr].slice(0),St[0]){case"l":St[0]="L",St[1]+=fr,St[2]+=$e;case"L":fr=St[1],$e=St[2];break;case"h":St[1]+=fr;case"H":St[0]="L",St[2]=$e,fr=St[1];break;case"v":St[1]+=$e;case"V":St[0]="L",$e=St[1],St[1]=fr,St[2]=$e;break;case"m":St[0]="M",St[1]+=fr,St[2]+=$e;case"M":fr=St[1],$e=St[2],Je=St[1],Ze=St[2];break;case"c":St[0]="C",St[1]+=fr,St[2]+=$e,St[3]+=fr,St[4]+=$e,St[5]+=fr,St[6]+=$e;case"C":pr=St[3],dr=St[4],fr=St[5],$e=St[6];break;case"s":St[0]="S",St[1]+=fr,St[2]+=$e,St[3]+=fr,St[4]+=$e;case"S":_r==="C"?(pr=2*fr-pr,dr=2*$e-dr):(pr=fr,dr=$e),fr=St[3],$e=St[4],St[0]="C",St[5]=St[3],St[6]=St[4],St[3]=St[1],St[4]=St[2],St[1]=pr,St[2]=dr,pr=St[3],dr=St[4];break;case"q":St[0]="Q",St[1]+=fr,St[2]+=$e,St[3]+=fr,St[4]+=$e;case"Q":pr=St[1],dr=St[2],fr=St[3],$e=St[4];break;case"t":St[0]="T",St[1]+=fr,St[2]+=$e;case"T":_r==="Q"?(pr=2*fr-pr,dr=2*$e-dr):(pr=fr,dr=$e),St[0]="Q",fr=St[1],$e=St[2],St[1]=pr,St[2]=dr,St[3]=fr,St[4]=$e;break;case"a":St[0]="A",St[6]+=fr,St[7]+=$e;case"A":mr=!0,Cr=Cr.concat(Oe(fr,$e,St)),fr=St[6],$e=St[7];break;case"z":case"Z":fr=Je,$e=Ze;break}mr||Cr.push(St),_r=St[0]}return Cr}function Ae(lr,fr,$e,Ve){return Math.sqrt(($e-lr)*($e-lr)+(Ve-fr)*(Ve-fr))}function Fe(lr){return lr*lr*lr}function De(lr){return 3*lr*lr*(1-lr)}function ze(lr){return 3*lr*(1-lr)*(1-lr)}function je(lr){return(1-lr)*(1-lr)*(1-lr)}function We(lr,fr,$e,Ve,Je,Ze,St,vr){return function(mr){var Cr=Fe(mr),_r=De(mr),pr=ze(mr),dr=je(mr);return{x:St*Cr+Je*_r+$e*pr+lr*dr,y:vr*Cr+Ze*_r+Ve*pr+fr*dr}}}function Ge(lr,fr,$e,Ve,Je,Ze,St,vr){return function(mr){var Cr=1-mr,_r=3*Cr*Cr*($e-lr)+6*Cr*mr*(Je-$e)+3*mr*mr*(St-Je),pr=3*Cr*Cr*(Ve-fr)+6*Cr*mr*(Ze-Ve)+3*mr*mr*(vr-Ze);return Math.atan2(pr,_r)}}function Ye(lr){return lr*lr}function Xe(lr){return 2*lr*(1-lr)}function Ke(lr){return(1-lr)*(1-lr)}function er(lr,fr,$e,Ve,Je,Ze){return function(St){var vr=Ye(St),mr=Xe(St),Cr=Ke(St);return{x:Je*vr+$e*mr+lr*Cr,y:Ze*vr+Ve*mr+fr*Cr}}}function Qe(lr,fr,$e,Ve,Je,Ze){return function(St){var vr=1-St,mr=2*vr*($e-lr)+2*St*(Je-$e),Cr=2*vr*(Ve-fr)+2*St*(Ze-Ve);return Math.atan2(Cr,mr)}}function nr(lr,fr,$e){var Ve={x:fr,y:$e},Je,Ze=0,St;for(St=1;St<=100;St+=1)Je=lr(St/100),Ze+=Ae(Ve.x,Ve.y,Je.x,Je.y),Ve=Je;return Ze}function ir(lr,fr){for(var $e=0,Ve=0,Je=lr.iterator,Ze={x:lr.x,y:lr.y},St,vr,mr=.01,Cr=lr.angleFinder,_r;Ve<fr&&mr>1e-4;)St=Je($e),_r=$e,vr=Ae(Ze.x,Ze.y,St.x,St.y),vr+Ve>fr?($e-=mr,mr/=2):(Ze=St,$e+=mr,Ve+=vr);return St.angle=Cr(_r),St}function cr(lr){for(var fr=0,$e=lr.length,Ve,Je=0,Ze=0,St=0,vr=0,mr=[],Cr,_r,pr,dr=0;dr<$e;dr++){switch(Ve=lr[dr],_r={x:Je,y:Ze,command:Ve[0]},Ve[0]){case"M":_r.length=0,St=Je=Ve[1],vr=Ze=Ve[2];break;case"L":_r.length=Ae(Je,Ze,Ve[1],Ve[2]),Je=Ve[1],Ze=Ve[2];break;case"C":Cr=We(Je,Ze,Ve[1],Ve[2],Ve[3],Ve[4],Ve[5],Ve[6]),pr=Ge(Je,Ze,Ve[1],Ve[2],Ve[3],Ve[4],Ve[5],Ve[6]),_r.iterator=Cr,_r.angleFinder=pr,_r.length=nr(Cr,Je,Ze),Je=Ve[5],Ze=Ve[6];break;case"Q":Cr=er(Je,Ze,Ve[1],Ve[2],Ve[3],Ve[4]),pr=Qe(Je,Ze,Ve[1],Ve[2],Ve[3],Ve[4]),_r.iterator=Cr,_r.angleFinder=pr,_r.length=nr(Cr,Je,Ze),Je=Ve[3],Ze=Ve[4];break;case"Z":case"z":_r.destX=St,_r.destY=vr,_r.length=Ae(Je,Ze,St,vr),Je=St,Ze=vr;break}fr+=_r.length,mr.push(_r)}return mr.push({length:fr,x:Je,y:Ze}),mr}function br(lr,fr,$e){$e||($e=cr(lr));for(var Ve=0;fr-$e[Ve].length>0&&Ve<$e.length-2;)fr-=$e[Ve].length,Ve++;var Je=$e[Ve],Ze=fr/Je.length,St=Je.command,vr=lr[Ve],mr;switch(St){case"M":return{x:Je.x,y:Je.y,angle:0};case"Z":case"z":return mr=new e.Point(Je.x,Je.y).lerp(new e.Point(Je.destX,Je.destY),Ze),mr.angle=Math.atan2(Je.destY-Je.y,Je.destX-Je.x),mr;case"L":return mr=new e.Point(Je.x,Je.y).lerp(new e.Point(vr[1],vr[2]),Ze),mr.angle=Math.atan2(vr[2]-Je.y,vr[1]-Je.x),mr;case"C":return ir(Je,fr);case"Q":return ir(Je,fr)}}function wr(lr){var fr=[],$e=[],Ve,Je,Ze=e.rePathCommand,St="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",vr="("+St+")"+e.commaWsp,mr="([01])"+e.commaWsp+"?",Cr=vr+"?"+vr+"?"+vr+mr+mr+vr+"?("+St+")",_r=new RegExp(Cr,"g"),pr,dr,ur;if(!lr||!lr.match)return fr;ur=lr.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var rr=0,gr,hr=ur.length;rr<hr;rr++){Ve=ur[rr],dr=Ve.slice(1).trim(),$e.length=0;var sr=Ve.charAt(0);if(gr=[sr],sr.toLowerCase()==="a")for(var Ar;Ar=_r.exec(dr);)for(var Or=1;Or<Ar.length;Or++)$e.push(Ar[Or]);else for(;pr=Ze.exec(dr);)$e.push(pr[0]);for(var Or=0,Mr=$e.length;Or<Mr;Or++)Je=parseFloat($e[Or]),isNaN(Je)||gr.push(Je);var Gr=_e[sr.toLowerCase()],zr=Ce[sr]||sr;if(gr.length-1>Gr)for(var Ir=1,Qr=gr.length;Ir<Qr;Ir+=Gr)fr.push([sr].concat(gr.slice(Ir,Ir+Gr))),sr=zr;else fr.push(gr)}return fr}function xr(lr,fr){var $e=[],Ve,Je=new e.Point(lr[0].x,lr[0].y),Ze=new e.Point(lr[1].x,lr[1].y),St=lr.length,vr=1,mr=0,Cr=St>2;for(fr=fr||0,Cr&&(vr=lr[2].x<Ze.x?-1:lr[2].x===Ze.x?0:1,mr=lr[2].y<Ze.y?-1:lr[2].y===Ze.y?0:1),$e.push(["M",Je.x-vr*fr,Je.y-mr*fr]),Ve=1;Ve<St;Ve++){if(!Je.eq(Ze)){var _r=Je.midPointFrom(Ze);$e.push(["Q",Je.x,Je.y,_r.x,_r.y])}Je=lr[Ve],Ve+1<lr.length&&(Ze=lr[Ve+1])}return Cr&&(vr=Je.x>lr[Ve-2].x?1:Je.x===lr[Ve-2].x?0:-1,mr=Je.y>lr[Ve-2].y?1:Je.y===lr[Ve-2].y?0:-1),$e.push(["L",Je.x+vr*fr,Je.y+mr*fr]),$e}function Sr(lr,fr,$e){return $e&&(fr=e.util.multiplyTransformMatrices(fr,[1,0,0,1,-$e.x,-$e.y])),lr.map(function(Ve){for(var Je=Ve.slice(0),Ze={},St=1;St<Ve.length-1;St+=2)Ze.x=Ve[St],Ze.y=Ve[St+1],Ze=e.util.transformPoint(Ze,fr),Je[St]=Ze.x,Je[St+1]=Ze.y;return Je})}e.util.joinPath=function(lr){return lr.map(function(fr){return fr.join(" ")}).join(" ")},e.util.parsePath=wr,e.util.makePathSimpler=Ee,e.util.getSmoothPathFromPoints=xr,e.util.getPathSegmentsInfo=cr,e.util.getBoundsOfCurve=r,e.util.getPointOnPath=br,e.util.transformPath=Sr}(),function(){var ke=Array.prototype.slice;function _e(r,Oe){for(var Ee=ke.call(arguments,2),Ae=[],Fe=0,De=r.length;Fe<De;Fe++)Ae[Fe]=Ee.length?r[Fe][Oe].apply(r[Fe],Ee):r[Fe][Oe].call(r[Fe]);return Ae}function Ce(r,Oe){return xe(r,Oe,function(Ee,Ae){return Ee>=Ae})}function Te(r,Oe){return xe(r,Oe,function(Ee,Ae){return Ee<Ae})}function Se(r,Oe){for(var Ee=r.length;Ee--;)r[Ee]=Oe;return r}function xe(r,Oe,Ee){if(!(!r||r.length===0)){var Ae=r.length-1,Fe=Oe?r[Ae][Oe]:r[Ae];if(Oe)for(;Ae--;)Ee(r[Ae][Oe],Fe)&&(Fe=r[Ae][Oe]);else for(;Ae--;)Ee(r[Ae],Fe)&&(Fe=r[Ae]);return Fe}}e.util.array={fill:Se,invoke:_e,min:Te,max:Ce}}(),function(){function ke(Ce,Te,Se){if(Se)if(!e.isLikelyNode&&Te instanceof Element)Ce=Te;else if(Te instanceof Array){Ce=[];for(var xe=0,r=Te.length;xe<r;xe++)Ce[xe]=ke({},Te[xe],Se)}else if(Te&&typeof Te=="object")for(var Oe in Te)Oe==="canvas"||Oe==="group"?Ce[Oe]=null:Te.hasOwnProperty(Oe)&&(Ce[Oe]=ke({},Te[Oe],Se));else Ce=Te;else for(var Oe in Te)Ce[Oe]=Te[Oe];return Ce}function _e(Ce,Te){return ke({},Ce,Te)}e.util.object={extend:ke,clone:_e},e.util.object.extend(e.util,e.Observable)}(),function(){function ke(xe){return xe.replace(/-+(.)?/g,function(r,Oe){return Oe?Oe.toUpperCase():""})}function _e(xe,r){return xe.charAt(0).toUpperCase()+(r?xe.slice(1):xe.slice(1).toLowerCase())}function Ce(xe){return xe.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Te(xe){var r=0,Oe,Ee=[];for(r=0,Oe;r<xe.length;r++)(Oe=Se(xe,r))!==!1&&Ee.push(Oe);return Ee}function Se(xe,r){var Oe=xe.charCodeAt(r);if(isNaN(Oe))return"";if(Oe<55296||Oe>57343)return xe.charAt(r);if(55296<=Oe&&Oe<=56319){if(xe.length<=r+1)throw"High surrogate without following low surrogate";var Ee=xe.charCodeAt(r+1);if(56320>Ee||Ee>57343)throw"High surrogate without following low surrogate";return xe.charAt(r)+xe.charAt(r+1)}if(r===0)throw"Low surrogate without preceding high surrogate";var Ae=xe.charCodeAt(r-1);if(55296>Ae||Ae>56319)throw"Low surrogate without preceding high surrogate";return!1}e.util.string={camelize:ke,capitalize:_e,escapeXml:Ce,graphemeSplit:Te}}(),function(){var ke=Array.prototype.slice,_e=function(){},Ce=function(){for(var Oe in{toString:1})if(Oe==="toString")return!1;return!0}(),Te=function(Oe,Ee,Ae){for(var Fe in Ee)Fe in Oe.prototype&&typeof Oe.prototype[Fe]=="function"&&(Ee[Fe]+"").indexOf("callSuper")>-1?Oe.prototype[Fe]=function(De){return function(){var ze=this.constructor.superclass;this.constructor.superclass=Ae;var je=Ee[De].apply(this,arguments);if(this.constructor.superclass=ze,De!=="initialize")return je}}(Fe):Oe.prototype[Fe]=Ee[Fe],Ce&&(Ee.toString!==Object.prototype.toString&&(Oe.prototype.toString=Ee.toString),Ee.valueOf!==Object.prototype.valueOf&&(Oe.prototype.valueOf=Ee.valueOf))};function Se(){}function xe(Oe){for(var Ee=null,Ae=this;Ae.constructor.superclass;){var Fe=Ae.constructor.superclass.prototype[Oe];if(Ae[Oe]!==Fe){Ee=Fe;break}Ae=Ae.constructor.superclass.prototype}return Ee?arguments.length>1?Ee.apply(this,ke.call(arguments,1)):Ee.call(this):console.log("tried to callSuper "+Oe+", method not found in prototype chain",this)}function r(){var Oe=null,Ee=ke.call(arguments,0);typeof Ee[0]=="function"&&(Oe=Ee.shift());function Ae(){this.initialize.apply(this,arguments)}Ae.superclass=Oe,Ae.subclasses=[],Oe&&(Se.prototype=Oe.prototype,Ae.prototype=new Se,Oe.subclasses.push(Ae));for(var Fe=0,De=Ee.length;Fe<De;Fe++)Te(Ae,Ee[Fe],Oe);return Ae.prototype.initialize||(Ae.prototype.initialize=_e),Ae.prototype.constructor=Ae,Ae.prototype.callSuper=xe,Ae}e.util.createClass=r}(),function(){var ke=!!e.document.createElement("div").attachEvent,_e=["touchstart","touchmove","touchend"];e.util.addListener=function(Te,Se,xe,r){Te&&Te.addEventListener(Se,xe,ke?!1:r)},e.util.removeListener=function(Te,Se,xe,r){Te&&Te.removeEventListener(Se,xe,ke?!1:r)};function Ce(Te){var Se=Te.changedTouches;return Se&&Se[0]?Se[0]:Te}e.util.getPointer=function(Te){var Se=Te.target,xe=e.util.getScrollLeftTop(Se),r=Ce(Te);return{x:r.clientX+xe.left,y:r.clientY+xe.top}},e.util.isTouchEvent=function(Te){return _e.indexOf(Te.type)>-1||Te.pointerType==="touch"}}(),function(){function ke(r,Oe){var Ee=r.style;if(!Ee)return r;if(typeof Oe=="string")return r.style.cssText+=";"+Oe,Oe.indexOf("opacity")>-1?xe(r,Oe.match(/opacity:\s*(\d?\.?\d*)/)[1]):r;for(var Ae in Oe)if(Ae==="opacity")xe(r,Oe[Ae]);else{var Fe=Ae==="float"||Ae==="cssFloat"?typeof Ee.styleFloat=="undefined"?"cssFloat":"styleFloat":Ae;Ee[Fe]=Oe[Ae]}return r}var _e=e.document.createElement("div"),Ce=typeof _e.style.opacity=="string",Te=typeof _e.style.filter=="string",Se=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,xe=function(r){return r};Ce?xe=function(r,Oe){return r.style.opacity=Oe,r}:Te&&(xe=function(r,Oe){var Ee=r.style;return r.currentStyle&&!r.currentStyle.hasLayout&&(Ee.zoom=1),Se.test(Ee.filter)?(Oe=Oe>=.9999?"":"alpha(opacity="+Oe*100+")",Ee.filter=Ee.filter.replace(Se,Oe)):Ee.filter+=" alpha(opacity="+Oe*100+")",r}),e.util.setStyle=ke}(),function(){var ke=Array.prototype.slice;function _e(je){return typeof je=="string"?e.document.getElementById(je):je}var Ce,Te=function(je){return ke.call(je,0)};try{Ce=Te(e.document.childNodes)instanceof Array}catch{}Ce||(Te=function(je){for(var We=new Array(je.length),Ge=je.length;Ge--;)We[Ge]=je[Ge];return We});function Se(je,We){var Ge=e.document.createElement(je);for(var Ye in We)Ye==="class"?Ge.className=We[Ye]:Ye==="for"?Ge.htmlFor=We[Ye]:Ge.setAttribute(Ye,We[Ye]);return Ge}function xe(je,We){je&&(" "+je.className+" ").indexOf(" "+We+" ")===-1&&(je.className+=(je.className?" ":"")+We)}function r(je,We,Ge){return typeof We=="string"&&(We=Se(We,Ge)),je.parentNode&&je.parentNode.replaceChild(We,je),We.appendChild(je),We}function Oe(je){for(var We=0,Ge=0,Ye=e.document.documentElement,Xe=e.document.body||{scrollLeft:0,scrollTop:0};je&&(je.parentNode||je.host)&&(je=je.parentNode||je.host,je===e.document?(We=Xe.scrollLeft||Ye.scrollLeft||0,Ge=Xe.scrollTop||Ye.scrollTop||0):(We+=je.scrollLeft||0,Ge+=je.scrollTop||0),!(je.nodeType===1&&je.style.position==="fixed")););return{left:We,top:Ge}}function Ee(je){var We,Ge=je&&je.ownerDocument,Ye={left:0,top:0},Xe={left:0,top:0},Ke,er={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!Ge)return Xe;for(var Qe in er)Xe[er[Qe]]+=parseInt(Ae(je,Qe),10)||0;return We=Ge.documentElement,typeof je.getBoundingClientRect!="undefined"&&(Ye=je.getBoundingClientRect()),Ke=Oe(je),{left:Ye.left+Ke.left-(We.clientLeft||0)+Xe.left,top:Ye.top+Ke.top-(We.clientTop||0)+Xe.top}}var Ae;e.document.defaultView&&e.document.defaultView.getComputedStyle?Ae=function(je,We){var Ge=e.document.defaultView.getComputedStyle(je,null);return Ge?Ge[We]:void 0}:Ae=function(je,We){var Ge=je.style[We];return!Ge&&je.currentStyle&&(Ge=je.currentStyle[We]),Ge},function(){var je=e.document.documentElement.style,We="userSelect"in je?"userSelect":"MozUserSelect"in je?"MozUserSelect":"WebkitUserSelect"in je?"WebkitUserSelect":"KhtmlUserSelect"in je?"KhtmlUserSelect":"";function Ge(Xe){return typeof Xe.onselectstart!="undefined"&&(Xe.onselectstart=e.util.falseFunction),We?Xe.style[We]="none":typeof Xe.unselectable=="string"&&(Xe.unselectable="on"),Xe}function Ye(Xe){return typeof Xe.onselectstart!="undefined"&&(Xe.onselectstart=null),We?Xe.style[We]="":typeof Xe.unselectable=="string"&&(Xe.unselectable=""),Xe}e.util.makeElementUnselectable=Ge,e.util.makeElementSelectable=Ye}();function Fe(je){var We=e.jsdomImplForWrapper(je);return We._canvas||We._image}function De(je){if(!!e.isLikelyNode){var We=e.jsdomImplForWrapper(je);We&&(We._image=null,We._canvas=null,We._currentSrc=null,We._attributes=null,We._classList=null)}}function ze(je,We){je.imageSmoothingEnabled=je.imageSmoothingEnabled||je.webkitImageSmoothingEnabled||je.mozImageSmoothingEnabled||je.msImageSmoothingEnabled||je.oImageSmoothingEnabled,je.imageSmoothingEnabled=We}e.util.setImageSmoothing=ze,e.util.getById=_e,e.util.toArray=Te,e.util.addClass=xe,e.util.makeElement=Se,e.util.wrapElement=r,e.util.getScrollLeftTop=Oe,e.util.getElementOffset=Ee,e.util.getNodeCanvas=Fe,e.util.cleanUpJsdomNode=De}(),function(){function ke(Te,Se){return Te+(/\?/.test(Te)?"&":"?")+Se}function _e(){}function Ce(Te,Se){Se||(Se={});var xe=Se.method?Se.method.toUpperCase():"GET",r=Se.onComplete||function(){},Oe=new e.window.XMLHttpRequest,Ee=Se.body||Se.parameters;return Oe.onreadystatechange=function(){Oe.readyState===4&&(r(Oe),Oe.onreadystatechange=_e)},xe==="GET"&&(Ee=null,typeof Se.parameters=="string"&&(Te=ke(Te,Se.parameters))),Oe.open(xe,Te,!0),(xe==="POST"||xe==="PUT")&&Oe.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),Oe.send(Ee),Oe}e.util.request=Ce}(),e.log=console.log,e.warn=console.warn,function(){var ke=e.util.object.extend,_e=e.util.object.clone,Ce=[];e.util.object.extend(Ce,{cancelAll:function(){var Fe=this.splice(0);return Fe.forEach(function(De){De.cancel()}),Fe},cancelByCanvas:function(Fe){if(!Fe)return[];var De=this.filter(function(ze){return typeof ze.target=="object"&&ze.target.canvas===Fe});return De.forEach(function(ze){ze.cancel()}),De},cancelByTarget:function(Fe){var De=this.findAnimationsByTarget(Fe);return De.forEach(function(ze){ze.cancel()}),De},findAnimationIndex:function(Fe){return this.indexOf(this.findAnimation(Fe))},findAnimation:function(Fe){return this.find(function(De){return De.cancel===Fe})},findAnimationsByTarget:function(Fe){return Fe?this.filter(function(De){return De.target===Fe}):[]}});function Te(){return!1}function Se(Fe,De,ze,je){return-ze*Math.cos(Fe/je*(Math.PI/2))+ze+De}function xe(Fe){Fe||(Fe={});var De=!1,ze,je=function(){var We=e.runningAnimations.indexOf(ze);return We>-1&&e.runningAnimations.splice(We,1)[0]};return ze=ke(_e(Fe),{cancel:function(){return De=!0,je()},currentValue:"startValue"in Fe?Fe.startValue:0,completionRate:0,durationRate:0}),e.runningAnimations.push(ze),Ee(function(We){var Ge=We||+new Date,Ye=Fe.duration||500,Xe=Ge+Ye,Ke,er=Fe.onChange||Te,Qe=Fe.abort||Te,nr=Fe.onComplete||Te,ir=Fe.easing||Se,cr="startValue"in Fe?Fe.startValue.length>0:!1,br="startValue"in Fe?Fe.startValue:0,wr="endValue"in Fe?Fe.endValue:100,xr=Fe.byValue||(cr?br.map(function(Sr,lr){return wr[lr]-br[lr]}):wr-br);Fe.onStart&&Fe.onStart(),function Sr(lr){Ke=lr||+new Date;var fr=Ke>Xe?Ye:Ke-Ge,$e=fr/Ye,Ve=cr?br.map(function(Ze,St){return ir(fr,br[St],xr[St],Ye)}):ir(fr,br,xr,Ye),Je=Math.abs(cr?(Ve[0]-br[0])/xr[0]:(Ve-br)/xr);if(ze.currentValue=cr?Ve.slice():Ve,ze.completionRate=Je,ze.durationRate=$e,!De){if(Qe(Ve,Je,$e)){je();return}if(Ke>Xe){ze.currentValue=cr?wr.slice():wr,ze.completionRate=1,ze.durationRate=1,er(cr?wr.slice():wr,1,1),nr(wr,1,1),je();return}else er(Ve,Je,$e),Ee(Sr)}}(Ge)}),ze.cancel}var r=e.window.requestAnimationFrame||e.window.webkitRequestAnimationFrame||e.window.mozRequestAnimationFrame||e.window.oRequestAnimationFrame||e.window.msRequestAnimationFrame||function(Fe){return e.window.setTimeout(Fe,1e3/60)},Oe=e.window.cancelAnimationFrame||e.window.clearTimeout;function Ee(){return r.apply(e.window,arguments)}function Ae(){return Oe.apply(e.window,arguments)}e.util.animate=xe,e.util.requestAnimFrame=Ee,e.util.cancelAnimFrame=Ae,e.runningAnimations=Ce}(),function(){function ke(Ce,Te,Se){var xe="rgba("+parseInt(Ce[0]+Se*(Te[0]-Ce[0]),10)+","+parseInt(Ce[1]+Se*(Te[1]-Ce[1]),10)+","+parseInt(Ce[2]+Se*(Te[2]-Ce[2]),10);return xe+=","+(Ce&&Te?parseFloat(Ce[3]+Se*(Te[3]-Ce[3])):1),xe+=")",xe}function _e(Ce,Te,Se,xe){var r=new e.Color(Ce).getSource(),Oe=new e.Color(Te).getSource(),Ee=xe.onComplete,Ae=xe.onChange;return xe=xe||{},e.util.animate(e.util.object.extend(xe,{duration:Se||500,startValue:r,endValue:Oe,byValue:Oe,easing:function(Fe,De,ze,je){var We=xe.colorEasing?xe.colorEasing(Fe,je):1-Math.cos(Fe/je*(Math.PI/2));return ke(De,ze,We)},onComplete:function(Fe,De,ze){if(Ee)return Ee(ke(Oe,Oe,0),De,ze)},onChange:function(Fe,De,ze){if(Ae){if(Array.isArray(Fe))return Ae(ke(Fe,Fe,0),De,ze);Ae(Fe,De,ze)}}}))}e.util.animateColor=_e}(),function(){function ke(lr,fr,$e,Ve){return lr<Math.abs(fr)?(lr=fr,Ve=$e/4):fr===0&&lr===0?Ve=$e/(2*Math.PI)*Math.asin(1):Ve=$e/(2*Math.PI)*Math.asin(fr/lr),{a:lr,c:fr,p:$e,s:Ve}}function _e(lr,fr,$e){return lr.a*Math.pow(2,10*(fr-=1))*Math.sin((fr*$e-lr.s)*(2*Math.PI)/lr.p)}function Ce(lr,fr,$e,Ve){return $e*((lr=lr/Ve-1)*lr*lr+1)+fr}function Te(lr,fr,$e,Ve){return lr/=Ve/2,lr<1?$e/2*lr*lr*lr+fr:$e/2*((lr-=2)*lr*lr+2)+fr}function Se(lr,fr,$e,Ve){return $e*(lr/=Ve)*lr*lr*lr+fr}function xe(lr,fr,$e,Ve){return-$e*((lr=lr/Ve-1)*lr*lr*lr-1)+fr}function r(lr,fr,$e,Ve){return lr/=Ve/2,lr<1?$e/2*lr*lr*lr*lr+fr:-$e/2*((lr-=2)*lr*lr*lr-2)+fr}function Oe(lr,fr,$e,Ve){return $e*(lr/=Ve)*lr*lr*lr*lr+fr}function Ee(lr,fr,$e,Ve){return $e*((lr=lr/Ve-1)*lr*lr*lr*lr+1)+fr}function Ae(lr,fr,$e,Ve){return lr/=Ve/2,lr<1?$e/2*lr*lr*lr*lr*lr+fr:$e/2*((lr-=2)*lr*lr*lr*lr+2)+fr}function Fe(lr,fr,$e,Ve){return-$e*Math.cos(lr/Ve*(Math.PI/2))+$e+fr}function De(lr,fr,$e,Ve){return $e*Math.sin(lr/Ve*(Math.PI/2))+fr}function ze(lr,fr,$e,Ve){return-$e/2*(Math.cos(Math.PI*lr/Ve)-1)+fr}function je(lr,fr,$e,Ve){return lr===0?fr:$e*Math.pow(2,10*(lr/Ve-1))+fr}function We(lr,fr,$e,Ve){return lr===Ve?fr+$e:$e*(-Math.pow(2,-10*lr/Ve)+1)+fr}function Ge(lr,fr,$e,Ve){return lr===0?fr:lr===Ve?fr+$e:(lr/=Ve/2,lr<1?$e/2*Math.pow(2,10*(lr-1))+fr:$e/2*(-Math.pow(2,-10*--lr)+2)+fr)}function Ye(lr,fr,$e,Ve){return-$e*(Math.sqrt(1-(lr/=Ve)*lr)-1)+fr}function Xe(lr,fr,$e,Ve){return $e*Math.sqrt(1-(lr=lr/Ve-1)*lr)+fr}function Ke(lr,fr,$e,Ve){return lr/=Ve/2,lr<1?-$e/2*(Math.sqrt(1-lr*lr)-1)+fr:$e/2*(Math.sqrt(1-(lr-=2)*lr)+1)+fr}function er(lr,fr,$e,Ve){var Je=1.70158,Ze=0,St=$e;if(lr===0)return fr;if(lr/=Ve,lr===1)return fr+$e;Ze||(Ze=Ve*.3);var vr=ke(St,$e,Ze,Je);return-_e(vr,lr,Ve)+fr}function Qe(lr,fr,$e,Ve){var Je=1.70158,Ze=0,St=$e;if(lr===0)return fr;if(lr/=Ve,lr===1)return fr+$e;Ze||(Ze=Ve*.3);var vr=ke(St,$e,Ze,Je);return vr.a*Math.pow(2,-10*lr)*Math.sin((lr*Ve-vr.s)*(2*Math.PI)/vr.p)+vr.c+fr}function nr(lr,fr,$e,Ve){var Je=1.70158,Ze=0,St=$e;if(lr===0)return fr;if(lr/=Ve/2,lr===2)return fr+$e;Ze||(Ze=Ve*(.3*1.5));var vr=ke(St,$e,Ze,Je);return lr<1?-.5*_e(vr,lr,Ve)+fr:vr.a*Math.pow(2,-10*(lr-=1))*Math.sin((lr*Ve-vr.s)*(2*Math.PI)/vr.p)*.5+vr.c+fr}function ir(lr,fr,$e,Ve,Je){return Je===void 0&&(Je=1.70158),$e*(lr/=Ve)*lr*((Je+1)*lr-Je)+fr}function cr(lr,fr,$e,Ve,Je){return Je===void 0&&(Je=1.70158),$e*((lr=lr/Ve-1)*lr*((Je+1)*lr+Je)+1)+fr}function br(lr,fr,$e,Ve,Je){return Je===void 0&&(Je=1.70158),lr/=Ve/2,lr<1?$e/2*(lr*lr*(((Je*=1.525)+1)*lr-Je))+fr:$e/2*((lr-=2)*lr*(((Je*=1.525)+1)*lr+Je)+2)+fr}function wr(lr,fr,$e,Ve){return $e-xr(Ve-lr,0,$e,Ve)+fr}function xr(lr,fr,$e,Ve){return(lr/=Ve)<1/2.75?$e*(7.5625*lr*lr)+fr:lr<2/2.75?$e*(7.5625*(lr-=1.5/2.75)*lr+.75)+fr:lr<2.5/2.75?$e*(7.5625*(lr-=2.25/2.75)*lr+.9375)+fr:$e*(7.5625*(lr-=2.625/2.75)*lr+.984375)+fr}function Sr(lr,fr,$e,Ve){return lr<Ve/2?wr(lr*2,0,$e,Ve)*.5+fr:xr(lr*2-Ve,0,$e,Ve)*.5+$e*.5+fr}e.util.ease={easeInQuad:function(lr,fr,$e,Ve){return $e*(lr/=Ve)*lr+fr},easeOutQuad:function(lr,fr,$e,Ve){return-$e*(lr/=Ve)*(lr-2)+fr},easeInOutQuad:function(lr,fr,$e,Ve){return lr/=Ve/2,lr<1?$e/2*lr*lr+fr:-$e/2*(--lr*(lr-2)-1)+fr},easeInCubic:function(lr,fr,$e,Ve){return $e*(lr/=Ve)*lr*lr+fr},easeOutCubic:Ce,easeInOutCubic:Te,easeInQuart:Se,easeOutQuart:xe,easeInOutQuart:r,easeInQuint:Oe,easeOutQuint:Ee,easeInOutQuint:Ae,easeInSine:Fe,easeOutSine:De,easeInOutSine:ze,easeInExpo:je,easeOutExpo:We,easeInOutExpo:Ge,easeInCirc:Ye,easeOutCirc:Xe,easeInOutCirc:Ke,easeInElastic:er,easeOutElastic:Qe,easeInOutElastic:nr,easeInBack:ir,easeOutBack:cr,easeInOutBack:br,easeInBounce:wr,easeOutBounce:xr,easeInOutBounce:Sr}}(),function(ke){var _e=ke.fabric||(ke.fabric={}),Ce=_e.util.object.extend,Te=_e.util.object.clone,Se=_e.util.toFixed,xe=_e.util.parseUnit,r=_e.util.multiplyTransformMatrices,Oe=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],Ee=["symbol","image","marker","pattern","view","svg"],Ae=["pattern","defs","symbol","metadata","clipPath","mask","desc"],Fe=["symbol","g","a","svg","clipPath","defs"],De={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},ze={stroke:"strokeOpacity",fill:"fillOpacity"},je="font-size",We="clip-path";_e.svgValidTagNamesRegEx=Xe(Oe),_e.svgViewBoxElementsRegEx=Xe(Ee),_e.svgInvalidAncestorsRegEx=Xe(Ae),_e.svgValidParentsRegEx=Xe(Fe),_e.cssRules={},_e.gradientDefs={},_e.clipPaths={};function Ge(Ze){return Ze in De?De[Ze]:Ze}function Ye(Ze,St,vr,mr){var Cr=Array.isArray(St),_r;if((Ze==="fill"||Ze==="stroke")&&St==="none")St="";else{if(Ze==="strokeUniform")return St==="non-scaling-stroke";if(Ze==="strokeDashArray")St==="none"?St=null:St=St.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(Ze==="transformMatrix")vr&&vr.transformMatrix?St=r(vr.transformMatrix,_e.parseTransformAttribute(St)):St=_e.parseTransformAttribute(St);else if(Ze==="visible")St=St!=="none"&&St!=="hidden",vr&&vr.visible===!1&&(St=!1);else if(Ze==="opacity")St=parseFloat(St),vr&&typeof vr.opacity!="undefined"&&(St*=vr.opacity);else if(Ze==="textAnchor")St=St==="start"?"left":St==="end"?"right":"center";else if(Ze==="charSpacing")_r=xe(St,mr)/mr*1e3;else if(Ze==="paintFirst"){var pr=St.indexOf("fill"),dr=St.indexOf("stroke"),St="fill";(pr>-1&&dr>-1&&dr<pr||pr===-1&&dr>-1)&&(St="stroke")}else{if(Ze==="href"||Ze==="xlink:href"||Ze==="font")return St;if(Ze==="imageSmoothing")return St==="optimizeQuality";_r=Cr?St.map(xe):xe(St,mr)}}return!Cr&&isNaN(_r)?St:_r}function Xe(Ze){return new RegExp("^("+Ze.join("|")+")\\b","i")}function Ke(Ze){for(var St in ze)if(!(typeof Ze[ze[St]]=="undefined"||Ze[St]==="")){if(typeof Ze[St]=="undefined"){if(!_e.Object.prototype[St])continue;Ze[St]=_e.Object.prototype[St]}if(Ze[St].indexOf("url(")!==0){var vr=new _e.Color(Ze[St]);Ze[St]=vr.setAlpha(Se(vr.getAlpha()*Ze[ze[St]],2)).toRgba()}}return Ze}function er(Ze,St){var vr,mr=[],Cr,_r,pr;for(_r=0,pr=St.length;_r<pr;_r++)vr=St[_r],Cr=Ze.getElementsByTagName(vr),mr=mr.concat(Array.prototype.slice.call(Cr));return mr}_e.parseTransformAttribute=function(){function Ze(Ir,Qr){var rn=_e.util.cos(Qr[0]),sn=_e.util.sin(Qr[0]),pn=0,mn=0;Qr.length===3&&(pn=Qr[1],mn=Qr[2]),Ir[0]=rn,Ir[1]=sn,Ir[2]=-sn,Ir[3]=rn,Ir[4]=pn-(rn*pn-sn*mn),Ir[5]=mn-(sn*pn+rn*mn)}function St(Ir,Qr){var rn=Qr[0],sn=Qr.length===2?Qr[1]:Qr[0];Ir[0]=rn,Ir[3]=sn}function vr(Ir,Qr,rn){Ir[rn]=Math.tan(_e.util.degreesToRadians(Qr[0]))}function mr(Ir,Qr){Ir[4]=Qr[0],Qr.length===2&&(Ir[5]=Qr[1])}var Cr=_e.iMatrix,_r=_e.reNum,pr=_e.commaWsp,dr="(?:(skewX)\\s*\\(\\s*("+_r+")\\s*\\))",ur="(?:(skewY)\\s*\\(\\s*("+_r+")\\s*\\))",rr="(?:(rotate)\\s*\\(\\s*("+_r+")(?:"+pr+"("+_r+")"+pr+"("+_r+"))?\\s*\\))",gr="(?:(scale)\\s*\\(\\s*("+_r+")(?:"+pr+"("+_r+"))?\\s*\\))",hr="(?:(translate)\\s*\\(\\s*("+_r+")(?:"+pr+"("+_r+"))?\\s*\\))",sr="(?:(matrix)\\s*\\(\\s*("+_r+")"+pr+"("+_r+")"+pr+"("+_r+")"+pr+"("+_r+")"+pr+"("+_r+")"+pr+"("+_r+")\\s*\\))",Ar="(?:"+sr+"|"+hr+"|"+gr+"|"+rr+"|"+dr+"|"+ur+")",Or="(?:"+Ar+"(?:"+pr+"*"+Ar+")*)",Mr="^\\s*(?:"+Or+"?)\\s*$",Gr=new RegExp(Mr),zr=new RegExp(Ar,"g");return function(Ir){var Qr=Cr.concat(),rn=[];if(!Ir||Ir&&!Gr.test(Ir))return Qr;Ir.replace(zr,function(pn){var mn=new RegExp(Ar).exec(pn).filter(function(Xr){return!!Xr}),Sn=mn[1],Cn=mn.slice(2).map(parseFloat);switch(Sn){case"translate":mr(Qr,Cn);break;case"rotate":Cn[0]=_e.util.degreesToRadians(Cn[0]),Ze(Qr,Cn);break;case"scale":St(Qr,Cn);break;case"skewX":vr(Qr,Cn,2);break;case"skewY":vr(Qr,Cn,1);break;case"matrix":Qr=Cn;break}rn.push(Qr.concat()),Qr=Cr.concat()});for(var sn=rn[0];rn.length>1;)rn.shift(),sn=_e.util.multiplyTransformMatrices(sn,rn[0]);return sn}}();function Qe(Ze,St){var vr,mr;Ze.replace(/;\s*$/,"").split(";").forEach(function(Cr){var _r=Cr.split(":");vr=_r[0].trim().toLowerCase(),mr=_r[1].trim(),St[vr]=mr})}function nr(Ze,St){var vr,mr;for(var Cr in Ze)typeof Ze[Cr]!="undefined"&&(vr=Cr.toLowerCase(),mr=Ze[Cr],St[vr]=mr)}function ir(Ze,St){var vr={};for(var mr in _e.cssRules[St])if(cr(Ze,mr.split(" ")))for(var Cr in _e.cssRules[St][mr])vr[Cr]=_e.cssRules[St][mr][Cr];return vr}function cr(Ze,St){var vr,mr=!0;return vr=wr(Ze,St.pop()),vr&&St.length&&(mr=br(Ze,St)),vr&&mr&&St.length===0}function br(Ze,St){for(var vr,mr=!0;Ze.parentNode&&Ze.parentNode.nodeType===1&&St.length;)mr&&(vr=St.pop()),Ze=Ze.parentNode,mr=wr(Ze,vr);return St.length===0}function wr(Ze,St){var vr=Ze.nodeName,mr=Ze.getAttribute("class"),Cr=Ze.getAttribute("id"),_r,pr;if(_r=new RegExp("^"+vr,"i"),St=St.replace(_r,""),Cr&&St.length&&(_r=new RegExp("#"+Cr+"(?![a-zA-Z\\-]+)","i"),St=St.replace(_r,"")),mr&&St.length)for(mr=mr.split(" "),pr=mr.length;pr--;)_r=new RegExp("\\."+mr[pr]+"(?![a-zA-Z\\-]+)","i"),St=St.replace(_r,"");return St.length===0}function xr(Ze,St){var vr;if(Ze.getElementById&&(vr=Ze.getElementById(St)),vr)return vr;var mr,Cr,_r,pr=Ze.getElementsByTagName("*");for(Cr=0,_r=pr.length;Cr<_r;Cr++)if(mr=pr[Cr],St===mr.getAttribute("id"))return mr}function Sr(Ze){for(var St=er(Ze,["use","svg:use"]),vr=0;St.length&&vr<St.length;){var mr=St[vr],Cr=mr.getAttribute("xlink:href")||mr.getAttribute("href");if(Cr===null)return;var _r=Cr.slice(1),pr=mr.getAttribute("x")||0,dr=mr.getAttribute("y")||0,ur=xr(Ze,_r).cloneNode(!0),rr=(ur.getAttribute("transform")||"")+" translate("+pr+", "+dr+")",gr,hr=St.length,sr,Ar,Or,Mr,Gr=_e.svgNS;if(fr(ur),/^svg$/i.test(ur.nodeName)){var zr=ur.ownerDocument.createElementNS(Gr,"g");for(Ar=0,Or=ur.attributes,Mr=Or.length;Ar<Mr;Ar++)sr=Or.item(Ar),zr.setAttributeNS(Gr,sr.nodeName,sr.nodeValue);for(;ur.firstChild;)zr.appendChild(ur.firstChild);ur=zr}for(Ar=0,Or=mr.attributes,Mr=Or.length;Ar<Mr;Ar++)sr=Or.item(Ar),!(sr.nodeName==="x"||sr.nodeName==="y"||sr.nodeName==="xlink:href"||sr.nodeName==="href")&&(sr.nodeName==="transform"?rr=sr.nodeValue+" "+rr:ur.setAttribute(sr.nodeName,sr.nodeValue));ur.setAttribute("transform",rr),ur.setAttribute("instantiated_by_use","1"),ur.removeAttribute("id"),gr=mr.parentNode,gr.replaceChild(ur,mr),St.length===hr&&vr++}}var lr=new RegExp("^\\s*("+_e.reNum+"+)\\s*,?\\s*("+_e.reNum+"+)\\s*,?\\s*("+_e.reNum+"+)\\s*,?\\s*("+_e.reNum+"+)\\s*$");function fr(Ze){if(!_e.svgViewBoxElementsRegEx.test(Ze.nodeName))return{};var St=Ze.getAttribute("viewBox"),vr=1,mr=1,Cr=0,_r=0,pr,dr,ur,rr,gr=Ze.getAttribute("width"),hr=Ze.getAttribute("height"),sr=Ze.getAttribute("x")||0,Ar=Ze.getAttribute("y")||0,Or=Ze.getAttribute("preserveAspectRatio")||"",Mr=!St||!(St=St.match(lr)),Gr=!gr||!hr||gr==="100%"||hr==="100%",zr=Mr&&Gr,Ir={},Qr="",rn=0,sn=0;if(Ir.width=0,Ir.height=0,Ir.toBeParsed=zr,Mr&&(sr||Ar)&&Ze.parentNode&&Ze.parentNode.nodeName!=="#document"&&(Qr=" translate("+xe(sr)+" "+xe(Ar)+") ",ur=(Ze.getAttribute("transform")||"")+Qr,Ze.setAttribute("transform",ur),Ze.removeAttribute("x"),Ze.removeAttribute("y")),zr)return Ir;if(Mr)return Ir.width=xe(gr),Ir.height=xe(hr),Ir;if(Cr=-parseFloat(St[1]),_r=-parseFloat(St[2]),pr=parseFloat(St[3]),dr=parseFloat(St[4]),Ir.minX=Cr,Ir.minY=_r,Ir.viewBoxWidth=pr,Ir.viewBoxHeight=dr,Gr?(Ir.width=pr,Ir.height=dr):(Ir.width=xe(gr),Ir.height=xe(hr),vr=Ir.width/pr,mr=Ir.height/dr),Or=_e.util.parsePreserveAspectRatioAttribute(Or),Or.alignX!=="none"&&(Or.meetOrSlice==="meet"&&(mr=vr=vr>mr?mr:vr),Or.meetOrSlice==="slice"&&(mr=vr=vr>mr?vr:mr),rn=Ir.width-pr*vr,sn=Ir.height-dr*vr,Or.alignX==="Mid"&&(rn/=2),Or.alignY==="Mid"&&(sn/=2),Or.alignX==="Min"&&(rn=0),Or.alignY==="Min"&&(sn=0)),vr===1&&mr===1&&Cr===0&&_r===0&&sr===0&&Ar===0)return Ir;if((sr||Ar)&&Ze.parentNode.nodeName!=="#document"&&(Qr=" translate("+xe(sr)+" "+xe(Ar)+") "),ur=Qr+" matrix("+vr+" 0 0 "+mr+" "+(Cr*vr+rn)+" "+(_r*mr+sn)+") ",Ze.nodeName==="svg"){for(rr=Ze.ownerDocument.createElementNS(_e.svgNS,"g");Ze.firstChild;)rr.appendChild(Ze.firstChild);Ze.appendChild(rr)}else rr=Ze,rr.removeAttribute("x"),rr.removeAttribute("y"),ur=rr.getAttribute("transform")+ur;return rr.setAttribute("transform",ur),Ir}function $e(Ze,St){for(;Ze&&(Ze=Ze.parentNode);)if(Ze.nodeName&&St.test(Ze.nodeName.replace("svg:",""))&&!Ze.getAttribute("instantiated_by_use"))return!0;return!1}_e.parseSVGDocument=function(Ze,St,vr,mr){if(!!Ze){Sr(Ze);var Cr=_e.Object.__uid++,_r,pr,dr=fr(Ze),ur=_e.util.toArray(Ze.getElementsByTagName("*"));if(dr.crossOrigin=mr&&mr.crossOrigin,dr.svgUid=Cr,ur.length===0&&_e.isLikelyNode){ur=Ze.selectNodes('//*[name(.)!="svg"]');var rr=[];for(_r=0,pr=ur.length;_r<pr;_r++)rr[_r]=ur[_r];ur=rr}var gr=ur.filter(function(sr){return fr(sr),_e.svgValidTagNamesRegEx.test(sr.nodeName.replace("svg:",""))&&!$e(sr,_e.svgInvalidAncestorsRegEx)});if(!gr||gr&&!gr.length){St&&St([],{});return}var hr={};ur.filter(function(sr){return sr.nodeName.replace("svg:","")==="clipPath"}).forEach(function(sr){var Ar=sr.getAttribute("id");hr[Ar]=_e.util.toArray(sr.getElementsByTagName("*")).filter(function(Or){return _e.svgValidTagNamesRegEx.test(Or.nodeName.replace("svg:",""))})}),_e.gradientDefs[Cr]=_e.getGradientDefs(Ze),_e.cssRules[Cr]=_e.getCSSRules(Ze),_e.clipPaths[Cr]=hr,_e.parseElements(gr,function(sr,Ar){St&&(St(sr,dr,Ar,ur),delete _e.gradientDefs[Cr],delete _e.cssRules[Cr],delete _e.clipPaths[Cr])},Te(dr),vr,mr)}};function Ve(Ze,St){var vr=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],mr="xlink:href",Cr=St.getAttribute(mr).slice(1),_r=xr(Ze,Cr);if(_r&&_r.getAttribute(mr)&&Ve(Ze,_r),vr.forEach(function(dr){_r&&!St.hasAttribute(dr)&&_r.hasAttribute(dr)&&St.setAttribute(dr,_r.getAttribute(dr))}),!St.children.length)for(var pr=_r.cloneNode(!0);pr.firstChild;)St.appendChild(pr.firstChild);St.removeAttribute(mr)}var Je=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+_e.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+_e.reNum+"))?\\s+(.*)");Ce(_e,{parseFontDeclaration:function(Ze,St){var vr=Ze.match(Je);if(!!vr){var mr=vr[1],Cr=vr[3],_r=vr[4],pr=vr[5],dr=vr[6];mr&&(St.fontStyle=mr),Cr&&(St.fontWeight=isNaN(parseFloat(Cr))?Cr:parseFloat(Cr)),_r&&(St.fontSize=xe(_r)),dr&&(St.fontFamily=dr),pr&&(St.lineHeight=pr==="normal"?1:pr)}},getGradientDefs:function(Ze){var St=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],vr=er(Ze,St),mr,Cr=0,_r={};for(Cr=vr.length;Cr--;)mr=vr[Cr],mr.getAttribute("xlink:href")&&Ve(Ze,mr),_r[mr.getAttribute("id")]=mr;return _r},parseAttributes:function(Ze,St,vr){if(!!Ze){var mr,Cr={},_r,pr;typeof vr=="undefined"&&(vr=Ze.getAttribute("svgUid")),Ze.parentNode&&_e.svgValidParentsRegEx.test(Ze.parentNode.nodeName)&&(Cr=_e.parseAttributes(Ze.parentNode,St,vr));var dr=St.reduce(function(Or,Mr){return mr=Ze.getAttribute(Mr),mr&&(Or[Mr]=mr),Or},{}),ur=Ce(ir(Ze,vr),_e.parseStyleAttribute(Ze));dr=Ce(dr,ur),ur[We]&&Ze.setAttribute(We,ur[We]),_r=pr=Cr.fontSize||_e.Text.DEFAULT_SVG_FONT_SIZE,dr[je]&&(dr[je]=_r=xe(dr[je],pr));var rr,gr,hr={};for(var sr in dr)rr=Ge(sr),gr=Ye(rr,dr[sr],Cr,_r),hr[rr]=gr;hr&&hr.font&&_e.parseFontDeclaration(hr.font,hr);var Ar=Ce(Cr,hr);return _e.svgValidParentsRegEx.test(Ze.nodeName)?Ar:Ke(Ar)}},parseElements:function(Ze,St,vr,mr,Cr){new _e.ElementsParser(Ze,St,vr,mr,Cr).parse()},parseStyleAttribute:function(Ze){var St={},vr=Ze.getAttribute("style");return vr&&(typeof vr=="string"?Qe(vr,St):nr(vr,St)),St},parsePointsAttribute:function(Ze){if(!Ze)return null;Ze=Ze.replace(/,/g," ").trim(),Ze=Ze.split(/\s+/);var St=[],vr,mr;for(vr=0,mr=Ze.length;vr<mr;vr+=2)St.push({x:parseFloat(Ze[vr]),y:parseFloat(Ze[vr+1])});return St},getCSSRules:function(Ze){var St=Ze.getElementsByTagName("style"),vr,mr,Cr={},_r;for(vr=0,mr=St.length;vr<mr;vr++){var pr=St[vr].textContent;pr=pr.replace(/\/\*[\s\S]*?\*\//g,""),pr.trim()!==""&&(_r=pr.split("}"),_r=_r.filter(function(dr){return dr.trim()}),_r.forEach(function(dr){var ur=dr.split("{"),rr={},gr=ur[1].trim(),hr=gr.split(";").filter(function(Mr){return Mr.trim()});for(vr=0,mr=hr.length;vr<mr;vr++){var sr=hr[vr].split(":"),Ar=sr[0].trim(),Or=sr[1].trim();rr[Ar]=Or}dr=ur[0].trim(),dr.split(",").forEach(function(Mr){Mr=Mr.replace(/^svg/i,"").trim(),Mr!==""&&(Cr[Mr]?_e.util.object.extend(Cr[Mr],rr):Cr[Mr]=_e.util.object.clone(rr))})}))}return Cr},loadSVGFromURL:function(Ze,St,vr,mr){Ze=Ze.replace(/^\n\s*/,"").trim(),new _e.util.request(Ze,{method:"get",onComplete:Cr});function Cr(_r){var pr=_r.responseXML;if(!pr||!pr.documentElement)return St&&St(null),!1;_e.parseSVGDocument(pr.documentElement,function(dr,ur,rr,gr){St&&St(dr,ur,rr,gr)},vr,mr)}},loadSVGFromString:function(Ze,St,vr,mr){var Cr=new _e.window.DOMParser,_r=Cr.parseFromString(Ze.trim(),"text/xml");_e.parseSVGDocument(_r.documentElement,function(pr,dr,ur,rr){St(pr,dr,ur,rr)},vr,mr)}})}(Re),e.ElementsParser=function(ke,_e,Ce,Te,Se,xe){this.elements=ke,this.callback=_e,this.options=Ce,this.reviver=Te,this.svgUid=Ce&&Ce.svgUid||0,this.parsingOptions=Se,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=xe},function(ke){ke.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},ke.createObjects=function(){var _e=this;this.elements.forEach(function(Ce,Te){Ce.setAttribute("svgUid",_e.svgUid),_e.createObject(Ce,Te)})},ke.findTag=function(_e){return e[e.util.string.capitalize(_e.tagName.replace("svg:",""))]},ke.createObject=function(_e,Ce){var Te=this.findTag(_e);if(Te&&Te.fromElement)try{Te.fromElement(_e,this.createCallback(Ce,_e),this.options)}catch(Se){e.log(Se)}else this.checkIfDone()},ke.createCallback=function(_e,Ce){var Te=this;return function(Se){var xe;Te.resolveGradient(Se,Ce,"fill"),Te.resolveGradient(Se,Ce,"stroke"),Se instanceof e.Image&&Se._originalElement&&(xe=Se.parsePreserveAspectRatioAttribute(Ce)),Se._removeTransformMatrix(xe),Te.resolveClipPath(Se,Ce),Te.reviver&&Te.reviver(Ce,Se),Te.instances[_e]=Se,Te.checkIfDone()}},ke.extractPropertyDefinition=function(_e,Ce,Te){var Se=_e[Ce],xe=this.regexUrl;if(!!xe.test(Se)){xe.lastIndex=0;var r=xe.exec(Se)[1];return xe.lastIndex=0,e[Te][this.svgUid][r]}},ke.resolveGradient=function(_e,Ce,Te){var Se=this.extractPropertyDefinition(_e,Te,"gradientDefs");if(Se){var xe=Ce.getAttribute(Te+"-opacity"),r=e.Gradient.fromElement(Se,_e,xe,this.options);_e.set(Te,r)}},ke.createClipPathCallback=function(_e,Ce){return function(Te){Te._removeTransformMatrix(),Te.fillRule=Te.clipRule,Ce.push(Te)}},ke.resolveClipPath=function(_e,Ce){var Te=this.extractPropertyDefinition(_e,"clipPath","clipPaths"),Se,xe,r,Oe,Ee,Ae;if(Te){Oe=[],r=e.util.invertTransform(_e.calcTransformMatrix());for(var Fe=Te[0].parentNode,De=Ce;De.parentNode&&De.getAttribute("clip-path")!==_e.clipPath;)De=De.parentNode;De.parentNode.appendChild(Fe);for(var ze=0;ze<Te.length;ze++)Se=Te[ze],xe=this.findTag(Se),xe.fromElement(Se,this.createClipPathCallback(_e,Oe),this.options);Oe.length===1?Te=Oe[0]:Te=new e.Group(Oe),Ee=e.util.multiplyTransformMatrices(r,Te.calcTransformMatrix()),Te.clipPath&&this.resolveClipPath(Te,De);var Ae=e.util.qrDecompose(Ee);Te.flipX=!1,Te.flipY=!1,Te.set("scaleX",Ae.scaleX),Te.set("scaleY",Ae.scaleY),Te.angle=Ae.angle,Te.skewX=Ae.skewX,Te.skewY=0,Te.setPositionByOrigin({x:Ae.translateX,y:Ae.translateY},"center","center"),_e.clipPath=Te}else delete _e.clipPath},ke.checkIfDone=function(){--this.numElements==0&&(this.instances=this.instances.filter(function(_e){return _e!=null}),this.callback(this.instances,this.elements))}}(e.ElementsParser.prototype),function(ke){var _e=ke.fabric||(ke.fabric={});if(_e.Point){_e.warn("fabric.Point is already defined");return}_e.Point=Ce;function Ce(Te,Se){this.x=Te,this.y=Se}Ce.prototype={type:"point",constructor:Ce,add:function(Te){return new Ce(this.x+Te.x,this.y+Te.y)},addEquals:function(Te){return this.x+=Te.x,this.y+=Te.y,this},scalarAdd:function(Te){return new Ce(this.x+Te,this.y+Te)},scalarAddEquals:function(Te){return this.x+=Te,this.y+=Te,this},subtract:function(Te){return new Ce(this.x-Te.x,this.y-Te.y)},subtractEquals:function(Te){return this.x-=Te.x,this.y-=Te.y,this},scalarSubtract:function(Te){return new Ce(this.x-Te,this.y-Te)},scalarSubtractEquals:function(Te){return this.x-=Te,this.y-=Te,this},multiply:function(Te){return new Ce(this.x*Te,this.y*Te)},multiplyEquals:function(Te){return this.x*=Te,this.y*=Te,this},divide:function(Te){return new Ce(this.x/Te,this.y/Te)},divideEquals:function(Te){return this.x/=Te,this.y/=Te,this},eq:function(Te){return this.x===Te.x&&this.y===Te.y},lt:function(Te){return this.x<Te.x&&this.y<Te.y},lte:function(Te){return this.x<=Te.x&&this.y<=Te.y},gt:function(Te){return this.x>Te.x&&this.y>Te.y},gte:function(Te){return this.x>=Te.x&&this.y>=Te.y},lerp:function(Te,Se){return typeof Se=="undefined"&&(Se=.5),Se=Math.max(Math.min(1,Se),0),new Ce(this.x+(Te.x-this.x)*Se,this.y+(Te.y-this.y)*Se)},distanceFrom:function(Te){var Se=this.x-Te.x,xe=this.y-Te.y;return Math.sqrt(Se*Se+xe*xe)},midPointFrom:function(Te){return this.lerp(Te)},min:function(Te){return new Ce(Math.min(this.x,Te.x),Math.min(this.y,Te.y))},max:function(Te){return new Ce(Math.max(this.x,Te.x),Math.max(this.y,Te.y))},toString:function(){return this.x+","+this.y},setXY:function(Te,Se){return this.x=Te,this.y=Se,this},setX:function(Te){return this.x=Te,this},setY:function(Te){return this.y=Te,this},setFromPoint:function(Te){return this.x=Te.x,this.y=Te.y,this},swap:function(Te){var Se=this.x,xe=this.y;this.x=Te.x,this.y=Te.y,Te.x=Se,Te.y=xe},clone:function(){return new Ce(this.x,this.y)}}}(Re),function(ke){var _e=ke.fabric||(ke.fabric={});if(_e.Intersection){_e.warn("fabric.Intersection is already defined");return}function Ce(Te){this.status=Te,this.points=[]}_e.Intersection=Ce,_e.Intersection.prototype={constructor:Ce,appendPoint:function(Te){return this.points.push(Te),this},appendPoints:function(Te){return this.points=this.points.concat(Te),this}},_e.Intersection.intersectLineLine=function(Te,Se,xe,r){var Oe,Ee=(r.x-xe.x)*(Te.y-xe.y)-(r.y-xe.y)*(Te.x-xe.x),Ae=(Se.x-Te.x)*(Te.y-xe.y)-(Se.y-Te.y)*(Te.x-xe.x),Fe=(r.y-xe.y)*(Se.x-Te.x)-(r.x-xe.x)*(Se.y-Te.y);if(Fe!==0){var De=Ee/Fe,ze=Ae/Fe;0<=De&&De<=1&&0<=ze&&ze<=1?(Oe=new Ce("Intersection"),Oe.appendPoint(new _e.Point(Te.x+De*(Se.x-Te.x),Te.y+De*(Se.y-Te.y)))):Oe=new Ce}else Ee===0||Ae===0?Oe=new Ce("Coincident"):Oe=new Ce("Parallel");return Oe},_e.Intersection.intersectLinePolygon=function(Te,Se,xe){var r=new Ce,Oe=xe.length,Ee,Ae,Fe,De;for(De=0;De<Oe;De++)Ee=xe[De],Ae=xe[(De+1)%Oe],Fe=Ce.intersectLineLine(Te,Se,Ee,Ae),r.appendPoints(Fe.points);return r.points.length>0&&(r.status="Intersection"),r},_e.Intersection.intersectPolygonPolygon=function(Te,Se){var xe=new Ce,r=Te.length,Oe;for(Oe=0;Oe<r;Oe++){var Ee=Te[Oe],Ae=Te[(Oe+1)%r],Fe=Ce.intersectLinePolygon(Ee,Ae,Se);xe.appendPoints(Fe.points)}return xe.points.length>0&&(xe.status="Intersection"),xe},_e.Intersection.intersectPolygonRectangle=function(Te,Se,xe){var r=Se.min(xe),Oe=Se.max(xe),Ee=new _e.Point(Oe.x,r.y),Ae=new _e.Point(r.x,Oe.y),Fe=Ce.intersectLinePolygon(r,Ee,Te),De=Ce.intersectLinePolygon(Ee,Oe,Te),ze=Ce.intersectLinePolygon(Oe,Ae,Te),je=Ce.intersectLinePolygon(Ae,r,Te),We=new Ce;return We.appendPoints(Fe.points),We.appendPoints(De.points),We.appendPoints(ze.points),We.appendPoints(je.points),We.points.length>0&&(We.status="Intersection"),We}}(Re),function(ke){var _e=ke.fabric||(ke.fabric={});if(_e.Color){_e.warn("fabric.Color is already defined.");return}function Ce(Se){Se?this._tryParsingColor(Se):this.setSource([0,0,0,1])}_e.Color=Ce,_e.Color.prototype={_tryParsingColor:function(Se){var xe;Se in Ce.colorNameMap&&(Se=Ce.colorNameMap[Se]),Se==="transparent"&&(xe=[255,255,255,0]),xe||(xe=Ce.sourceFromHex(Se)),xe||(xe=Ce.sourceFromRgb(Se)),xe||(xe=Ce.sourceFromHsl(Se)),xe||(xe=[0,0,0,1]),xe&&this.setSource(xe)},_rgbToHsl:function(Se,xe,r){Se/=255,xe/=255,r/=255;var Oe,Ee,Ae,Fe=_e.util.array.max([Se,xe,r]),De=_e.util.array.min([Se,xe,r]);if(Ae=(Fe+De)/2,Fe===De)Oe=Ee=0;else{var ze=Fe-De;switch(Ee=Ae>.5?ze/(2-Fe-De):ze/(Fe+De),Fe){case Se:Oe=(xe-r)/ze+(xe<r?6:0);break;case xe:Oe=(r-Se)/ze+2;break;case r:Oe=(Se-xe)/ze+4;break}Oe/=6}return[Math.round(Oe*360),Math.round(Ee*100),Math.round(Ae*100)]},getSource:function(){return this._source},setSource:function(Se){this._source=Se},toRgb:function(){var Se=this.getSource();return"rgb("+Se[0]+","+Se[1]+","+Se[2]+")"},toRgba:function(){var Se=this.getSource();return"rgba("+Se[0]+","+Se[1]+","+Se[2]+","+Se[3]+")"},toHsl:function(){var Se=this.getSource(),xe=this._rgbToHsl(Se[0],Se[1],Se[2]);return"hsl("+xe[0]+","+xe[1]+"%,"+xe[2]+"%)"},toHsla:function(){var Se=this.getSource(),xe=this._rgbToHsl(Se[0],Se[1],Se[2]);return"hsla("+xe[0]+","+xe[1]+"%,"+xe[2]+"%,"+Se[3]+")"},toHex:function(){var Se=this.getSource(),xe,r,Oe;return xe=Se[0].toString(16),xe=xe.length===1?"0"+xe:xe,r=Se[1].toString(16),r=r.length===1?"0"+r:r,Oe=Se[2].toString(16),Oe=Oe.length===1?"0"+Oe:Oe,xe.toUpperCase()+r.toUpperCase()+Oe.toUpperCase()},toHexa:function(){var Se=this.getSource(),xe;return xe=Math.round(Se[3]*255),xe=xe.toString(16),xe=xe.length===1?"0"+xe:xe,this.toHex()+xe.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(Se){var xe=this.getSource();return xe[3]=Se,this.setSource(xe),this},toGrayscale:function(){var Se=this.getSource(),xe=parseInt((Se[0]*.3+Se[1]*.59+Se[2]*.11).toFixed(0),10),r=Se[3];return this.setSource([xe,xe,xe,r]),this},toBlackWhite:function(Se){var xe=this.getSource(),r=(xe[0]*.3+xe[1]*.59+xe[2]*.11).toFixed(0),Oe=xe[3];return Se=Se||127,r=Number(r)<Number(Se)?0:255,this.setSource([r,r,r,Oe]),this},overlayWith:function(Se){Se instanceof Ce||(Se=new Ce(Se));var xe=[],r=this.getAlpha(),Oe=.5,Ee=this.getSource(),Ae=Se.getSource(),Fe;for(Fe=0;Fe<3;Fe++)xe.push(Math.round(Ee[Fe]*(1-Oe)+Ae[Fe]*Oe));return xe[3]=r,this.setSource(xe),this}},_e.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,_e.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,_e.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,_e.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function Te(Se,xe,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?Se+(xe-Se)*6*r:r<1/2?xe:r<2/3?Se+(xe-Se)*(2/3-r)*6:Se}_e.Color.fromRgb=function(Se){return Ce.fromSource(Ce.sourceFromRgb(Se))},_e.Color.sourceFromRgb=function(Se){var xe=Se.match(Ce.reRGBa);if(xe){var r=parseInt(xe[1],10)/(/%$/.test(xe[1])?100:1)*(/%$/.test(xe[1])?255:1),Oe=parseInt(xe[2],10)/(/%$/.test(xe[2])?100:1)*(/%$/.test(xe[2])?255:1),Ee=parseInt(xe[3],10)/(/%$/.test(xe[3])?100:1)*(/%$/.test(xe[3])?255:1);return[parseInt(r,10),parseInt(Oe,10),parseInt(Ee,10),xe[4]?parseFloat(xe[4]):1]}},_e.Color.fromRgba=Ce.fromRgb,_e.Color.fromHsl=function(Se){return Ce.fromSource(Ce.sourceFromHsl(Se))},_e.Color.sourceFromHsl=function(Se){var xe=Se.match(Ce.reHSLa);if(!!xe){var r=(parseFloat(xe[1])%360+360)%360/360,Oe=parseFloat(xe[2])/(/%$/.test(xe[2])?100:1),Ee=parseFloat(xe[3])/(/%$/.test(xe[3])?100:1),Ae,Fe,De;if(Oe===0)Ae=Fe=De=Ee;else{var ze=Ee<=.5?Ee*(Oe+1):Ee+Oe-Ee*Oe,je=Ee*2-ze;Ae=Te(je,ze,r+1/3),Fe=Te(je,ze,r),De=Te(je,ze,r-1/3)}return[Math.round(Ae*255),Math.round(Fe*255),Math.round(De*255),xe[4]?parseFloat(xe[4]):1]}},_e.Color.fromHsla=Ce.fromHsl,_e.Color.fromHex=function(Se){return Ce.fromSource(Ce.sourceFromHex(Se))},_e.Color.sourceFromHex=function(Se){if(Se.match(Ce.reHex)){var xe=Se.slice(Se.indexOf("#")+1),r=xe.length===3||xe.length===4,Oe=xe.length===8||xe.length===4,Ee=r?xe.charAt(0)+xe.charAt(0):xe.substring(0,2),Ae=r?xe.charAt(1)+xe.charAt(1):xe.substring(2,4),Fe=r?xe.charAt(2)+xe.charAt(2):xe.substring(4,6),De=Oe?r?xe.charAt(3)+xe.charAt(3):xe.substring(6,8):"FF";return[parseInt(Ee,16),parseInt(Ae,16),parseInt(Fe,16),parseFloat((parseInt(De,16)/255).toFixed(2))]}},_e.Color.fromSource=function(Se){var xe=new Ce;return xe.setSource(Se),xe}}(Re),function(ke){var _e=ke.fabric||(ke.fabric={}),Ce=["e","se","s","sw","w","nw","n","ne","e"],Te=["ns","nesw","ew","nwse"],Se={},xe="left",r="top",Oe="right",Ee="bottom",Ae="center",Fe={top:Ee,bottom:r,left:Oe,right:xe,center:Ae},De=_e.util.radiansToDegrees,ze=Math.sign||function(rr){return(rr>0)-(rr<0)||+rr};function je(rr,gr){var hr=rr.angle+De(Math.atan2(gr.y,gr.x))+360;return Math.round(hr%360/45)}function We(rr,gr){var hr=gr.transform.target,sr=hr.canvas,Ar=_e.util.object.clone(gr);Ar.target=hr,sr&&sr.fire("object:"+rr,Ar),hr.fire(rr,gr)}function Ge(rr,gr){var hr=gr.canvas,sr=hr.uniScaleKey,Ar=rr[sr];return hr.uniformScaling&&!Ar||!hr.uniformScaling&&Ar}function Ye(rr){return rr.originX===Ae&&rr.originY===Ae}function Xe(rr,gr,hr){var sr=rr.lockScalingX,Ar=rr.lockScalingY;return!!(sr&&Ar||!gr&&(sr||Ar)&&hr||sr&&gr==="x"||Ar&&gr==="y")}function Ke(rr,gr,hr){var sr="not-allowed",Ar=Ge(rr,hr),Or="";if(gr.x!==0&&gr.y===0?Or="x":gr.x===0&&gr.y!==0&&(Or="y"),Xe(hr,Or,Ar))return sr;var Mr=je(hr,gr);return Ce[Mr]+"-resize"}function er(rr,gr,hr){var sr="not-allowed";if(gr.x!==0&&hr.lockSkewingY||gr.y!==0&&hr.lockSkewingX)return sr;var Ar=je(hr,gr)%4;return Te[Ar]+"-resize"}function Qe(rr,gr,hr){return rr[hr.canvas.altActionKey]?Se.skewCursorStyleHandler(rr,gr,hr):Se.scaleCursorStyleHandler(rr,gr,hr)}function nr(rr,gr,hr){var sr=rr[hr.canvas.altActionKey];if(gr.x===0)return sr?"skewX":"scaleY";if(gr.y===0)return sr?"skewY":"scaleX"}function ir(rr,gr,hr){return hr.lockRotation?"not-allowed":gr.cursorStyle}function cr(rr,gr,hr,sr){return{e:rr,transform:gr,pointer:{x:hr,y:sr}}}function br(rr){return function(gr,hr,sr,Ar){var Or=hr.target,Mr=Or.getCenterPoint(),Gr=Or.translateToOriginPoint(Mr,hr.originX,hr.originY),zr=rr(gr,hr,sr,Ar);return Or.setPositionByOrigin(Gr,hr.originX,hr.originY),zr}}function wr(rr,gr){return function(hr,sr,Ar,Or){var Mr=gr(hr,sr,Ar,Or);return Mr&&We(rr,cr(hr,sr,Ar,Or)),Mr}}function xr(rr,gr,hr,sr,Ar){var Or=rr.target,Mr=Or.controls[rr.corner],Gr=Or.canvas.getZoom(),zr=Or.padding/Gr,Ir=Or.toLocalPoint(new _e.Point(sr,Ar),gr,hr);return Ir.x>=zr&&(Ir.x-=zr),Ir.x<=-zr&&(Ir.x+=zr),Ir.y>=zr&&(Ir.y-=zr),Ir.y<=zr&&(Ir.y+=zr),Ir.x-=Mr.offsetX,Ir.y-=Mr.offsetY,Ir}function Sr(rr){return rr.flipX!==rr.flipY}function lr(rr,gr,hr,sr,Ar){if(rr[gr]!==0){var Or=rr._getTransformedDimensions()[sr],Mr=Ar/Or*rr[hr];rr.set(hr,Mr)}}function fr(rr,gr,hr,sr){var Ar=gr.target,Or=Ar._getTransformedDimensions(0,Ar.skewY),Mr=xr(gr,gr.originX,gr.originY,hr,sr),Gr=Math.abs(Mr.x*2)-Or.x,zr=Ar.skewX,Ir;Gr<2?Ir=0:(Ir=De(Math.atan2(Gr/Ar.scaleX,Or.y/Ar.scaleY)),gr.originX===xe&&gr.originY===Ee&&(Ir=-Ir),gr.originX===Oe&&gr.originY===r&&(Ir=-Ir),Sr(Ar)&&(Ir=-Ir));var Qr=zr!==Ir;if(Qr){var rn=Ar._getTransformedDimensions().y;Ar.set("skewX",Ir),lr(Ar,"skewY","scaleY","y",rn)}return Qr}function $e(rr,gr,hr,sr){var Ar=gr.target,Or=Ar._getTransformedDimensions(Ar.skewX,0),Mr=xr(gr,gr.originX,gr.originY,hr,sr),Gr=Math.abs(Mr.y*2)-Or.y,zr=Ar.skewY,Ir;Gr<2?Ir=0:(Ir=De(Math.atan2(Gr/Ar.scaleY,Or.x/Ar.scaleX)),gr.originX===xe&&gr.originY===Ee&&(Ir=-Ir),gr.originX===Oe&&gr.originY===r&&(Ir=-Ir),Sr(Ar)&&(Ir=-Ir));var Qr=zr!==Ir;if(Qr){var rn=Ar._getTransformedDimensions().x;Ar.set("skewY",Ir),lr(Ar,"skewX","scaleX","x",rn)}return Qr}function Ve(rr,gr,hr,sr){var Ar=gr.target,Or=Ar.skewX,Mr,Gr=gr.originY;if(Ar.lockSkewingX)return!1;if(Or===0){var zr=xr(gr,Ae,Ae,hr,sr);zr.x>0?Mr=xe:Mr=Oe}else Or>0&&(Mr=Gr===r?xe:Oe),Or<0&&(Mr=Gr===r?Oe:xe),Sr(Ar)&&(Mr=Mr===xe?Oe:xe);gr.originX=Mr;var Ir=wr("skewing",br(fr));return Ir(rr,gr,hr,sr)}function Je(rr,gr,hr,sr){var Ar=gr.target,Or=Ar.skewY,Mr,Gr=gr.originX;if(Ar.lockSkewingY)return!1;if(Or===0){var zr=xr(gr,Ae,Ae,hr,sr);zr.y>0?Mr=r:Mr=Ee}else Or>0&&(Mr=Gr===xe?r:Ee),Or<0&&(Mr=Gr===xe?Ee:r),Sr(Ar)&&(Mr=Mr===r?Ee:r);gr.originY=Mr;var Ir=wr("skewing",br($e));return Ir(rr,gr,hr,sr)}function Ze(rr,gr,hr,sr){var Ar=gr,Or=Ar.target,Mr=Or.translateToOriginPoint(Or.getCenterPoint(),Ar.originX,Ar.originY);if(Or.lockRotation)return!1;var Gr=Math.atan2(Ar.ey-Mr.y,Ar.ex-Mr.x),zr=Math.atan2(sr-Mr.y,hr-Mr.x),Ir=De(zr-Gr+Ar.theta),Qr=!0;if(Or.snapAngle>0){var rn=Or.snapAngle,sn=Or.snapThreshold||rn,pn=Math.ceil(Ir/rn)*rn,mn=Math.floor(Ir/rn)*rn;Math.abs(Ir-mn)<sn?Ir=mn:Math.abs(Ir-pn)<sn&&(Ir=pn)}return Ir<0&&(Ir=360+Ir),Ir%=360,Qr=Or.angle!==Ir,Or.angle=Ir,Qr}function St(rr,gr,hr,sr,Ar){Ar=Ar||{};var Or=gr.target,Mr=Or.lockScalingX,Gr=Or.lockScalingY,zr=Ar.by,Ir,Qr,rn,sn,pn=Ge(rr,Or),mn=Xe(Or,zr,pn),Sn,Cn,Xr=gr.gestureScale;if(mn)return!1;if(Xr)Qr=gr.scaleX*Xr,rn=gr.scaleY*Xr;else{if(Ir=xr(gr,gr.originX,gr.originY,hr,sr),Sn=zr!=="y"?ze(Ir.x):1,Cn=zr!=="x"?ze(Ir.y):1,gr.signX||(gr.signX=Sn),gr.signY||(gr.signY=Cn),Or.lockScalingFlip&&(gr.signX!==Sn||gr.signY!==Cn))return!1;if(sn=Or._getTransformedDimensions(),pn&&!zr){var Er=Math.abs(Ir.x)+Math.abs(Ir.y),Rr=gr.original,Dr=Math.abs(sn.x*Rr.scaleX/Or.scaleX)+Math.abs(sn.y*Rr.scaleY/Or.scaleY),Br=Er/Dr;Qr=Rr.scaleX*Br,rn=Rr.scaleY*Br}else Qr=Math.abs(Ir.x*Or.scaleX/sn.x),rn=Math.abs(Ir.y*Or.scaleY/sn.y);Ye(gr)&&(Qr*=2,rn*=2),gr.signX!==Sn&&zr!=="y"&&(gr.originX=Fe[gr.originX],Qr*=-1,gr.signX=Sn),gr.signY!==Cn&&zr!=="x"&&(gr.originY=Fe[gr.originY],rn*=-1,gr.signY=Cn)}var Wr=Or.scaleX,Ur=Or.scaleY;return zr?(zr==="x"&&Or.set("scaleX",Qr),zr==="y"&&Or.set("scaleY",rn)):(!Mr&&Or.set("scaleX",Qr),!Gr&&Or.set("scaleY",rn)),Wr!==Or.scaleX||Ur!==Or.scaleY}function vr(rr,gr,hr,sr){return St(rr,gr,hr,sr)}function mr(rr,gr,hr,sr){return St(rr,gr,hr,sr,{by:"x"})}function Cr(rr,gr,hr,sr){return St(rr,gr,hr,sr,{by:"y"})}function _r(rr,gr,hr,sr){return rr[gr.target.canvas.altActionKey]?Se.skewHandlerX(rr,gr,hr,sr):Se.scalingY(rr,gr,hr,sr)}function pr(rr,gr,hr,sr){return rr[gr.target.canvas.altActionKey]?Se.skewHandlerY(rr,gr,hr,sr):Se.scalingX(rr,gr,hr,sr)}function dr(rr,gr,hr,sr){var Ar=gr.target,Or=xr(gr,gr.originX,gr.originY,hr,sr),Mr=Ar.strokeWidth/(Ar.strokeUniform?Ar.scaleX:1),Gr=Ye(gr)?2:1,zr=Ar.width,Ir=Math.abs(Or.x*Gr/Ar.scaleX)-Mr;return Ar.set("width",Math.max(Ir,0)),zr!==Ir}function ur(rr,gr,hr,sr){var Ar=gr.target,Or=hr-gr.offsetX,Mr=sr-gr.offsetY,Gr=!Ar.get("lockMovementX")&&Ar.left!==Or,zr=!Ar.get("lockMovementY")&&Ar.top!==Mr;return Gr&&Ar.set("left",Or),zr&&Ar.set("top",Mr),(Gr||zr)&&We("moving",cr(rr,gr,hr,sr)),Gr||zr}Se.scaleCursorStyleHandler=Ke,Se.skewCursorStyleHandler=er,Se.scaleSkewCursorStyleHandler=Qe,Se.rotationWithSnapping=wr("rotating",br(Ze)),Se.scalingEqually=wr("scaling",br(vr)),Se.scalingX=wr("scaling",br(mr)),Se.scalingY=wr("scaling",br(Cr)),Se.scalingYOrSkewingX=_r,Se.scalingXOrSkewingY=pr,Se.changeWidth=wr("resizing",br(dr)),Se.skewHandlerX=Ve,Se.skewHandlerY=Je,Se.dragHandler=ur,Se.scaleOrSkewActionName=nr,Se.rotationStyleHandler=ir,Se.fireEvent=We,Se.wrapWithFixedAnchor=br,Se.wrapWithFireEvent=wr,Se.getLocalPoint=xr,_e.controlsUtils=Se}(Re),function(ke){var _e=ke.fabric||(ke.fabric={}),Ce=_e.util.degreesToRadians,Te=_e.controlsUtils;function Se(r,Oe,Ee,Ae,Fe){Ae=Ae||{};var De=this.sizeX||Ae.cornerSize||Fe.cornerSize,ze=this.sizeY||Ae.cornerSize||Fe.cornerSize,je=typeof Ae.transparentCorners!="undefined"?Ae.transparentCorners:Fe.transparentCorners,We=je?"stroke":"fill",Ge=!je&&(Ae.cornerStrokeColor||Fe.cornerStrokeColor),Ye=Oe,Xe=Ee,Ke;r.save(),r.fillStyle=Ae.cornerColor||Fe.cornerColor,r.strokeStyle=Ae.cornerStrokeColor||Fe.cornerStrokeColor,De>ze?(Ke=De,r.scale(1,ze/De),Xe=Ee*De/ze):ze>De?(Ke=ze,r.scale(De/ze,1),Ye=Oe*ze/De):Ke=De,r.lineWidth=1,r.beginPath(),r.arc(Ye,Xe,Ke/2,0,2*Math.PI,!1),r[We](),Ge&&r.stroke(),r.restore()}function xe(r,Oe,Ee,Ae,Fe){Ae=Ae||{};var De=this.sizeX||Ae.cornerSize||Fe.cornerSize,ze=this.sizeY||Ae.cornerSize||Fe.cornerSize,je=typeof Ae.transparentCorners!="undefined"?Ae.transparentCorners:Fe.transparentCorners,We=je?"stroke":"fill",Ge=!je&&(Ae.cornerStrokeColor||Fe.cornerStrokeColor),Ye=De/2,Xe=ze/2;r.save(),r.fillStyle=Ae.cornerColor||Fe.cornerColor,r.strokeStyle=Ae.cornerStrokeColor||Fe.cornerStrokeColor,r.lineWidth=1,r.translate(Oe,Ee),r.rotate(Ce(Fe.angle)),r[We+"Rect"](-Ye,-Xe,De,ze),Ge&&r.strokeRect(-Ye,-Xe,De,ze),r.restore()}Te.renderCircleControl=Se,Te.renderSquareControl=xe}(Re),function(ke){var _e=ke.fabric||(ke.fabric={});function Ce(Te){for(var Se in Te)this[Se]=Te[Se]}_e.Control=Ce,_e.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(Te,Se){return Se.cursorStyle},getActionName:function(Te,Se){return Se.actionName},getVisibility:function(Te,Se){var xe=Te._controlsVisibility;return xe&&typeof xe[Se]!="undefined"?xe[Se]:this.visible},setVisibility:function(Te){this.visible=Te},positionHandler:function(Te,Se){var xe=_e.util.transformPoint({x:this.x*Te.x+this.offsetX,y:this.y*Te.y+this.offsetY},Se);return xe},calcCornerCoords:function(Te,Se,xe,r,Oe){var Ee,Ae,Fe,De,ze=Oe?this.touchSizeX:this.sizeX,je=Oe?this.touchSizeY:this.sizeY;if(ze&&je&&ze!==je){var We=Math.atan2(je,ze),Ge=Math.sqrt(ze*ze+je*je)/2,Ye=We-_e.util.degreesToRadians(Te),Xe=Math.PI/2-We-_e.util.degreesToRadians(Te);Ee=Ge*_e.util.cos(Ye),Ae=Ge*_e.util.sin(Ye),Fe=Ge*_e.util.cos(Xe),De=Ge*_e.util.sin(Xe)}else{var Ke=ze&&je?ze:Se;Ge=Ke*.7071067812;var Ye=_e.util.degreesToRadians(45-Te);Ee=Fe=Ge*_e.util.cos(Ye),Ae=De=Ge*_e.util.sin(Ye)}return{tl:{x:xe-De,y:r-Fe},tr:{x:xe+Ee,y:r-Ae},bl:{x:xe-Ee,y:r+Ae},br:{x:xe+De,y:r+Fe}}},render:function(Te,Se,xe,r,Oe){switch(r=r||{},r.cornerStyle||Oe.cornerStyle){case"circle":_e.controlsUtils.renderCircleControl.call(this,Te,Se,xe,r,Oe);break;default:_e.controlsUtils.renderSquareControl.call(this,Te,Se,xe,r,Oe)}}}}(Re),function(){function ke(xe,r){var Oe=xe.getAttribute("style"),Ee=xe.getAttribute("offset")||0,Ae,Fe,De,ze;if(Ee=parseFloat(Ee)/(/%$/.test(Ee)?100:1),Ee=Ee<0?0:Ee>1?1:Ee,Oe){var je=Oe.split(/\s*;\s*/);for(je[je.length-1]===""&&je.pop(),ze=je.length;ze--;){var We=je[ze].split(/\s*:\s*/),Ge=We[0].trim(),Ye=We[1].trim();Ge==="stop-color"?Ae=Ye:Ge==="stop-opacity"&&(De=Ye)}}return Ae||(Ae=xe.getAttribute("stop-color")||"rgb(0,0,0)"),De||(De=xe.getAttribute("stop-opacity")),Ae=new e.Color(Ae),Fe=Ae.getAlpha(),De=isNaN(parseFloat(De))?1:parseFloat(De),De*=Fe*r,{offset:Ee,color:Ae.toRgb(),opacity:De}}function _e(xe){return{x1:xe.getAttribute("x1")||0,y1:xe.getAttribute("y1")||0,x2:xe.getAttribute("x2")||"100%",y2:xe.getAttribute("y2")||0}}function Ce(xe){return{x1:xe.getAttribute("fx")||xe.getAttribute("cx")||"50%",y1:xe.getAttribute("fy")||xe.getAttribute("cy")||"50%",r1:0,x2:xe.getAttribute("cx")||"50%",y2:xe.getAttribute("cy")||"50%",r2:xe.getAttribute("r")||"50%"}}var Te=e.util.object.clone;e.Gradient=e.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(xe){xe||(xe={}),xe.coords||(xe.coords={});var r,Oe=this;Object.keys(xe).forEach(function(Ee){Oe[Ee]=xe[Ee]}),this.id?this.id+="_"+e.Object.__uid++:this.id=e.Object.__uid++,r={x1:xe.coords.x1||0,y1:xe.coords.y1||0,x2:xe.coords.x2||0,y2:xe.coords.y2||0},this.type==="radial"&&(r.r1=xe.coords.r1||0,r.r2=xe.coords.r2||0),this.coords=r,this.colorStops=xe.colorStops.slice()},addColorStop:function(xe){for(var r in xe){var Oe=new e.Color(xe[r]);this.colorStops.push({offset:parseFloat(r),color:Oe.toRgb(),opacity:Oe.getAlpha()})}return this},toObject:function(xe){var r={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return e.util.populateWithProperties(this,r,xe),r},toSVG:function(xe,r){var Oe=Te(this.coords,!0),Ee,Ae,r=r||{},Fe,De,ze=Te(this.colorStops,!0),je=Oe.r1>Oe.r2,We=this.gradientTransform?this.gradientTransform.concat():e.iMatrix.concat(),Ge=-this.offsetX,Ye=-this.offsetY,Xe=!!r.additionalTransform,Ke=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(ze.sort(function(cr,br){return cr.offset-br.offset}),Ke==="objectBoundingBox"?(Ge/=xe.width,Ye/=xe.height):(Ge+=xe.width/2,Ye+=xe.height/2),xe.type==="path"&&this.gradientUnits!=="percentage"&&(Ge-=xe.pathOffset.x,Ye-=xe.pathOffset.y),We[4]-=Ge,We[5]-=Ye,De='id="SVGID_'+this.id+'" gradientUnits="'+Ke+'"',De+=' gradientTransform="'+(Xe?r.additionalTransform+" ":"")+e.util.matrixToSVG(We)+'" ',this.type==="linear"?Fe=["<linearGradient ",De,' x1="',Oe.x1,'" y1="',Oe.y1,'" x2="',Oe.x2,'" y2="',Oe.y2,`">
`]:this.type==="radial"&&(Fe=["<radialGradient ",De,' cx="',je?Oe.x1:Oe.x2,'" cy="',je?Oe.y1:Oe.y2,'" r="',je?Oe.r1:Oe.r2,'" fx="',je?Oe.x2:Oe.x1,'" fy="',je?Oe.y2:Oe.y1,`">
`]),this.type==="radial"){if(je)for(ze=ze.concat(),ze.reverse(),Ee=0,Ae=ze.length;Ee<Ae;Ee++)ze[Ee].offset=1-ze[Ee].offset;var er=Math.min(Oe.r1,Oe.r2);if(er>0){var Qe=Math.max(Oe.r1,Oe.r2),nr=er/Qe;for(Ee=0,Ae=ze.length;Ee<Ae;Ee++)ze[Ee].offset+=nr*(1-ze[Ee].offset)}}for(Ee=0,Ae=ze.length;Ee<Ae;Ee++){var ir=ze[Ee];Fe.push("<stop ",'offset="',ir.offset*100+"%",'" style="stop-color:',ir.color,typeof ir.opacity!="undefined"?";stop-opacity: "+ir.opacity:";",`"/>
`)}return Fe.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),Fe.join("")},toLive:function(xe){var r,Oe=e.util.object.clone(this.coords),Ee,Ae;if(!!this.type){for(this.type==="linear"?r=xe.createLinearGradient(Oe.x1,Oe.y1,Oe.x2,Oe.y2):this.type==="radial"&&(r=xe.createRadialGradient(Oe.x1,Oe.y1,Oe.r1,Oe.x2,Oe.y2,Oe.r2)),Ee=0,Ae=this.colorStops.length;Ee<Ae;Ee++){var Fe=this.colorStops[Ee].color,De=this.colorStops[Ee].opacity,ze=this.colorStops[Ee].offset;typeof De!="undefined"&&(Fe=new e.Color(Fe).setAlpha(De).toRgba()),r.addColorStop(ze,Fe)}return r}}}),e.util.object.extend(e.Gradient,{fromElement:function(xe,r,Oe,Ee){var Ae=parseFloat(Oe)/(/%$/.test(Oe)?100:1);Ae=Ae<0?0:Ae>1?1:Ae,isNaN(Ae)&&(Ae=1);var Fe=xe.getElementsByTagName("stop"),De,ze=xe.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",je=xe.getAttribute("gradientTransform")||"",We=[],Ge,Ye,Xe=0,Ke=0,er;for(xe.nodeName==="linearGradient"||xe.nodeName==="LINEARGRADIENT"?(De="linear",Ge=_e(xe)):(De="radial",Ge=Ce(xe)),Ye=Fe.length;Ye--;)We.push(ke(Fe[Ye],Ae));er=e.parseTransformAttribute(je),Se(r,Ge,Ee,ze),ze==="pixels"&&(Xe=-r.left,Ke=-r.top);var Qe=new e.Gradient({id:xe.getAttribute("id"),type:De,coords:Ge,colorStops:We,gradientUnits:ze,gradientTransform:er,offsetX:Xe,offsetY:Ke});return Qe}});function Se(xe,r,Oe,Ee){var Ae,Fe;Object.keys(r).forEach(function(De){Ae=r[De],Ae==="Infinity"?Fe=1:Ae==="-Infinity"?Fe=0:(Fe=parseFloat(r[De],10),typeof Ae=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(Ae)&&(Fe*=.01,Ee==="pixels"&&((De==="x1"||De==="x2"||De==="r2")&&(Fe*=Oe.viewBoxWidth||Oe.width),(De==="y1"||De==="y2")&&(Fe*=Oe.viewBoxHeight||Oe.height)))),r[De]=Fe})}}(),function(){var ke=e.util.toFixed;e.Pattern=e.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(_e,Ce){if(_e||(_e={}),this.id=e.Object.__uid++,this.setOptions(_e),!_e.source||_e.source&&typeof _e.source!="string"){Ce&&Ce(this);return}else{var Te=this;this.source=e.util.createImage(),e.util.loadImage(_e.source,function(Se,xe){Te.source=Se,Ce&&Ce(Te,xe)},null,this.crossOrigin)}},toObject:function(_e){var Ce=e.Object.NUM_FRACTION_DIGITS,Te,Se;return typeof this.source.src=="string"?Te=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(Te=this.source.toDataURL()),Se={type:"pattern",source:Te,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:ke(this.offsetX,Ce),offsetY:ke(this.offsetY,Ce),patternTransform:this.patternTransform?this.patternTransform.concat():null},e.util.populateWithProperties(this,Se,_e),Se},toSVG:function(_e){var Ce=typeof this.source=="function"?this.source():this.source,Te=Ce.width/_e.width,Se=Ce.height/_e.height,xe=this.offsetX/_e.width,r=this.offsetY/_e.height,Oe="";return(this.repeat==="repeat-x"||this.repeat==="no-repeat")&&(Se=1,r&&(Se+=Math.abs(r))),(this.repeat==="repeat-y"||this.repeat==="no-repeat")&&(Te=1,xe&&(Te+=Math.abs(xe))),Ce.src?Oe=Ce.src:Ce.toDataURL&&(Oe=Ce.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+xe+'" y="'+r+'" width="'+Te+'" height="'+Se+`">
<image x="0" y="0" width="`+Ce.width+'" height="'+Ce.height+'" xlink:href="'+Oe+`"></image>
</pattern>
`},setOptions:function(_e){for(var Ce in _e)this[Ce]=_e[Ce]},toLive:function(_e){var Ce=this.source;return!Ce||typeof Ce.src!="undefined"&&(!Ce.complete||Ce.naturalWidth===0||Ce.naturalHeight===0)?"":_e.createPattern(Ce,this.repeat)}})}(),function(ke){var _e=ke.fabric||(ke.fabric={}),Ce=_e.util.toFixed;if(_e.Shadow){_e.warn("fabric.Shadow is already defined.");return}_e.Shadow=_e.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(Te){typeof Te=="string"&&(Te=this._parseShadow(Te));for(var Se in Te)this[Se]=Te[Se];this.id=_e.Object.__uid++},_parseShadow:function(Te){var Se=Te.trim(),xe=_e.Shadow.reOffsetsAndBlur.exec(Se)||[],r=Se.replace(_e.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:r.trim(),offsetX:parseFloat(xe[1],10)||0,offsetY:parseFloat(xe[2],10)||0,blur:parseFloat(xe[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(Te){var Se=40,xe=40,r=_e.Object.NUM_FRACTION_DIGITS,Oe=_e.util.rotateVector({x:this.offsetX,y:this.offsetY},_e.util.degreesToRadians(-Te.angle)),Ee=20,Ae=new _e.Color(this.color);return Te.width&&Te.height&&(Se=Ce((Math.abs(Oe.x)+this.blur)/Te.width,r)*100+Ee,xe=Ce((Math.abs(Oe.y)+this.blur)/Te.height,r)*100+Ee),Te.flipX&&(Oe.x*=-1),Te.flipY&&(Oe.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+xe+'%" height="'+(100+2*xe)+'%" x="-'+Se+'%" width="'+(100+2*Se)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+Ce(this.blur?this.blur/2:0,r)+`"></feGaussianBlur>
	<feOffset dx="`+Ce(Oe.x,r)+'" dy="'+Ce(Oe.y,r)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+Ae.toRgb()+'" flood-opacity="'+Ae.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var Te={},Se=_e.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(xe){this[xe]!==Se[xe]&&(Te[xe]=this[xe])},this),Te}}),_e.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/}(Re),function(){if(e.StaticCanvas){e.warn("fabric.StaticCanvas is already defined.");return}var ke=e.util.object.extend,_e=e.util.getElementOffset,Ce=e.util.removeFromArray,Te=e.util.toFixed,Se=e.util.transformPoint,xe=e.util.invertTransform,r=e.util.getNodeCanvas,Oe=e.util.createCanvasElement,Ee=new Error("Could not initialize `canvas` element");e.StaticCanvas=e.util.createClass(e.CommonMethods,{initialize:function(Ae,Fe){Fe||(Fe={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(Ae,Fe)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:e.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(Ae,Fe){var De=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(Ae),this._initOptions(Fe),this.interactive||this._initRetinaScaling(),Fe.overlayImage&&this.setOverlayImage(Fe.overlayImage,De),Fe.backgroundImage&&this.setBackgroundImage(Fe.backgroundImage,De),Fe.backgroundColor&&this.setBackgroundColor(Fe.backgroundColor,De),Fe.overlayColor&&this.setOverlayColor(Fe.overlayColor,De),this.calcOffset()},_isRetinaScaling:function(){return e.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,e.devicePixelRatio):1},_initRetinaScaling:function(){if(!!this._isRetinaScaling()){var Ae=e.devicePixelRatio;this.__initRetinaScaling(Ae,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(Ae,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(Ae,Fe,De){Fe.setAttribute("width",this.width*Ae),Fe.setAttribute("height",this.height*Ae),De.scale(Ae,Ae)},calcOffset:function(){return this._offset=_e(this.lowerCanvasEl),this},setOverlayImage:function(Ae,Fe,De){return this.__setBgOverlayImage("overlayImage",Ae,Fe,De)},setBackgroundImage:function(Ae,Fe,De){return this.__setBgOverlayImage("backgroundImage",Ae,Fe,De)},setOverlayColor:function(Ae,Fe){return this.__setBgOverlayColor("overlayColor",Ae,Fe)},setBackgroundColor:function(Ae,Fe){return this.__setBgOverlayColor("backgroundColor",Ae,Fe)},__setBgOverlayImage:function(Ae,Fe,De,ze){return typeof Fe=="string"?e.util.loadImage(Fe,function(je,We){if(je){var Ge=new e.Image(je,ze);this[Ae]=Ge,Ge.canvas=this}De&&De(je,We)},this,ze&&ze.crossOrigin):(ze&&Fe.setOptions(ze),this[Ae]=Fe,Fe&&(Fe.canvas=this),De&&De(Fe,!1)),this},__setBgOverlayColor:function(Ae,Fe,De){return this[Ae]=Fe,this._initGradient(Fe,Ae),this._initPattern(Fe,Ae,De),this},_createCanvasElement:function(){var Ae=Oe();if(!Ae||(Ae.style||(Ae.style={}),typeof Ae.getContext=="undefined"))throw Ee;return Ae},_initOptions:function(Ae){var Fe=this.lowerCanvasEl;this._setOptions(Ae),this.width=this.width||parseInt(Fe.width,10)||0,this.height=this.height||parseInt(Fe.height,10)||0,!!this.lowerCanvasEl.style&&(Fe.width=this.width,Fe.height=this.height,Fe.style.width=this.width+"px",Fe.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(Ae){Ae&&Ae.getContext?this.lowerCanvasEl=Ae:this.lowerCanvasEl=e.util.getById(Ae)||this._createCanvasElement(),e.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(Ae,Fe){return this.setDimensions({width:Ae},Fe)},setHeight:function(Ae,Fe){return this.setDimensions({height:Ae},Fe)},setDimensions:function(Ae,Fe){var De;Fe=Fe||{};for(var ze in Ae)De=Ae[ze],Fe.cssOnly||(this._setBackstoreDimension(ze,Ae[ze]),De+="px",this.hasLostContext=!0),Fe.backstoreOnly||this._setCssDimension(ze,De);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),Fe.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(Ae,Fe){return this.lowerCanvasEl[Ae]=Fe,this.upperCanvasEl&&(this.upperCanvasEl[Ae]=Fe),this.cacheCanvasEl&&(this.cacheCanvasEl[Ae]=Fe),this[Ae]=Fe,this},_setCssDimension:function(Ae,Fe){return this.lowerCanvasEl.style[Ae]=Fe,this.upperCanvasEl&&(this.upperCanvasEl.style[Ae]=Fe),this.wrapperEl&&(this.wrapperEl.style[Ae]=Fe),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(Ae){var Fe=this._activeObject,De=this.backgroundImage,ze=this.overlayImage,je,We,Ge;for(this.viewportTransform=Ae,We=0,Ge=this._objects.length;We<Ge;We++)je=this._objects[We],je.group||je.setCoords(!0);return Fe&&Fe.setCoords(),De&&De.setCoords(!0),ze&&ze.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(Ae,Fe){var De=Ae,ze=this.viewportTransform.slice(0);Ae=Se(Ae,xe(this.viewportTransform)),ze[0]=Fe,ze[3]=Fe;var je=Se(Ae,ze);return ze[4]+=De.x-je.x,ze[5]+=De.y-je.y,this.setViewportTransform(ze)},setZoom:function(Ae){return this.zoomToPoint(new e.Point(0,0),Ae),this},absolutePan:function(Ae){var Fe=this.viewportTransform.slice(0);return Fe[4]=-Ae.x,Fe[5]=-Ae.y,this.setViewportTransform(Fe)},relativePan:function(Ae){return this.absolutePan(new e.Point(-Ae.x-this.viewportTransform[4],-Ae.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(Ae){this.stateful&&Ae.setupState(),Ae._set("canvas",this),Ae.setCoords(),this.fire("object:added",{target:Ae}),Ae.fire("added")},_onObjectRemoved:function(Ae){this.fire("object:removed",{target:Ae}),Ae.fire("removed"),delete Ae.canvas},clearContext:function(Ae){return Ae.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var Ae=this.contextContainer;return this.renderCanvas(Ae,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=e.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var Ae={},Fe=this.width,De=this.height,ze=xe(this.viewportTransform);return Ae.tl=Se({x:0,y:0},ze),Ae.br=Se({x:Fe,y:De},ze),Ae.tr=new e.Point(Ae.br.x,Ae.tl.y),Ae.bl=new e.Point(Ae.tl.x,Ae.br.y),this.vptCoords=Ae,Ae},cancelRequestedRender:function(){this.isRendering&&(e.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(Ae,Fe){var De=this.viewportTransform,ze=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(Ae),e.util.setImageSmoothing(Ae,this.imageSmoothingEnabled),this.fire("before:render",{ctx:Ae}),this._renderBackground(Ae),Ae.save(),Ae.transform(De[0],De[1],De[2],De[3],De[4],De[5]),this._renderObjects(Ae,Fe),Ae.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(Ae),ze&&(ze.canvas=this,ze.shouldCache(),ze._transformDone=!0,ze.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(Ae)),this._renderOverlay(Ae),this.controlsAboveOverlay&&this.interactive&&this.drawControls(Ae),this.fire("after:render",{ctx:Ae})},drawClipPathOnCanvas:function(Ae){var Fe=this.viewportTransform,De=this.clipPath;Ae.save(),Ae.transform(Fe[0],Fe[1],Fe[2],Fe[3],Fe[4],Fe[5]),Ae.globalCompositeOperation="destination-in",De.transform(Ae),Ae.scale(1/De.zoomX,1/De.zoomY),Ae.drawImage(De._cacheCanvas,-De.cacheTranslationX,-De.cacheTranslationY),Ae.restore()},_renderObjects:function(Ae,Fe){var De,ze;for(De=0,ze=Fe.length;De<ze;++De)Fe[De]&&Fe[De].render(Ae)},_renderBackgroundOrOverlay:function(Ae,Fe){var De=this[Fe+"Color"],ze=this[Fe+"Image"],je=this.viewportTransform,We=this[Fe+"Vpt"];if(!(!De&&!ze)){if(De){Ae.save(),Ae.beginPath(),Ae.moveTo(0,0),Ae.lineTo(this.width,0),Ae.lineTo(this.width,this.height),Ae.lineTo(0,this.height),Ae.closePath(),Ae.fillStyle=De.toLive?De.toLive(Ae,this):De,We&&Ae.transform(je[0],je[1],je[2],je[3],je[4],je[5]),Ae.transform(1,0,0,1,De.offsetX||0,De.offsetY||0);var Ge=De.gradientTransform||De.patternTransform;Ge&&Ae.transform(Ge[0],Ge[1],Ge[2],Ge[3],Ge[4],Ge[5]),Ae.fill(),Ae.restore()}ze&&(Ae.save(),We&&Ae.transform(je[0],je[1],je[2],je[3],je[4],je[5]),ze.render(Ae),Ae.restore())}},_renderBackground:function(Ae){this._renderBackgroundOrOverlay(Ae,"background")},_renderOverlay:function(Ae){this._renderBackgroundOrOverlay(Ae,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new e.Point(this.width/2,this.height/2)},centerObjectH:function(Ae){return this._centerObject(Ae,new e.Point(this.getCenterPoint().x,Ae.getCenterPoint().y))},centerObjectV:function(Ae){return this._centerObject(Ae,new e.Point(Ae.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(Ae){var Fe=this.getCenterPoint();return this._centerObject(Ae,Fe)},viewportCenterObject:function(Ae){var Fe=this.getVpCenter();return this._centerObject(Ae,Fe)},viewportCenterObjectH:function(Ae){var Fe=this.getVpCenter();return this._centerObject(Ae,new e.Point(Fe.x,Ae.getCenterPoint().y)),this},viewportCenterObjectV:function(Ae){var Fe=this.getVpCenter();return this._centerObject(Ae,new e.Point(Ae.getCenterPoint().x,Fe.y))},getVpCenter:function(){var Ae=this.getCenterPoint(),Fe=xe(this.viewportTransform);return Se(Ae,Fe)},_centerObject:function(Ae,Fe){return Ae.setPositionByOrigin(Fe,"center","center"),Ae.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(Ae){return this.toDatalessObject(Ae)},toObject:function(Ae){return this._toObjectMethod("toObject",Ae)},toDatalessObject:function(Ae){return this._toObjectMethod("toDatalessObject",Ae)},_toObjectMethod:function(Ae,Fe){var De=this.clipPath,ze={version:e.version,objects:this._toObjects(Ae,Fe)};return De&&!De.excludeFromExport&&(ze.clipPath=this._toObject(this.clipPath,Ae,Fe)),ke(ze,this.__serializeBgOverlay(Ae,Fe)),e.util.populateWithProperties(this,ze,Fe),ze},_toObjects:function(Ae,Fe){return this._objects.filter(function(De){return!De.excludeFromExport}).map(function(De){return this._toObject(De,Ae,Fe)},this)},_toObject:function(Ae,Fe,De){var ze;this.includeDefaultValues||(ze=Ae.includeDefaultValues,Ae.includeDefaultValues=!1);var je=Ae[Fe](De);return this.includeDefaultValues||(Ae.includeDefaultValues=ze),je},__serializeBgOverlay:function(Ae,Fe){var De={},ze=this.backgroundImage,je=this.overlayImage,We=this.backgroundColor,Ge=this.overlayColor;return We&&We.toObject?We.excludeFromExport||(De.background=We.toObject(Fe)):We&&(De.background=We),Ge&&Ge.toObject?Ge.excludeFromExport||(De.overlay=Ge.toObject(Fe)):Ge&&(De.overlay=Ge),ze&&!ze.excludeFromExport&&(De.backgroundImage=this._toObject(ze,Ae,Fe)),je&&!je.excludeFromExport&&(De.overlayImage=this._toObject(je,Ae,Fe)),De},svgViewportTransformation:!0,toSVG:function(Ae,Fe){Ae||(Ae={}),Ae.reviver=Fe;var De=[];return this._setSVGPreamble(De,Ae),this._setSVGHeader(De,Ae),this.clipPath&&De.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(De,"background"),this._setSVGBgOverlayImage(De,"backgroundImage",Fe),this._setSVGObjects(De,Fe),this.clipPath&&De.push(`</g>
`),this._setSVGBgOverlayColor(De,"overlay"),this._setSVGBgOverlayImage(De,"overlayImage",Fe),De.push("</svg>"),De.join("")},_setSVGPreamble:function(Ae,Fe){Fe.suppressPreamble||Ae.push('<?xml version="1.0" encoding="',Fe.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(Ae,Fe){var De=Fe.width||this.width,ze=Fe.height||this.height,je,We='viewBox="0 0 '+this.width+" "+this.height+'" ',Ge=e.Object.NUM_FRACTION_DIGITS;Fe.viewBox?We='viewBox="'+Fe.viewBox.x+" "+Fe.viewBox.y+" "+Fe.viewBox.width+" "+Fe.viewBox.height+'" ':this.svgViewportTransformation&&(je=this.viewportTransform,We='viewBox="'+Te(-je[4]/je[0],Ge)+" "+Te(-je[5]/je[3],Ge)+" "+Te(this.width/je[0],Ge)+" "+Te(this.height/je[3],Ge)+'" '),Ae.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',De,'" ','height="',ze,'" ',We,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",e.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(Fe),`</defs>
`)},createSVGClipPathMarkup:function(Ae){var Fe=this.clipPath;return Fe?(Fe.clipPathId="CLIPPATH_"+e.Object.__uid++,'<clipPath id="'+Fe.clipPathId+`" >
`+this.clipPath.toClipPathSVG(Ae.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var Ae=this,Fe=["background","overlay"].map(function(De){var ze=Ae[De+"Color"];if(ze&&ze.toLive){var je=Ae[De+"Vpt"],We=Ae.viewportTransform,Ge={width:Ae.width/(je?We[0]:1),height:Ae.height/(je?We[3]:1)};return ze.toSVG(Ge,{additionalTransform:je?e.util.matrixToSVG(We):""})}});return Fe.join("")},createSVGFontFacesMarkup:function(){var Ae="",Fe={},De,ze,je,We,Ge,Ye,Xe,Ke,er,Qe=e.fontPaths,nr=[];for(this._objects.forEach(function cr(br){nr.push(br),br._objects&&br._objects.forEach(cr)}),Ke=0,er=nr.length;Ke<er;Ke++)if(De=nr[Ke],ze=De.fontFamily,!(De.type.indexOf("text")===-1||Fe[ze]||!Qe[ze])&&(Fe[ze]=!0,!!De.styles)){je=De.styles;for(Ge in je){We=je[Ge];for(Xe in We)Ye=We[Xe],ze=Ye.fontFamily,!Fe[ze]&&Qe[ze]&&(Fe[ze]=!0)}}for(var ir in Fe)Ae+=[`		@font-face {
`,"			font-family: '",ir,`';
`,"			src: url('",Qe[ir],`');
`,`		}
`].join("");return Ae&&(Ae=['	<style type="text/css">',`<![CDATA[
`,Ae,"]]>",`</style>
`].join("")),Ae},_setSVGObjects:function(Ae,Fe){var De,ze,je,We=this._objects;for(ze=0,je=We.length;ze<je;ze++)De=We[ze],!De.excludeFromExport&&this._setSVGObject(Ae,De,Fe)},_setSVGObject:function(Ae,Fe,De){Ae.push(Fe.toSVG(De))},_setSVGBgOverlayImage:function(Ae,Fe,De){this[Fe]&&!this[Fe].excludeFromExport&&this[Fe].toSVG&&Ae.push(this[Fe].toSVG(De))},_setSVGBgOverlayColor:function(Ae,Fe){var De=this[Fe+"Color"],ze=this.viewportTransform,je=this.width,We=this.height;if(!!De)if(De.toLive){var Ge=De.repeat,Ye=e.util.invertTransform(ze),Xe=this[Fe+"Vpt"],Ke=Xe?e.util.matrixToSVG(Ye):"";Ae.push('<rect transform="'+Ke+" translate(",je/2,",",We/2,')"',' x="',De.offsetX-je/2,'" y="',De.offsetY-We/2,'" ','width="',Ge==="repeat-y"||Ge==="no-repeat"?De.source.width:je,'" height="',Ge==="repeat-x"||Ge==="no-repeat"?De.source.height:We,'" fill="url(#SVGID_'+De.id+')"',`></rect>
`)}else Ae.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',De,'"',`></rect>
`)},sendToBack:function(Ae){if(!Ae)return this;var Fe=this._activeObject,De,ze,je;if(Ae===Fe&&Ae.type==="activeSelection")for(je=Fe._objects,De=je.length;De--;)ze=je[De],Ce(this._objects,ze),this._objects.unshift(ze);else Ce(this._objects,Ae),this._objects.unshift(Ae);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(Ae){if(!Ae)return this;var Fe=this._activeObject,De,ze,je;if(Ae===Fe&&Ae.type==="activeSelection")for(je=Fe._objects,De=0;De<je.length;De++)ze=je[De],Ce(this._objects,ze),this._objects.push(ze);else Ce(this._objects,Ae),this._objects.push(Ae);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(Ae,Fe){if(!Ae)return this;var De=this._activeObject,ze,je,We,Ge,Ye,Xe=0;if(Ae===De&&Ae.type==="activeSelection")for(Ye=De._objects,ze=0;ze<Ye.length;ze++)je=Ye[ze],We=this._objects.indexOf(je),We>0+Xe&&(Ge=We-1,Ce(this._objects,je),this._objects.splice(Ge,0,je)),Xe++;else We=this._objects.indexOf(Ae),We!==0&&(Ge=this._findNewLowerIndex(Ae,We,Fe),Ce(this._objects,Ae),this._objects.splice(Ge,0,Ae));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(Ae,Fe,De){var ze,je;if(De)for(ze=Fe,je=Fe-1;je>=0;--je){var We=Ae.intersectsWithObject(this._objects[je])||Ae.isContainedWithinObject(this._objects[je])||this._objects[je].isContainedWithinObject(Ae);if(We){ze=je;break}}else ze=Fe-1;return ze},bringForward:function(Ae,Fe){if(!Ae)return this;var De=this._activeObject,ze,je,We,Ge,Ye,Xe=0;if(Ae===De&&Ae.type==="activeSelection")for(Ye=De._objects,ze=Ye.length;ze--;)je=Ye[ze],We=this._objects.indexOf(je),We<this._objects.length-1-Xe&&(Ge=We+1,Ce(this._objects,je),this._objects.splice(Ge,0,je)),Xe++;else We=this._objects.indexOf(Ae),We!==this._objects.length-1&&(Ge=this._findNewUpperIndex(Ae,We,Fe),Ce(this._objects,Ae),this._objects.splice(Ge,0,Ae));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(Ae,Fe,De){var ze,je,We;if(De)for(ze=Fe,je=Fe+1,We=this._objects.length;je<We;++je){var Ge=Ae.intersectsWithObject(this._objects[je])||Ae.isContainedWithinObject(this._objects[je])||this._objects[je].isContainedWithinObject(Ae);if(Ge){ze=je;break}}else ze=Fe+1;return ze},moveTo:function(Ae,Fe){return Ce(this._objects,Ae),this._objects.splice(Fe,0,Ae),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(e.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(Ae){Ae.dispose&&Ae.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),e.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),e.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),ke(e.StaticCanvas.prototype,e.Observable),ke(e.StaticCanvas.prototype,e.Collection),ke(e.StaticCanvas.prototype,e.DataURLExporter),ke(e.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(Ae){var Fe=Oe();if(!Fe||!Fe.getContext)return null;var De=Fe.getContext("2d");if(!De)return null;switch(Ae){case"setLineDash":return typeof De.setLineDash!="undefined";default:return null}}}),e.StaticCanvas.prototype.toJSON=e.StaticCanvas.prototype.toObject,e.isLikelyNode&&(e.StaticCanvas.prototype.createPNGStream=function(){var Ae=r(this.lowerCanvasEl);return Ae&&Ae.createPNGStream()},e.StaticCanvas.prototype.createJPEGStream=function(Ae){var Fe=r(this.lowerCanvasEl);return Fe&&Fe.createJPEGStream(Ae)})}(),e.BaseBrush=e.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(ke){ke.strokeStyle=this.color,ke.lineWidth=this.width,ke.lineCap=this.strokeLineCap,ke.miterLimit=this.strokeMiterLimit,ke.lineJoin=this.strokeLineJoin,ke.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(ke){var _e=this.canvas.viewportTransform;ke.save(),ke.transform(_e[0],_e[1],_e[2],_e[3],_e[4],_e[5])},_setShadow:function(){if(!!this.shadow){var ke=this.canvas,_e=this.shadow,Ce=ke.contextTop,Te=ke.getZoom();ke&&ke._isRetinaScaling()&&(Te*=e.devicePixelRatio),Ce.shadowColor=_e.color,Ce.shadowBlur=_e.blur*Te,Ce.shadowOffsetX=_e.offsetX*Te,Ce.shadowOffsetY=_e.offsetY*Te}},needsFullRender:function(){var ke=new e.Color(this.color);return ke.getAlpha()<1||!!this.shadow},_resetShadow:function(){var ke=this.canvas.contextTop;ke.shadowColor="",ke.shadowBlur=ke.shadowOffsetX=ke.shadowOffsetY=0},_isOutSideCanvas:function(ke){return ke.x<0||ke.x>this.canvas.getWidth()||ke.y<0||ke.y>this.canvas.getHeight()}}),function(){e.PencilBrush=e.util.createClass(e.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(ke){this.canvas=ke,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(ke,_e,Ce){var Te=_e.midPointFrom(Ce);return ke.quadraticCurveTo(_e.x,_e.y,Te.x,Te.y),Te},onMouseDown:function(ke,_e){!this.canvas._isMainEvent(_e.e)||(this.drawStraightLine=_e.e[this.straightLineKey],this._prepareForDrawing(ke),this._captureDrawingPath(ke),this._render())},onMouseMove:function(ke,_e){if(!!this.canvas._isMainEvent(_e.e)&&(this.drawStraightLine=_e.e[this.straightLineKey],!(this.limitedToCanvasSize===!0&&this._isOutSideCanvas(ke))&&this._captureDrawingPath(ke)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var Ce=this._points,Te=Ce.length,Se=this.canvas.contextTop;this._saveAndTransform(Se),this.oldEnd&&(Se.beginPath(),Se.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(Se,Ce[Te-2],Ce[Te-1],!0),Se.stroke(),Se.restore()}},onMouseUp:function(ke){return this.canvas._isMainEvent(ke.e)?(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1):!0},_prepareForDrawing:function(ke){var _e=new e.Point(ke.x,ke.y);this._reset(),this._addPoint(_e),this.canvas.contextTop.moveTo(_e.x,_e.y)},_addPoint:function(ke){return this._points.length>1&&ke.eq(this._points[this._points.length-1])?!1:(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(ke),!0)},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(ke){var _e=new e.Point(ke.x,ke.y);return this._addPoint(_e)},_render:function(ke){var _e,Ce,Te=this._points[0],Se=this._points[1];if(ke=ke||this.canvas.contextTop,this._saveAndTransform(ke),ke.beginPath(),this._points.length===2&&Te.x===Se.x&&Te.y===Se.y){var xe=this.width/1e3;Te=new e.Point(Te.x,Te.y),Se=new e.Point(Se.x,Se.y),Te.x-=xe,Se.x+=xe}for(ke.moveTo(Te.x,Te.y),_e=1,Ce=this._points.length;_e<Ce;_e++)this._drawSegment(ke,Te,Se),Te=this._points[_e],Se=this._points[_e+1];ke.lineTo(Te.x,Te.y),ke.stroke(),ke.restore()},convertPointsToSVGPath:function(ke){var _e=this.width/1e3;return e.util.getSmoothPathFromPoints(ke,_e)},_isEmptySVGPath:function(ke){var _e=e.util.joinPath(ke);return _e==="M 0 0 Q 0 0 0 0 L 0 0"},createPath:function(ke){var _e=new e.Path(ke,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,_e.shadow=new e.Shadow(this.shadow)),_e},decimatePoints:function(ke,_e){if(ke.length<=2)return ke;var Ce=this.canvas.getZoom(),Te=Math.pow(_e/Ce,2),Se,xe=ke.length-1,r=ke[0],Oe=[r],Ee;for(Se=1;Se<xe-1;Se++)Ee=Math.pow(r.x-ke[Se].x,2)+Math.pow(r.y-ke[Se].y,2),Ee>=Te&&(r=ke[Se],Oe.push(r));return Oe.push(ke[xe]),Oe},_finalizeAndAddPath:function(){var ke=this.canvas.contextTop;ke.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var _e=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(_e)){this.canvas.requestRenderAll();return}var Ce=this.createPath(_e);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:Ce}),this.canvas.add(Ce),this.canvas.requestRenderAll(),Ce.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:Ce})}})}(),e.CircleBrush=e.util.createClass(e.BaseBrush,{width:10,initialize:function(ke){this.canvas=ke,this.points=[]},drawDot:function(ke){var _e=this.addPoint(ke),Ce=this.canvas.contextTop;this._saveAndTransform(Ce),this.dot(Ce,_e),Ce.restore()},dot:function(ke,_e){ke.fillStyle=_e.fill,ke.beginPath(),ke.arc(_e.x,_e.y,_e.radius,0,Math.PI*2,!1),ke.closePath(),ke.fill()},onMouseDown:function(ke){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(ke)},_render:function(){var ke=this.canvas.contextTop,_e,Ce,Te=this.points;for(this._saveAndTransform(ke),_e=0,Ce=Te.length;_e<Ce;_e++)this.dot(ke,Te[_e]);ke.restore()},onMouseMove:function(ke){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(ke)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(ke),this._render()):this.drawDot(ke))},onMouseUp:function(){var ke=this.canvas.renderOnAddRemove,_e,Ce;this.canvas.renderOnAddRemove=!1;var Te=[];for(_e=0,Ce=this.points.length;_e<Ce;_e++){var Se=this.points[_e],xe=new e.Circle({radius:Se.radius,left:Se.x,top:Se.y,originX:"center",originY:"center",fill:Se.fill});this.shadow&&(xe.shadow=new e.Shadow(this.shadow)),Te.push(xe)}var r=new e.Group(Te);r.canvas=this.canvas,this.canvas.fire("before:path:created",{path:r}),this.canvas.add(r),this.canvas.fire("path:created",{path:r}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=ke,this.canvas.requestRenderAll()},addPoint:function(ke){var _e=new e.Point(ke.x,ke.y),Ce=e.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,Te=new e.Color(this.color).setAlpha(e.util.getRandomInt(0,100)/100).toRgba();return _e.radius=Ce,_e.fill=Te,this.points.push(_e),_e}}),e.SprayBrush=e.util.createClass(e.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(ke){this.canvas=ke,this.sprayChunks=[]},onMouseDown:function(ke){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(ke),this.render(this.sprayChunkPoints)},onMouseMove:function(ke){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(ke)||(this.addSprayChunk(ke),this.render(this.sprayChunkPoints))},onMouseUp:function(){var ke=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var _e=[],Ce=0,Te=this.sprayChunks.length;Ce<Te;Ce++)for(var Se=this.sprayChunks[Ce],xe=0,r=Se.length;xe<r;xe++){var Oe=new e.Rect({width:Se[xe].width,height:Se[xe].width,left:Se[xe].x+1,top:Se[xe].y+1,originX:"center",originY:"center",fill:this.color});_e.push(Oe)}this.optimizeOverlapping&&(_e=this._getOptimizedRects(_e));var Ee=new e.Group(_e);this.shadow&&Ee.set("shadow",new e.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:Ee}),this.canvas.add(Ee),this.canvas.fire("path:created",{path:Ee}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=ke,this.canvas.requestRenderAll()},_getOptimizedRects:function(ke){var _e={},Ce,Te,Se;for(Te=0,Se=ke.length;Te<Se;Te++)Ce=ke[Te].left+""+ke[Te].top,_e[Ce]||(_e[Ce]=ke[Te]);var xe=[];for(Ce in _e)xe.push(_e[Ce]);return xe},render:function(ke){var _e=this.canvas.contextTop,Ce,Te;for(_e.fillStyle=this.color,this._saveAndTransform(_e),Ce=0,Te=ke.length;Ce<Te;Ce++){var Se=ke[Ce];typeof Se.opacity!="undefined"&&(_e.globalAlpha=Se.opacity),_e.fillRect(Se.x,Se.y,Se.width,Se.width)}_e.restore()},_render:function(){var ke=this.canvas.contextTop,_e,Ce;for(ke.fillStyle=this.color,this._saveAndTransform(ke),_e=0,Ce=this.sprayChunks.length;_e<Ce;_e++)this.render(this.sprayChunks[_e]);ke.restore()},addSprayChunk:function(ke){this.sprayChunkPoints=[];var _e,Ce,Te,Se=this.width/2,xe;for(xe=0;xe<this.density;xe++){_e=e.util.getRandomInt(ke.x-Se,ke.x+Se),Ce=e.util.getRandomInt(ke.y-Se,ke.y+Se),this.dotWidthVariance?Te=e.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):Te=this.dotWidth;var r=new e.Point(_e,Ce);r.width=Te,this.randomOpacity&&(r.opacity=e.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(r)}this.sprayChunks.push(this.sprayChunkPoints)}}),e.PatternBrush=e.util.createClass(e.PencilBrush,{getPatternSrc:function(){var ke=20,_e=5,Ce=e.util.createCanvasElement(),Te=Ce.getContext("2d");return Ce.width=Ce.height=ke+_e,Te.fillStyle=this.color,Te.beginPath(),Te.arc(ke/2,ke/2,ke/2,0,Math.PI*2,!1),Te.closePath(),Te.fill(),Ce},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(ke){return ke.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(ke){this.callSuper("_setBrushStyles",ke),ke.strokeStyle=this.getPattern(ke)},createPath:function(ke){var _e=this.callSuper("createPath",ke),Ce=_e._getLeftTopCoords().scalarAdd(_e.strokeWidth/2);return _e.stroke=new e.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-Ce.x,offsetY:-Ce.y}),_e}}),function(){var ke=e.util.getPointer,_e=e.util.degreesToRadians,Ce=e.util.isTouchEvent;e.Canvas=e.util.createClass(e.StaticCanvas,{initialize:function(Se,xe){xe||(xe={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(Se,xe),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=e.PencilBrush&&new e.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var Se=this.getActiveObjects(),xe,r,Oe;if(Se.length>0&&!this.preserveObjectStacking){r=[],Oe=[];for(var Ee=0,Ae=this._objects.length;Ee<Ae;Ee++)xe=this._objects[Ee],Se.indexOf(xe)===-1?r.push(xe):Oe.push(xe);Se.length>1&&(this._activeObject._objects=Oe),r.push.apply(r,Oe)}else r=this._objects;return r},renderAll:function(){this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1);var Se=this.contextContainer;return this.renderCanvas(Se,this._chooseObjectsToRender()),this},renderTopLayer:function(Se){Se.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(Se),this.contextTopDirty=!0),Se.restore()},renderTop:function(){var Se=this.contextTop;return this.clearContext(Se),this.renderTopLayer(Se),this.fire("after:render"),this},_normalizePointer:function(Se,xe){var r=Se.calcTransformMatrix(),Oe=e.util.invertTransform(r),Ee=this.restorePointerVpt(xe);return e.util.transformPoint(Ee,Oe)},isTargetTransparent:function(Se,xe,r){if(Se.shouldCache()&&Se._cacheCanvas&&Se!==this._activeObject){var Oe=this._normalizePointer(Se,{x:xe,y:r}),Ee=Math.max(Se.cacheTranslationX+Oe.x*Se.zoomX,0),Ae=Math.max(Se.cacheTranslationY+Oe.y*Se.zoomY,0),je=e.util.isTransparent(Se._cacheContext,Math.round(Ee),Math.round(Ae),this.targetFindTolerance);return je}var Fe=this.contextCache,De=Se.selectionBackgroundColor,ze=this.viewportTransform;Se.selectionBackgroundColor="",this.clearContext(Fe),Fe.save(),Fe.transform(ze[0],ze[1],ze[2],ze[3],ze[4],ze[5]),Se.render(Fe),Fe.restore(),Se.selectionBackgroundColor=De;var je=e.util.isTransparent(Fe,xe,r,this.targetFindTolerance);return je},_isSelectionKeyPressed:function(Se){var xe=!1;return Array.isArray(this.selectionKey)?xe=!!this.selectionKey.find(function(r){return Se[r]===!0}):xe=Se[this.selectionKey],xe},_shouldClearSelection:function(Se,xe){var r=this.getActiveObjects(),Oe=this._activeObject;return!xe||xe&&Oe&&r.length>1&&r.indexOf(xe)===-1&&Oe!==xe&&!this._isSelectionKeyPressed(Se)||xe&&!xe.evented||xe&&!xe.selectable&&Oe&&Oe!==xe},_shouldCenterTransform:function(Se,xe,r){if(!!Se){var Oe;return xe==="scale"||xe==="scaleX"||xe==="scaleY"||xe==="resizing"?Oe=this.centeredScaling||Se.centeredScaling:xe==="rotate"&&(Oe=this.centeredRotation||Se.centeredRotation),Oe?!r:r}},_getOriginFromCorner:function(Se,xe){var r={x:Se.originX,y:Se.originY};return xe==="ml"||xe==="tl"||xe==="bl"?r.x="right":(xe==="mr"||xe==="tr"||xe==="br")&&(r.x="left"),xe==="tl"||xe==="mt"||xe==="tr"?r.y="bottom":(xe==="bl"||xe==="mb"||xe==="br")&&(r.y="top"),r},_getActionFromCorner:function(Se,xe,r,Oe){if(!xe||!Se)return"drag";var Ee=Oe.controls[xe];return Ee.getActionName(r,Ee,Oe)},_setupCurrentTransform:function(Se,xe,r){if(!!xe){var Oe=this.getPointer(Se),Ee=xe.__corner,Ae=xe.controls[Ee],Fe=r&&Ee?Ae.getActionHandler(Se,xe,Ae):e.controlsUtils.dragHandler,De=this._getActionFromCorner(r,Ee,Se,xe),ze=this._getOriginFromCorner(xe,Ee),je=Se[this.centeredKey],We={target:xe,action:De,actionHandler:Fe,corner:Ee,scaleX:xe.scaleX,scaleY:xe.scaleY,skewX:xe.skewX,skewY:xe.skewY,offsetX:Oe.x-xe.left,offsetY:Oe.y-xe.top,originX:ze.x,originY:ze.y,ex:Oe.x,ey:Oe.y,lastX:Oe.x,lastY:Oe.y,theta:_e(xe.angle),width:xe.width*xe.scaleX,shiftKey:Se.shiftKey,altKey:je,original:e.util.saveObjectTransform(xe)};this._shouldCenterTransform(xe,De,je)&&(We.originX="center",We.originY="center"),We.original.originX=ze.x,We.original.originY=ze.y,this._currentTransform=We,this._beforeTransform(Se)}},setCursor:function(Se){this.upperCanvasEl.style.cursor=Se},_drawSelection:function(Se){var xe=this._groupSelector,r=new e.Point(xe.ex,xe.ey),Oe=e.util.transformPoint(r,this.viewportTransform),Ee=new e.Point(xe.ex+xe.left,xe.ey+xe.top),Ae=e.util.transformPoint(Ee,this.viewportTransform),Fe=Math.min(Oe.x,Ae.x),De=Math.min(Oe.y,Ae.y),ze=Math.max(Oe.x,Ae.x),je=Math.max(Oe.y,Ae.y),We=this.selectionLineWidth/2;this.selectionColor&&(Se.fillStyle=this.selectionColor,Se.fillRect(Fe,De,ze-Fe,je-De)),!(!this.selectionLineWidth||!this.selectionBorderColor)&&(Se.lineWidth=this.selectionLineWidth,Se.strokeStyle=this.selectionBorderColor,Fe+=We,De+=We,ze-=We,je-=We,e.Object.prototype._setLineDash.call(this,Se,this.selectionDashArray),Se.strokeRect(Fe,De,ze-Fe,je-De))},findTarget:function(Se,xe){if(!this.skipTargetFind){var r=!0,Oe=this.getPointer(Se,r),Ee=this._activeObject,Ae=this.getActiveObjects(),Fe,De,ze=Ce(Se),je=Ae.length>1&&!xe||Ae.length===1;if(this.targets=[],je&&Ee._findTargetCorner(Oe,ze)||Ae.length>1&&!xe&&Ee===this._searchPossibleTargets([Ee],Oe))return Ee;if(Ae.length===1&&Ee===this._searchPossibleTargets([Ee],Oe))if(this.preserveObjectStacking)Fe=Ee,De=this.targets,this.targets=[];else return Ee;var We=this._searchPossibleTargets(this._objects,Oe);return Se[this.altSelectionKey]&&We&&Fe&&We!==Fe&&(We=Fe,this.targets=De),We}},_checkTarget:function(Se,xe,r){if(xe&&xe.visible&&xe.evented&&xe.containsPoint(Se))if((this.perPixelTargetFind||xe.perPixelTargetFind)&&!xe.isEditing){var Oe=this.isTargetTransparent(xe,r.x,r.y);if(!Oe)return!0}else return!0},_searchPossibleTargets:function(Se,xe){for(var r,Oe=Se.length,Ee;Oe--;){var Ae=Se[Oe],Fe=Ae.group?this._normalizePointer(Ae.group,xe):xe;if(this._checkTarget(Fe,Ae,xe)){r=Se[Oe],r.subTargetCheck&&r instanceof e.Group&&(Ee=this._searchPossibleTargets(r._objects,xe),Ee&&this.targets.push(Ee));break}}return r},restorePointerVpt:function(Se){return e.util.transformPoint(Se,e.util.invertTransform(this.viewportTransform))},getPointer:function(Se,xe){if(this._absolutePointer&&!xe)return this._absolutePointer;if(this._pointer&&xe)return this._pointer;var r=ke(Se),Oe=this.upperCanvasEl,Ee=Oe.getBoundingClientRect(),Ae=Ee.width||0,Fe=Ee.height||0,De;(!Ae||!Fe)&&("top"in Ee&&"bottom"in Ee&&(Fe=Math.abs(Ee.top-Ee.bottom)),"right"in Ee&&"left"in Ee&&(Ae=Math.abs(Ee.right-Ee.left))),this.calcOffset(),r.x=r.x-this._offset.left,r.y=r.y-this._offset.top,xe||(r=this.restorePointerVpt(r));var ze=this.getRetinaScaling();return ze!==1&&(r.x/=ze,r.y/=ze),Ae===0||Fe===0?De={width:1,height:1}:De={width:Oe.width/Ae,height:Oe.height/Fe},{x:r.x*De.width,y:r.y*De.height}},_createUpperCanvas:function(){var Se=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),xe=this.lowerCanvasEl,r=this.upperCanvasEl;r?r.className="":(r=this._createCanvasElement(),this.upperCanvasEl=r),e.util.addClass(r,"upper-canvas "+Se),this.wrapperEl.appendChild(r),this._copyCanvasStyle(xe,r),this._applyCanvasStyle(r),this.contextTop=r.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=e.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),e.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),e.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(Se){var xe=this.width||Se.width,r=this.height||Se.height;e.util.setStyle(Se,{position:"absolute",width:xe+"px",height:r+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),Se.width=xe,Se.height=r,e.util.makeElementUnselectable(Se)},_copyCanvasStyle:function(Se,xe){xe.style.cssText=Se.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var Se=this._activeObject;return Se?Se.type==="activeSelection"&&Se._objects?Se._objects.slice(0):[Se]:[]},_onObjectRemoved:function(Se){Se===this._activeObject&&(this.fire("before:selection:cleared",{target:Se}),this._discardActiveObject(),this.fire("selection:cleared",{target:Se}),Se.fire("deselected")),Se===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",Se)},_fireSelectionEvents:function(Se,xe){var r=!1,Oe=this.getActiveObjects(),Ee=[],Ae=[];Se.forEach(function(Fe){Oe.indexOf(Fe)===-1&&(r=!0,Fe.fire("deselected",{e:xe,target:Fe}),Ae.push(Fe))}),Oe.forEach(function(Fe){Se.indexOf(Fe)===-1&&(r=!0,Fe.fire("selected",{e:xe,target:Fe}),Ee.push(Fe))}),Se.length>0&&Oe.length>0?r&&this.fire("selection:updated",{e:xe,selected:Ee,deselected:Ae}):Oe.length>0?this.fire("selection:created",{e:xe,selected:Ee}):Se.length>0&&this.fire("selection:cleared",{e:xe,deselected:Ae})},setActiveObject:function(Se,xe){var r=this.getActiveObjects();return this._setActiveObject(Se,xe),this._fireSelectionEvents(r,xe),this},_setActiveObject:function(Se,xe){return this._activeObject===Se||!this._discardActiveObject(xe,Se)||Se.onSelect({e:xe})?!1:(this._activeObject=Se,!0)},_discardActiveObject:function(Se,xe){var r=this._activeObject;if(r){if(r.onDeselect({e:Se,object:xe}))return!1;this._activeObject=null}return!0},discardActiveObject:function(Se){var xe=this.getActiveObjects(),r=this.getActiveObject();return xe.length&&this.fire("before:selection:cleared",{target:r,e:Se}),this._discardActiveObject(Se),this._fireSelectionEvents(xe,Se),this},dispose:function(){var Se=this.wrapperEl;return this.removeListeners(),Se.removeChild(this.upperCanvasEl),Se.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach(function(xe){e.util.cleanUpJsdomNode(this[xe]),this[xe]=void 0}.bind(this)),Se.parentNode&&Se.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,e.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(Se){var xe=this._activeObject;xe&&xe._renderControls(Se)},_toObject:function(Se,xe,r){var Oe=this._realizeGroupTransformOnObject(Se),Ee=this.callSuper("_toObject",Se,xe,r);return this._unwindGroupTransformOnObject(Se,Oe),Ee},_realizeGroupTransformOnObject:function(Se){if(Se.group&&Se.group.type==="activeSelection"&&this._activeObject===Se.group){var xe=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],r={};return xe.forEach(function(Oe){r[Oe]=Se[Oe]}),e.util.addTransformToObject(Se,this._activeObject.calcOwnMatrix()),r}else return null},_unwindGroupTransformOnObject:function(Se,xe){xe&&Se.set(xe)},_setSVGObject:function(Se,xe,r){var Oe=this._realizeGroupTransformOnObject(xe);this.callSuper("_setSVGObject",Se,xe,r),this._unwindGroupTransformOnObject(xe,Oe)},setViewportTransform:function(Se){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),e.StaticCanvas.prototype.setViewportTransform.call(this,Se)}});for(var Te in e.StaticCanvas)Te!=="prototype"&&(e.Canvas[Te]=e.StaticCanvas[Te])}(),function(){var ke=e.util.addListener,_e=e.util.removeListener,Ce=3,Te=2,Se=1,xe={passive:!1};function r(Oe,Ee){return Oe.button&&Oe.button===Ee-1}e.util.object.extend(e.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(ke,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(Oe,Ee){var Ae=this.upperCanvasEl,Fe=this._getEventPrefix();Oe(e.window,"resize",this._onResize),Oe(Ae,Fe+"down",this._onMouseDown),Oe(Ae,Fe+"move",this._onMouseMove,xe),Oe(Ae,Fe+"out",this._onMouseOut),Oe(Ae,Fe+"enter",this._onMouseEnter),Oe(Ae,"wheel",this._onMouseWheel),Oe(Ae,"contextmenu",this._onContextMenu),Oe(Ae,"dblclick",this._onDoubleClick),Oe(Ae,"dragover",this._onDragOver),Oe(Ae,"dragenter",this._onDragEnter),Oe(Ae,"dragleave",this._onDragLeave),Oe(Ae,"drop",this._onDrop),this.enablePointerEvents||Oe(Ae,"touchstart",this._onTouchStart,xe),typeof eventjs!="undefined"&&Ee in eventjs&&(eventjs[Ee](Ae,"gesture",this._onGesture),eventjs[Ee](Ae,"drag",this._onDrag),eventjs[Ee](Ae,"orientation",this._onOrientationChange),eventjs[Ee](Ae,"shake",this._onShake),eventjs[Ee](Ae,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(_e,"remove");var Oe=this._getEventPrefix();_e(e.document,Oe+"up",this._onMouseUp),_e(e.document,"touchend",this._onTouchEnd,xe),_e(e.document,Oe+"move",this._onMouseMove,xe),_e(e.document,"touchmove",this._onMouseMove,xe)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(Oe,Ee){this.__onTransformGesture&&this.__onTransformGesture(Oe,Ee)},_onDrag:function(Oe,Ee){this.__onDrag&&this.__onDrag(Oe,Ee)},_onMouseWheel:function(Oe){this.__onMouseWheel(Oe)},_onMouseOut:function(Oe){var Ee=this._hoveredTarget;this.fire("mouse:out",{target:Ee,e:Oe}),this._hoveredTarget=null,Ee&&Ee.fire("mouseout",{e:Oe});var Ae=this;this._hoveredTargets.forEach(function(Fe){Ae.fire("mouse:out",{target:Ee,e:Oe}),Fe&&Ee.fire("mouseout",{e:Oe})}),this._hoveredTargets=[],this._iTextInstances&&this._iTextInstances.forEach(function(Fe){Fe.isEditing&&Fe.hiddenTextarea.focus()})},_onMouseEnter:function(Oe){!this._currentTransform&&!this.findTarget(Oe)&&(this.fire("mouse:over",{target:null,e:Oe}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(Oe,Ee){this.__onOrientationChange&&this.__onOrientationChange(Oe,Ee)},_onShake:function(Oe,Ee){this.__onShake&&this.__onShake(Oe,Ee)},_onLongPress:function(Oe,Ee){this.__onLongPress&&this.__onLongPress(Oe,Ee)},_onDragOver:function(Oe){Oe.preventDefault();var Ee=this._simpleEventHandler("dragover",Oe);this._fireEnterLeaveEvents(Ee,Oe)},_onDrop:function(Oe){return this._simpleEventHandler("drop:before",Oe),this._simpleEventHandler("drop",Oe)},_onContextMenu:function(Oe){return this.stopContextMenu&&(Oe.stopPropagation(),Oe.preventDefault()),!1},_onDoubleClick:function(Oe){this._cacheTransformEventData(Oe),this._handleEvent(Oe,"dblclick"),this._resetTransformEventData(Oe)},getPointerId:function(Oe){var Ee=Oe.changedTouches;return Ee?Ee[0]&&Ee[0].identifier:this.enablePointerEvents?Oe.pointerId:-1},_isMainEvent:function(Oe){return Oe.isPrimary===!0?!0:Oe.isPrimary===!1?!1:Oe.type==="touchend"&&Oe.touches.length===0?!0:Oe.changedTouches?Oe.changedTouches[0].identifier===this.mainTouchId:!0},_onTouchStart:function(Oe){Oe.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(Oe)),this.__onMouseDown(Oe),this._resetTransformEventData();var Ee=this.upperCanvasEl,Ae=this._getEventPrefix();ke(e.document,"touchend",this._onTouchEnd,xe),ke(e.document,"touchmove",this._onMouseMove,xe),_e(Ee,Ae+"down",this._onMouseDown)},_onMouseDown:function(Oe){this.__onMouseDown(Oe),this._resetTransformEventData();var Ee=this.upperCanvasEl,Ae=this._getEventPrefix();_e(Ee,Ae+"move",this._onMouseMove,xe),ke(e.document,Ae+"up",this._onMouseUp),ke(e.document,Ae+"move",this._onMouseMove,xe)},_onTouchEnd:function(Oe){if(!(Oe.touches.length>0)){this.__onMouseUp(Oe),this._resetTransformEventData(),this.mainTouchId=null;var Ee=this._getEventPrefix();_e(e.document,"touchend",this._onTouchEnd,xe),_e(e.document,"touchmove",this._onMouseMove,xe);var Ae=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){ke(Ae.upperCanvasEl,Ee+"down",Ae._onMouseDown),Ae._willAddMouseDown=0},400)}},_onMouseUp:function(Oe){this.__onMouseUp(Oe),this._resetTransformEventData();var Ee=this.upperCanvasEl,Ae=this._getEventPrefix();this._isMainEvent(Oe)&&(_e(e.document,Ae+"up",this._onMouseUp),_e(e.document,Ae+"move",this._onMouseMove,xe),ke(Ee,Ae+"move",this._onMouseMove,xe))},_onMouseMove:function(Oe){!this.allowTouchScrolling&&Oe.preventDefault&&Oe.preventDefault(),this.__onMouseMove(Oe)},_onResize:function(){this.calcOffset()},_shouldRender:function(Oe){var Ee=this._activeObject;return!!Ee!=!!Oe||Ee&&Oe&&Ee!==Oe?!0:(Ee&&Ee.isEditing,!1)},__onMouseUp:function(Oe){var Ee,Ae=this._currentTransform,Fe=this._groupSelector,De=!1,ze=!Fe||Fe.left===0&&Fe.top===0;if(this._cacheTransformEventData(Oe),Ee=this._target,this._handleEvent(Oe,"up:before"),r(Oe,Ce)){this.fireRightClick&&this._handleEvent(Oe,"up",Ce,ze);return}if(r(Oe,Te)){this.fireMiddleClick&&this._handleEvent(Oe,"up",Te,ze),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(Oe);return}if(!!this._isMainEvent(Oe)){if(Ae&&(this._finalizeCurrentTransform(Oe),De=Ae.actionPerformed),!ze){var je=Ee===this._activeObject;this._maybeGroupObjects(Oe),De||(De=this._shouldRender(Ee)||!je&&Ee===this._activeObject)}var We,Ge;if(Ee){if(We=Ee._findTargetCorner(this.getPointer(Oe,!0),e.util.isTouchEvent(Oe)),Ee.selectable&&Ee!==this._activeObject&&Ee.activeOn==="up")this.setActiveObject(Ee,Oe),De=!0;else{var Ye=Ee.controls[We],Xe=Ye&&Ye.getMouseUpHandler(Oe,Ee,Ye);Xe&&(Ge=this.getPointer(Oe),Xe(Oe,Ae,Ge.x,Ge.y))}Ee.isMoving=!1}if(Ae&&(Ae.target!==Ee||Ae.corner!==We)){var Ke=Ae.target&&Ae.target.controls[Ae.corner],er=Ke&&Ke.getMouseUpHandler(Oe,Ee,Ye);Ge=Ge||this.getPointer(Oe),er&&er(Oe,Ae,Ge.x,Ge.y)}this._setCursorFromEvent(Oe,Ee),this._handleEvent(Oe,"up",Se,ze),this._groupSelector=null,this._currentTransform=null,Ee&&(Ee.__corner=0),De?this.requestRenderAll():ze||this.renderTop()}},_simpleEventHandler:function(Oe,Ee){var Ae=this.findTarget(Ee),Fe=this.targets,De={e:Ee,target:Ae,subTargets:Fe};if(this.fire(Oe,De),Ae&&Ae.fire(Oe,De),!Fe)return Ae;for(var ze=0;ze<Fe.length;ze++)Fe[ze].fire(Oe,De);return Ae},_handleEvent:function(Oe,Ee,Ae,Fe){var De=this._target,ze=this.targets||[],je={e:Oe,target:De,subTargets:ze,button:Ae||Se,isClick:Fe||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};Ee==="up"&&(je.currentTarget=this.findTarget(Oe),je.currentSubTargets=this.targets),this.fire("mouse:"+Ee,je),De&&De.fire("mouse"+Ee,je);for(var We=0;We<ze.length;We++)ze[We].fire("mouse"+Ee,je)},_finalizeCurrentTransform:function(Oe){var Ee=this._currentTransform,Ae=Ee.target,Fe={e:Oe,target:Ae,transform:Ee,action:Ee.action};Ae._scaling&&(Ae._scaling=!1),Ae.setCoords(),(Ee.actionPerformed||this.stateful&&Ae.hasStateChanged())&&this._fire("modified",Fe)},_onMouseDownInDrawingMode:function(Oe){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(Oe).requestRenderAll();var Ee=this.getPointer(Oe);this.freeDrawingBrush.onMouseDown(Ee,{e:Oe,pointer:Ee}),this._handleEvent(Oe,"down")},_onMouseMoveInDrawingMode:function(Oe){if(this._isCurrentlyDrawing){var Ee=this.getPointer(Oe);this.freeDrawingBrush.onMouseMove(Ee,{e:Oe,pointer:Ee})}this.setCursor(this.freeDrawingCursor),this._handleEvent(Oe,"move")},_onMouseUpInDrawingMode:function(Oe){var Ee=this.getPointer(Oe);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:Oe,pointer:Ee}),this._handleEvent(Oe,"up")},__onMouseDown:function(Oe){this._cacheTransformEventData(Oe),this._handleEvent(Oe,"down:before");var Ee=this._target;if(r(Oe,Ce)){this.fireRightClick&&this._handleEvent(Oe,"down",Ce);return}if(r(Oe,Te)){this.fireMiddleClick&&this._handleEvent(Oe,"down",Te);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(Oe);return}if(!!this._isMainEvent(Oe)&&!this._currentTransform){var Ae=this._pointer;this._previousPointer=Ae;var Fe=this._shouldRender(Ee),De=this._shouldGroup(Oe,Ee);if(this._shouldClearSelection(Oe,Ee)?this.discardActiveObject(Oe):De&&(this._handleGrouping(Oe,Ee),Ee=this._activeObject),this.selection&&(!Ee||!Ee.selectable&&!Ee.isEditing&&Ee!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),Ee){var ze=Ee===this._activeObject;Ee.selectable&&Ee.activeOn==="down"&&this.setActiveObject(Ee,Oe);var je=Ee._findTargetCorner(this.getPointer(Oe,!0),e.util.isTouchEvent(Oe));if(Ee.__corner=je,Ee===this._activeObject&&(je||!De)){this._setupCurrentTransform(Oe,Ee,ze);var We=Ee.controls[je],Ae=this.getPointer(Oe),Ge=We&&We.getMouseDownHandler(Oe,Ee,We);Ge&&Ge(Oe,this._currentTransform,Ae.x,Ae.y)}}this._handleEvent(Oe,"down"),(Fe||De)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(Oe){this._resetTransformEventData(),this._pointer=this.getPointer(Oe,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(Oe)||null},_beforeTransform:function(Oe){var Ee=this._currentTransform;this.stateful&&Ee.target.saveState(),this.fire("before:transform",{e:Oe,transform:Ee})},__onMouseMove:function(Oe){this._handleEvent(Oe,"move:before"),this._cacheTransformEventData(Oe);var Ee,Ae;if(this.isDrawingMode){this._onMouseMoveInDrawingMode(Oe);return}if(!!this._isMainEvent(Oe)){var Fe=this._groupSelector;Fe?(Ae=this._absolutePointer,Fe.left=Ae.x-Fe.ex,Fe.top=Ae.y-Fe.ey,this.renderTop()):this._currentTransform?this._transformObject(Oe):(Ee=this.findTarget(Oe)||null,this._setCursorFromEvent(Oe,Ee),this._fireOverOutEvents(Ee,Oe)),this._handleEvent(Oe,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(Oe,Ee){var Ae=this._hoveredTarget,Fe=this._hoveredTargets,De=this.targets,ze=Math.max(Fe.length,De.length);this.fireSyntheticInOutEvents(Oe,Ee,{oldTarget:Ae,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var je=0;je<ze;je++)this.fireSyntheticInOutEvents(De[je],Ee,{oldTarget:Fe[je],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=Oe,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(Oe,Ee){var Ae=this._draggedoverTarget,Fe=this._hoveredTargets,De=this.targets,ze=Math.max(Fe.length,De.length);this.fireSyntheticInOutEvents(Oe,Ee,{oldTarget:Ae,evtOut:"dragleave",evtIn:"dragenter"});for(var je=0;je<ze;je++)this.fireSyntheticInOutEvents(De[je],Ee,{oldTarget:Fe[je],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=Oe},fireSyntheticInOutEvents:function(Oe,Ee,Ae){var Fe,De,ze=Ae.oldTarget,je,We,Ge=ze!==Oe,Ye=Ae.canvasEvtIn,Xe=Ae.canvasEvtOut;Ge&&(Fe={e:Ee,target:Oe,previousTarget:ze},De={e:Ee,target:ze,nextTarget:Oe}),We=Oe&&Ge,je=ze&&Ge,je&&(Xe&&this.fire(Xe,De),ze.fire(Ae.evtOut,De)),We&&(Ye&&this.fire(Ye,Fe),Oe.fire(Ae.evtIn,Fe))},__onMouseWheel:function(Oe){this._cacheTransformEventData(Oe),this._handleEvent(Oe,"wheel"),this._resetTransformEventData()},_transformObject:function(Oe){var Ee=this.getPointer(Oe),Ae=this._currentTransform;Ae.reset=!1,Ae.shiftKey=Oe.shiftKey,Ae.altKey=Oe[this.centeredKey],this._performTransformAction(Oe,Ae,Ee),Ae.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(Oe,Ee,Ae){var Fe=Ae.x,De=Ae.y,ze=Ee.action,je=!1,We=Ee.actionHandler;We&&(je=We(Oe,Ee,Fe,De)),ze==="drag"&&je&&(Ee.target.isMoving=!0,this.setCursor(Ee.target.moveCursor||this.moveCursor)),Ee.actionPerformed=Ee.actionPerformed||je},_fire:e.controlsUtils.fireEvent,_setCursorFromEvent:function(Oe,Ee){if(!Ee)return this.setCursor(this.defaultCursor),!1;var Ae=Ee.hoverCursor||this.hoverCursor,Fe=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,De=(!Fe||!Fe.contains(Ee))&&Ee._findTargetCorner(this.getPointer(Oe,!0));De?this.setCursor(this.getCornerCursor(De,Ee,Oe)):(Ee.subTargetCheck&&this.targets.concat().reverse().map(function(ze){Ae=ze.hoverCursor||Ae}),this.setCursor(Ae))},getCornerCursor:function(Oe,Ee,Ae){var Fe=Ee.controls[Oe];return Fe.cursorStyleHandler(Ae,Fe,Ee)}})}(),function(){var ke=Math.min,_e=Math.max;e.util.object.extend(e.Canvas.prototype,{_shouldGroup:function(Ce,Te){var Se=this._activeObject;return Se&&this._isSelectionKeyPressed(Ce)&&Te&&Te.selectable&&this.selection&&(Se!==Te||Se.type==="activeSelection")&&!Te.onSelect({e:Ce})},_handleGrouping:function(Ce,Te){var Se=this._activeObject;Se.__corner||Te===Se&&(Te=this.findTarget(Ce,!0),!Te||!Te.selectable)||(Se&&Se.type==="activeSelection"?this._updateActiveSelection(Te,Ce):this._createActiveSelection(Te,Ce))},_updateActiveSelection:function(Ce,Te){var Se=this._activeObject,xe=Se._objects.slice(0);Se.contains(Ce)?(Se.removeWithUpdate(Ce),this._hoveredTarget=Ce,this._hoveredTargets=this.targets.concat(),Se.size()===1&&this._setActiveObject(Se.item(0),Te)):(Se.addWithUpdate(Ce),this._hoveredTarget=Se,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(xe,Te)},_createActiveSelection:function(Ce,Te){var Se=this.getActiveObjects(),xe=this._createGroup(Ce);this._hoveredTarget=xe,this._setActiveObject(xe,Te),this._fireSelectionEvents(Se,Te)},_createGroup:function(Ce){var Te=this._objects,Se=Te.indexOf(this._activeObject)<Te.indexOf(Ce),xe=Se?[this._activeObject,Ce]:[Ce,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new e.ActiveSelection(xe,{canvas:this})},_groupSelectedObjects:function(Ce){var Te=this._collectObjects(Ce),Se;Te.length===1?this.setActiveObject(Te[0],Ce):Te.length>1&&(Se=new e.ActiveSelection(Te.reverse(),{canvas:this}),this.setActiveObject(Se,Ce))},_collectObjects:function(Ce){for(var Te=[],Se,xe=this._groupSelector.ex,r=this._groupSelector.ey,Oe=xe+this._groupSelector.left,Ee=r+this._groupSelector.top,Ae=new e.Point(ke(xe,Oe),ke(r,Ee)),Fe=new e.Point(_e(xe,Oe),_e(r,Ee)),De=!this.selectionFullyContained,ze=xe===Oe&&r===Ee,je=this._objects.length;je--&&(Se=this._objects[je],!(!(!Se||!Se.selectable||!Se.visible)&&(De&&Se.intersectsWithRect(Ae,Fe,!0)||Se.isContainedWithinRect(Ae,Fe,!0)||De&&Se.containsPoint(Ae,null,!0)||De&&Se.containsPoint(Fe,null,!0))&&(Te.push(Se),ze))););return Te.length>1&&(Te=Te.filter(function(We){return!We.onSelect({e:Ce})})),Te},_maybeGroupObjects:function(Ce){this.selection&&this._groupSelector&&this._groupSelectedObjects(Ce),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){e.util.object.extend(e.StaticCanvas.prototype,{toDataURL:function(ke){ke||(ke={});var _e=ke.format||"png",Ce=ke.quality||1,Te=(ke.multiplier||1)*(ke.enableRetinaScaling?this.getRetinaScaling():1),Se=this.toCanvasElement(Te,ke);return e.util.toDataURL(Se,_e,Ce)},toCanvasElement:function(ke,_e){ke=ke||1,_e=_e||{};var Ce=(_e.width||this.width)*ke,Te=(_e.height||this.height)*ke,Se=this.getZoom(),xe=this.width,r=this.height,Oe=Se*ke,Ee=this.viewportTransform,Ae=(Ee[4]-(_e.left||0))*ke,Fe=(Ee[5]-(_e.top||0))*ke,De=this.interactive,ze=[Oe,0,0,Oe,Ae,Fe],je=this.enableRetinaScaling,We=e.util.createCanvasElement(),Ge=this.contextTop;return We.width=Ce,We.height=Te,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=ze,this.width=Ce,this.height=Te,this.calcViewportBoundaries(),this.renderCanvas(We.getContext("2d"),this._objects),this.viewportTransform=Ee,this.width=xe,this.height=r,this.calcViewportBoundaries(),this.interactive=De,this.enableRetinaScaling=je,this.contextTop=Ge,We}})}(),e.util.object.extend(e.StaticCanvas.prototype,{loadFromJSON:function(ke,_e,Ce){if(!!ke){var Te=typeof ke=="string"?JSON.parse(ke):e.util.object.clone(ke),Se=this,xe=Te.clipPath,r=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete Te.clipPath,this._enlivenObjects(Te.objects,function(Oe){Se.clear(),Se._setBgOverlay(Te,function(){xe?Se._enlivenObjects([xe],function(Ee){Se.clipPath=Ee[0],Se.__setupCanvas.call(Se,Te,Oe,r,_e)}):Se.__setupCanvas.call(Se,Te,Oe,r,_e)})},Ce),this}},__setupCanvas:function(ke,_e,Ce,Te){var Se=this;_e.forEach(function(xe,r){Se.insertAt(xe,r)}),this.renderOnAddRemove=Ce,delete ke.objects,delete ke.backgroundImage,delete ke.overlayImage,delete ke.background,delete ke.overlay,this._setOptions(ke),this.renderAll(),Te&&Te()},_setBgOverlay:function(ke,_e){var Ce={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!ke.backgroundImage&&!ke.overlayImage&&!ke.background&&!ke.overlay){_e&&_e();return}var Te=function(){Ce.backgroundImage&&Ce.overlayImage&&Ce.backgroundColor&&Ce.overlayColor&&_e&&_e()};this.__setBgOverlay("backgroundImage",ke.backgroundImage,Ce,Te),this.__setBgOverlay("overlayImage",ke.overlayImage,Ce,Te),this.__setBgOverlay("backgroundColor",ke.background,Ce,Te),this.__setBgOverlay("overlayColor",ke.overlay,Ce,Te)},__setBgOverlay:function(ke,_e,Ce,Te){var Se=this;if(!_e){Ce[ke]=!0,Te&&Te();return}ke==="backgroundImage"||ke==="overlayImage"?e.util.enlivenObjects([_e],function(xe){Se[ke]=xe[0],Ce[ke]=!0,Te&&Te()}):this["set"+e.util.string.capitalize(ke,!0)](_e,function(){Ce[ke]=!0,Te&&Te()})},_enlivenObjects:function(ke,_e,Ce){if(!ke||ke.length===0){_e&&_e([]);return}e.util.enlivenObjects(ke,function(Te){_e&&_e(Te)},null,Ce)},_toDataURL:function(ke,_e){this.clone(function(Ce){_e(Ce.toDataURL(ke))})},_toDataURLWithMultiplier:function(ke,_e,Ce){this.clone(function(Te){Ce(Te.toDataURLWithMultiplier(ke,_e))})},clone:function(ke,_e){var Ce=JSON.stringify(this.toJSON(_e));this.cloneWithoutData(function(Te){Te.loadFromJSON(Ce,function(){ke&&ke(Te)})})},cloneWithoutData:function(ke){var _e=e.util.createCanvasElement();_e.width=this.width,_e.height=this.height;var Ce=new e.Canvas(_e);this.backgroundImage?(Ce.setBackgroundImage(this.backgroundImage.src,function(){Ce.renderAll(),ke&&ke(Ce)}),Ce.backgroundImageOpacity=this.backgroundImageOpacity,Ce.backgroundImageStretch=this.backgroundImageStretch):ke&&ke(Ce)}}),function(ke){var _e=ke.fabric||(ke.fabric={}),Ce=_e.util.object.extend,Te=_e.util.object.clone,Se=_e.util.toFixed,xe=_e.util.string.capitalize,r=_e.util.degreesToRadians,Oe=!_e.isLikelyNode,Ee=2;_e.Object||(_e.Object=_e.util.createClass(_e.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:Oe,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(Ae){Ae&&this.setOptions(Ae)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=_e.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(Ae){var Fe=_e.perfLimitSizeTotal,De=Ae.width,ze=Ae.height,je=_e.maxCacheSideLimit,We=_e.minCacheSideLimit;if(De<=je&&ze<=je&&De*ze<=Fe)return De<We&&(Ae.width=We),ze<We&&(Ae.height=We),Ae;var Ge=De/ze,Ye=_e.util.limitDimsByArea(Ge,Fe),Xe=_e.util.capValue,Ke=Xe(We,Ye.x,je),er=Xe(We,Ye.y,je);return De>Ke&&(Ae.zoomX/=De/Ke,Ae.width=Ke,Ae.capped=!0),ze>er&&(Ae.zoomY/=ze/er,Ae.height=er,Ae.capped=!0),Ae},_getCacheCanvasDimensions:function(){var Ae=this.getTotalObjectScaling(),Fe=this._getTransformedDimensions(0,0),De=Fe.x*Ae.scaleX/this.scaleX,ze=Fe.y*Ae.scaleY/this.scaleY;return{width:De+Ee,height:ze+Ee,zoomX:Ae.scaleX,zoomY:Ae.scaleY,x:De,y:ze}},_updateCacheCanvas:function(){var Ae=this.canvas;if(this.noScaleCache&&Ae&&Ae._currentTransform){var Fe=Ae._currentTransform.target,De=Ae._currentTransform.action;if(this===Fe&&De.slice&&De.slice(0,5)==="scale")return!1}var ze=this._cacheCanvas,je=this._limitCacheSize(this._getCacheCanvasDimensions()),We=_e.minCacheSideLimit,Ge=je.width,Ye=je.height,Xe,Ke,er=je.zoomX,Qe=je.zoomY,nr=Ge!==this.cacheWidth||Ye!==this.cacheHeight,ir=this.zoomX!==er||this.zoomY!==Qe,cr=nr||ir,br=0,wr=0,xr=!1;if(nr){var Sr=this._cacheCanvas.width,lr=this._cacheCanvas.height,fr=Ge>Sr||Ye>lr,$e=(Ge<Sr*.9||Ye<lr*.9)&&Sr>We&&lr>We;xr=fr||$e,fr&&!je.capped&&(Ge>We||Ye>We)&&(br=Ge*.1,wr=Ye*.1)}return this instanceof _e.Text&&this.path&&(cr=!0,xr=!0,br+=this.getHeightOfLine(0)*this.zoomX,wr+=this.getHeightOfLine(0)*this.zoomY),cr?(xr?(ze.width=Math.ceil(Ge+br),ze.height=Math.ceil(Ye+wr)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,ze.width,ze.height)),Xe=je.x/2,Ke=je.y/2,this.cacheTranslationX=Math.round(ze.width/2-Xe)+Xe,this.cacheTranslationY=Math.round(ze.height/2-Ke)+Ke,this.cacheWidth=Ge,this.cacheHeight=Ye,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(er,Qe),this.zoomX=er,this.zoomY=Qe,!0):!1},setOptions:function(Ae){this._setOptions(Ae),this._initGradient(Ae.fill,"fill"),this._initGradient(Ae.stroke,"stroke"),this._initPattern(Ae.fill,"fill"),this._initPattern(Ae.stroke,"stroke")},transform:function(Ae){var Fe=this.group&&!this.group._transformDone||this.group&&this.canvas&&Ae===this.canvas.contextTop,De=this.calcTransformMatrix(!Fe);Ae.transform(De[0],De[1],De[2],De[3],De[4],De[5])},toObject:function(Ae){var Fe=_e.Object.NUM_FRACTION_DIGITS,De={type:this.type,version:_e.version,originX:this.originX,originY:this.originY,left:Se(this.left,Fe),top:Se(this.top,Fe),width:Se(this.width,Fe),height:Se(this.height,Fe),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:Se(this.strokeWidth,Fe),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:Se(this.strokeMiterLimit,Fe),scaleX:Se(this.scaleX,Fe),scaleY:Se(this.scaleY,Fe),angle:Se(this.angle,Fe),flipX:this.flipX,flipY:this.flipY,opacity:Se(this.opacity,Fe),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:Se(this.skewX,Fe),skewY:Se(this.skewY,Fe)};return this.clipPath&&!this.clipPath.excludeFromExport&&(De.clipPath=this.clipPath.toObject(Ae),De.clipPath.inverted=this.clipPath.inverted,De.clipPath.absolutePositioned=this.clipPath.absolutePositioned),_e.util.populateWithProperties(this,De,Ae),this.includeDefaultValues||(De=this._removeDefaultValues(De)),De},toDatalessObject:function(Ae){return this.toObject(Ae)},_removeDefaultValues:function(Ae){var Fe=_e.util.getKlass(Ae.type).prototype,De=Fe.stateProperties;return De.forEach(function(ze){ze==="left"||ze==="top"||(Ae[ze]===Fe[ze]&&delete Ae[ze],Array.isArray(Ae[ze])&&Array.isArray(Fe[ze])&&Ae[ze].length===0&&Fe[ze].length===0&&delete Ae[ze])}),Ae},toString:function(){return"#<fabric."+xe(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var Ae=_e.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(Ae.scaleX),scaleY:Math.abs(Ae.scaleY)}},getTotalObjectScaling:function(){var Ae=this.getObjectScaling(),Fe=Ae.scaleX,De=Ae.scaleY;if(this.canvas){var ze=this.canvas.getZoom(),je=this.canvas.getRetinaScaling();Fe*=ze*je,De*=ze*je}return{scaleX:Fe,scaleY:De}},getObjectOpacity:function(){var Ae=this.opacity;return this.group&&(Ae*=this.group.getObjectOpacity()),Ae},_set:function(Ae,Fe){var De=Ae==="scaleX"||Ae==="scaleY",ze=this[Ae]!==Fe,je=!1;return De&&(Fe=this._constrainScale(Fe)),Ae==="scaleX"&&Fe<0?(this.flipX=!this.flipX,Fe*=-1):Ae==="scaleY"&&Fe<0?(this.flipY=!this.flipY,Fe*=-1):Ae==="shadow"&&Fe&&!(Fe instanceof _e.Shadow)?Fe=new _e.Shadow(Fe):Ae==="dirty"&&this.group&&this.group.set("dirty",Fe),this[Ae]=Fe,ze&&(je=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(Ae)>-1?(this.dirty=!0,je&&this.group.set("dirty",!0)):je&&this.stateProperties.indexOf(Ae)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:_e.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible},render:function(Ae){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(Ae.save(),this._setupCompositeOperation(Ae),this.drawSelectionBackground(Ae),this.transform(Ae),this._setOpacity(Ae),this._setShadow(Ae,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(Ae)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(Ae),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),Ae.restore())},renderCache:function(Ae){Ae=Ae||{},(!this._cacheCanvas||!this._cacheContext)&&this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,Ae.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(Ae,Fe){if(Ae.save(),Fe.inverted?Ae.globalCompositeOperation="destination-out":Ae.globalCompositeOperation="destination-in",Fe.absolutePositioned){var De=_e.util.invertTransform(this.calcTransformMatrix());Ae.transform(De[0],De[1],De[2],De[3],De[4],De[5])}Fe.transform(Ae),Ae.scale(1/Fe.zoomX,1/Fe.zoomY),Ae.drawImage(Fe._cacheCanvas,-Fe.cacheTranslationX,-Fe.cacheTranslationY),Ae.restore()},drawObject:function(Ae,Fe){var De=this.fill,ze=this.stroke;Fe?(this.fill="black",this.stroke="",this._setClippingProperties(Ae)):this._renderBackground(Ae),this._render(Ae),this._drawClipPath(Ae,this.clipPath),this.fill=De,this.stroke=ze},_drawClipPath:function(Ae,Fe){!Fe||(Fe.canvas=this.canvas,Fe.shouldCache(),Fe._transformDone=!0,Fe.renderCache({forClipping:!0}),this.drawClipPathOnCache(Ae,Fe))},drawCacheOnCanvas:function(Ae){Ae.scale(1/this.zoomX,1/this.zoomY),Ae.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(Ae){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!Ae&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!Ae){var Fe=this.cacheWidth/this.zoomX,De=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-Fe/2,-De/2,Fe,De)}return!0}return!1},_renderBackground:function(Ae){if(!!this.backgroundColor){var Fe=this._getNonTransformedDimensions();Ae.fillStyle=this.backgroundColor,Ae.fillRect(-Fe.x/2,-Fe.y/2,Fe.x,Fe.y),this._removeShadow(Ae)}},_setOpacity:function(Ae){this.group&&!this.group._transformDone?Ae.globalAlpha=this.getObjectOpacity():Ae.globalAlpha*=this.opacity},_setStrokeStyles:function(Ae,Fe){var De=Fe.stroke;De&&(Ae.lineWidth=Fe.strokeWidth,Ae.lineCap=Fe.strokeLineCap,Ae.lineDashOffset=Fe.strokeDashOffset,Ae.lineJoin=Fe.strokeLineJoin,Ae.miterLimit=Fe.strokeMiterLimit,De.toLive?De.gradientUnits==="percentage"||De.gradientTransform||De.patternTransform?this._applyPatternForTransformedGradient(Ae,De):(Ae.strokeStyle=De.toLive(Ae,this),this._applyPatternGradientTransform(Ae,De)):Ae.strokeStyle=Fe.stroke)},_setFillStyles:function(Ae,Fe){var De=Fe.fill;De&&(De.toLive?(Ae.fillStyle=De.toLive(Ae,this),this._applyPatternGradientTransform(Ae,Fe.fill)):Ae.fillStyle=De)},_setClippingProperties:function(Ae){Ae.globalAlpha=1,Ae.strokeStyle="transparent",Ae.fillStyle="#000000"},_setLineDash:function(Ae,Fe){!Fe||Fe.length===0||(1&Fe.length&&Fe.push.apply(Fe,Fe),Ae.setLineDash(Fe))},_renderControls:function(Ae,Fe){var De=this.getViewportTransform(),ze=this.calcTransformMatrix(),je,We,Ge;Fe=Fe||{},We=typeof Fe.hasBorders!="undefined"?Fe.hasBorders:this.hasBorders,Ge=typeof Fe.hasControls!="undefined"?Fe.hasControls:this.hasControls,ze=_e.util.multiplyTransformMatrices(De,ze),je=_e.util.qrDecompose(ze),Ae.save(),Ae.translate(je.translateX,je.translateY),Ae.lineWidth=1*this.borderScaleFactor,this.group||(Ae.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(je.angle-=180),Ae.rotate(r(this.group?je.angle:this.angle)),Fe.forActiveSelection||this.group?We&&this.drawBordersInGroup(Ae,je,Fe):We&&this.drawBorders(Ae,Fe),Ge&&this.drawControls(Ae,Fe),Ae.restore()},_setShadow:function(Ae){if(!!this.shadow){var Fe=this.shadow,De=this.canvas,ze,je=De&&De.viewportTransform[0]||1,We=De&&De.viewportTransform[3]||1;Fe.nonScaling?ze={scaleX:1,scaleY:1}:ze=this.getObjectScaling(),De&&De._isRetinaScaling()&&(je*=_e.devicePixelRatio,We*=_e.devicePixelRatio),Ae.shadowColor=Fe.color,Ae.shadowBlur=Fe.blur*_e.browserShadowBlurConstant*(je+We)*(ze.scaleX+ze.scaleY)/4,Ae.shadowOffsetX=Fe.offsetX*je*ze.scaleX,Ae.shadowOffsetY=Fe.offsetY*We*ze.scaleY}},_removeShadow:function(Ae){!this.shadow||(Ae.shadowColor="",Ae.shadowBlur=Ae.shadowOffsetX=Ae.shadowOffsetY=0)},_applyPatternGradientTransform:function(Ae,Fe){if(!Fe||!Fe.toLive)return{offsetX:0,offsetY:0};var De=Fe.gradientTransform||Fe.patternTransform,ze=-this.width/2+Fe.offsetX||0,je=-this.height/2+Fe.offsetY||0;return Fe.gradientUnits==="percentage"?Ae.transform(this.width,0,0,this.height,ze,je):Ae.transform(1,0,0,1,ze,je),De&&Ae.transform(De[0],De[1],De[2],De[3],De[4],De[5]),{offsetX:ze,offsetY:je}},_renderPaintInOrder:function(Ae){this.paintFirst==="stroke"?(this._renderStroke(Ae),this._renderFill(Ae)):(this._renderFill(Ae),this._renderStroke(Ae))},_render:function(){},_renderFill:function(Ae){!this.fill||(Ae.save(),this._setFillStyles(Ae,this),this.fillRule==="evenodd"?Ae.fill("evenodd"):Ae.fill(),Ae.restore())},_renderStroke:function(Ae){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(Ae),Ae.save(),this.strokeUniform&&this.group){var Fe=this.getObjectScaling();Ae.scale(1/Fe.scaleX,1/Fe.scaleY)}else this.strokeUniform&&Ae.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(Ae,this.strokeDashArray),this._setStrokeStyles(Ae,this),Ae.stroke(),Ae.restore()}},_applyPatternForTransformedGradient:function(Ae,Fe){var De=this._limitCacheSize(this._getCacheCanvasDimensions()),ze=_e.util.createCanvasElement(),je,We=this.canvas.getRetinaScaling(),Ge=De.x/this.scaleX/We,Ye=De.y/this.scaleY/We;ze.width=Ge,ze.height=Ye,je=ze.getContext("2d"),je.beginPath(),je.moveTo(0,0),je.lineTo(Ge,0),je.lineTo(Ge,Ye),je.lineTo(0,Ye),je.closePath(),je.translate(Ge/2,Ye/2),je.scale(De.zoomX/this.scaleX/We,De.zoomY/this.scaleY/We),this._applyPatternGradientTransform(je,Fe),je.fillStyle=Fe.toLive(Ae),je.fill(),Ae.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),Ae.scale(We*this.scaleX/De.zoomX,We*this.scaleY/De.zoomY),Ae.strokeStyle=je.createPattern(ze,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var Ae=_e.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",Ae.scaleX),this.set("scaleY",Ae.scaleY),this.angle=Ae.angle,this.skewX=Ae.skewX,this.skewY=0}},_removeTransformMatrix:function(Ae){var Fe=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),Fe=_e.util.transformPoint(Fe,this.transformMatrix)),this.transformMatrix=null,Ae&&(this.scaleX*=Ae.scaleX,this.scaleY*=Ae.scaleY,this.cropX=Ae.cropX,this.cropY=Ae.cropY,Fe.x+=Ae.offsetLeft,Fe.y+=Ae.offsetTop,this.width=Ae.width,this.height=Ae.height),this.setPositionByOrigin(Fe,"center","center")},clone:function(Ae,Fe){var De=this.toObject(Fe);this.constructor.fromObject?this.constructor.fromObject(De,Ae):_e.Object._fromObject("Object",De,Ae)},cloneAsImage:function(Ae,Fe){var De=this.toCanvasElement(Fe);return Ae&&Ae(new _e.Image(De)),this},toCanvasElement:function(Ae){Ae||(Ae={});var Fe=_e.util,De=Fe.saveObjectTransform(this),ze=this.group,je=this.shadow,We=Math.abs,Ge=(Ae.multiplier||1)*(Ae.enableRetinaScaling?_e.devicePixelRatio:1);delete this.group,Ae.withoutTransform&&Fe.resetObjectTransform(this),Ae.withoutShadow&&(this.shadow=null);var Ye=_e.util.createCanvasElement(),Xe=this.getBoundingRect(!0,!0),Ke=this.shadow,er,Qe={x:0,y:0},nr,ir,cr;Ke&&(nr=Ke.blur,Ke.nonScaling?er={scaleX:1,scaleY:1}:er=this.getObjectScaling(),Qe.x=2*Math.round(We(Ke.offsetX)+nr)*We(er.scaleX),Qe.y=2*Math.round(We(Ke.offsetY)+nr)*We(er.scaleY)),ir=Xe.width+Qe.x,cr=Xe.height+Qe.y,Ye.width=Math.ceil(ir),Ye.height=Math.ceil(cr);var br=new _e.StaticCanvas(Ye,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});Ae.format==="jpeg"&&(br.backgroundColor="#fff"),this.setPositionByOrigin(new _e.Point(br.width/2,br.height/2),"center","center");var wr=this.canvas;br.add(this);var xr=br.toCanvasElement(Ge||1,Ae);return this.shadow=je,this.set("canvas",wr),ze&&(this.group=ze),this.set(De).setCoords(),br._objects=[],br.dispose(),br=null,xr},toDataURL:function(Ae){return Ae||(Ae={}),_e.util.toDataURL(this.toCanvasElement(Ae),Ae.format||"png",Ae.quality||1)},isType:function(Ae){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===Ae},complexity:function(){return 1},toJSON:function(Ae){return this.toObject(Ae)},rotate:function(Ae){var Fe=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return Fe&&this._setOriginToCenter(),this.set("angle",Ae),Fe&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(Ae,Fe){Fe=Fe||this.canvas.getPointer(Ae);var De=new _e.Point(Fe.x,Fe.y),ze=this._getLeftTopCoords();return this.angle&&(De=_e.util.rotatePoint(De,ze,r(-this.angle))),{x:De.x-ze.x,y:De.y-ze.y}},_setupCompositeOperation:function(Ae){this.globalCompositeOperation&&(Ae.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){_e.runningAnimations&&_e.runningAnimations.cancelByTarget(this)}}),_e.util.createAccessors&&_e.util.createAccessors(_e.Object),Ce(_e.Object.prototype,_e.Observable),_e.Object.NUM_FRACTION_DIGITS=2,_e.Object.ENLIVEN_PROPS=["clipPath"],_e.Object._fromObject=function(Ae,Fe,De,ze){var je=_e[Ae];Fe=Te(Fe,!0),_e.util.enlivenPatterns([Fe.fill,Fe.stroke],function(We){typeof We[0]!="undefined"&&(Fe.fill=We[0]),typeof We[1]!="undefined"&&(Fe.stroke=We[1]),_e.util.enlivenObjectEnlivables(Fe,Fe,function(){var Ge=ze?new je(Fe[ze],Fe):new je(Fe);De&&De(Ge)})})},_e.Object.__uid=0)}(Re),function(){var ke=e.util.degreesToRadians,_e={left:-.5,center:0,right:.5},Ce={top:-.5,center:0,bottom:.5};e.util.object.extend(e.Object.prototype,{translateToGivenOrigin:function(Te,Se,xe,r,Oe){var Ee=Te.x,Ae=Te.y,Fe,De,ze;return typeof Se=="string"?Se=_e[Se]:Se-=.5,typeof r=="string"?r=_e[r]:r-=.5,Fe=r-Se,typeof xe=="string"?xe=Ce[xe]:xe-=.5,typeof Oe=="string"?Oe=Ce[Oe]:Oe-=.5,De=Oe-xe,(Fe||De)&&(ze=this._getTransformedDimensions(),Ee=Te.x+Fe*ze.x,Ae=Te.y+De*ze.y),new e.Point(Ee,Ae)},translateToCenterPoint:function(Te,Se,xe){var r=this.translateToGivenOrigin(Te,Se,xe,"center","center");return this.angle?e.util.rotatePoint(r,Te,ke(this.angle)):r},translateToOriginPoint:function(Te,Se,xe){var r=this.translateToGivenOrigin(Te,"center","center",Se,xe);return this.angle?e.util.rotatePoint(r,Te,ke(this.angle)):r},getCenterPoint:function(){var Te=new e.Point(this.left,this.top);return this.translateToCenterPoint(Te,this.originX,this.originY)},getPointByOrigin:function(Te,Se){var xe=this.getCenterPoint();return this.translateToOriginPoint(xe,Te,Se)},toLocalPoint:function(Te,Se,xe){var r=this.getCenterPoint(),Oe,Ee;return typeof Se!="undefined"&&typeof xe!="undefined"?Oe=this.translateToGivenOrigin(r,"center","center",Se,xe):Oe=new e.Point(this.left,this.top),Ee=new e.Point(Te.x,Te.y),this.angle&&(Ee=e.util.rotatePoint(Ee,r,-ke(this.angle))),Ee.subtractEquals(Oe)},setPositionByOrigin:function(Te,Se,xe){var r=this.translateToCenterPoint(Te,Se,xe),Oe=this.translateToOriginPoint(r,this.originX,this.originY);this.set("left",Oe.x),this.set("top",Oe.y)},adjustPosition:function(Te){var Se=ke(this.angle),xe=this.getScaledWidth(),r=e.util.cos(Se)*xe,Oe=e.util.sin(Se)*xe,Ee,Ae;typeof this.originX=="string"?Ee=_e[this.originX]:Ee=this.originX-.5,typeof Te=="string"?Ae=_e[Te]:Ae=Te-.5,this.left+=r*(Ae-Ee),this.top+=Oe*(Ae-Ee),this.setCoords(),this.originX=Te},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var Te=this.getCenterPoint();this.originX="center",this.originY="center",this.left=Te.x,this.top=Te.y},_resetOrigin:function(){var Te=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=Te.x,this.top=Te.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function ke(xe){return[new e.Point(xe.tl.x,xe.tl.y),new e.Point(xe.tr.x,xe.tr.y),new e.Point(xe.br.x,xe.br.y),new e.Point(xe.bl.x,xe.bl.y)]}var _e=e.util,Ce=_e.degreesToRadians,Te=_e.multiplyTransformMatrices,Se=_e.transformPoint;_e.object.extend(e.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(xe,r){return r?xe?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),xe?this.aCoords:this.lineCoords)},getCoords:function(xe,r){return ke(this._getCoords(xe,r))},intersectsWithRect:function(xe,r,Oe,Ee){var Ae=this.getCoords(Oe,Ee),Fe=e.Intersection.intersectPolygonRectangle(Ae,xe,r);return Fe.status==="Intersection"},intersectsWithObject:function(xe,r,Oe){var Ee=e.Intersection.intersectPolygonPolygon(this.getCoords(r,Oe),xe.getCoords(r,Oe));return Ee.status==="Intersection"||xe.isContainedWithinObject(this,r,Oe)||this.isContainedWithinObject(xe,r,Oe)},isContainedWithinObject:function(xe,r,Oe){for(var Ee=this.getCoords(r,Oe),Ae=r?xe.aCoords:xe.lineCoords,Fe=0,De=xe._getImageLines(Ae);Fe<4;Fe++)if(!xe.containsPoint(Ee[Fe],De))return!1;return!0},isContainedWithinRect:function(xe,r,Oe,Ee){var Ae=this.getBoundingRect(Oe,Ee);return Ae.left>=xe.x&&Ae.left+Ae.width<=r.x&&Ae.top>=xe.y&&Ae.top+Ae.height<=r.y},containsPoint:function(xe,r,Oe,Ee){var Ae=this._getCoords(Oe,Ee),r=r||this._getImageLines(Ae),Fe=this._findCrossPoints(xe,r);return Fe!==0&&Fe%2==1},isOnScreen:function(xe){if(!this.canvas)return!1;var r=this.canvas.vptCoords.tl,Oe=this.canvas.vptCoords.br,Ee=this.getCoords(!0,xe);return Ee.some(function(Ae){return Ae.x<=Oe.x&&Ae.x>=r.x&&Ae.y<=Oe.y&&Ae.y>=r.y})||this.intersectsWithRect(r,Oe,!0,xe)?!0:this._containsCenterOfCanvas(r,Oe,xe)},_containsCenterOfCanvas:function(xe,r,Oe){var Ee={x:(xe.x+r.x)/2,y:(xe.y+r.y)/2};return!!this.containsPoint(Ee,null,!0,Oe)},isPartiallyOnScreen:function(xe){if(!this.canvas)return!1;var r=this.canvas.vptCoords.tl,Oe=this.canvas.vptCoords.br;if(this.intersectsWithRect(r,Oe,!0,xe))return!0;var Ee=this.getCoords(!0,xe).every(function(Ae){return(Ae.x>=Oe.x||Ae.x<=r.x)&&(Ae.y>=Oe.y||Ae.y<=r.y)});return Ee&&this._containsCenterOfCanvas(r,Oe,xe)},_getImageLines:function(xe){var r={topline:{o:xe.tl,d:xe.tr},rightline:{o:xe.tr,d:xe.br},bottomline:{o:xe.br,d:xe.bl},leftline:{o:xe.bl,d:xe.tl}};return r},_findCrossPoints:function(xe,r){var Oe,Ee,Ae,Fe,De,ze=0,je;for(var We in r)if(je=r[We],!(je.o.y<xe.y&&je.d.y<xe.y)&&!(je.o.y>=xe.y&&je.d.y>=xe.y)&&(je.o.x===je.d.x&&je.o.x>=xe.x?De=je.o.x:(Oe=0,Ee=(je.d.y-je.o.y)/(je.d.x-je.o.x),Ae=xe.y-Oe*xe.x,Fe=je.o.y-Ee*je.o.x,De=-(Ae-Fe)/(Oe-Ee)),De>=xe.x&&(ze+=1),ze===2))break;return ze},getBoundingRect:function(xe,r){var Oe=this.getCoords(xe,r);return _e.makeBoundingBoxFromPoints(Oe)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(xe){return Math.abs(xe)<this.minScaleLimit?xe<0?-this.minScaleLimit:this.minScaleLimit:xe===0?1e-4:xe},scale:function(xe){return this._set("scaleX",xe),this._set("scaleY",xe),this.setCoords()},scaleToWidth:function(xe,r){var Oe=this.getBoundingRect(r).width/this.getScaledWidth();return this.scale(xe/this.width/Oe)},scaleToHeight:function(xe,r){var Oe=this.getBoundingRect(r).height/this.getScaledHeight();return this.scale(xe/this.height/Oe)},calcLineCoords:function(){var xe=this.getViewportTransform(),r=this.padding,Oe=Ce(this.angle),Ee=_e.cos(Oe),Ae=_e.sin(Oe),Fe=Ee*r,De=Ae*r,ze=Fe+De,je=Fe-De,We=this.calcACoords(),Ge={tl:Se(We.tl,xe),tr:Se(We.tr,xe),bl:Se(We.bl,xe),br:Se(We.br,xe)};return r&&(Ge.tl.x-=je,Ge.tl.y-=ze,Ge.tr.x+=ze,Ge.tr.y-=je,Ge.bl.x-=ze,Ge.bl.y+=je,Ge.br.x+=je,Ge.br.y+=ze),Ge},calcOCoords:function(){var xe=this._calcRotateMatrix(),r=this._calcTranslateMatrix(),Oe=this.getViewportTransform(),Ee=Te(Oe,r),Ae=Te(Ee,xe),Ae=Te(Ae,[1/Oe[0],0,0,1/Oe[3],0,0]),Fe=this._calculateCurrentDimensions(),De={};return this.forEachControl(function(ze,je,We){De[je]=ze.positionHandler(Fe,Ae,We)}),De},calcACoords:function(){var xe=this._calcRotateMatrix(),r=this._calcTranslateMatrix(),Oe=Te(r,xe),Ee=this._getTransformedDimensions(),Ae=Ee.x/2,Fe=Ee.y/2;return{tl:Se({x:-Ae,y:-Fe},Oe),tr:Se({x:Ae,y:-Fe},Oe),bl:Se({x:-Ae,y:Fe},Oe),br:Se({x:Ae,y:Fe},Oe)}},setCoords:function(xe){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),xe?this:(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords(),this)},_calcRotateMatrix:function(){return _e.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var xe=this.getCenterPoint();return[1,0,0,1,xe.x,xe.y]},transformMatrixKey:function(xe){var r="_",Oe="";return!xe&&this.group&&(Oe=this.group.transformMatrixKey(xe)+r),Oe+this.top+r+this.left+r+this.scaleX+r+this.scaleY+r+this.skewX+r+this.skewY+r+this.angle+r+this.originX+r+this.originY+r+this.width+r+this.height+r+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(xe){var r=this.calcOwnMatrix();if(xe||!this.group)return r;var Oe=this.transformMatrixKey(xe),Ee=this.matrixCache||(this.matrixCache={});return Ee.key===Oe?Ee.value:(this.group&&(r=Te(this.group.calcTransformMatrix(!1),r)),Ee.key=Oe,Ee.value=r,r)},calcOwnMatrix:function(){var xe=this.transformMatrixKey(!0),r=this.ownMatrixCache||(this.ownMatrixCache={});if(r.key===xe)return r.value;var Oe=this._calcTranslateMatrix(),Ee={angle:this.angle,translateX:Oe[4],translateY:Oe[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return r.key=xe,r.value=_e.composeMatrix(Ee),r.value},_getNonTransformedDimensions:function(){var xe=this.strokeWidth,r=this.width+xe,Oe=this.height+xe;return{x:r,y:Oe}},_getTransformedDimensions:function(xe,r){typeof xe=="undefined"&&(xe=this.skewX),typeof r=="undefined"&&(r=this.skewY);var Oe,Ee,Ae,Fe=xe===0&&r===0;if(this.strokeUniform?(Ee=this.width,Ae=this.height):(Oe=this._getNonTransformedDimensions(),Ee=Oe.x,Ae=Oe.y),Fe)return this._finalizeDimensions(Ee*this.scaleX,Ae*this.scaleY);var De=_e.sizeAfterTransform(Ee,Ae,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:xe,skewY:r});return this._finalizeDimensions(De.x,De.y)},_finalizeDimensions:function(xe,r){return this.strokeUniform?{x:xe+this.strokeWidth,y:r+this.strokeWidth}:{x:xe,y:r}},_calculateCurrentDimensions:function(){var xe=this.getViewportTransform(),r=this._getTransformedDimensions(),Oe=Se(r,xe,!0);return Oe.scalarAdd(2*this.padding)}})}(),e.util.object.extend(e.Object.prototype,{sendToBack:function(){return this.group?e.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?e.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(ke){return this.group?e.StaticCanvas.prototype.sendBackwards.call(this.group,this,ke):this.canvas&&this.canvas.sendBackwards(this,ke),this},bringForward:function(ke){return this.group?e.StaticCanvas.prototype.bringForward.call(this.group,this,ke):this.canvas&&this.canvas.bringForward(this,ke),this},moveTo:function(ke){return this.group&&this.group.type!=="activeSelection"?e.StaticCanvas.prototype.moveTo.call(this.group,this,ke):this.canvas&&this.canvas.moveTo(this,ke),this}}),function(){function ke(Ce,Te){if(Te){if(Te.toLive)return Ce+": url(#SVGID_"+Te.id+"); ";var Se=new e.Color(Te),xe=Ce+": "+Se.toRgb()+"; ",r=Se.getAlpha();return r!==1&&(xe+=Ce+"-opacity: "+r.toString()+"; "),xe}else return Ce+": none; "}var _e=e.util.toFixed;e.util.object.extend(e.Object.prototype,{getSvgStyles:function(Ce){var Te=this.fillRule?this.fillRule:"nonzero",Se=this.strokeWidth?this.strokeWidth:"0",xe=this.strokeDashArray?this.strokeDashArray.join(" "):"none",r=this.strokeDashOffset?this.strokeDashOffset:"0",Oe=this.strokeLineCap?this.strokeLineCap:"butt",Ee=this.strokeLineJoin?this.strokeLineJoin:"miter",Ae=this.strokeMiterLimit?this.strokeMiterLimit:"4",Fe=typeof this.opacity!="undefined"?this.opacity:"1",De=this.visible?"":" visibility: hidden;",ze=Ce?"":this.getSvgFilter(),je=ke("fill",this.fill),We=ke("stroke",this.stroke);return[We,"stroke-width: ",Se,"; ","stroke-dasharray: ",xe,"; ","stroke-linecap: ",Oe,"; ","stroke-dashoffset: ",r,"; ","stroke-linejoin: ",Ee,"; ","stroke-miterlimit: ",Ae,"; ",je,"fill-rule: ",Te,"; ","opacity: ",Fe,";",ze,De].join("")},getSvgSpanStyles:function(Ce,Te){var Se="; ",xe=Ce.fontFamily?"font-family: "+(Ce.fontFamily.indexOf("'")===-1&&Ce.fontFamily.indexOf('"')===-1?"'"+Ce.fontFamily+"'":Ce.fontFamily)+Se:"",r=Ce.strokeWidth?"stroke-width: "+Ce.strokeWidth+Se:"",xe=xe,Oe=Ce.fontSize?"font-size: "+Ce.fontSize+"px"+Se:"",Ee=Ce.fontStyle?"font-style: "+Ce.fontStyle+Se:"",Ae=Ce.fontWeight?"font-weight: "+Ce.fontWeight+Se:"",Fe=Ce.fill?ke("fill",Ce.fill):"",De=Ce.stroke?ke("stroke",Ce.stroke):"",ze=this.getSvgTextDecoration(Ce),je=Ce.deltaY?"baseline-shift: "+-Ce.deltaY+"; ":"";return ze&&(ze="text-decoration: "+ze+Se),[De,r,xe,Oe,Ee,Ae,ze,Fe,je,Te?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(Ce){return["overline","underline","line-through"].filter(function(Te){return Ce[Te.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(Ce,Te){var Se=Ce?this.calcTransformMatrix():this.calcOwnMatrix(),xe='transform="'+e.util.matrixToSVG(Se);return xe+(Te||"")+'" '},_setSVGBg:function(Ce){if(this.backgroundColor){var Te=e.Object.NUM_FRACTION_DIGITS;Ce.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',_e(-this.width/2,Te),'" y="',_e(-this.height/2,Te),'" width="',_e(this.width,Te),'" height="',_e(this.height,Te),`"></rect>
`)}},toSVG:function(Ce){return this._createBaseSVGMarkup(this._toSVG(Ce),{reviver:Ce})},toClipPathSVG:function(Ce){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(Ce),{reviver:Ce})},_createBaseClipPathSVGMarkup:function(Ce,Te){Te=Te||{};var Se=Te.reviver,xe=Te.additionalTransform||"",r=[this.getSvgTransform(!0,xe),this.getSvgCommons()].join(""),Oe=Ce.indexOf("COMMON_PARTS");return Ce[Oe]=r,Se?Se(Ce.join("")):Ce.join("")},_createBaseSVGMarkup:function(Ce,Te){Te=Te||{};var Se=Te.noStyle,xe=Te.reviver,r=Se?"":'style="'+this.getSvgStyles()+'" ',Oe=Te.withShadow?'style="'+this.getSvgFilter()+'" ':"",Ee=this.clipPath,Ae=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",Fe=Ee&&Ee.absolutePositioned,De=this.stroke,ze=this.fill,je=this.shadow,We,Ge=[],Ye,Xe=Ce.indexOf("COMMON_PARTS"),Ke=Te.additionalTransform;return Ee&&(Ee.clipPathId="CLIPPATH_"+e.Object.__uid++,Ye='<clipPath id="'+Ee.clipPathId+`" >
`+Ee.toClipPathSVG(xe)+`</clipPath>
`),Fe&&Ge.push("<g ",Oe,this.getSvgCommons(),` >
`),Ge.push("<g ",this.getSvgTransform(!1),Fe?"":Oe+this.getSvgCommons(),` >
`),We=[r,Ae,Se?"":this.addPaintOrder()," ",Ke?'transform="'+Ke+'" ':""].join(""),Ce[Xe]=We,ze&&ze.toLive&&Ge.push(ze.toSVG(this)),De&&De.toLive&&Ge.push(De.toSVG(this)),je&&Ge.push(je.toSVG(this)),Ee&&Ge.push(Ye),Ge.push(Ce.join("")),Ge.push(`</g>
`),Fe&&Ge.push(`</g>
`),xe?xe(Ge.join("")):Ge.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var ke=e.util.object.extend,_e="stateProperties";function Ce(Se,xe,r){var Oe={},Ee=!0;r.forEach(function(Ae){Oe[Ae]=Se[Ae]}),ke(Se[xe],Oe,Ee)}function Te(Se,xe,r){if(Se===xe)return!0;if(Array.isArray(Se)){if(!Array.isArray(xe)||Se.length!==xe.length)return!1;for(var Oe=0,Ee=Se.length;Oe<Ee;Oe++)if(!Te(Se[Oe],xe[Oe]))return!1;return!0}else if(Se&&typeof Se=="object"){var Ae=Object.keys(Se),Fe;if(!xe||typeof xe!="object"||!r&&Ae.length!==Object.keys(xe).length)return!1;for(var Oe=0,Ee=Ae.length;Oe<Ee;Oe++)if(Fe=Ae[Oe],!(Fe==="canvas"||Fe==="group")&&!Te(Se[Fe],xe[Fe]))return!1;return!0}}e.util.object.extend(e.Object.prototype,{hasStateChanged:function(Se){Se=Se||_e;var xe="_"+Se;return Object.keys(this[xe]).length<this[Se].length?!0:!Te(this[xe],this,!0)},saveState:function(Se){var xe=Se&&Se.propertySet||_e,r="_"+xe;return this[r]?(Ce(this,r,this[xe]),Se&&Se.stateProperties&&Ce(this,r,Se.stateProperties),this):this.setupState(Se)},setupState:function(Se){Se=Se||{};var xe=Se.propertySet||_e;return Se.propertySet=xe,this["_"+xe]={},this.saveState(Se),this}})}(),function(){var ke=e.util.degreesToRadians;e.util.object.extend(e.Object.prototype,{_findTargetCorner:function(_e,Ce){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var Te=_e.x,Se=_e.y,xe,r,Oe=Object.keys(this.oCoords),Ee=Oe.length-1,Ae;for(this.__corner=0;Ee>=0;Ee--)if(Ae=Oe[Ee],!!this.isControlVisible(Ae)&&(r=this._getImageLines(Ce?this.oCoords[Ae].touchCorner:this.oCoords[Ae].corner),xe=this._findCrossPoints({x:Te,y:Se},r),xe!==0&&xe%2==1))return this.__corner=Ae,Ae;return!1},forEachControl:function(_e){for(var Ce in this.controls)_e(this.controls[Ce],Ce,this)},_setCornerCoords:function(){var _e=this.oCoords;for(var Ce in _e){var Te=this.controls[Ce];_e[Ce].corner=Te.calcCornerCoords(this.angle,this.cornerSize,_e[Ce].x,_e[Ce].y,!1),_e[Ce].touchCorner=Te.calcCornerCoords(this.angle,this.touchCornerSize,_e[Ce].x,_e[Ce].y,!0)}},drawSelectionBackground:function(_e){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;_e.save();var Ce=this.getCenterPoint(),Te=this._calculateCurrentDimensions(),Se=this.canvas.viewportTransform;return _e.translate(Ce.x,Ce.y),_e.scale(1/Se[0],1/Se[3]),_e.rotate(ke(this.angle)),_e.fillStyle=this.selectionBackgroundColor,_e.fillRect(-Te.x/2,-Te.y/2,Te.x,Te.y),_e.restore(),this},drawBorders:function(_e,Ce){Ce=Ce||{};var Te=this._calculateCurrentDimensions(),Se=this.borderScaleFactor,xe=Te.x+Se,r=Te.y+Se,Oe=typeof Ce.hasControls!="undefined"?Ce.hasControls:this.hasControls,Ee=!1;return _e.save(),_e.strokeStyle=Ce.borderColor||this.borderColor,this._setLineDash(_e,Ce.borderDashArray||this.borderDashArray),_e.strokeRect(-xe/2,-r/2,xe,r),Oe&&(_e.beginPath(),this.forEachControl(function(Ae,Fe,De){Ae.withConnection&&Ae.getVisibility(De,Fe)&&(Ee=!0,_e.moveTo(Ae.x*xe,Ae.y*r),_e.lineTo(Ae.x*xe+Ae.offsetX,Ae.y*r+Ae.offsetY))}),Ee&&_e.stroke()),_e.restore(),this},drawBordersInGroup:function(_e,Ce,Te){Te=Te||{};var Se=e.util.sizeAfterTransform(this.width,this.height,Ce),xe=this.strokeWidth,r=this.strokeUniform,Oe=this.borderScaleFactor,Ee=Se.x+xe*(r?this.canvas.getZoom():Ce.scaleX)+Oe,Ae=Se.y+xe*(r?this.canvas.getZoom():Ce.scaleY)+Oe;return _e.save(),this._setLineDash(_e,Te.borderDashArray||this.borderDashArray),_e.strokeStyle=Te.borderColor||this.borderColor,_e.strokeRect(-Ee/2,-Ae/2,Ee,Ae),_e.restore(),this},drawControls:function(_e,Ce){Ce=Ce||{},_e.save();var Te=this.canvas.getRetinaScaling(),Se,xe;return _e.setTransform(Te,0,0,Te,0,0),_e.strokeStyle=_e.fillStyle=Ce.cornerColor||this.cornerColor,this.transparentCorners||(_e.strokeStyle=Ce.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(_e,Ce.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(Se=this.group.calcTransformMatrix()),this.forEachControl(function(r,Oe,Ee){xe=Ee.oCoords[Oe],r.getVisibility(Ee,Oe)&&(Se&&(xe=e.util.transformPoint(xe,Se)),r.render(_e,xe.x,xe.y,Ce,Ee))}),_e.restore(),this},isControlVisible:function(_e){return this.controls[_e]&&this.controls[_e].getVisibility(this,_e)},setControlVisible:function(_e,Ce){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[_e]=Ce,this},setControlsVisibility:function(_e){_e||(_e={});for(var Ce in _e)this.setControlVisible(Ce,_e[Ce]);return this},onDeselect:function(){},onSelect:function(){}})}(),e.util.object.extend(e.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(ke,_e){_e=_e||{};var Ce=function(){},Te=_e.onComplete||Ce,Se=_e.onChange||Ce,xe=this;return e.util.animate({target:this,startValue:ke.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(r){ke.set("left",r),xe.requestRenderAll(),Se()},onComplete:function(){ke.setCoords(),Te()}})},fxCenterObjectV:function(ke,_e){_e=_e||{};var Ce=function(){},Te=_e.onComplete||Ce,Se=_e.onChange||Ce,xe=this;return e.util.animate({target:this,startValue:ke.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(r){ke.set("top",r),xe.requestRenderAll(),Se()},onComplete:function(){ke.setCoords(),Te()}})},fxRemove:function(ke,_e){_e=_e||{};var Ce=function(){},Te=_e.onComplete||Ce,Se=_e.onChange||Ce,xe=this;return e.util.animate({target:this,startValue:ke.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(r){ke.set("opacity",r),xe.requestRenderAll(),Se()},onComplete:function(){xe.remove(ke),Te()}})}}),e.util.object.extend(e.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var ke=[],_e,Ce,Te=[];for(_e in arguments[0])ke.push(_e);for(var Se=0,xe=ke.length;Se<xe;Se++)_e=ke[Se],Ce=Se!==xe-1,Te.push(this._animate(_e,arguments[0][_e],arguments[1],Ce));return Te}else return this._animate.apply(this,arguments)},_animate:function(ke,_e,Ce,Te){var Se=this,xe;_e=_e.toString(),Ce?Ce=e.util.object.clone(Ce):Ce={},~ke.indexOf(".")&&(xe=ke.split("."));var r=Se.colorProperties.indexOf(ke)>-1||xe&&Se.colorProperties.indexOf(xe[1])>-1,Oe=xe?this.get(xe[0])[xe[1]]:this.get(ke);"from"in Ce||(Ce.from=Oe),r||(~_e.indexOf("=")?_e=Oe+parseFloat(_e.replace("=","")):_e=parseFloat(_e));var Ee={target:this,startValue:Ce.from,endValue:_e,byValue:Ce.by,easing:Ce.easing,duration:Ce.duration,abort:Ce.abort&&function(Ae,Fe,De){return Ce.abort.call(Se,Ae,Fe,De)},onChange:function(Ae,Fe,De){xe?Se[xe[0]][xe[1]]=Ae:Se.set(ke,Ae),!Te&&Ce.onChange&&Ce.onChange(Ae,Fe,De)},onComplete:function(Ae,Fe,De){Te||(Se.setCoords(),Ce.onComplete&&Ce.onComplete(Ae,Fe,De))}};return r?e.util.animateColor(Ee.startValue,Ee.endValue,Ee.duration,Ee):e.util.animate(Ee)}}),function(ke){var _e=ke.fabric||(ke.fabric={}),Ce=_e.util.object.extend,Te=_e.util.object.clone,Se={x1:1,x2:1,y1:1,y2:1};if(_e.Line){_e.warn("fabric.Line is already defined");return}_e.Line=_e.util.createClass(_e.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:_e.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(r,Oe){r||(r=[0,0,0,0]),this.callSuper("initialize",Oe),this.set("x1",r[0]),this.set("y1",r[1]),this.set("x2",r[2]),this.set("y2",r[3]),this._setWidthHeight(Oe)},_setWidthHeight:function(r){r||(r={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in r?r.left:this._getLeftToOriginX(),this.top="top"in r?r.top:this._getTopToOriginY()},_set:function(r,Oe){return this.callSuper("_set",r,Oe),typeof Se[r]!="undefined"&&this._setWidthHeight(),this},_getLeftToOriginX:xe({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:xe({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(r){r.beginPath();var Oe=this.calcLinePoints();r.moveTo(Oe.x1,Oe.y1),r.lineTo(Oe.x2,Oe.y2),r.lineWidth=this.strokeWidth;var Ee=r.strokeStyle;r.strokeStyle=this.stroke||r.fillStyle,this.stroke&&this._renderStroke(r),r.strokeStyle=Ee},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(r){return Ce(this.callSuper("toObject",r),this.calcLinePoints())},_getNonTransformedDimensions:function(){var r=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(r.y-=this.strokeWidth),this.height===0&&(r.x-=this.strokeWidth)),r},calcLinePoints:function(){var r=this.x1<=this.x2?-1:1,Oe=this.y1<=this.y2?-1:1,Ee=r*this.width*.5,Ae=Oe*this.height*.5,Fe=r*this.width*-.5,De=Oe*this.height*-.5;return{x1:Ee,x2:Fe,y1:Ae,y2:De}},_toSVG:function(){var r=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',r.x1,'" y1="',r.y1,'" x2="',r.x2,'" y2="',r.y2,`" />
`]}}),_e.Line.ATTRIBUTE_NAMES=_e.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),_e.Line.fromElement=function(r,Oe,Ee){Ee=Ee||{};var Ae=_e.parseAttributes(r,_e.Line.ATTRIBUTE_NAMES),Fe=[Ae.x1||0,Ae.y1||0,Ae.x2||0,Ae.y2||0];Oe(new _e.Line(Fe,Ce(Ae,Ee)))},_e.Line.fromObject=function(r,Oe){function Ee(Fe){delete Fe.points,Oe&&Oe(Fe)}var Ae=Te(r,!0);Ae.points=[r.x1,r.y1,r.x2,r.y2],_e.Object._fromObject("Line",Ae,Ee,"points")};function xe(r,Oe){var Ee=r.origin,Ae=r.axis1,Fe=r.axis2,De=r.dimension,ze=Oe.nearest,je=Oe.center,We=Oe.farthest;return function(){switch(this.get(Ee)){case ze:return Math.min(this.get(Ae),this.get(Fe));case je:return Math.min(this.get(Ae),this.get(Fe))+.5*this.get(De);case We:return Math.max(this.get(Ae),this.get(Fe))}}}}(Re),function(ke){var _e=ke.fabric||(ke.fabric={}),Ce=_e.util.degreesToRadians;if(_e.Circle){_e.warn("fabric.Circle is already defined.");return}_e.Circle=_e.util.createClass(_e.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:_e.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(Se,xe){return this.callSuper("_set",Se,xe),Se==="radius"&&this.setRadius(xe),this},toObject:function(Se){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(Se))},_toSVG:function(){var Se,xe=0,r=0,Oe=(this.endAngle-this.startAngle)%360;if(Oe===0)Se=["<circle ","COMMON_PARTS",'cx="'+xe+'" cy="'+r+'" ','r="',this.radius,`" />
`];else{var Ee=Ce(this.startAngle),Ae=Ce(this.endAngle),Fe=this.radius,De=_e.util.cos(Ee)*Fe,ze=_e.util.sin(Ee)*Fe,je=_e.util.cos(Ae)*Fe,We=_e.util.sin(Ae)*Fe,Ge=Oe>180?"1":"0";Se=['<path d="M '+De+" "+ze," A "+Fe+" "+Fe," 0 ",+Ge+" 1"," "+je+" "+We,'" ',"COMMON_PARTS",` />
`]}return Se},_render:function(Se){Se.beginPath(),Se.arc(0,0,this.radius,Ce(this.startAngle),Ce(this.endAngle),!1),this._renderPaintInOrder(Se)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(Se){return this.radius=Se,this.set("width",Se*2).set("height",Se*2)}}),_e.Circle.ATTRIBUTE_NAMES=_e.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),_e.Circle.fromElement=function(Se,xe){var r=_e.parseAttributes(Se,_e.Circle.ATTRIBUTE_NAMES);if(!Te(r))throw new Error("value of `r` attribute is required and can not be negative");r.left=(r.left||0)-r.radius,r.top=(r.top||0)-r.radius,xe(new _e.Circle(r))};function Te(Se){return"radius"in Se&&Se.radius>=0}_e.Circle.fromObject=function(Se,xe){_e.Object._fromObject("Circle",Se,xe)}}(Re),function(ke){var _e=ke.fabric||(ke.fabric={});if(_e.Triangle){_e.warn("fabric.Triangle is already defined");return}_e.Triangle=_e.util.createClass(_e.Object,{type:"triangle",width:100,height:100,_render:function(Ce){var Te=this.width/2,Se=this.height/2;Ce.beginPath(),Ce.moveTo(-Te,Se),Ce.lineTo(0,-Se),Ce.lineTo(Te,Se),Ce.closePath(),this._renderPaintInOrder(Ce)},_toSVG:function(){var Ce=this.width/2,Te=this.height/2,Se=[-Ce+" "+Te,"0 "+-Te,Ce+" "+Te].join(",");return["<polygon ","COMMON_PARTS",'points="',Se,'" />']}}),_e.Triangle.fromObject=function(Ce,Te){return _e.Object._fromObject("Triangle",Ce,Te)}}(Re),function(ke){var _e=ke.fabric||(ke.fabric={}),Ce=Math.PI*2;if(_e.Ellipse){_e.warn("fabric.Ellipse is already defined.");return}_e.Ellipse=_e.util.createClass(_e.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:_e.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(Te){this.callSuper("initialize",Te),this.set("rx",Te&&Te.rx||0),this.set("ry",Te&&Te.ry||0)},_set:function(Te,Se){switch(this.callSuper("_set",Te,Se),Te){case"rx":this.rx=Se,this.set("width",Se*2);break;case"ry":this.ry=Se,this.set("height",Se*2);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(Te){return this.callSuper("toObject",["rx","ry"].concat(Te))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(Te){Te.beginPath(),Te.save(),Te.transform(1,0,0,this.ry/this.rx,0,0),Te.arc(0,0,this.rx,0,Ce,!1),Te.restore(),this._renderPaintInOrder(Te)}}),_e.Ellipse.ATTRIBUTE_NAMES=_e.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),_e.Ellipse.fromElement=function(Te,Se){var xe=_e.parseAttributes(Te,_e.Ellipse.ATTRIBUTE_NAMES);xe.left=(xe.left||0)-xe.rx,xe.top=(xe.top||0)-xe.ry,Se(new _e.Ellipse(xe))},_e.Ellipse.fromObject=function(Te,Se){_e.Object._fromObject("Ellipse",Te,Se)}}(Re),function(ke){var _e=ke.fabric||(ke.fabric={}),Ce=_e.util.object.extend;if(_e.Rect){_e.warn("fabric.Rect is already defined");return}_e.Rect=_e.util.createClass(_e.Object,{stateProperties:_e.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:_e.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(Te){this.callSuper("initialize",Te),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(Te){var Se=this.rx?Math.min(this.rx,this.width/2):0,xe=this.ry?Math.min(this.ry,this.height/2):0,r=this.width,Oe=this.height,Ee=-this.width/2,Ae=-this.height/2,Fe=Se!==0||xe!==0,De=1-.5522847498;Te.beginPath(),Te.moveTo(Ee+Se,Ae),Te.lineTo(Ee+r-Se,Ae),Fe&&Te.bezierCurveTo(Ee+r-De*Se,Ae,Ee+r,Ae+De*xe,Ee+r,Ae+xe),Te.lineTo(Ee+r,Ae+Oe-xe),Fe&&Te.bezierCurveTo(Ee+r,Ae+Oe-De*xe,Ee+r-De*Se,Ae+Oe,Ee+r-Se,Ae+Oe),Te.lineTo(Ee+Se,Ae+Oe),Fe&&Te.bezierCurveTo(Ee+De*Se,Ae+Oe,Ee,Ae+Oe-De*xe,Ee,Ae+Oe-xe),Te.lineTo(Ee,Ae+xe),Fe&&Te.bezierCurveTo(Ee,Ae+De*xe,Ee+De*Se,Ae,Ee+Se,Ae),Te.closePath(),this._renderPaintInOrder(Te)},toObject:function(Te){return this.callSuper("toObject",["rx","ry"].concat(Te))},_toSVG:function(){var Te=-this.width/2,Se=-this.height/2;return["<rect ","COMMON_PARTS",'x="',Te,'" y="',Se,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),_e.Rect.ATTRIBUTE_NAMES=_e.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),_e.Rect.fromElement=function(Te,Se,xe){if(!Te)return Se(null);xe=xe||{};var r=_e.parseAttributes(Te,_e.Rect.ATTRIBUTE_NAMES);r.left=r.left||0,r.top=r.top||0,r.height=r.height||0,r.width=r.width||0;var Oe=new _e.Rect(Ce(xe?_e.util.object.clone(xe):{},r));Oe.visible=Oe.visible&&Oe.width>0&&Oe.height>0,Se(Oe)},_e.Rect.fromObject=function(Te,Se){return _e.Object._fromObject("Rect",Te,Se)}}(Re),function(ke){var _e=ke.fabric||(ke.fabric={}),Ce=_e.util.object.extend,Te=_e.util.array.min,Se=_e.util.array.max,xe=_e.util.toFixed,r=_e.util.projectStrokeOnPoints;if(_e.Polyline){_e.warn("fabric.Polyline is already defined");return}_e.Polyline=_e.util.createClass(_e.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:_e.Object.prototype.cacheProperties.concat("points"),initialize:function(Oe,Ee){Ee=Ee||{},this.points=Oe||[],this.callSuper("initialize",Ee),this._setPositionDimensions(Ee)},_projectStrokeOnPoints:function(){return r(this.points,this,!0)},_setPositionDimensions:function(Oe){var Ee=this._calcDimensions(Oe),Ae,Fe=this.exactBoundingBox?this.strokeWidth:0;this.width=Ee.width-Fe,this.height=Ee.height-Fe,Oe.fromSVG||(Ae=this.translateToGivenOrigin({x:Ee.left-this.strokeWidth/2+Fe/2,y:Ee.top-this.strokeWidth/2+Fe/2},"left","top",this.originX,this.originY)),typeof Oe.left=="undefined"&&(this.left=Oe.fromSVG?Ee.left:Ae.x),typeof Oe.top=="undefined"&&(this.top=Oe.fromSVG?Ee.top:Ae.y),this.pathOffset={x:Ee.left+this.width/2+Fe/2,y:Ee.top+this.height/2+Fe/2}},_calcDimensions:function(){var Oe=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,Ee=Te(Oe,"x")||0,Ae=Te(Oe,"y")||0,Fe=Se(Oe,"x")||0,De=Se(Oe,"y")||0,ze=Fe-Ee,je=De-Ae;return{left:Ee,top:Ae,width:ze,height:je}},toObject:function(Oe){return Ce(this.callSuper("toObject",Oe),{points:this.points.concat()})},_toSVG:function(){for(var Oe=[],Ee=this.pathOffset.x,Ae=this.pathOffset.y,Fe=_e.Object.NUM_FRACTION_DIGITS,De=0,ze=this.points.length;De<ze;De++)Oe.push(xe(this.points[De].x-Ee,Fe),",",xe(this.points[De].y-Ae,Fe)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',Oe.join(""),`" />
`]},commonRender:function(Oe){var Ee,Ae=this.points.length,Fe=this.pathOffset.x,De=this.pathOffset.y;if(!Ae||isNaN(this.points[Ae-1].y))return!1;Oe.beginPath(),Oe.moveTo(this.points[0].x-Fe,this.points[0].y-De);for(var ze=0;ze<Ae;ze++)Ee=this.points[ze],Oe.lineTo(Ee.x-Fe,Ee.y-De);return!0},_render:function(Oe){!this.commonRender(Oe)||this._renderPaintInOrder(Oe)},complexity:function(){return this.get("points").length}}),_e.Polyline.ATTRIBUTE_NAMES=_e.SHARED_ATTRIBUTES.concat(),_e.Polyline.fromElementGenerator=function(Oe){return function(Ee,Ae,Fe){if(!Ee)return Ae(null);Fe||(Fe={});var De=_e.parsePointsAttribute(Ee.getAttribute("points")),ze=_e.parseAttributes(Ee,_e[Oe].ATTRIBUTE_NAMES);ze.fromSVG=!0,Ae(new _e[Oe](De,Ce(ze,Fe)))}},_e.Polyline.fromElement=_e.Polyline.fromElementGenerator("Polyline"),_e.Polyline.fromObject=function(Oe,Ee){return _e.Object._fromObject("Polyline",Oe,Ee,"points")}}(Re),function(ke){var _e=ke.fabric||(ke.fabric={}),Ce=_e.util.projectStrokeOnPoints;if(_e.Polygon){_e.warn("fabric.Polygon is already defined");return}_e.Polygon=_e.util.createClass(_e.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return Ce(this.points,this)},_render:function(Te){!this.commonRender(Te)||(Te.closePath(),this._renderPaintInOrder(Te))}}),_e.Polygon.ATTRIBUTE_NAMES=_e.SHARED_ATTRIBUTES.concat(),_e.Polygon.fromElement=_e.Polyline.fromElementGenerator("Polygon"),_e.Polygon.fromObject=function(Te,Se){_e.Object._fromObject("Polygon",Te,Se,"points")}}(Re),function(ke){var _e=ke.fabric||(ke.fabric={}),Ce=_e.util.array.min,Te=_e.util.array.max,Se=_e.util.object.extend,xe=_e.util.object.clone,r=_e.util.toFixed;if(_e.Path){_e.warn("fabric.Path is already defined");return}_e.Path=_e.util.createClass(_e.Object,{type:"path",path:null,cacheProperties:_e.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:_e.Object.prototype.stateProperties.concat("path"),initialize:function(Oe,Ee){Ee=xe(Ee||{}),delete Ee.path,this.callSuper("initialize",Ee),this._setPath(Oe||[],Ee)},_setPath:function(Oe,Ee){this.path=_e.util.makePathSimpler(Array.isArray(Oe)?Oe:_e.util.parsePath(Oe)),_e.Polyline.prototype._setPositionDimensions.call(this,Ee||{})},_renderPathCommands:function(Oe){var Ee,Ae=0,Fe=0,De=0,ze=0,je=0,We=0,Ge=-this.pathOffset.x,Ye=-this.pathOffset.y;Oe.beginPath();for(var Xe=0,Ke=this.path.length;Xe<Ke;++Xe)switch(Ee=this.path[Xe],Ee[0]){case"L":De=Ee[1],ze=Ee[2],Oe.lineTo(De+Ge,ze+Ye);break;case"M":De=Ee[1],ze=Ee[2],Ae=De,Fe=ze,Oe.moveTo(De+Ge,ze+Ye);break;case"C":De=Ee[5],ze=Ee[6],je=Ee[3],We=Ee[4],Oe.bezierCurveTo(Ee[1]+Ge,Ee[2]+Ye,je+Ge,We+Ye,De+Ge,ze+Ye);break;case"Q":Oe.quadraticCurveTo(Ee[1]+Ge,Ee[2]+Ye,Ee[3]+Ge,Ee[4]+Ye),De=Ee[3],ze=Ee[4],je=Ee[1],We=Ee[2];break;case"z":case"Z":De=Ae,ze=Fe,Oe.closePath();break}},_render:function(Oe){this._renderPathCommands(Oe),this._renderPaintInOrder(Oe)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(Oe){return Se(this.callSuper("toObject",Oe),{path:this.path.map(function(Ee){return Ee.slice()})})},toDatalessObject:function(Oe){var Ee=this.toObject(["sourcePath"].concat(Oe));return Ee.sourcePath&&delete Ee.path,Ee},_toSVG:function(){var Oe=_e.util.joinPath(this.path);return["<path ","COMMON_PARTS",'d="',Oe,'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var Oe=_e.Object.NUM_FRACTION_DIGITS;return" translate("+r(-this.pathOffset.x,Oe)+", "+r(-this.pathOffset.y,Oe)+")"},toClipPathSVG:function(Oe){var Ee=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:Oe,additionalTransform:Ee})},toSVG:function(Oe){var Ee=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:Oe,additionalTransform:Ee})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var Oe=[],Ee=[],Ae,Fe=0,De=0,ze=0,je=0,We,Ge=0,Ye=this.path.length;Ge<Ye;++Ge){switch(Ae=this.path[Ge],Ae[0]){case"L":ze=Ae[1],je=Ae[2],We=[];break;case"M":ze=Ae[1],je=Ae[2],Fe=ze,De=je,We=[];break;case"C":We=_e.util.getBoundsOfCurve(ze,je,Ae[1],Ae[2],Ae[3],Ae[4],Ae[5],Ae[6]),ze=Ae[5],je=Ae[6];break;case"Q":We=_e.util.getBoundsOfCurve(ze,je,Ae[1],Ae[2],Ae[1],Ae[2],Ae[3],Ae[4]),ze=Ae[3],je=Ae[4];break;case"z":case"Z":ze=Fe,je=De;break}We.forEach(function(cr){Oe.push(cr.x),Ee.push(cr.y)}),Oe.push(ze),Ee.push(je)}var Xe=Ce(Oe)||0,Ke=Ce(Ee)||0,er=Te(Oe)||0,Qe=Te(Ee)||0,nr=er-Xe,ir=Qe-Ke;return{left:Xe,top:Ke,width:nr,height:ir}}}),_e.Path.fromObject=function(Oe,Ee){if(typeof Oe.sourcePath=="string"){var Ae=Oe.sourcePath;_e.loadSVGFromURL(Ae,function(Fe){var De=Fe[0];De.setOptions(Oe),Ee&&Ee(De)})}else _e.Object._fromObject("Path",Oe,Ee,"path")},_e.Path.ATTRIBUTE_NAMES=_e.SHARED_ATTRIBUTES.concat(["d"]),_e.Path.fromElement=function(Oe,Ee,Ae){var Fe=_e.parseAttributes(Oe,_e.Path.ATTRIBUTE_NAMES);Fe.fromSVG=!0,Ee(new _e.Path(Fe.d,Se(Fe,Ae)))}}(Re),function(ke){var _e=ke.fabric||(ke.fabric={}),Ce=_e.util.array.min,Te=_e.util.array.max;_e.Group||(_e.Group=_e.util.createClass(_e.Object,_e.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(Se,xe,r){xe=xe||{},this._objects=[],r&&this.callSuper("initialize",xe),this._objects=Se||[];for(var Oe=this._objects.length;Oe--;)this._objects[Oe].group=this;if(r)this._updateObjectsACoords();else{var Ee=xe&&xe.centerPoint;xe.originX!==void 0&&(this.originX=xe.originX),xe.originY!==void 0&&(this.originY=xe.originY),Ee||this._calcBounds(),this._updateObjectsCoords(Ee),delete xe.centerPoint,this.callSuper("initialize",xe)}this.setCoords()},_updateObjectsACoords:function(){for(var Se=!0,xe=this._objects.length;xe--;)this._objects[xe].setCoords(Se)},_updateObjectsCoords:function(Se){for(var Se=Se||this.getCenterPoint(),xe=this._objects.length;xe--;)this._updateObjectCoords(this._objects[xe],Se)},_updateObjectCoords:function(Se,xe){var r=Se.left,Oe=Se.top,Ee=!0;Se.set({left:r-xe.x,top:Oe-xe.y}),Se.group=this,Se.setCoords(Ee)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(Se){var xe=!!this.group;return this._restoreObjectsState(),_e.util.resetObjectTransform(this),Se&&(xe&&_e.util.removeTransformFromObject(Se,this.group.calcTransformMatrix()),this._objects.push(Se),Se.group=this,Se._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,xe?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(Se){return this._restoreObjectsState(),_e.util.resetObjectTransform(this),this.remove(Se),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(Se){this.dirty=!0,Se.group=this,Se._set("canvas",this.canvas)},_onObjectRemoved:function(Se){this.dirty=!0,delete Se.group},_set:function(Se,xe){var r=this._objects.length;if(this.useSetOnGroup)for(;r--;)this._objects[r].setOnGroup(Se,xe);if(Se==="canvas")for(;r--;)this._objects[r]._set(Se,xe);_e.Object.prototype._set.call(this,Se,xe)},toObject:function(Se){var xe=this.includeDefaultValues,r=this._objects.filter(function(Ee){return!Ee.excludeFromExport}).map(function(Ee){var Ae=Ee.includeDefaultValues;Ee.includeDefaultValues=xe;var Fe=Ee.toObject(Se);return Ee.includeDefaultValues=Ae,Fe}),Oe=_e.Object.prototype.toObject.call(this,Se);return Oe.objects=r,Oe},toDatalessObject:function(Se){var xe,r=this.sourcePath;if(r)xe=r;else{var Oe=this.includeDefaultValues;xe=this._objects.map(function(Ae){var Fe=Ae.includeDefaultValues;Ae.includeDefaultValues=Oe;var De=Ae.toDatalessObject(Se);return Ae.includeDefaultValues=Fe,De})}var Ee=_e.Object.prototype.toDatalessObject.call(this,Se);return Ee.objects=xe,Ee},render:function(Se){this._transformDone=!0,this.callSuper("render",Se),this._transformDone=!1},shouldCache:function(){var Se=_e.Object.prototype.shouldCache.call(this);if(Se){for(var xe=0,r=this._objects.length;xe<r;xe++)if(this._objects[xe].willDrawShadow())return this.ownCaching=!1,!1}return Se},willDrawShadow:function(){if(_e.Object.prototype.willDrawShadow.call(this))return!0;for(var Se=0,xe=this._objects.length;Se<xe;Se++)if(this._objects[Se].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(Se){for(var xe=0,r=this._objects.length;xe<r;xe++)this._objects[xe].render(Se);this._drawClipPath(Se,this.clipPath)},isCacheDirty:function(Se){if(this.callSuper("isCacheDirty",Se))return!0;if(!this.statefullCache)return!1;for(var xe=0,r=this._objects.length;xe<r;xe++)if(this._objects[xe].isCacheDirty(!0)){if(this._cacheCanvas){var Oe=this.cacheWidth/this.zoomX,Ee=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-Oe/2,-Ee/2,Oe,Ee)}return!0}return!1},_restoreObjectsState:function(){var Se=this.calcOwnMatrix();return this._objects.forEach(function(xe){_e.util.addTransformToObject(xe,Se),delete xe.group,xe.setCoords()}),this},destroy:function(){return this._objects.forEach(function(Se){Se.set("dirty",!0)}),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject(function(Se){Se.dispose&&Se.dispose()}),this._objects=[]},toActiveSelection:function(){if(!!this.canvas){var Se=this._objects,xe=this.canvas;this._objects=[];var r=this.toObject();delete r.objects;var Oe=new _e.ActiveSelection([]);return Oe.set(r),Oe.type="activeSelection",xe.remove(this),Se.forEach(function(Ee){Ee.group=Oe,Ee.dirty=!0,xe.add(Ee)}),Oe.canvas=xe,Oe._objects=Se,xe._activeObject=Oe,Oe.setCoords(),Oe}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var Se=!0;return this.forEachObject(function(xe){xe.setCoords(Se)}),this},_calcBounds:function(Se){for(var xe=[],r=[],Oe,Ee,Ae,Fe=["tr","br","bl","tl"],De=0,ze=this._objects.length,je,We=Fe.length;De<ze;++De){for(Oe=this._objects[De],Ae=Oe.calcACoords(),je=0;je<We;je++)Ee=Fe[je],xe.push(Ae[Ee].x),r.push(Ae[Ee].y);Oe.aCoords=Ae}this._getBounds(xe,r,Se)},_getBounds:function(Se,xe,r){var Oe=new _e.Point(Ce(Se),Ce(xe)),Ee=new _e.Point(Te(Se),Te(xe)),Ae=Oe.y||0,Fe=Oe.x||0,De=Ee.x-Oe.x||0,ze=Ee.y-Oe.y||0;this.width=De,this.height=ze,r||this.setPositionByOrigin({x:Fe,y:Ae},"left","top")},_toSVG:function(Se){for(var xe=["<g ","COMMON_PARTS",` >
`],r=0,Oe=this._objects.length;r<Oe;r++)xe.push("		",this._objects[r].toSVG(Se));return xe.push(`</g>
`),xe},getSvgStyles:function(){var Se=typeof this.opacity!="undefined"&&this.opacity!==1?"opacity: "+this.opacity+";":"",xe=this.visible?"":" visibility: hidden;";return[Se,this.getSvgFilter(),xe].join("")},toClipPathSVG:function(Se){for(var xe=[],r=0,Oe=this._objects.length;r<Oe;r++)xe.push("	",this._objects[r].toClipPathSVG(Se));return this._createBaseClipPathSVGMarkup(xe,{reviver:Se})}}),_e.Group.fromObject=function(Se,xe){var r=Se.objects,Oe=_e.util.object.clone(Se,!0);if(delete Oe.objects,typeof r=="string"){_e.loadSVGFromURL(r,function(Ee){var Ae=_e.util.groupSVGElements(Ee,Se,r);Ae.set(Oe),xe&&xe(Ae)});return}_e.util.enlivenObjects(r,function(Ee){var Ae=_e.util.object.clone(Se,!0);delete Ae.objects,_e.util.enlivenObjectEnlivables(Se,Ae,function(){xe&&xe(new _e.Group(Ee,Ae,!0))})})})}(Re),function(ke){var _e=ke.fabric||(ke.fabric={});_e.ActiveSelection||(_e.ActiveSelection=_e.util.createClass(_e.Group,{type:"activeSelection",initialize:function(Ce,Te){Te=Te||{},this._objects=Ce||[];for(var Se=this._objects.length;Se--;)this._objects[Se].group=this;Te.originX&&(this.originX=Te.originX),Te.originY&&(this.originY=Te.originY),this._calcBounds(),this._updateObjectsCoords(),_e.Object.prototype.initialize.call(this,Te),this.setCoords()},toGroup:function(){var Ce=this._objects.concat();this._objects=[];var Te=_e.Object.prototype.toObject.call(this),Se=new _e.Group([]);if(delete Te.type,Se.set(Te),Ce.forEach(function(r){r.canvas.remove(r),r.group=Se}),Se._objects=Ce,!this.canvas)return Se;var xe=this.canvas;return xe.add(Se),xe._activeObject=Se,Se.setCoords(),Se},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(Ce,Te,Se){Ce.save(),Ce.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",Ce,Te),Se=Se||{},typeof Se.hasControls=="undefined"&&(Se.hasControls=!1),Se.forActiveSelection=!0;for(var xe=0,r=this._objects.length;xe<r;xe++)this._objects[xe]._renderControls(Ce,Se);Ce.restore()}}),_e.ActiveSelection.fromObject=function(Ce,Te){_e.util.enlivenObjects(Ce.objects,function(Se){delete Ce.objects,Te&&Te(new _e.ActiveSelection(Se,Ce,!0))})})}(Re),function(ke){var _e=e.util.object.extend;if(ke.fabric||(ke.fabric={}),ke.fabric.Image){e.warn("fabric.Image is already defined.");return}e.Image=e.util.createClass(e.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:e.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:e.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(Ce,Te){Te||(Te={}),this.filters=[],this.cacheKey="texture"+e.Object.__uid++,this.callSuper("initialize",Te),this._initElement(Ce,Te)},getElement:function(){return this._element||{}},setElement:function(Ce,Te){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=Ce,this._originalElement=Ce,this._initConfig(Te),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(Ce){var Te=e.filterBackend;Te&&Te.evictCachesForKey&&Te.evictCachesForKey(Ce)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(function(Ce){e.util.cleanUpJsdomNode(this[Ce]),this[Ce]=void 0}.bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var Ce=this.getElement();return{width:Ce.naturalWidth||Ce.width,height:Ce.naturalHeight||Ce.height}},_stroke:function(Ce){if(!(!this.stroke||this.strokeWidth===0)){var Te=this.width/2,Se=this.height/2;Ce.beginPath(),Ce.moveTo(-Te,-Se),Ce.lineTo(Te,-Se),Ce.lineTo(Te,Se),Ce.lineTo(-Te,Se),Ce.lineTo(-Te,-Se),Ce.closePath()}},toObject:function(Ce){var Te=[];this.filters.forEach(function(xe){xe&&Te.push(xe.toObject())});var Se=_e(this.callSuper("toObject",["cropX","cropY"].concat(Ce)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:Te});return this.resizeFilter&&(Se.resizeFilter=this.resizeFilter.toObject()),Se},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var Ce=[],Te=[],Se,xe=this._element,r=-this.width/2,Oe=-this.height/2,Ee="",Ae="";if(!xe)return[];if(this.hasCrop()){var Fe=e.Object.__uid++;Ce.push('<clipPath id="imageCrop_'+Fe+`">
`,'	<rect x="'+r+'" y="'+Oe+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),Ee=' clip-path="url(#imageCrop_'+Fe+')" '}if(this.imageSmoothing||(Ae='" image-rendering="optimizeSpeed'),Te.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',r-this.cropX,'" y="',Oe-this.cropY,'" width="',xe.width||xe.naturalWidth,'" height="',xe.height||xe.height,Ae,'"',Ee,`></image>
`),this.stroke||this.strokeDashArray){var De=this.fill;this.fill=null,Se=["	<rect ",'x="',r,'" y="',Oe,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=De}return this.paintFirst!=="fill"?Ce=Ce.concat(Se,Te):Ce=Ce.concat(Te,Se),Ce},getSrc:function(Ce){var Te=Ce?this._element:this._originalElement;return Te?Te.toDataURL?Te.toDataURL():this.srcFromAttribute?Te.getAttribute("src"):Te.src:this.src||""},setSrc:function(Ce,Te,Se){return e.util.loadImage(Ce,function(xe,r){this.setElement(xe,Se),this._setWidthHeight(),Te&&Te(this,r)},this,Se&&Se.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var Ce=this.resizeFilter,Te=this.minimumScaleTrigger,Se=this.getTotalObjectScaling(),xe=Se.scaleX,r=Se.scaleY,Oe=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!Ce||xe>Te&&r>Te){this._element=Oe,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=xe,this._lastScaleY=r;return}e.filterBackend||(e.filterBackend=e.initFilterBackend());var Ee=e.util.createCanvasElement(),Ae=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,Fe=Oe.width,De=Oe.height;Ee.width=Fe,Ee.height=De,this._element=Ee,this._lastScaleX=Ce.scaleX=xe,this._lastScaleY=Ce.scaleY=r,e.filterBackend.applyFilters([Ce],Oe,Fe,De,this._element,Ae),this._filterScalingX=Ee.width/this._originalElement.width,this._filterScalingY=Ee.height/this._originalElement.height},applyFilters:function(Ce){if(Ce=Ce||this.filters||[],Ce=Ce.filter(function(Oe){return Oe&&!Oe.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),Ce.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var Te=this._originalElement,Se=Te.naturalWidth||Te.width,xe=Te.naturalHeight||Te.height;if(this._element===this._originalElement){var r=e.util.createCanvasElement();r.width=Se,r.height=xe,this._element=r,this._filteredEl=r}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,Se,xe),this._lastScaleX=1,this._lastScaleY=1;return e.filterBackend||(e.filterBackend=e.initFilterBackend()),e.filterBackend.applyFilters(Ce,this._originalElement,Se,xe,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(Ce){e.util.setImageSmoothing(Ce,this.imageSmoothing),this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(Ce),this._renderPaintInOrder(Ce)},drawCacheOnCanvas:function(Ce){e.util.setImageSmoothing(Ce,this.imageSmoothing),e.Object.prototype.drawCacheOnCanvas.call(this,Ce)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(Ce){var Te=this._element;if(!!Te){var Se=this._filterScalingX,xe=this._filterScalingY,r=this.width,Oe=this.height,Ee=Math.min,Ae=Math.max,Fe=Ae(this.cropX,0),De=Ae(this.cropY,0),ze=Te.naturalWidth||Te.width,je=Te.naturalHeight||Te.height,We=Fe*Se,Ge=De*xe,Ye=Ee(r*Se,ze-We),Xe=Ee(Oe*xe,je-Ge),Ke=-r/2,er=-Oe/2,Qe=Ee(r,ze/Se-Fe),nr=Ee(Oe,je/xe-De);Te&&Ce.drawImage(Te,We,Ge,Ye,Xe,Ke,er,Qe,nr)}},_needsResize:function(){var Ce=this.getTotalObjectScaling();return Ce.scaleX!==this._lastScaleX||Ce.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(Ce,Te){this.setElement(e.util.getById(Ce),Te),e.util.addClass(this.getElement(),e.Image.CSS_CANVAS)},_initConfig:function(Ce){Ce||(Ce={}),this.setOptions(Ce),this._setWidthHeight(Ce)},_initFilters:function(Ce,Te){Ce&&Ce.length?e.util.enlivenObjects(Ce,function(Se){Te&&Te(Se)},"fabric.Image.filters"):Te&&Te()},_setWidthHeight:function(Ce){Ce||(Ce={});var Te=this.getElement();this.width=Ce.width||Te.naturalWidth||Te.width||0,this.height=Ce.height||Te.naturalHeight||Te.height||0},parsePreserveAspectRatioAttribute:function(){var Ce=e.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),Te=this._element.width,Se=this._element.height,xe=1,r=1,Oe=0,Ee=0,Ae=0,Fe=0,De,ze=this.width,je=this.height,We={width:ze,height:je};return Ce&&(Ce.alignX!=="none"||Ce.alignY!=="none")?(Ce.meetOrSlice==="meet"&&(xe=r=e.util.findScaleToFit(this._element,We),De=(ze-Te*xe)/2,Ce.alignX==="Min"&&(Oe=-De),Ce.alignX==="Max"&&(Oe=De),De=(je-Se*r)/2,Ce.alignY==="Min"&&(Ee=-De),Ce.alignY==="Max"&&(Ee=De)),Ce.meetOrSlice==="slice"&&(xe=r=e.util.findScaleToCover(this._element,We),De=Te-ze/xe,Ce.alignX==="Mid"&&(Ae=De/2),Ce.alignX==="Max"&&(Ae=De),De=Se-je/r,Ce.alignY==="Mid"&&(Fe=De/2),Ce.alignY==="Max"&&(Fe=De),Te=ze/xe,Se=je/r)):(xe=ze/Te,r=je/Se),{width:Te,height:Se,scaleX:xe,scaleY:r,offsetLeft:Oe,offsetTop:Ee,cropX:Ae,cropY:Fe}}}),e.Image.CSS_CANVAS="canvas-img",e.Image.prototype.getSvgSrc=e.Image.prototype.getSrc,e.Image.fromObject=function(Ce,Te){var Se=e.util.object.clone(Ce);e.util.loadImage(Se.src,function(xe,r){if(r){Te&&Te(null,!0);return}e.Image.prototype._initFilters.call(Se,Se.filters,function(Oe){Se.filters=Oe||[],e.Image.prototype._initFilters.call(Se,[Se.resizeFilter],function(Ee){Se.resizeFilter=Ee[0],e.util.enlivenObjectEnlivables(Se,Se,function(){var Ae=new e.Image(xe,Se);Te(Ae,!1)})})})},null,Se.crossOrigin)},e.Image.fromURL=function(Ce,Te,Se){e.util.loadImage(Ce,function(xe,r){Te&&Te(new e.Image(xe,Se),r)},null,Se&&Se.crossOrigin)},e.Image.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),e.Image.fromElement=function(Ce,Te,Se){var xe=e.parseAttributes(Ce,e.Image.ATTRIBUTE_NAMES);e.Image.fromURL(xe["xlink:href"],Te,_e(Se?e.util.object.clone(Se):{},xe))}}(Re),e.util.object.extend(e.Object.prototype,{_getAngleValueForStraighten:function(){var ke=this.angle%360;return ke>0?Math.round((ke-1)/90)*90:Math.round(ke/90)*90},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(ke){ke=ke||{};var _e=function(){},Ce=ke.onComplete||_e,Te=ke.onChange||_e,Se=this;return e.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(xe){Se.rotate(xe),Te()},onComplete:function(){Se.setCoords(),Ce()}})}}),e.util.object.extend(e.StaticCanvas.prototype,{straightenObject:function(ke){return ke.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(ke){return ke.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){function ke(Ce,Te){var Se="precision "+Te+` float;
void main(){}`,xe=Ce.createShader(Ce.FRAGMENT_SHADER);return Ce.shaderSource(xe,Se),Ce.compileShader(xe),!!Ce.getShaderParameter(xe,Ce.COMPILE_STATUS)}e.isWebglSupported=function(Ce){if(e.isLikelyNode)return!1;Ce=Ce||e.WebglFilterBackend.prototype.tileSize;var Te=document.createElement("canvas"),Se=Te.getContext("webgl")||Te.getContext("experimental-webgl"),xe=!1;if(Se){e.maxTextureSize=Se.getParameter(Se.MAX_TEXTURE_SIZE),xe=e.maxTextureSize>=Ce;for(var r=["highp","mediump","lowp"],Oe=0;Oe<3;Oe++)if(ke(Se,r[Oe])){e.webGlPrecision=r[Oe];break}}return this.isSupported=xe,xe},e.WebglFilterBackend=_e;function _e(Ce){Ce&&Ce.tileSize&&(this.tileSize=Ce.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}_e.prototype={tileSize:2048,resources:{},setupGLContext:function(Ce,Te){this.dispose(),this.createWebGLCanvas(Ce,Te),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(Ce,Te)},chooseFastestCopyGLTo2DMethod:function(Ce,Te){var Se=typeof window.performance!="undefined",xe;try{new ImageData(1,1),xe=!0}catch{xe=!1}var r=typeof ArrayBuffer!="undefined",Oe=typeof Uint8ClampedArray!="undefined";if(!!(Se&&xe&&r&&Oe)){var Ee=e.util.createCanvasElement(),Ae=new ArrayBuffer(Ce*Te*4);if(e.forceGLPutImageData){this.imageBuffer=Ae,this.copyGLTo2D=Be;return}var Fe={imageBuffer:Ae,destinationWidth:Ce,destinationHeight:Te,targetCanvas:Ee},De,ze,je;Ee.width=Ce,Ee.height=Te,De=window.performance.now(),Ie.call(Fe,this.gl,Fe),ze=window.performance.now()-De,De=window.performance.now(),Be.call(Fe,this.gl,Fe),je=window.performance.now()-De,ze>je?(this.imageBuffer=Ae,this.copyGLTo2D=Be):this.copyGLTo2D=Ie}},createWebGLCanvas:function(Ce,Te){var Se=e.util.createCanvasElement();Se.width=Ce,Se.height=Te;var xe={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},r=Se.getContext("webgl",xe);r||(r=Se.getContext("experimental-webgl",xe)),!!r&&(r.clearColor(0,0,0,0),this.canvas=Se,this.gl=r)},applyFilters:function(Ce,Te,Se,xe,r,Oe){var Ee=this.gl,Ae;Oe&&(Ae=this.getCachedTexture(Oe,Te));var Fe={originalWidth:Te.width||Te.originalWidth,originalHeight:Te.height||Te.originalHeight,sourceWidth:Se,sourceHeight:xe,destinationWidth:Se,destinationHeight:xe,context:Ee,sourceTexture:this.createTexture(Ee,Se,xe,!Ae&&Te),targetTexture:this.createTexture(Ee,Se,xe),originalTexture:Ae||this.createTexture(Ee,Se,xe,!Ae&&Te),passes:Ce.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:r},De=Ee.createFramebuffer();return Ee.bindFramebuffer(Ee.FRAMEBUFFER,De),Ce.forEach(function(ze){ze&&ze.applyTo(Fe)}),Me(Fe),this.copyGLTo2D(Ee,Fe),Ee.bindTexture(Ee.TEXTURE_2D,null),Ee.deleteTexture(Fe.sourceTexture),Ee.deleteTexture(Fe.targetTexture),Ee.deleteFramebuffer(De),r.getContext("2d").setTransform(1,0,0,1,0,0),Fe},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(Ce,Te,Se,xe){var r=Ce.createTexture();return Ce.bindTexture(Ce.TEXTURE_2D,r),Ce.texParameteri(Ce.TEXTURE_2D,Ce.TEXTURE_MAG_FILTER,Ce.NEAREST),Ce.texParameteri(Ce.TEXTURE_2D,Ce.TEXTURE_MIN_FILTER,Ce.NEAREST),Ce.texParameteri(Ce.TEXTURE_2D,Ce.TEXTURE_WRAP_S,Ce.CLAMP_TO_EDGE),Ce.texParameteri(Ce.TEXTURE_2D,Ce.TEXTURE_WRAP_T,Ce.CLAMP_TO_EDGE),xe?Ce.texImage2D(Ce.TEXTURE_2D,0,Ce.RGBA,Ce.RGBA,Ce.UNSIGNED_BYTE,xe):Ce.texImage2D(Ce.TEXTURE_2D,0,Ce.RGBA,Te,Se,0,Ce.RGBA,Ce.UNSIGNED_BYTE,null),r},getCachedTexture:function(Ce,Te){if(this.textureCache[Ce])return this.textureCache[Ce];var Se=this.createTexture(this.gl,Te.width,Te.height,Te);return this.textureCache[Ce]=Se,Se},evictCachesForKey:function(Ce){this.textureCache[Ce]&&(this.gl.deleteTexture(this.textureCache[Ce]),delete this.textureCache[Ce])},copyGLTo2D:Ie,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var Ce=this.gl,Te={renderer:"",vendor:""};if(!Ce)return Te;var Se=Ce.getExtension("WEBGL_debug_renderer_info");if(Se){var xe=Ce.getParameter(Se.UNMASKED_RENDERER_WEBGL),r=Ce.getParameter(Se.UNMASKED_VENDOR_WEBGL);xe&&(Te.renderer=xe.toLowerCase()),r&&(Te.vendor=r.toLowerCase())}return this.gpuInfo=Te,Te}}}();function Me(ke){var _e=ke.targetCanvas,Ce=_e.width,Te=_e.height,Se=ke.destinationWidth,xe=ke.destinationHeight;(Ce!==Se||Te!==xe)&&(_e.width=Se,_e.height=xe)}function Ie(ke,_e){var Ce=ke.canvas,Te=_e.targetCanvas,Se=Te.getContext("2d");Se.translate(0,Te.height),Se.scale(1,-1);var xe=Ce.height-Te.height;Se.drawImage(Ce,0,xe,Te.width,Te.height,0,0,Te.width,Te.height)}function Be(ke,_e){var Ce=_e.targetCanvas,Te=Ce.getContext("2d"),Se=_e.destinationWidth,xe=_e.destinationHeight,r=Se*xe*4,Oe=new Uint8Array(this.imageBuffer,0,r),Ee=new Uint8ClampedArray(this.imageBuffer,0,r);ke.readPixels(0,0,Se,xe,ke.RGBA,ke.UNSIGNED_BYTE,Oe);var Ae=new ImageData(Ee,Se,xe);Te.putImageData(Ae,0,0)}(function(){var ke=function(){};e.Canvas2dFilterBackend=_e;function _e(){}_e.prototype={evictCachesForKey:ke,dispose:ke,clearWebGLCaches:ke,resources:{},applyFilters:function(Ce,Te,Se,xe,r){var Oe=r.getContext("2d");Oe.drawImage(Te,0,0,Se,xe);var Ee=Oe.getImageData(0,0,Se,xe),Ae=Oe.getImageData(0,0,Se,xe),Fe={sourceWidth:Se,sourceHeight:xe,imageData:Ee,originalEl:Te,originalImageData:Ae,canvasEl:r,ctx:Oe,filterBackend:this};return Ce.forEach(function(De){De.applyTo(Fe)}),(Fe.imageData.width!==Se||Fe.imageData.height!==xe)&&(r.width=Fe.imageData.width,r.height=Fe.imageData.height),Oe.putImageData(Fe.imageData,0,0),Fe}}})(),e.Image=e.Image||{},e.Image.filters=e.Image.filters||{},e.Image.filters.BaseFilter=e.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function(ke){ke&&this.setOptions(ke)},setOptions:function(ke){for(var _e in ke)this[_e]=ke[_e]},createProgram:function(ke,_e,Ce){_e=_e||this.fragmentSource,Ce=Ce||this.vertexSource,e.webGlPrecision!=="highp"&&(_e=_e.replace(/precision highp float/g,"precision "+e.webGlPrecision+" float"));var Te=ke.createShader(ke.VERTEX_SHADER);if(ke.shaderSource(Te,Ce),ke.compileShader(Te),!ke.getShaderParameter(Te,ke.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+ke.getShaderInfoLog(Te));var Se=ke.createShader(ke.FRAGMENT_SHADER);if(ke.shaderSource(Se,_e),ke.compileShader(Se),!ke.getShaderParameter(Se,ke.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+ke.getShaderInfoLog(Se));var xe=ke.createProgram();if(ke.attachShader(xe,Te),ke.attachShader(xe,Se),ke.linkProgram(xe),!ke.getProgramParameter(xe,ke.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+ke.getProgramInfoLog(xe));var r=this.getAttributeLocations(ke,xe),Oe=this.getUniformLocations(ke,xe)||{};return Oe.uStepW=ke.getUniformLocation(xe,"uStepW"),Oe.uStepH=ke.getUniformLocation(xe,"uStepH"),{program:xe,attributeLocations:r,uniformLocations:Oe}},getAttributeLocations:function(ke,_e){return{aPosition:ke.getAttribLocation(_e,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(ke,_e,Ce){var Te=_e.aPosition,Se=ke.createBuffer();ke.bindBuffer(ke.ARRAY_BUFFER,Se),ke.enableVertexAttribArray(Te),ke.vertexAttribPointer(Te,2,ke.FLOAT,!1,0,0),ke.bufferData(ke.ARRAY_BUFFER,Ce,ke.STATIC_DRAW)},_setupFrameBuffer:function(ke){var _e=ke.context,Ce,Te;ke.passes>1?(Ce=ke.destinationWidth,Te=ke.destinationHeight,(ke.sourceWidth!==Ce||ke.sourceHeight!==Te)&&(_e.deleteTexture(ke.targetTexture),ke.targetTexture=ke.filterBackend.createTexture(_e,Ce,Te)),_e.framebufferTexture2D(_e.FRAMEBUFFER,_e.COLOR_ATTACHMENT0,_e.TEXTURE_2D,ke.targetTexture,0)):(_e.bindFramebuffer(_e.FRAMEBUFFER,null),_e.finish())},_swapTextures:function(ke){ke.passes--,ke.pass++;var _e=ke.targetTexture;ke.targetTexture=ke.sourceTexture,ke.sourceTexture=_e},isNeutralState:function(){var ke=this.mainParameter,_e=e.Image.filters[this.type].prototype;if(ke)if(Array.isArray(_e[ke])){for(var Ce=_e[ke].length;Ce--;)if(this[ke][Ce]!==_e[ke][Ce])return!1;return!0}else return _e[ke]===this[ke];else return!1},applyTo:function(ke){ke.webgl?(this._setupFrameBuffer(ke),this.applyToWebGL(ke),this._swapTextures(ke)):this.applyTo2d(ke)},retrieveShader:function(ke){return ke.programCache.hasOwnProperty(this.type)||(ke.programCache[this.type]=this.createProgram(ke.context)),ke.programCache[this.type]},applyToWebGL:function(ke){var _e=ke.context,Ce=this.retrieveShader(ke);ke.pass===0&&ke.originalTexture?_e.bindTexture(_e.TEXTURE_2D,ke.originalTexture):_e.bindTexture(_e.TEXTURE_2D,ke.sourceTexture),_e.useProgram(Ce.program),this.sendAttributeData(_e,Ce.attributeLocations,ke.aPosition),_e.uniform1f(Ce.uniformLocations.uStepW,1/ke.sourceWidth),_e.uniform1f(Ce.uniformLocations.uStepH,1/ke.sourceHeight),this.sendUniformData(_e,Ce.uniformLocations),_e.viewport(0,0,ke.destinationWidth,ke.destinationHeight),_e.drawArrays(_e.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(ke,_e,Ce){ke.activeTexture(Ce),ke.bindTexture(ke.TEXTURE_2D,_e),ke.activeTexture(ke.TEXTURE0)},unbindAdditionalTexture:function(ke,_e){ke.activeTexture(_e),ke.bindTexture(ke.TEXTURE_2D,null),ke.activeTexture(ke.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(ke){this[this.mainParameter]=ke},sendUniformData:function(){},createHelpLayer:function(ke){if(!ke.helpLayer){var _e=document.createElement("canvas");_e.width=ke.sourceWidth,_e.height=ke.sourceHeight,ke.helpLayer=_e}},toObject:function(){var ke={type:this.type},_e=this.mainParameter;return _e&&(ke[_e]=this[_e]),ke},toJSON:function(){return this.toObject()}}),e.Image.filters.BaseFilter.fromObject=function(ke,_e){var Ce=new e.Image.filters[ke.type](ke);return _e&&_e(Ce),Ce},function(ke){var _e=ke.fabric||(ke.fabric={}),Ce=_e.Image.filters,Te=_e.util.createClass;Ce.ColorMatrix=Te(Ce.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(Se){this.callSuper("initialize",Se),this.matrix=this.matrix.slice(0)},applyTo2d:function(Se){var xe=Se.imageData,r=xe.data,Oe=r.length,Ee=this.matrix,Ae,Fe,De,ze,je,We=this.colorsOnly;for(je=0;je<Oe;je+=4)Ae=r[je],Fe=r[je+1],De=r[je+2],We?(r[je]=Ae*Ee[0]+Fe*Ee[1]+De*Ee[2]+Ee[4]*255,r[je+1]=Ae*Ee[5]+Fe*Ee[6]+De*Ee[7]+Ee[9]*255,r[je+2]=Ae*Ee[10]+Fe*Ee[11]+De*Ee[12]+Ee[14]*255):(ze=r[je+3],r[je]=Ae*Ee[0]+Fe*Ee[1]+De*Ee[2]+ze*Ee[3]+Ee[4]*255,r[je+1]=Ae*Ee[5]+Fe*Ee[6]+De*Ee[7]+ze*Ee[8]+Ee[9]*255,r[je+2]=Ae*Ee[10]+Fe*Ee[11]+De*Ee[12]+ze*Ee[13]+Ee[14]*255,r[je+3]=Ae*Ee[15]+Fe*Ee[16]+De*Ee[17]+ze*Ee[18]+Ee[19]*255)},getUniformLocations:function(Se,xe){return{uColorMatrix:Se.getUniformLocation(xe,"uColorMatrix"),uConstants:Se.getUniformLocation(xe,"uConstants")}},sendUniformData:function(Se,xe){var r=this.matrix,Oe=[r[0],r[1],r[2],r[3],r[5],r[6],r[7],r[8],r[10],r[11],r[12],r[13],r[15],r[16],r[17],r[18]],Ee=[r[4],r[9],r[14],r[19]];Se.uniformMatrix4fv(xe.uColorMatrix,!1,Oe),Se.uniform4fv(xe.uConstants,Ee)}}),_e.Image.filters.ColorMatrix.fromObject=_e.Image.filters.BaseFilter.fromObject}(Re),function(ke){var _e=ke.fabric||(ke.fabric={}),Ce=_e.Image.filters,Te=_e.util.createClass;Ce.Brightness=Te(Ce.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(Se){if(this.brightness!==0){var xe=Se.imageData,r=xe.data,Oe,Ee=r.length,Ae=Math.round(this.brightness*255);for(Oe=0;Oe<Ee;Oe+=4)r[Oe]=r[Oe]+Ae,r[Oe+1]=r[Oe+1]+Ae,r[Oe+2]=r[Oe+2]+Ae}},getUniformLocations:function(Se,xe){return{uBrightness:Se.getUniformLocation(xe,"uBrightness")}},sendUniformData:function(Se,xe){Se.uniform1f(xe.uBrightness,this.brightness)}}),_e.Image.filters.Brightness.fromObject=_e.Image.filters.BaseFilter.fromObject}(Re),function(ke){var _e=ke.fabric||(ke.fabric={}),Ce=_e.util.object.extend,Te=_e.Image.filters,Se=_e.util.createClass;Te.Convolute=Se(Te.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(xe){var r=Math.sqrt(this.matrix.length),Oe=this.type+"_"+r+"_"+(this.opaque?1:0),Ee=this.fragmentSource[Oe];return xe.programCache.hasOwnProperty(Oe)||(xe.programCache[Oe]=this.createProgram(xe.context,Ee)),xe.programCache[Oe]},applyTo2d:function(xe){var r=xe.imageData,Oe=r.data,Ee=this.matrix,Ae=Math.round(Math.sqrt(Ee.length)),Fe=Math.floor(Ae/2),De=r.width,ze=r.height,je=xe.ctx.createImageData(De,ze),We=je.data,Ge=this.opaque?1:0,Ye,Xe,Ke,er,Qe,nr,ir,cr,br,wr,xr,Sr,lr;for(xr=0;xr<ze;xr++)for(wr=0;wr<De;wr++){for(Qe=(xr*De+wr)*4,Ye=0,Xe=0,Ke=0,er=0,lr=0;lr<Ae;lr++)for(Sr=0;Sr<Ae;Sr++)ir=xr+lr-Fe,nr=wr+Sr-Fe,!(ir<0||ir>=ze||nr<0||nr>=De)&&(cr=(ir*De+nr)*4,br=Ee[lr*Ae+Sr],Ye+=Oe[cr]*br,Xe+=Oe[cr+1]*br,Ke+=Oe[cr+2]*br,Ge||(er+=Oe[cr+3]*br));We[Qe]=Ye,We[Qe+1]=Xe,We[Qe+2]=Ke,Ge?We[Qe+3]=Oe[Qe+3]:We[Qe+3]=er}xe.imageData=je},getUniformLocations:function(xe,r){return{uMatrix:xe.getUniformLocation(r,"uMatrix"),uOpaque:xe.getUniformLocation(r,"uOpaque"),uHalfSize:xe.getUniformLocation(r,"uHalfSize"),uSize:xe.getUniformLocation(r,"uSize")}},sendUniformData:function(xe,r){xe.uniform1fv(r.uMatrix,this.matrix)},toObject:function(){return Ce(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),_e.Image.filters.Convolute.fromObject=_e.Image.filters.BaseFilter.fromObject}(Re),function(ke){var _e=ke.fabric||(ke.fabric={}),Ce=_e.Image.filters,Te=_e.util.createClass;Ce.Grayscale=Te(Ce.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(Se){var xe=Se.imageData,r=xe.data,Oe,Ee=r.length,Ae,Fe=this.mode;for(Oe=0;Oe<Ee;Oe+=4)Fe==="average"?Ae=(r[Oe]+r[Oe+1]+r[Oe+2])/3:Fe==="lightness"?Ae=(Math.min(r[Oe],r[Oe+1],r[Oe+2])+Math.max(r[Oe],r[Oe+1],r[Oe+2]))/2:Fe==="luminosity"&&(Ae=.21*r[Oe]+.72*r[Oe+1]+.07*r[Oe+2]),r[Oe]=Ae,r[Oe+1]=Ae,r[Oe+2]=Ae},retrieveShader:function(Se){var xe=this.type+"_"+this.mode;if(!Se.programCache.hasOwnProperty(xe)){var r=this.fragmentSource[this.mode];Se.programCache[xe]=this.createProgram(Se.context,r)}return Se.programCache[xe]},getUniformLocations:function(Se,xe){return{uMode:Se.getUniformLocation(xe,"uMode")}},sendUniformData:function(Se,xe){var r=1;Se.uniform1i(xe.uMode,r)},isNeutralState:function(){return!1}}),_e.Image.filters.Grayscale.fromObject=_e.Image.filters.BaseFilter.fromObject}(Re),function(ke){var _e=ke.fabric||(ke.fabric={}),Ce=_e.Image.filters,Te=_e.util.createClass;Ce.Invert=Te(Ce.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(Se){var xe=Se.imageData,r=xe.data,Oe,Ee=r.length;for(Oe=0;Oe<Ee;Oe+=4)r[Oe]=255-r[Oe],r[Oe+1]=255-r[Oe+1],r[Oe+2]=255-r[Oe+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(Se,xe){return{uInvert:Se.getUniformLocation(xe,"uInvert")}},sendUniformData:function(Se,xe){Se.uniform1i(xe.uInvert,this.invert)}}),_e.Image.filters.Invert.fromObject=_e.Image.filters.BaseFilter.fromObject}(Re),function(ke){var _e=ke.fabric||(ke.fabric={}),Ce=_e.util.object.extend,Te=_e.Image.filters,Se=_e.util.createClass;Te.Noise=Se(Te.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(xe){if(this.noise!==0){var r=xe.imageData,Oe=r.data,Ee,Ae=Oe.length,Fe=this.noise,De;for(Ee=0,Ae=Oe.length;Ee<Ae;Ee+=4)De=(.5-Math.random())*Fe,Oe[Ee]+=De,Oe[Ee+1]+=De,Oe[Ee+2]+=De}},getUniformLocations:function(xe,r){return{uNoise:xe.getUniformLocation(r,"uNoise"),uSeed:xe.getUniformLocation(r,"uSeed")}},sendUniformData:function(xe,r){xe.uniform1f(r.uNoise,this.noise/255),xe.uniform1f(r.uSeed,Math.random())},toObject:function(){return Ce(this.callSuper("toObject"),{noise:this.noise})}}),_e.Image.filters.Noise.fromObject=_e.Image.filters.BaseFilter.fromObject}(Re),function(ke){var _e=ke.fabric||(ke.fabric={}),Ce=_e.Image.filters,Te=_e.util.createClass;Ce.Pixelate=Te(Ce.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(Se){var xe=Se.imageData,r=xe.data,Oe=xe.height,Ee=xe.width,Ae,Fe,De,ze,je,We,Ge,Ye,Xe,Ke,er;for(Fe=0;Fe<Oe;Fe+=this.blocksize)for(De=0;De<Ee;De+=this.blocksize)for(Ae=Fe*4*Ee+De*4,ze=r[Ae],je=r[Ae+1],We=r[Ae+2],Ge=r[Ae+3],Ke=Math.min(Fe+this.blocksize,Oe),er=Math.min(De+this.blocksize,Ee),Ye=Fe;Ye<Ke;Ye++)for(Xe=De;Xe<er;Xe++)Ae=Ye*4*Ee+Xe*4,r[Ae]=ze,r[Ae+1]=je,r[Ae+2]=We,r[Ae+3]=Ge},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(Se,xe){return{uBlocksize:Se.getUniformLocation(xe,"uBlocksize"),uStepW:Se.getUniformLocation(xe,"uStepW"),uStepH:Se.getUniformLocation(xe,"uStepH")}},sendUniformData:function(Se,xe){Se.uniform1f(xe.uBlocksize,this.blocksize)}}),_e.Image.filters.Pixelate.fromObject=_e.Image.filters.BaseFilter.fromObject}(Re),function(ke){var _e=ke.fabric||(ke.fabric={}),Ce=_e.util.object.extend,Te=_e.Image.filters,Se=_e.util.createClass;Te.RemoveColor=Se(Te.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(xe){var r=xe.imageData,Oe=r.data,Ee,Ae=this.distance*255,Fe,De,ze,je=new _e.Color(this.color).getSource(),We=[je[0]-Ae,je[1]-Ae,je[2]-Ae],Ge=[je[0]+Ae,je[1]+Ae,je[2]+Ae];for(Ee=0;Ee<Oe.length;Ee+=4)Fe=Oe[Ee],De=Oe[Ee+1],ze=Oe[Ee+2],Fe>We[0]&&De>We[1]&&ze>We[2]&&Fe<Ge[0]&&De<Ge[1]&&ze<Ge[2]&&(Oe[Ee+3]=0)},getUniformLocations:function(xe,r){return{uLow:xe.getUniformLocation(r,"uLow"),uHigh:xe.getUniformLocation(r,"uHigh")}},sendUniformData:function(xe,r){var Oe=new _e.Color(this.color).getSource(),Ee=parseFloat(this.distance),Ae=[0+Oe[0]/255-Ee,0+Oe[1]/255-Ee,0+Oe[2]/255-Ee,1],Fe=[Oe[0]/255+Ee,Oe[1]/255+Ee,Oe[2]/255+Ee,1];xe.uniform4fv(r.uLow,Ae),xe.uniform4fv(r.uHigh,Fe)},toObject:function(){return Ce(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),_e.Image.filters.RemoveColor.fromObject=_e.Image.filters.BaseFilter.fromObject}(Re),function(ke){var _e=ke.fabric||(ke.fabric={}),Ce=_e.Image.filters,Te=_e.util.createClass,Se={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var xe in Se)Ce[xe]=Te(Ce.ColorMatrix,{type:xe,matrix:Se[xe],mainParameter:!1,colorsOnly:!0}),_e.Image.filters[xe].fromObject=_e.Image.filters.BaseFilter.fromObject}(Re),function(ke){var _e=ke.fabric,Ce=_e.Image.filters,Te=_e.util.createClass;Ce.BlendColor=Te(Ce.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(Se){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[Se]+`}
}`},retrieveShader:function(Se){var xe=this.type+"_"+this.mode,r;return Se.programCache.hasOwnProperty(xe)||(r=this.buildSource(this.mode),Se.programCache[xe]=this.createProgram(Se.context,r)),Se.programCache[xe]},applyTo2d:function(Se){var xe=Se.imageData,r=xe.data,Oe=r.length,Ee,Ae,Fe,De,ze,je,We,Ge=1-this.alpha;We=new _e.Color(this.color).getSource(),Ee=We[0]*this.alpha,Ae=We[1]*this.alpha,Fe=We[2]*this.alpha;for(var Ye=0;Ye<Oe;Ye+=4)switch(De=r[Ye],ze=r[Ye+1],je=r[Ye+2],this.mode){case"multiply":r[Ye]=De*Ee/255,r[Ye+1]=ze*Ae/255,r[Ye+2]=je*Fe/255;break;case"screen":r[Ye]=255-(255-De)*(255-Ee)/255,r[Ye+1]=255-(255-ze)*(255-Ae)/255,r[Ye+2]=255-(255-je)*(255-Fe)/255;break;case"add":r[Ye]=De+Ee,r[Ye+1]=ze+Ae,r[Ye+2]=je+Fe;break;case"diff":case"difference":r[Ye]=Math.abs(De-Ee),r[Ye+1]=Math.abs(ze-Ae),r[Ye+2]=Math.abs(je-Fe);break;case"subtract":r[Ye]=De-Ee,r[Ye+1]=ze-Ae,r[Ye+2]=je-Fe;break;case"darken":r[Ye]=Math.min(De,Ee),r[Ye+1]=Math.min(ze,Ae),r[Ye+2]=Math.min(je,Fe);break;case"lighten":r[Ye]=Math.max(De,Ee),r[Ye+1]=Math.max(ze,Ae),r[Ye+2]=Math.max(je,Fe);break;case"overlay":r[Ye]=Ee<128?2*De*Ee/255:255-2*(255-De)*(255-Ee)/255,r[Ye+1]=Ae<128?2*ze*Ae/255:255-2*(255-ze)*(255-Ae)/255,r[Ye+2]=Fe<128?2*je*Fe/255:255-2*(255-je)*(255-Fe)/255;break;case"exclusion":r[Ye]=Ee+De-2*Ee*De/255,r[Ye+1]=Ae+ze-2*Ae*ze/255,r[Ye+2]=Fe+je-2*Fe*je/255;break;case"tint":r[Ye]=Ee+De*Ge,r[Ye+1]=Ae+ze*Ge,r[Ye+2]=Fe+je*Ge}},getUniformLocations:function(Se,xe){return{uColor:Se.getUniformLocation(xe,"uColor")}},sendUniformData:function(Se,xe){var r=new _e.Color(this.color).getSource();r[0]=this.alpha*r[0]/255,r[1]=this.alpha*r[1]/255,r[2]=this.alpha*r[2]/255,r[3]=this.alpha,Se.uniform4fv(xe.uColor,r)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),_e.Image.filters.BlendColor.fromObject=_e.Image.filters.BaseFilter.fromObject}(Re),function(ke){var _e=ke.fabric,Ce=_e.Image.filters,Te=_e.util.createClass;Ce.BlendImage=Te(Ce.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(Se){var xe=this.type+"_"+this.mode,r=this.fragmentSource[this.mode];return Se.programCache.hasOwnProperty(xe)||(Se.programCache[xe]=this.createProgram(Se.context,r)),Se.programCache[xe]},applyToWebGL:function(Se){var xe=Se.context,r=this.createTexture(Se.filterBackend,this.image);this.bindAdditionalTexture(xe,r,xe.TEXTURE1),this.callSuper("applyToWebGL",Se),this.unbindAdditionalTexture(xe,xe.TEXTURE1)},createTexture:function(Se,xe){return Se.getCachedTexture(xe.cacheKey,xe._element)},calculateMatrix:function(){var Se=this.image,xe=Se._element.width,r=Se._element.height;return[1/Se.scaleX,0,0,0,1/Se.scaleY,0,-Se.left/xe,-Se.top/r,1]},applyTo2d:function(Se){var xe=Se.imageData,r=Se.filterBackend.resources,Oe=xe.data,Ee=Oe.length,Ae=xe.width,Fe=xe.height,De,ze,je,We,Ge,Ye,Xe,Ke,er,Qe,nr=this.image,ir;r.blendImage||(r.blendImage=_e.util.createCanvasElement()),er=r.blendImage,Qe=er.getContext("2d"),er.width!==Ae||er.height!==Fe?(er.width=Ae,er.height=Fe):Qe.clearRect(0,0,Ae,Fe),Qe.setTransform(nr.scaleX,0,0,nr.scaleY,nr.left,nr.top),Qe.drawImage(nr._element,0,0,Ae,Fe),ir=Qe.getImageData(0,0,Ae,Fe).data;for(var cr=0;cr<Ee;cr+=4)switch(Ge=Oe[cr],Ye=Oe[cr+1],Xe=Oe[cr+2],Ke=Oe[cr+3],De=ir[cr],ze=ir[cr+1],je=ir[cr+2],We=ir[cr+3],this.mode){case"multiply":Oe[cr]=Ge*De/255,Oe[cr+1]=Ye*ze/255,Oe[cr+2]=Xe*je/255,Oe[cr+3]=Ke*We/255;break;case"mask":Oe[cr+3]=We;break}},getUniformLocations:function(Se,xe){return{uTransformMatrix:Se.getUniformLocation(xe,"uTransformMatrix"),uImage:Se.getUniformLocation(xe,"uImage")}},sendUniformData:function(Se,xe){var r=this.calculateMatrix();Se.uniform1i(xe.uImage,1),Se.uniformMatrix3fv(xe.uTransformMatrix,!1,r)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),_e.Image.filters.BlendImage.fromObject=function(Se,xe){_e.Image.fromObject(Se.image,function(r){var Oe=_e.util.object.clone(Se);Oe.image=r,xe(new _e.Image.filters.BlendImage(Oe))})}}(Re),function(ke){var _e=ke.fabric||(ke.fabric={}),Ce=Math.pow,Te=Math.floor,Se=Math.sqrt,xe=Math.abs,r=Math.round,Oe=Math.sin,Ee=Math.ceil,Ae=_e.Image.filters,Fe=_e.util.createClass;Ae.Resize=Fe(Ae.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(De,ze){return{uDelta:De.getUniformLocation(ze,"uDelta"),uTaps:De.getUniformLocation(ze,"uTaps")}},sendUniformData:function(De,ze){De.uniform2fv(ze.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),De.uniform1fv(ze.uTaps,this.taps)},retrieveShader:function(De){var ze=this.getFilterWindow(),je=this.type+"_"+ze;if(!De.programCache.hasOwnProperty(je)){var We=this.generateShader(ze);De.programCache[je]=this.createProgram(De.context,We)}return De.programCache[je]},getFilterWindow:function(){var De=this.tempScale;return Math.ceil(this.lanczosLobes/De)},getTaps:function(){for(var De=this.lanczosCreate(this.lanczosLobes),ze=this.tempScale,je=this.getFilterWindow(),We=new Array(je),Ge=1;Ge<=je;Ge++)We[Ge-1]=De(Ge*ze);return We},generateShader:function(De){for(var ze=new Array(De),je=this.fragmentSourceTOP,De,We=1;We<=De;We++)ze[We-1]=We+".0 * uDelta";return je+="uniform float uTaps["+De+`];
`,je+=`void main() {
`,je+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,je+=`  float sum = 1.0;
`,ze.forEach(function(Ge,Ye){je+="  color += texture2D(uTexture, vTexCoord + "+Ge+") * uTaps["+Ye+`];
`,je+="  color += texture2D(uTexture, vTexCoord - "+Ge+") * uTaps["+Ye+`];
`,je+="  sum += 2.0 * uTaps["+Ye+`];
`}),je+=`  gl_FragColor = color / sum;
`,je+="}",je},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(De){De.webgl?(De.passes++,this.width=De.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=De.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),De.destinationWidth=this.dW,this._setupFrameBuffer(De),this.applyToWebGL(De),this._swapTextures(De),De.sourceWidth=De.destinationWidth,this.height=De.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),De.destinationHeight=this.dH,this._setupFrameBuffer(De),this.applyToWebGL(De),this._swapTextures(De),De.sourceHeight=De.destinationHeight):this.applyTo2d(De)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(De){return function(ze){if(ze>=De||ze<=-De)return 0;if(ze<11920929e-14&&ze>-11920929e-14)return 1;ze*=Math.PI;var je=ze/De;return Oe(ze)/ze*Oe(je)/je}},applyTo2d:function(De){var ze=De.imageData,je=this.scaleX,We=this.scaleY;this.rcpScaleX=1/je,this.rcpScaleY=1/We;var Ge=ze.width,Ye=ze.height,Xe=r(Ge*je),Ke=r(Ye*We),er;this.resizeType==="sliceHack"?er=this.sliceByTwo(De,Ge,Ye,Xe,Ke):this.resizeType==="hermite"?er=this.hermiteFastResize(De,Ge,Ye,Xe,Ke):this.resizeType==="bilinear"?er=this.bilinearFiltering(De,Ge,Ye,Xe,Ke):this.resizeType==="lanczos"&&(er=this.lanczosResize(De,Ge,Ye,Xe,Ke)),De.imageData=er},sliceByTwo:function(De,ze,je,We,Ge){var Ye=De.imageData,Xe=.5,Ke=!1,er=!1,Qe=ze*Xe,nr=je*Xe,ir=_e.filterBackend.resources,cr,br,wr=0,xr=0,Sr=ze,lr=0;for(ir.sliceByTwo||(ir.sliceByTwo=document.createElement("canvas")),cr=ir.sliceByTwo,(cr.width<ze*1.5||cr.height<je)&&(cr.width=ze*1.5,cr.height=je),br=cr.getContext("2d"),br.clearRect(0,0,ze*1.5,je),br.putImageData(Ye,0,0),We=Te(We),Ge=Te(Ge);!Ke||!er;)ze=Qe,je=nr,We<Te(Qe*Xe)?Qe=Te(Qe*Xe):(Qe=We,Ke=!0),Ge<Te(nr*Xe)?nr=Te(nr*Xe):(nr=Ge,er=!0),br.drawImage(cr,wr,xr,ze,je,Sr,lr,Qe,nr),wr=Sr,xr=lr,lr+=nr;return br.getImageData(wr,xr,We,Ge)},lanczosResize:function(De,ze,je,We,Ge){function Ye($e){var Ve,Je,Ze,St,vr,mr,Cr,_r,pr,dr,ur;for(lr.x=($e+.5)*nr,fr.x=Te(lr.x),Ve=0;Ve<Ge;Ve++){for(lr.y=(Ve+.5)*ir,fr.y=Te(lr.y),vr=0,mr=0,Cr=0,_r=0,pr=0,Je=fr.x-wr;Je<=fr.x+wr;Je++)if(!(Je<0||Je>=ze)){dr=Te(1e3*xe(Je-lr.x)),Sr[dr]||(Sr[dr]={});for(var rr=fr.y-xr;rr<=fr.y+xr;rr++)rr<0||rr>=je||(ur=Te(1e3*xe(rr-lr.y)),Sr[dr][ur]||(Sr[dr][ur]=Qe(Se(Ce(dr*cr,2)+Ce(ur*br,2))/1e3)),Ze=Sr[dr][ur],Ze>0&&(St=(rr*ze+Je)*4,vr+=Ze,mr+=Ze*Xe[St],Cr+=Ze*Xe[St+1],_r+=Ze*Xe[St+2],pr+=Ze*Xe[St+3]))}St=(Ve*We+$e)*4,er[St]=mr/vr,er[St+1]=Cr/vr,er[St+2]=_r/vr,er[St+3]=pr/vr}return++$e<We?Ye($e):Ke}var Xe=De.imageData.data,Ke=De.ctx.createImageData(We,Ge),er=Ke.data,Qe=this.lanczosCreate(this.lanczosLobes),nr=this.rcpScaleX,ir=this.rcpScaleY,cr=2/this.rcpScaleX,br=2/this.rcpScaleY,wr=Ee(nr*this.lanczosLobes/2),xr=Ee(ir*this.lanczosLobes/2),Sr={},lr={},fr={};return Ye(0)},bilinearFiltering:function(De,ze,je,We,Ge){var Ye,Xe,Ke,er,Qe,nr,ir,cr,br,wr,xr,Sr,lr=0,fr,$e=this.rcpScaleX,Ve=this.rcpScaleY,Je=4*(ze-1),Ze=De.imageData,St=Ze.data,vr=De.ctx.createImageData(We,Ge),mr=vr.data;for(ir=0;ir<Ge;ir++)for(cr=0;cr<We;cr++)for(Qe=Te($e*cr),nr=Te(Ve*ir),br=$e*cr-Qe,wr=Ve*ir-nr,fr=4*(nr*ze+Qe),xr=0;xr<4;xr++)Ye=St[fr+xr],Xe=St[fr+4+xr],Ke=St[fr+Je+xr],er=St[fr+Je+4+xr],Sr=Ye*(1-br)*(1-wr)+Xe*br*(1-wr)+Ke*wr*(1-br)+er*br*wr,mr[lr++]=Sr;return vr},hermiteFastResize:function(De,ze,je,We,Ge){for(var Ye=this.rcpScaleX,Xe=this.rcpScaleY,Ke=Ee(Ye/2),er=Ee(Xe/2),Qe=De.imageData,nr=Qe.data,ir=De.ctx.createImageData(We,Ge),cr=ir.data,br=0;br<Ge;br++)for(var wr=0;wr<We;wr++){for(var xr=(wr+br*We)*4,Sr=0,lr=0,fr=0,$e=0,Ve=0,Je=0,Ze=0,St=(br+.5)*Xe,vr=Te(br*Xe);vr<(br+1)*Xe;vr++)for(var mr=xe(St-(vr+.5))/er,Cr=(wr+.5)*Ye,_r=mr*mr,pr=Te(wr*Ye);pr<(wr+1)*Ye;pr++){var dr=xe(Cr-(pr+.5))/Ke,ur=Se(_r+dr*dr);ur>1&&ur<-1||(Sr=2*ur*ur*ur-3*ur*ur+1,Sr>0&&(dr=4*(pr+vr*ze),Ze+=Sr*nr[dr+3],fr+=Sr,nr[dr+3]<255&&(Sr=Sr*nr[dr+3]/250),$e+=Sr*nr[dr],Ve+=Sr*nr[dr+1],Je+=Sr*nr[dr+2],lr+=Sr))}cr[xr]=$e/lr,cr[xr+1]=Ve/lr,cr[xr+2]=Je/lr,cr[xr+3]=Ze/fr}return ir},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),_e.Image.filters.Resize.fromObject=_e.Image.filters.BaseFilter.fromObject}(Re),function(ke){var _e=ke.fabric||(ke.fabric={}),Ce=_e.Image.filters,Te=_e.util.createClass;Ce.Contrast=Te(Ce.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(Se){if(this.contrast!==0){var xe=Se.imageData,r,Oe,Ee=xe.data,Oe=Ee.length,Ae=Math.floor(this.contrast*255),Fe=259*(Ae+255)/(255*(259-Ae));for(r=0;r<Oe;r+=4)Ee[r]=Fe*(Ee[r]-128)+128,Ee[r+1]=Fe*(Ee[r+1]-128)+128,Ee[r+2]=Fe*(Ee[r+2]-128)+128}},getUniformLocations:function(Se,xe){return{uContrast:Se.getUniformLocation(xe,"uContrast")}},sendUniformData:function(Se,xe){Se.uniform1f(xe.uContrast,this.contrast)}}),_e.Image.filters.Contrast.fromObject=_e.Image.filters.BaseFilter.fromObject}(Re),function(ke){var _e=ke.fabric||(ke.fabric={}),Ce=_e.Image.filters,Te=_e.util.createClass;Ce.Saturation=Te(Ce.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(Se){if(this.saturation!==0){var xe=Se.imageData,r=xe.data,Oe=r.length,Ee=-this.saturation,Ae,Fe;for(Ae=0;Ae<Oe;Ae+=4)Fe=Math.max(r[Ae],r[Ae+1],r[Ae+2]),r[Ae]+=Fe!==r[Ae]?(Fe-r[Ae])*Ee:0,r[Ae+1]+=Fe!==r[Ae+1]?(Fe-r[Ae+1])*Ee:0,r[Ae+2]+=Fe!==r[Ae+2]?(Fe-r[Ae+2])*Ee:0}},getUniformLocations:function(Se,xe){return{uSaturation:Se.getUniformLocation(xe,"uSaturation")}},sendUniformData:function(Se,xe){Se.uniform1f(xe.uSaturation,-this.saturation)}}),_e.Image.filters.Saturation.fromObject=_e.Image.filters.BaseFilter.fromObject}(Re),function(ke){var _e=ke.fabric||(ke.fabric={}),Ce=_e.Image.filters,Te=_e.util.createClass;Ce.Vibrance=Te(Ce.BaseFilter,{type:"Vibrance",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uVibrance;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float max = max(color.r, max(color.g, color.b));
float avg = (color.r + color.g + color.b) / 3.0;
float amt = (abs(max - avg) * 2.0) * uVibrance;
color.r += max != color.r ? (max - color.r) * amt : 0.00;
color.g += max != color.g ? (max - color.g) * amt : 0.00;
color.b += max != color.b ? (max - color.b) * amt : 0.00;
gl_FragColor = color;
}`,vibrance:0,mainParameter:"vibrance",applyTo2d:function(Se){if(this.vibrance!==0){var xe=Se.imageData,r=xe.data,Oe=r.length,Ee=-this.vibrance,Ae,Fe,De,ze;for(Ae=0;Ae<Oe;Ae+=4)Fe=Math.max(r[Ae],r[Ae+1],r[Ae+2]),De=(r[Ae]+r[Ae+1]+r[Ae+2])/3,ze=Math.abs(Fe-De)*2/255*Ee,r[Ae]+=Fe!==r[Ae]?(Fe-r[Ae])*ze:0,r[Ae+1]+=Fe!==r[Ae+1]?(Fe-r[Ae+1])*ze:0,r[Ae+2]+=Fe!==r[Ae+2]?(Fe-r[Ae+2])*ze:0}},getUniformLocations:function(Se,xe){return{uVibrance:Se.getUniformLocation(xe,"uVibrance")}},sendUniformData:function(Se,xe){Se.uniform1f(xe.uVibrance,-this.vibrance)}}),_e.Image.filters.Vibrance.fromObject=_e.Image.filters.BaseFilter.fromObject}(Re),function(ke){var _e=ke.fabric||(ke.fabric={}),Ce=_e.Image.filters,Te=_e.util.createClass;Ce.Blur=Te(Ce.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(Se){Se.webgl?(this.aspectRatio=Se.sourceWidth/Se.sourceHeight,Se.passes++,this._setupFrameBuffer(Se),this.horizontal=!0,this.applyToWebGL(Se),this._swapTextures(Se),this._setupFrameBuffer(Se),this.horizontal=!1,this.applyToWebGL(Se),this._swapTextures(Se)):this.applyTo2d(Se)},applyTo2d:function(Se){Se.imageData=this.simpleBlur(Se)},simpleBlur:function(Se){var xe=Se.filterBackend.resources,r,Oe,Ee=Se.imageData.width,Ae=Se.imageData.height;xe.blurLayer1||(xe.blurLayer1=_e.util.createCanvasElement(),xe.blurLayer2=_e.util.createCanvasElement()),r=xe.blurLayer1,Oe=xe.blurLayer2,(r.width!==Ee||r.height!==Ae)&&(Oe.width=r.width=Ee,Oe.height=r.height=Ae);var Fe=r.getContext("2d"),De=Oe.getContext("2d"),ze=15,je,We,Ge,Ye,Xe=this.blur*.06*.5;for(Fe.putImageData(Se.imageData,0,0),De.clearRect(0,0,Ee,Ae),Ye=-ze;Ye<=ze;Ye++)je=(Math.random()-.5)/4,We=Ye/ze,Ge=Xe*We*Ee+je,De.globalAlpha=1-Math.abs(We),De.drawImage(r,Ge,je),Fe.drawImage(Oe,0,0),De.globalAlpha=1,De.clearRect(0,0,Oe.width,Oe.height);for(Ye=-ze;Ye<=ze;Ye++)je=(Math.random()-.5)/4,We=Ye/ze,Ge=Xe*We*Ae+je,De.globalAlpha=1-Math.abs(We),De.drawImage(r,je,Ge),Fe.drawImage(Oe,0,0),De.globalAlpha=1,De.clearRect(0,0,Oe.width,Oe.height);Se.ctx.drawImage(r,0,0);var Ke=Se.ctx.getImageData(0,0,r.width,r.height);return Fe.globalAlpha=1,Fe.clearRect(0,0,r.width,r.height),Ke},getUniformLocations:function(Se,xe){return{delta:Se.getUniformLocation(xe,"uDelta")}},sendUniformData:function(Se,xe){var r=this.chooseRightDelta();Se.uniform2fv(xe.delta,r)},chooseRightDelta:function(){var Se=1,xe=[0,0],r;return this.horizontal?this.aspectRatio>1&&(Se=1/this.aspectRatio):this.aspectRatio<1&&(Se=this.aspectRatio),r=Se*this.blur*.12,this.horizontal?xe[0]=r:xe[1]=r,xe}}),Ce.Blur.fromObject=_e.Image.filters.BaseFilter.fromObject}(Re),function(ke){var _e=ke.fabric||(ke.fabric={}),Ce=_e.Image.filters,Te=_e.util.createClass;Ce.Gamma=Te(Ce.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(Se){this.gamma=[1,1,1],Ce.BaseFilter.prototype.initialize.call(this,Se)},applyTo2d:function(Se){var xe=Se.imageData,r=xe.data,Oe=this.gamma,Ee=r.length,Ae=1/Oe[0],Fe=1/Oe[1],De=1/Oe[2],ze;for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),ze=0,Ee=256;ze<Ee;ze++)this.rVals[ze]=Math.pow(ze/255,Ae)*255,this.gVals[ze]=Math.pow(ze/255,Fe)*255,this.bVals[ze]=Math.pow(ze/255,De)*255;for(ze=0,Ee=r.length;ze<Ee;ze+=4)r[ze]=this.rVals[r[ze]],r[ze+1]=this.gVals[r[ze+1]],r[ze+2]=this.bVals[r[ze+2]]},getUniformLocations:function(Se,xe){return{uGamma:Se.getUniformLocation(xe,"uGamma")}},sendUniformData:function(Se,xe){Se.uniform3fv(xe.uGamma,this.gamma)}}),_e.Image.filters.Gamma.fromObject=_e.Image.filters.BaseFilter.fromObject}(Re),function(ke){var _e=ke.fabric||(ke.fabric={}),Ce=_e.Image.filters,Te=_e.util.createClass;Ce.Composed=Te(Ce.BaseFilter,{type:"Composed",subFilters:[],initialize:function(Se){this.callSuper("initialize",Se),this.subFilters=this.subFilters.slice(0)},applyTo:function(Se){Se.passes+=this.subFilters.length-1,this.subFilters.forEach(function(xe){xe.applyTo(Se)})},toObject:function(){return _e.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(Se){return Se.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(Se){return!Se.isNeutralState()})}}),_e.Image.filters.Composed.fromObject=function(Se,xe){var r=Se.subFilters||[],Oe=r.map(function(Ae){return new _e.Image.filters[Ae.type](Ae)}),Ee=new _e.Image.filters.Composed({subFilters:Oe});return xe&&xe(Ee),Ee}}(Re),function(ke){var _e=ke.fabric||(ke.fabric={}),Ce=_e.Image.filters,Te=_e.util.createClass;Ce.HueRotation=Te(Ce.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var Se=this.rotation*Math.PI,xe=_e.util.cos(Se),r=_e.util.sin(Se),Oe=1/3,Ee=Math.sqrt(Oe)*r,Ae=1-xe;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=xe+Ae/3,this.matrix[1]=Oe*Ae-Ee,this.matrix[2]=Oe*Ae+Ee,this.matrix[5]=Oe*Ae+Ee,this.matrix[6]=xe+Oe*Ae,this.matrix[7]=Oe*Ae-Ee,this.matrix[10]=Oe*Ae-Ee,this.matrix[11]=Oe*Ae+Ee,this.matrix[12]=xe+Oe*Ae},isNeutralState:function(Se){return this.calculateMatrix(),Ce.BaseFilter.prototype.isNeutralState.call(this,Se)},applyTo:function(Se){this.calculateMatrix(),Ce.BaseFilter.prototype.applyTo.call(this,Se)}}),_e.Image.filters.HueRotation.fromObject=_e.Image.filters.BaseFilter.fromObject}(Re),function(ke){var _e=ke.fabric||(ke.fabric={}),Ce=_e.util.object.clone;if(_e.Text){_e.warn("fabric.Text is already defined");return}var Te="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");_e.Text=_e.util.createClass(_e.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:_e.Object.prototype.stateProperties.concat(Te),cacheProperties:_e.Object.prototype.cacheProperties.concat(Te),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(Se,xe){this.styles=xe?xe.styles||{}:{},this.text=Se,this.__skipDimension=!0,this.callSuper("initialize",xe),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var Se=this.path;Se&&(Se.segmentsInfo=_e.util.getPathSegmentsInfo(Se.path))},getMeasuringContext:function(){return _e._measuringContext||(_e._measuringContext=this.canvas&&this.canvas.contextCache||_e.util.createCanvasElement().getContext("2d")),_e._measuringContext},_splitText:function(){var Se=this._splitTextIntoLines(this.text);return this.textLines=Se.lines,this._textLines=Se.graphemeLines,this._unwrappedTextLines=Se._unwrappedLines,this._text=Se.graphemeText,Se},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var Se,xe,r,Oe,Ee,Ae,Fe,De=0,ze=this._textLines.length;De<ze;De++)if(!(this.textAlign!=="justify"&&(De===ze-1||this.isEndOfWrapping(De)))&&(Oe=0,Ee=this._textLines[De],xe=this.getLineWidth(De),xe<this.width&&(Fe=this.textLines[De].match(this._reSpacesAndTabs)))){r=Fe.length,Se=(this.width-xe)/r;for(var je=0,We=Ee.length;je<=We;je++)Ae=this.__charBounds[De][je],this._reSpaceAndTab.test(Ee[je])?(Ae.width+=Se,Ae.kernedWidth+=Se,Ae.left+=Oe,Oe+=Se):Ae.left+=Oe}},isEndOfWrapping:function(Se){return Se===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var Se=this.callSuper("_getCacheCanvasDimensions"),xe=this.fontSize;return Se.width+=xe*Se.zoomX,Se.height+=xe*Se.zoomY,Se},_render:function(Se){var xe=this.path;xe&&!xe.isNotVisible()&&xe._render(Se),this._setTextStyles(Se),this._renderTextLinesBackground(Se),this._renderTextDecoration(Se,"underline"),this._renderText(Se),this._renderTextDecoration(Se,"overline"),this._renderTextDecoration(Se,"linethrough")},_renderText:function(Se){this.paintFirst==="stroke"?(this._renderTextStroke(Se),this._renderTextFill(Se)):(this._renderTextFill(Se),this._renderTextStroke(Se))},_setTextStyles:function(Se,xe,r){if(Se.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":Se.textBaseline="middle";break;case"ascender":Se.textBaseline="top";break;case"descender":Se.textBaseline="bottom";break}Se.font=this._getFontDeclaration(xe,r)},calcTextWidth:function(){for(var Se=this.getLineWidth(0),xe=1,r=this._textLines.length;xe<r;xe++){var Oe=this.getLineWidth(xe);Oe>Se&&(Se=Oe)}return Se},_renderTextLine:function(Se,xe,r,Oe,Ee,Ae){this._renderChars(Se,xe,r,Oe,Ee,Ae)},_renderTextLinesBackground:function(Se){if(!(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))){for(var xe,r,Oe=Se.fillStyle,Ee,Ae,Fe=this._getLeftOffset(),De=this._getTopOffset(),ze=0,je=0,We,Ge,Ye=this.path,Xe,Ke=0,er=this._textLines.length;Ke<er;Ke++){if(xe=this.getHeightOfLine(Ke),!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",Ke)){De+=xe;continue}Ee=this._textLines[Ke],r=this._getLineLeftOffset(Ke),je=0,ze=0,Ae=this.getValueOfPropertyAt(Ke,0,"textBackgroundColor");for(var Qe=0,nr=Ee.length;Qe<nr;Qe++)We=this.__charBounds[Ke][Qe],Ge=this.getValueOfPropertyAt(Ke,Qe,"textBackgroundColor"),Ye?(Se.save(),Se.translate(We.renderLeft,We.renderTop),Se.rotate(We.angle),Se.fillStyle=Ge,Ge&&Se.fillRect(-We.width/2,-xe/this.lineHeight*(1-this._fontSizeFraction),We.width,xe/this.lineHeight),Se.restore()):Ge!==Ae?(Xe=Fe+r+ze,this.direction==="rtl"&&(Xe=this.width-Xe-je),Se.fillStyle=Ae,Ae&&Se.fillRect(Xe,De,je,xe/this.lineHeight),ze=We.left,je=We.width,Ae=Ge):je+=We.kernedWidth;Ge&&!Ye&&(Xe=Fe+r+ze,this.direction==="rtl"&&(Xe=this.width-Xe-je),Se.fillStyle=Ge,Se.fillRect(Xe,De,je,xe/this.lineHeight)),De+=xe}Se.fillStyle=Oe,this._removeShadow(Se)}},getFontCache:function(Se){var xe=Se.fontFamily.toLowerCase();_e.charWidthsCache[xe]||(_e.charWidthsCache[xe]={});var r=_e.charWidthsCache[xe],Oe=Se.fontStyle.toLowerCase()+"_"+(Se.fontWeight+"").toLowerCase();return r[Oe]||(r[Oe]={}),r[Oe]},_measureChar:function(Se,xe,r,Oe){var Ee=this.getFontCache(xe),Ae=this._getFontDeclaration(xe),Fe=this._getFontDeclaration(Oe),De=r+Se,ze=Ae===Fe,je,We,Ge,Ye=xe.fontSize/this.CACHE_FONT_SIZE,Xe;if(r&&Ee[r]!==void 0&&(Ge=Ee[r]),Ee[Se]!==void 0&&(Xe=je=Ee[Se]),ze&&Ee[De]!==void 0&&(We=Ee[De],Xe=We-Ge),je===void 0||Ge===void 0||We===void 0){var Ke=this.getMeasuringContext();this._setTextStyles(Ke,xe,!0)}return je===void 0&&(Xe=je=Ke.measureText(Se).width,Ee[Se]=je),Ge===void 0&&ze&&r&&(Ge=Ke.measureText(r).width,Ee[r]=Ge),ze&&We===void 0&&(We=Ke.measureText(De).width,Ee[De]=We,Xe=We-Ge),{width:je*Ye,kernedWidth:Xe*Ye}},getHeightOfChar:function(Se,xe){return this.getValueOfPropertyAt(Se,xe,"fontSize")},measureLine:function(Se){var xe=this._measureLine(Se);return this.charSpacing!==0&&(xe.width-=this._getWidthOfCharSpacing()),xe.width<0&&(xe.width=0),xe},_measureLine:function(Se){var xe=0,r,Oe,Ee=this._textLines[Se],Ae,Fe,De=0,ze=new Array(Ee.length),je=0,We,Ge,Ye=this.path,Xe=this.pathSide==="right";for(this.__charBounds[Se]=ze,r=0;r<Ee.length;r++)Oe=Ee[r],Fe=this._getGraphemeBox(Oe,Se,r,Ae),ze[r]=Fe,xe+=Fe.kernedWidth,Ae=Oe;if(ze[r]={left:Fe?Fe.left+Fe.width:0,width:0,kernedWidth:0,height:this.fontSize},Ye){switch(Ge=Ye.segmentsInfo[Ye.segmentsInfo.length-1].length,We=_e.util.getPointOnPath(Ye.path,0,Ye.segmentsInfo),We.x+=Ye.pathOffset.x,We.y+=Ye.pathOffset.y,this.textAlign){case"left":je=Xe?Ge-xe:0;break;case"center":je=(Ge-xe)/2;break;case"right":je=Xe?0:Ge-xe;break}for(je+=this.pathStartOffset*(Xe?-1:1),r=Xe?Ee.length-1:0;Xe?r>=0:r<Ee.length;Xe?r--:r++)Fe=ze[r],je>Ge?je%=Ge:je<0&&(je+=Ge),this._setGraphemeOnPath(je,Fe,We),je+=Fe.kernedWidth}return{width:xe,numOfSpaces:De}},_setGraphemeOnPath:function(Se,xe,r){var Oe=Se+xe.kernedWidth/2,Ee=this.path,Ae=_e.util.getPointOnPath(Ee.path,Oe,Ee.segmentsInfo);xe.renderLeft=Ae.x-r.x,xe.renderTop=Ae.y-r.y,xe.angle=Ae.angle+(this.pathSide==="right"?Math.PI:0)},_getGraphemeBox:function(Se,xe,r,Oe,Ee){var Ae=this.getCompleteStyleDeclaration(xe,r),Fe=Oe?this.getCompleteStyleDeclaration(xe,r-1):{},De=this._measureChar(Se,Ae,Oe,Fe),ze=De.kernedWidth,je=De.width,We;this.charSpacing!==0&&(We=this._getWidthOfCharSpacing(),je+=We,ze+=We);var Ge={width:je,left:0,height:Ae.fontSize,kernedWidth:ze,deltaY:Ae.deltaY};if(r>0&&!Ee){var Ye=this.__charBounds[xe][r-1];Ge.left=Ye.left+Ye.width+De.kernedWidth-De.width}return Ge},getHeightOfLine:function(Se){if(this.__lineHeights[Se])return this.__lineHeights[Se];for(var xe=this._textLines[Se],r=this.getHeightOfChar(Se,0),Oe=1,Ee=xe.length;Oe<Ee;Oe++)r=Math.max(this.getHeightOfChar(Se,Oe),r);return this.__lineHeights[Se]=r*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var Se,xe=0,r=0,Oe=this._textLines.length;r<Oe;r++)Se=this.getHeightOfLine(r),xe+=r===Oe-1?Se/this.lineHeight:Se;return xe},_getLeftOffset:function(){return this.direction==="ltr"?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(Se,xe){Se.save();for(var r=0,Oe=this._getLeftOffset(),Ee=this._getTopOffset(),Ae=0,Fe=this._textLines.length;Ae<Fe;Ae++){var De=this.getHeightOfLine(Ae),ze=De/this.lineHeight,je=this._getLineLeftOffset(Ae);this._renderTextLine(xe,Se,this._textLines[Ae],Oe+je,Ee+r+ze,Ae),r+=De}Se.restore()},_renderTextFill:function(Se){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(Se,"fillText")},_renderTextStroke:function(Se){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(Se),Se.save(),this._setLineDash(Se,this.strokeDashArray),Se.beginPath(),this._renderTextCommon(Se,"strokeText"),Se.closePath(),Se.restore())},_renderChars:function(Se,xe,r,Oe,Ee,Ae){var Fe=this.getHeightOfLine(Ae),De=this.textAlign.indexOf("justify")!==-1,ze,je,We="",Ge,Ye=0,Xe,Ke=this.path,er=!De&&this.charSpacing===0&&this.isEmptyStyles(Ae)&&!Ke,Qe=this.direction==="ltr",nr=this.direction==="ltr"?1:-1,ir,cr=xe.canvas.getAttribute("dir");if(xe.save(),cr!==this.direction&&(xe.canvas.setAttribute("dir",Qe?"ltr":"rtl"),xe.direction=Qe?"ltr":"rtl",xe.textAlign=Qe?"left":"right"),Ee-=Fe*this._fontSizeFraction/this.lineHeight,er){this._renderChar(Se,xe,Ae,0,r.join(""),Oe,Ee,Fe),xe.restore();return}for(var br=0,wr=r.length-1;br<=wr;br++)Xe=br===wr||this.charSpacing||Ke,We+=r[br],Ge=this.__charBounds[Ae][br],Ye===0?(Oe+=nr*(Ge.kernedWidth-Ge.width),Ye+=Ge.width):Ye+=Ge.kernedWidth,De&&!Xe&&this._reSpaceAndTab.test(r[br])&&(Xe=!0),Xe||(ze=ze||this.getCompleteStyleDeclaration(Ae,br),je=this.getCompleteStyleDeclaration(Ae,br+1),Xe=this._hasStyleChanged(ze,je)),Xe&&(Ke?(xe.save(),xe.translate(Ge.renderLeft,Ge.renderTop),xe.rotate(Ge.angle),this._renderChar(Se,xe,Ae,br,We,-Ye/2,0,Fe),xe.restore()):(ir=Oe,this._renderChar(Se,xe,Ae,br,We,ir,Ee,Fe)),We="",ze=je,Oe+=nr*Ye,Ye=0);xe.restore()},_applyPatternGradientTransformText:function(Se){var xe=_e.util.createCanvasElement(),r,Oe=this.width+this.strokeWidth,Ee=this.height+this.strokeWidth;return xe.width=Oe,xe.height=Ee,r=xe.getContext("2d"),r.beginPath(),r.moveTo(0,0),r.lineTo(Oe,0),r.lineTo(Oe,Ee),r.lineTo(0,Ee),r.closePath(),r.translate(Oe/2,Ee/2),r.fillStyle=Se.toLive(r),this._applyPatternGradientTransform(r,Se),r.fill(),r.createPattern(xe,"no-repeat")},handleFiller:function(Se,xe,r){var Oe,Ee;return r.toLive?r.gradientUnits==="percentage"||r.gradientTransform||r.patternTransform?(Oe=-this.width/2,Ee=-this.height/2,Se.translate(Oe,Ee),Se[xe]=this._applyPatternGradientTransformText(r),{offsetX:Oe,offsetY:Ee}):(Se[xe]=r.toLive(Se,this),this._applyPatternGradientTransform(Se,r)):(Se[xe]=r,{offsetX:0,offsetY:0})},_setStrokeStyles:function(Se,xe){return Se.lineWidth=xe.strokeWidth,Se.lineCap=this.strokeLineCap,Se.lineDashOffset=this.strokeDashOffset,Se.lineJoin=this.strokeLineJoin,Se.miterLimit=this.strokeMiterLimit,this.handleFiller(Se,"strokeStyle",xe.stroke)},_setFillStyles:function(Se,xe){return this.handleFiller(Se,"fillStyle",xe.fill)},_renderChar:function(Se,xe,r,Oe,Ee,Ae,Fe){var De=this._getStyleDeclaration(r,Oe),ze=this.getCompleteStyleDeclaration(r,Oe),je=Se==="fillText"&&ze.fill,We=Se==="strokeText"&&ze.stroke&&ze.strokeWidth,Ge,Ye;!We&&!je||(xe.save(),je&&(Ge=this._setFillStyles(xe,ze)),We&&(Ye=this._setStrokeStyles(xe,ze)),xe.font=this._getFontDeclaration(ze),De&&De.textBackgroundColor&&this._removeShadow(xe),De&&De.deltaY&&(Fe+=De.deltaY),je&&xe.fillText(Ee,Ae-Ge.offsetX,Fe-Ge.offsetY),We&&xe.strokeText(Ee,Ae-Ye.offsetX,Fe-Ye.offsetY),xe.restore())},setSuperscript:function(Se,xe){return this._setScript(Se,xe,this.superscript)},setSubscript:function(Se,xe){return this._setScript(Se,xe,this.subscript)},_setScript:function(Se,xe,r){var Oe=this.get2DCursorLocation(Se,!0),Ee=this.getValueOfPropertyAt(Oe.lineIndex,Oe.charIndex,"fontSize"),Ae=this.getValueOfPropertyAt(Oe.lineIndex,Oe.charIndex,"deltaY"),Fe={fontSize:Ee*r.size,deltaY:Ae+Ee*r.baseline};return this.setSelectionStyles(Fe,Se,xe),this},_hasStyleChanged:function(Se,xe){return Se.fill!==xe.fill||Se.stroke!==xe.stroke||Se.strokeWidth!==xe.strokeWidth||Se.fontSize!==xe.fontSize||Se.fontFamily!==xe.fontFamily||Se.fontWeight!==xe.fontWeight||Se.fontStyle!==xe.fontStyle||Se.deltaY!==xe.deltaY},_hasStyleChangedForSvg:function(Se,xe){return this._hasStyleChanged(Se,xe)||Se.overline!==xe.overline||Se.underline!==xe.underline||Se.linethrough!==xe.linethrough},_getLineLeftOffset:function(Se){var xe=this.getLineWidth(Se),r=this.width-xe,Oe=this.textAlign,Ee=this.direction,Ae,Fe=0,Ae=this.isEndOfWrapping(Se);return Oe==="justify"||Oe==="justify-center"&&!Ae||Oe==="justify-right"&&!Ae||Oe==="justify-left"&&!Ae?0:(Oe==="center"&&(Fe=r/2),Oe==="right"&&(Fe=r),Oe==="justify-center"&&(Fe=r/2),Oe==="justify-right"&&(Fe=r),Ee==="rtl"&&(Fe-=r),Fe)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var Se=this._forceClearCache;return Se||(Se=this.hasStateChanged("_dimensionAffectingProps")),Se&&(this.dirty=!0,this._forceClearCache=!1),Se},getLineWidth:function(Se){if(this.__lineWidths[Se]!==void 0)return this.__lineWidths[Se];var xe=this.measureLine(Se),r=xe.width;return this.__lineWidths[Se]=r,r},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(Se,xe,r){var Oe=this._getStyleDeclaration(Se,xe);return Oe&&typeof Oe[r]!="undefined"?Oe[r]:this[r]},_renderTextDecoration:function(Se,xe){if(!(!this[xe]&&!this.styleHas(xe))){for(var r,Oe,Ee,Ae,Fe,De,ze,je,We=this._getLeftOffset(),Ge=this._getTopOffset(),Ye,Xe,Ke,er,Qe,nr,ir,cr,br=this.path,wr=this._getWidthOfCharSpacing(),xr=this.offsets[xe],Sr=0,lr=this._textLines.length;Sr<lr;Sr++){if(r=this.getHeightOfLine(Sr),!this[xe]&&!this.styleHas(xe,Sr)){Ge+=r;continue}ze=this._textLines[Sr],nr=r/this.lineHeight,Ae=this._getLineLeftOffset(Sr),Xe=0,Ke=0,je=this.getValueOfPropertyAt(Sr,0,xe),cr=this.getValueOfPropertyAt(Sr,0,"fill"),Ye=Ge+nr*(1-this._fontSizeFraction),Oe=this.getHeightOfChar(Sr,0),Fe=this.getValueOfPropertyAt(Sr,0,"deltaY");for(var fr=0,$e=ze.length;fr<$e;fr++)if(er=this.__charBounds[Sr][fr],Qe=this.getValueOfPropertyAt(Sr,fr,xe),ir=this.getValueOfPropertyAt(Sr,fr,"fill"),Ee=this.getHeightOfChar(Sr,fr),De=this.getValueOfPropertyAt(Sr,fr,"deltaY"),br&&Qe&&ir)Se.save(),Se.fillStyle=cr,Se.translate(er.renderLeft,er.renderTop),Se.rotate(er.angle),Se.fillRect(-er.kernedWidth/2,xr*Ee+De,er.kernedWidth,this.fontSize/15),Se.restore();else if((Qe!==je||ir!==cr||Ee!==Oe||De!==Fe)&&Ke>0){var Ve=We+Ae+Xe;this.direction==="rtl"&&(Ve=this.width-Ve-Ke),je&&cr&&(Se.fillStyle=cr,Se.fillRect(Ve,Ye+xr*Oe+Fe,Ke,this.fontSize/15)),Xe=er.left,Ke=er.width,je=Qe,cr=ir,Oe=Ee,Fe=De}else Ke+=er.kernedWidth;var Ve=We+Ae+Xe;this.direction==="rtl"&&(Ve=this.width-Ve-Ke),Se.fillStyle=ir,Qe&&ir&&Se.fillRect(Ve,Ye+xr*Oe+Fe,Ke-wr,this.fontSize/15),Ge+=r}this._removeShadow(Se)}},_getFontDeclaration:function(Se,xe){var r=Se||this,Oe=this.fontFamily,Ee=_e.Text.genericFonts.indexOf(Oe.toLowerCase())>-1,Ae=Oe===void 0||Oe.indexOf("'")>-1||Oe.indexOf(",")>-1||Oe.indexOf('"')>-1||Ee?r.fontFamily:'"'+r.fontFamily+'"';return[_e.isLikelyNode?r.fontWeight:r.fontStyle,_e.isLikelyNode?r.fontStyle:r.fontWeight,xe?this.CACHE_FONT_SIZE+"px":r.fontSize+"px",Ae].join(" ")},render:function(Se){!this.visible||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",Se))},_splitTextIntoLines:function(Se){for(var xe=Se.split(this._reNewline),r=new Array(xe.length),Oe=[`
`],Ee=[],Ae=0;Ae<xe.length;Ae++)r[Ae]=_e.util.string.graphemeSplit(xe[Ae]),Ee=Ee.concat(r[Ae],Oe);return Ee.pop(),{_unwrappedLines:r,lines:xe,graphemeText:Ee,graphemeLines:r}},toObject:function(Se){var xe=Te.concat(Se),r=this.callSuper("toObject",xe);return r.styles=Ce(this.styles,!0),r.path&&(r.path=this.path.toObject()),r},set:function(Se,xe){this.callSuper("set",Se,xe);var r=!1,Oe=!1;if(typeof Se=="object")for(var Ee in Se)Ee==="path"&&this.setPathInfo(),r=r||this._dimensionAffectingProps.indexOf(Ee)!==-1,Oe=Oe||Ee==="path";else r=this._dimensionAffectingProps.indexOf(Se)!==-1,Oe=Se==="path";return Oe&&this.setPathInfo(),r&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),_e.Text.ATTRIBUTE_NAMES=_e.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),_e.Text.DEFAULT_SVG_FONT_SIZE=16,_e.Text.fromElement=function(Se,xe,r){if(!Se)return xe(null);var Oe=_e.parseAttributes(Se,_e.Text.ATTRIBUTE_NAMES),Ee=Oe.textAnchor||"left";if(r=_e.util.object.extend(r?Ce(r):{},Oe),r.top=r.top||0,r.left=r.left||0,Oe.textDecoration){var Ae=Oe.textDecoration;Ae.indexOf("underline")!==-1&&(r.underline=!0),Ae.indexOf("overline")!==-1&&(r.overline=!0),Ae.indexOf("line-through")!==-1&&(r.linethrough=!0),delete r.textDecoration}"dx"in Oe&&(r.left+=Oe.dx),"dy"in Oe&&(r.top+=Oe.dy),"fontSize"in r||(r.fontSize=_e.Text.DEFAULT_SVG_FONT_SIZE);var Fe="";"textContent"in Se?Fe=Se.textContent:"firstChild"in Se&&Se.firstChild!==null&&"data"in Se.firstChild&&Se.firstChild.data!==null&&(Fe=Se.firstChild.data),Fe=Fe.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var De=r.strokeWidth;r.strokeWidth=0;var ze=new _e.Text(Fe,r),je=ze.getScaledHeight()/ze.height,We=(ze.height+ze.strokeWidth)*ze.lineHeight-ze.height,Ge=We*je,Ye=ze.getScaledHeight()+Ge,Xe=0;Ee==="center"&&(Xe=ze.getScaledWidth()/2),Ee==="right"&&(Xe=ze.getScaledWidth()),ze.set({left:ze.left-Xe,top:ze.top-(Ye-ze.fontSize*(.07+ze._fontSizeFraction))/ze.lineHeight,strokeWidth:typeof De!="undefined"?De:1}),xe(ze)},_e.Text.fromObject=function(Se,xe){var r=Ce(Se),Oe=Se.path;return delete r.path,_e.Object._fromObject("Text",r,function(Ee){Oe?_e.Object._fromObject("Path",Oe,function(Ae){Ee.set("path",Ae),xe(Ee)},"path"):xe(Ee)},"text")},_e.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],_e.util.createAccessors&&_e.util.createAccessors(_e.Text)}(Re),function(){e.util.object.extend(e.Text.prototype,{isEmptyStyles:function(ke){if(!this.styles||typeof ke!="undefined"&&!this.styles[ke])return!0;var _e=typeof ke=="undefined"?this.styles:{line:this.styles[ke]};for(var Ce in _e)for(var Te in _e[Ce])for(var Se in _e[Ce][Te])return!1;return!0},styleHas:function(ke,_e){if(!this.styles||!ke||ke===""||typeof _e!="undefined"&&!this.styles[_e])return!1;var Ce=typeof _e=="undefined"?this.styles:{0:this.styles[_e]};for(var Te in Ce)for(var Se in Ce[Te])if(typeof Ce[Te][Se][ke]!="undefined")return!0;return!1},cleanStyle:function(ke){if(!this.styles||!ke||ke==="")return!1;var _e=this.styles,Ce=0,Te,Se,xe=!0,r=0,Oe;for(var Ee in _e){Te=0;for(var Ae in _e[Ee]){var Oe=_e[Ee][Ae],Fe=Oe.hasOwnProperty(ke);Ce++,Fe?(Se?Oe[ke]!==Se&&(xe=!1):Se=Oe[ke],Oe[ke]===this[ke]&&delete Oe[ke]):xe=!1,Object.keys(Oe).length!==0?Te++:delete _e[Ee][Ae]}Te===0&&delete _e[Ee]}for(var De=0;De<this._textLines.length;De++)r+=this._textLines[De].length;xe&&Ce===r&&(this[ke]=Se,this.removeStyle(ke))},removeStyle:function(ke){if(!(!this.styles||!ke||ke==="")){var _e=this.styles,Ce,Te,Se;for(Te in _e){Ce=_e[Te];for(Se in Ce)delete Ce[Se][ke],Object.keys(Ce[Se]).length===0&&delete Ce[Se];Object.keys(Ce).length===0&&delete _e[Te]}}},_extendStyles:function(ke,_e){var Ce=this.get2DCursorLocation(ke);this._getLineStyle(Ce.lineIndex)||this._setLineStyle(Ce.lineIndex),this._getStyleDeclaration(Ce.lineIndex,Ce.charIndex)||this._setStyleDeclaration(Ce.lineIndex,Ce.charIndex,{}),e.util.object.extend(this._getStyleDeclaration(Ce.lineIndex,Ce.charIndex),_e)},get2DCursorLocation:function(ke,_e){typeof ke=="undefined"&&(ke=this.selectionStart);for(var Ce=_e?this._unwrappedTextLines:this._textLines,Te=Ce.length,Se=0;Se<Te;Se++){if(ke<=Ce[Se].length)return{lineIndex:Se,charIndex:ke};ke-=Ce[Se].length+this.missingNewlineOffset(Se)}return{lineIndex:Se-1,charIndex:Ce[Se-1].length<ke?Ce[Se-1].length:ke}},getSelectionStyles:function(ke,_e,Ce){typeof ke=="undefined"&&(ke=this.selectionStart||0),typeof _e=="undefined"&&(_e=this.selectionEnd||ke);for(var Te=[],Se=ke;Se<_e;Se++)Te.push(this.getStyleAtPosition(Se,Ce));return Te},getStyleAtPosition:function(ke,_e){var Ce=this.get2DCursorLocation(ke),Te=_e?this.getCompleteStyleDeclaration(Ce.lineIndex,Ce.charIndex):this._getStyleDeclaration(Ce.lineIndex,Ce.charIndex);return Te||{}},setSelectionStyles:function(ke,_e,Ce){typeof _e=="undefined"&&(_e=this.selectionStart||0),typeof Ce=="undefined"&&(Ce=this.selectionEnd||_e);for(var Te=_e;Te<Ce;Te++)this._extendStyles(Te,ke);return this._forceClearCache=!0,this},_getStyleDeclaration:function(ke,_e){var Ce=this.styles&&this.styles[ke];return Ce?Ce[_e]:null},getCompleteStyleDeclaration:function(ke,_e){for(var Ce=this._getStyleDeclaration(ke,_e)||{},Te={},Se,xe=0;xe<this._styleProperties.length;xe++)Se=this._styleProperties[xe],Te[Se]=typeof Ce[Se]=="undefined"?this[Se]:Ce[Se];return Te},_setStyleDeclaration:function(ke,_e,Ce){this.styles[ke][_e]=Ce},_deleteStyleDeclaration:function(ke,_e){delete this.styles[ke][_e]},_getLineStyle:function(ke){return!!this.styles[ke]},_setLineStyle:function(ke){this.styles[ke]={}},_deleteLineStyle:function(ke){delete this.styles[ke]}})}(),function(){function ke(_e){_e.textDecoration&&(_e.textDecoration.indexOf("underline")>-1&&(_e.underline=!0),_e.textDecoration.indexOf("line-through")>-1&&(_e.linethrough=!0),_e.textDecoration.indexOf("overline")>-1&&(_e.overline=!0),delete _e.textDecoration)}e.IText=e.util.createClass(e.Text,e.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(_e,Ce){this.callSuper("initialize",_e,Ce),this.initBehavior()},setSelectionStart:function(_e){_e=Math.max(_e,0),this._updateAndFire("selectionStart",_e)},setSelectionEnd:function(_e){_e=Math.min(_e,this.text.length),this._updateAndFire("selectionEnd",_e)},_updateAndFire:function(_e,Ce){this[_e]!==Ce&&(this._fireSelectionChanged(),this[_e]=Ce),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(_e){this.clearContextTop(),this.callSuper("render",_e),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(_e){this.callSuper("_render",_e)},clearContextTop:function(_e){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var Ce=this.canvas.contextTop,Te=this.canvas.viewportTransform;Ce.save(),Ce.transform(Te[0],Te[1],Te[2],Te[3],Te[4],Te[5]),this.transform(Ce),this._clearTextArea(Ce),_e||Ce.restore()}},renderCursorOrSelection:function(){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var _e=this._getCursorBoundaries(),Ce=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(_e,Ce):this.renderSelection(_e,Ce),Ce.restore()}},_clearTextArea:function(_e){var Ce=this.width+4,Te=this.height+4;_e.clearRect(-Ce/2,-Te/2,Ce,Te)},_getCursorBoundaries:function(_e){typeof _e=="undefined"&&(_e=this.selectionStart);var Ce=this._getLeftOffset(),Te=this._getTopOffset(),Se=this._getCursorBoundariesOffsets(_e);return{left:Ce,top:Te,leftOffset:Se.left,topOffset:Se.top}},_getCursorBoundariesOffsets:function(_e){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var Ce,Te,Se,xe=0,r=0,Oe,Ee=this.get2DCursorLocation(_e);Se=Ee.charIndex,Te=Ee.lineIndex;for(var Ae=0;Ae<Te;Ae++)xe+=this.getHeightOfLine(Ae);Ce=this._getLineLeftOffset(Te);var Fe=this.__charBounds[Te][Se];return Fe&&(r=Fe.left),this.charSpacing!==0&&Se===this._textLines[Te].length&&(r-=this._getWidthOfCharSpacing()),Oe={top:xe,left:Ce+(r>0?r:0)},this.direction==="rtl"&&(Oe.left*=-1),this.cursorOffsetCache=Oe,this.cursorOffsetCache},renderCursor:function(_e,Ce){var Te=this.get2DCursorLocation(),Se=Te.lineIndex,xe=Te.charIndex>0?Te.charIndex-1:0,r=this.getValueOfPropertyAt(Se,xe,"fontSize"),Oe=this.scaleX*this.canvas.getZoom(),Ee=this.cursorWidth/Oe,Ae=_e.topOffset,Fe=this.getValueOfPropertyAt(Se,xe,"deltaY");Ae+=(1-this._fontSizeFraction)*this.getHeightOfLine(Se)/this.lineHeight-r*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(_e,Ce),Ce.fillStyle=this.cursorColor||this.getValueOfPropertyAt(Se,xe,"fill"),Ce.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,Ce.fillRect(_e.left+_e.leftOffset-Ee/2,Ae+_e.top+Fe,Ee,r)},renderSelection:function(_e,Ce){for(var Te=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,Se=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,xe=this.textAlign.indexOf("justify")!==-1,r=this.get2DCursorLocation(Te),Oe=this.get2DCursorLocation(Se),Ee=r.lineIndex,Ae=Oe.lineIndex,Fe=r.charIndex<0?0:r.charIndex,De=Oe.charIndex<0?0:Oe.charIndex,ze=Ee;ze<=Ae;ze++){var je=this._getLineLeftOffset(ze)||0,We=this.getHeightOfLine(ze),Ge=0,Ye=0,Xe=0;if(ze===Ee&&(Ye=this.__charBounds[Ee][Fe].left),ze>=Ee&&ze<Ae)Xe=xe&&!this.isEndOfWrapping(ze)?this.width:this.getLineWidth(ze)||5;else if(ze===Ae)if(De===0)Xe=this.__charBounds[Ae][De].left;else{var Ke=this._getWidthOfCharSpacing();Xe=this.__charBounds[Ae][De-1].left+this.__charBounds[Ae][De-1].width-Ke}Ge=We,(this.lineHeight<1||ze===Ae&&this.lineHeight>1)&&(We/=this.lineHeight);var er=_e.left+je+Ye,Qe=Xe-Ye,nr=We,ir=0;this.inCompositionMode?(Ce.fillStyle=this.compositionColor||"black",nr=1,ir=We):Ce.fillStyle=this.selectionColor,this.direction==="rtl"&&(er=this.width-er-Qe),Ce.fillRect(er,_e.top+_e.topOffset+ir,Qe,nr),_e.topOffset+=Ge}},getCurrentCharFontSize:function(){var _e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(_e.l,_e.c,"fontSize")},getCurrentCharColor:function(){var _e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(_e.l,_e.c,"fill")},_getCurrentCharIndex:function(){var _e=this.get2DCursorLocation(this.selectionStart,!0),Ce=_e.charIndex>0?_e.charIndex-1:0;return{l:_e.lineIndex,c:Ce}}}),e.IText.fromObject=function(_e,Ce){if(ke(_e),_e.styles)for(var Te in _e.styles)for(var Se in _e.styles[Te])ke(_e.styles[Te][Se]);e.Object._fromObject("IText",_e,Ce,"text")}}(),function(){var ke=e.util.object.clone;e.util.object.extend(e.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var _e=this;this.on("added",function(){var Ce=_e.canvas;Ce&&(Ce._hasITextHandlers||(Ce._hasITextHandlers=!0,_e._initCanvasHandlers(Ce)),Ce._iTextInstances=Ce._iTextInstances||[],Ce._iTextInstances.push(_e))})},initRemovedHandler:function(){var _e=this;this.on("removed",function(){var Ce=_e.canvas;Ce&&(Ce._iTextInstances=Ce._iTextInstances||[],e.util.removeFromArray(Ce._iTextInstances,_e),Ce._iTextInstances.length===0&&(Ce._hasITextHandlers=!1,_e._removeCanvasHandlers(Ce)))})},_initCanvasHandlers:function(_e){_e._mouseUpITextHandler=function(){_e._iTextInstances&&_e._iTextInstances.forEach(function(Ce){Ce.__isMousedown=!1})},_e.on("mouse:up",_e._mouseUpITextHandler)},_removeCanvasHandlers:function(_e){_e.off("mouse:up",_e._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(_e,Ce,Te,Se){var xe;return xe={isAborted:!1,abort:function(){this.isAborted=!0}},_e.animate("_currentCursorOpacity",Ce,{duration:Te,onComplete:function(){xe.isAborted||_e[Se]()},onChange:function(){_e.canvas&&_e.selectionStart===_e.selectionEnd&&_e.renderCursorOrSelection()},abort:function(){return xe.isAborted}}),xe},_onTickComplete:function(){var _e=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){_e._currentTickCompleteState=_e._animateCursor(_e,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(_e){var Ce=this,Te=_e?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){Ce._tick()},Te)},abortCursorAnimation:function(){var _e=this._currentTickState||this._currentTickCompleteState,Ce=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,_e&&Ce&&Ce.clearContext(Ce.contextTop||Ce.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(_e){var Ce=0,Te=_e-1;if(this._reSpace.test(this._text[Te]))for(;this._reSpace.test(this._text[Te]);)Ce++,Te--;for(;/\S/.test(this._text[Te])&&Te>-1;)Ce++,Te--;return _e-Ce},findWordBoundaryRight:function(_e){var Ce=0,Te=_e;if(this._reSpace.test(this._text[Te]))for(;this._reSpace.test(this._text[Te]);)Ce++,Te++;for(;/\S/.test(this._text[Te])&&Te<this._text.length;)Ce++,Te++;return _e+Ce},findLineBoundaryLeft:function(_e){for(var Ce=0,Te=_e-1;!/\n/.test(this._text[Te])&&Te>-1;)Ce++,Te--;return _e-Ce},findLineBoundaryRight:function(_e){for(var Ce=0,Te=_e;!/\n/.test(this._text[Te])&&Te<this._text.length;)Ce++,Te++;return _e+Ce},searchWordBoundary:function(_e,Ce){for(var Te=this._text,Se=this._reSpace.test(Te[_e])?_e-1:_e,xe=Te[Se],r=e.reNonWord;!r.test(xe)&&Se>0&&Se<Te.length;)Se+=Ce,xe=Te[Se];return r.test(xe)&&(Se+=Ce===1?0:1),Se},selectWord:function(_e){_e=_e||this.selectionStart;var Ce=this.searchWordBoundary(_e,-1),Te=this.searchWordBoundary(_e,1);this.selectionStart=Ce,this.selectionEnd=Te,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(_e){_e=_e||this.selectionStart;var Ce=this.findLineBoundaryLeft(_e),Te=this.findLineBoundaryRight(_e);return this.selectionStart=Ce,this.selectionEnd=Te,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(_e){if(!(this.isEditing||!this.editable))return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(_e),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(_e){_e._iTextInstances&&_e._iTextInstances.forEach(function(Ce){Ce.selected=!1,Ce.isEditing&&Ce.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(_e){if(!(!this.__isMousedown||!this.isEditing)){var Ce=this.getSelectionStartFromPointer(_e.e),Te=this.selectionStart,Se=this.selectionEnd;(Ce!==this.__selectionStartOnMouseDown||Te===Se)&&(Te===Ce||Se===Ce)||(Ce>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=Ce):(this.selectionStart=Ce,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==Te||this.selectionEnd!==Se)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(_e,Ce,Te){var Se=Te.slice(0,_e),xe=e.util.string.graphemeSplit(Se).length;if(_e===Ce)return{selectionStart:xe,selectionEnd:xe};var r=Te.slice(_e,Ce),Oe=e.util.string.graphemeSplit(r).length;return{selectionStart:xe,selectionEnd:xe+Oe}},fromGraphemeToStringSelection:function(_e,Ce,Te){var Se=Te.slice(0,_e),xe=Se.join("").length;if(_e===Ce)return{selectionStart:xe,selectionEnd:xe};var r=Te.slice(_e,Ce),Oe=r.join("").length;return{selectionStart:xe,selectionEnd:xe+Oe}},_updateTextarea:function(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){var _e=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=_e.selectionStart,this.hiddenTextarea.selectionEnd=_e.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(!!this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var _e=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=_e.selectionEnd,this.inCompositionMode||(this.selectionStart=_e.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var _e=this._calcTextareaPosition();this.hiddenTextarea.style.left=_e.left,this.hiddenTextarea.style.top=_e.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var _e=this.inCompositionMode?this.compositionStart:this.selectionStart,Ce=this._getCursorBoundaries(_e),Te=this.get2DCursorLocation(_e),Se=Te.lineIndex,xe=Te.charIndex,r=this.getValueOfPropertyAt(Se,xe,"fontSize")*this.lineHeight,Oe=Ce.leftOffset,Ee=this.calcTransformMatrix(),Ae={x:Ce.left+Oe,y:Ce.top+Ce.topOffset+r},Fe=this.canvas.getRetinaScaling(),De=this.canvas.upperCanvasEl,ze=De.width/Fe,je=De.height/Fe,We=ze-r,Ge=je-r,Ye=De.clientWidth/ze,Xe=De.clientHeight/je;return Ae=e.util.transformPoint(Ae,Ee),Ae=e.util.transformPoint(Ae,this.canvas.viewportTransform),Ae.x*=Ye,Ae.y*=Xe,Ae.x<0&&(Ae.x=0),Ae.x>We&&(Ae.x=We),Ae.y<0&&(Ae.y=0),Ae.y>Ge&&(Ae.y=Ge),Ae.x+=this.canvas._offset.left,Ae.y+=this.canvas._offset.top,{left:Ae.x+"px",top:Ae.y+"px",fontSize:r+"px",charHeight:r}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){!this._savedProps||(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var _e=this._textBeforeEdit!==this.text,Ce=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,Ce&&(Ce.blur&&Ce.blur(),Ce.parentNode&&Ce.parentNode.removeChild(Ce)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),_e&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),_e&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var _e in this.styles)this._textLines[_e]||delete this.styles[_e]},removeStyleFromTo:function(_e,Ce){var Te=this.get2DCursorLocation(_e,!0),Se=this.get2DCursorLocation(Ce,!0),xe=Te.lineIndex,r=Te.charIndex,Oe=Se.lineIndex,Ee=Se.charIndex,Ae,Fe;if(xe!==Oe){if(this.styles[xe])for(Ae=r;Ae<this._unwrappedTextLines[xe].length;Ae++)delete this.styles[xe][Ae];if(this.styles[Oe])for(Ae=Ee;Ae<this._unwrappedTextLines[Oe].length;Ae++)Fe=this.styles[Oe][Ae],Fe&&(this.styles[xe]||(this.styles[xe]={}),this.styles[xe][r+Ae-Ee]=Fe);for(Ae=xe+1;Ae<=Oe;Ae++)delete this.styles[Ae];this.shiftLineStyles(Oe,xe-Oe)}else if(this.styles[xe]){Fe=this.styles[xe];var De=Ee-r,ze,je;for(Ae=r;Ae<Ee;Ae++)delete Fe[Ae];for(je in this.styles[xe])ze=parseInt(je,10),ze>=Ee&&(Fe[ze-De]=Fe[je],delete Fe[je])}},shiftLineStyles:function(_e,Ce){var Te=ke(this.styles);for(var Se in this.styles){var xe=parseInt(Se,10);xe>_e&&(this.styles[xe+Ce]=Te[xe],Te[xe-Ce]||delete this.styles[xe])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(_e,Ce,Te,Se){var xe,r={},Oe=!1,Ee=this._unwrappedTextLines[_e].length===Ce;Te||(Te=1),this.shiftLineStyles(_e,Te),this.styles[_e]&&(xe=this.styles[_e][Ce===0?Ce:Ce-1]);for(var Ae in this.styles[_e]){var Fe=parseInt(Ae,10);Fe>=Ce&&(Oe=!0,r[Fe-Ce]=this.styles[_e][Ae],Ee&&Ce===0||delete this.styles[_e][Ae])}var De=!1;for(Oe&&!Ee&&(this.styles[_e+Te]=r,De=!0),De&&Te--;Te>0;)Se&&Se[Te-1]?this.styles[_e+Te]={0:ke(Se[Te-1])}:xe?this.styles[_e+Te]={0:ke(xe)}:delete this.styles[_e+Te],Te--;this._forceClearCache=!0},insertCharStyleObject:function(_e,Ce,Te,Se){this.styles||(this.styles={});var xe=this.styles[_e],r=xe?ke(xe):{};Te||(Te=1);for(var Oe in r){var Ee=parseInt(Oe,10);Ee>=Ce&&(xe[Ee+Te]=r[Ee],r[Ee-Te]||delete xe[Ee])}if(this._forceClearCache=!0,Se){for(;Te--;)!Object.keys(Se[Te]).length||(this.styles[_e]||(this.styles[_e]={}),this.styles[_e][Ce+Te]=ke(Se[Te]));return}if(!!xe)for(var Ae=xe[Ce?Ce-1:1];Ae&&Te--;)this.styles[_e][Ce+Te]=ke(Ae)},insertNewStyleBlock:function(_e,Ce,Te){for(var Se=this.get2DCursorLocation(Ce,!0),xe=[0],r=0,Oe=0;Oe<_e.length;Oe++)_e[Oe]===`
`?(r++,xe[r]=0):xe[r]++;xe[0]>0&&(this.insertCharStyleObject(Se.lineIndex,Se.charIndex,xe[0],Te),Te=Te&&Te.slice(xe[0]+1)),r&&this.insertNewlineStyleObject(Se.lineIndex,Se.charIndex+xe[0],r);for(var Oe=1;Oe<r;Oe++)xe[Oe]>0?this.insertCharStyleObject(Se.lineIndex+Oe,0,xe[Oe],Te):Te&&this.styles[Se.lineIndex+Oe]&&Te[0]&&(this.styles[Se.lineIndex+Oe][0]=Te[0]),Te=Te&&Te.slice(xe[Oe]+1);xe[Oe]>0&&this.insertCharStyleObject(Se.lineIndex+Oe,0,xe[Oe],Te)},setSelectionStartEndWithShift:function(_e,Ce,Te){Te<=_e?(Ce===_e?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=_e),this.selectionStart=Te):Te>_e&&Te<Ce?this._selectionDirection==="right"?this.selectionEnd=Te:this.selectionStart=Te:(Ce===_e?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=Ce),this.selectionEnd=Te)},setSelectionInBoundaries:function(){var _e=this.text.length;this.selectionStart>_e?this.selectionStart=_e:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>_e?this.selectionEnd=_e:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),e.util.object.extend(e.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(ke){if(!!this.canvas){this.__newClickTime=+new Date;var _e=ke.pointer;this.isTripleClick(_e)&&(this.fire("tripleclick",ke),this._stopEvent(ke.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=_e,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(ke){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===ke.x&&this.__lastPointer.y===ke.y},_stopEvent:function(ke){ke.preventDefault&&ke.preventDefault(),ke.stopPropagation&&ke.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(ke){!this.isEditing||this.selectWord(this.getSelectionStartFromPointer(ke.e))},tripleClickHandler:function(ke){!this.isEditing||this.selectLine(this.getSelectionStartFromPointer(ke.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(ke){!this.canvas||!this.editable||ke.e.button&&ke.e.button!==1||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(ke.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(ke){!this.canvas||!this.editable||ke.e.button&&ke.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(ke){if(this.__isMousedown=!1,!(!this.editable||this.group||ke.transform&&ke.transform.actionPerformed||ke.e.button&&ke.e.button!==1)){if(this.canvas){var _e=this.canvas._activeObject;if(_e&&_e!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(ke.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(ke){var _e=this.getSelectionStartFromPointer(ke),Ce=this.selectionStart,Te=this.selectionEnd;ke.shiftKey?this.setSelectionStartEndWithShift(Ce,Te,_e):(this.selectionStart=_e,this.selectionEnd=_e),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(ke){for(var _e=this.getLocalPointer(ke),Ce=0,Te=0,Se=0,xe=0,r=0,Oe,Ee,Ae=0,Fe=this._textLines.length;Ae<Fe&&Se<=_e.y;Ae++)Se+=this.getHeightOfLine(Ae)*this.scaleY,r=Ae,Ae>0&&(xe+=this._textLines[Ae-1].length+this.missingNewlineOffset(Ae-1));Oe=this._getLineLeftOffset(r),Te=Oe*this.scaleX,Ee=this._textLines[r],this.direction==="rtl"&&(_e.x=this.width*this.scaleX-_e.x+Te);for(var De=0,ze=Ee.length;De<ze&&(Ce=Te,Te+=this.__charBounds[r][De].kernedWidth*this.scaleX,Te<=_e.x);De++)xe++;return this._getNewSelectionStartFromOffset(_e,Ce,Te,xe,ze)},_getNewSelectionStartFromOffset:function(ke,_e,Ce,Te,Se){var xe=ke.x-_e,r=Ce-ke.x,Oe=r>xe||r<0?0:1,Ee=Te+Oe;return this.flipX&&(Ee=Se-Ee),Ee>this._text.length&&(Ee=this._text.length),Ee}}),e.util.object.extend(e.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=e.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var ke=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+ke.top+"; left: "+ke.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding\uFF70top: "+ke.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):e.document.body.appendChild(this.hiddenTextarea),e.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),e.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),e.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),e.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),e.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),e.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(e.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(ke){if(!!this.isEditing){var _e=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(ke.keyCode in _e)this[_e[ke.keyCode]](ke);else if(ke.keyCode in this.ctrlKeysMapDown&&(ke.ctrlKey||ke.metaKey))this[this.ctrlKeysMapDown[ke.keyCode]](ke);else return;ke.stopImmediatePropagation(),ke.preventDefault(),ke.keyCode>=33&&ke.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(ke){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(ke.keyCode in this.ctrlKeysMapUp&&(ke.ctrlKey||ke.metaKey))this[this.ctrlKeysMapUp[ke.keyCode]](ke);else return;ke.stopImmediatePropagation(),ke.preventDefault(),this.canvas&&this.canvas.requestRenderAll()},onInput:function(ke){var _e=this.fromPaste;if(this.fromPaste=!1,ke&&ke.stopPropagation(),!!this.isEditing){var Ce=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,Te=this._text.length,Se=Ce.length,xe,r,Oe=Se-Te,Ee=this.selectionStart,Ae=this.selectionEnd,Fe=Ee!==Ae,De,ze,je;if(this.hiddenTextarea.value===""){this.styles={},this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll());return}var We=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),Ge=Ee>We.selectionStart;Fe?(xe=this._text.slice(Ee,Ae),Oe+=Ae-Ee):Se<Te&&(Ge?xe=this._text.slice(Ae+Oe,Ae):xe=this._text.slice(Ee,Ee-Oe)),r=Ce.slice(We.selectionEnd-Oe,We.selectionEnd),xe&&xe.length&&(r.length&&(De=this.getSelectionStyles(Ee,Ee+1,!1),De=r.map(function(){return De[0]})),Fe?(ze=Ee,je=Ae):Ge?(ze=Ae-xe.length,je=Ae):(ze=Ae,je=Ae+xe.length),this.removeStyleFromTo(ze,je)),r.length&&(_e&&r.join("")===e.copiedText&&!e.disableStyleCopyPaste&&(De=e.copiedTextStyle),this.insertNewStyleBlock(r,Ee,De)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(ke){this.compositionStart=ke.target.selectionStart,this.compositionEnd=ke.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(e.copiedText=this.getSelectedText(),e.disableStyleCopyPaste?e.copiedTextStyle=null:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(ke){return ke&&ke.clipboardData||e.window.clipboardData},_getWidthBeforeCursor:function(ke,_e){var Ce=this._getLineLeftOffset(ke),Te;return _e>0&&(Te=this.__charBounds[ke][_e-1],Ce+=Te.left+Te.width),Ce},getDownCursorOffset:function(ke,_e){var Ce=this._getSelectionForOffset(ke,_e),Te=this.get2DCursorLocation(Ce),Se=Te.lineIndex;if(Se===this._textLines.length-1||ke.metaKey||ke.keyCode===34)return this._text.length-Ce;var xe=Te.charIndex,r=this._getWidthBeforeCursor(Se,xe),Oe=this._getIndexOnLine(Se+1,r),Ee=this._textLines[Se].slice(xe);return Ee.length+Oe+1+this.missingNewlineOffset(Se)},_getSelectionForOffset:function(ke,_e){return ke.shiftKey&&this.selectionStart!==this.selectionEnd&&_e?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(ke,_e){var Ce=this._getSelectionForOffset(ke,_e),Te=this.get2DCursorLocation(Ce),Se=Te.lineIndex;if(Se===0||ke.metaKey||ke.keyCode===33)return-Ce;var xe=Te.charIndex,r=this._getWidthBeforeCursor(Se,xe),Oe=this._getIndexOnLine(Se-1,r),Ee=this._textLines[Se].slice(0,xe),Ae=this.missingNewlineOffset(Se-1);return-this._textLines[Se-1].length+Oe-Ee.length+(1-Ae)},_getIndexOnLine:function(ke,_e){for(var Ce=this._textLines[ke],Te=this._getLineLeftOffset(ke),Se=Te,xe=0,r,Oe,Ee=0,Ae=Ce.length;Ee<Ae;Ee++)if(r=this.__charBounds[ke][Ee].width,Se+=r,Se>_e){Oe=!0;var Fe=Se-r,De=Se,ze=Math.abs(Fe-_e),je=Math.abs(De-_e);xe=je<ze?Ee:Ee-1;break}return Oe||(xe=Ce.length-1),xe},moveCursorDown:function(ke){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",ke)},moveCursorUp:function(ke){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",ke)},_moveCursorUpOrDown:function(ke,_e){var Ce="get"+ke+"CursorOffset",Te=this[Ce](_e,this._selectionDirection==="right");_e.shiftKey?this.moveCursorWithShift(Te):this.moveCursorWithoutShift(Te),Te!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(ke){var _e=this._selectionDirection==="left"?this.selectionStart+ke:this.selectionEnd+ke;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,_e),ke!==0},moveCursorWithoutShift:function(ke){return ke<0?(this.selectionStart+=ke,this.selectionEnd=this.selectionStart):(this.selectionEnd+=ke,this.selectionStart=this.selectionEnd),ke!==0},moveCursorLeft:function(ke){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",ke)},_move:function(ke,_e,Ce){var Te;if(ke.altKey)Te=this["findWordBoundary"+Ce](this[_e]);else if(ke.metaKey||ke.keyCode===35||ke.keyCode===36)Te=this["findLineBoundary"+Ce](this[_e]);else return this[_e]+=Ce==="Left"?-1:1,!0;if(typeof Te!==void 0&&this[_e]!==Te)return this[_e]=Te,!0},_moveLeft:function(ke,_e){return this._move(ke,_e,"Left")},_moveRight:function(ke,_e){return this._move(ke,_e,"Right")},moveCursorLeftWithoutShift:function(ke){var _e=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(_e=this._moveLeft(ke,"selectionStart")),this.selectionEnd=this.selectionStart,_e},moveCursorLeftWithShift:function(ke){if(this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd)return this._moveLeft(ke,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection="left",this._moveLeft(ke,"selectionStart")},moveCursorRight:function(ke){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",ke)},_moveCursorLeftOrRight:function(ke,_e){var Ce="moveCursor"+ke+"With";this._currentCursorOpacity=1,_e.shiftKey?Ce+="Shift":Ce+="outShift",this[Ce](_e)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(ke){if(this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd)return this._moveRight(ke,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection="right",this._moveRight(ke,"selectionEnd")},moveCursorRightWithoutShift:function(ke){var _e=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(_e=this._moveRight(ke,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,_e},removeChars:function(ke,_e){typeof _e=="undefined"&&(_e=ke+1),this.removeStyleFromTo(ke,_e),this._text.splice(ke,_e-ke),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(ke,_e,Ce,Te){typeof Te=="undefined"&&(Te=Ce),Te>Ce&&this.removeStyleFromTo(Ce,Te);var Se=e.util.string.graphemeSplit(ke);this.insertNewStyleBlock(Se,Ce,_e),this._text=[].concat(this._text.slice(0,Ce),Se,this._text.slice(Te)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var ke=e.util.toFixed,_e=/  +/g;e.util.object.extend(e.Text.prototype,{_toSVG:function(){var Ce=this._getSVGLeftTopOffsets(),Te=this._getSVGTextAndBg(Ce.textTop,Ce.textLeft);return this._wrapSVGTextAndBg(Te)},toSVG:function(Ce){return this._createBaseSVGMarkup(this._toSVG(),{reviver:Ce,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(Ce){var Te=!0,Se=this.getSvgTextDecoration(this);return[Ce.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",Se?'text-decoration="'+Se+'" ':"",'style="',this.getSvgStyles(Te),'"',this.addPaintOrder()," >",Ce.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(Ce,Te){var Se=[],xe=[],r=Ce,Oe;this._setSVGBg(xe);for(var Ee=0,Ae=this._textLines.length;Ee<Ae;Ee++)Oe=this._getLineLeftOffset(Ee),(this.textBackgroundColor||this.styleHas("textBackgroundColor",Ee))&&this._setSVGTextLineBg(xe,Ee,Te+Oe,r),this._setSVGTextLineText(Se,Ee,Te+Oe,r),r+=this.getHeightOfLine(Ee);return{textSpans:Se,textBgRects:xe}},_createTextCharSpan:function(Ce,Te,Se,xe){var r=Ce!==Ce.trim()||Ce.match(_e),Oe=this.getSvgSpanStyles(Te,r),Ee=Oe?'style="'+Oe+'"':"",Ae=Te.deltaY,Fe="",De=e.Object.NUM_FRACTION_DIGITS;return Ae&&(Fe=' dy="'+ke(Ae,De)+'" '),['<tspan x="',ke(Se,De),'" y="',ke(xe,De),'" ',Fe,Ee,">",e.util.string.escapeXml(Ce),"</tspan>"].join("")},_setSVGTextLineText:function(Ce,Te,Se,xe){var r=this.getHeightOfLine(Te),Oe=this.textAlign.indexOf("justify")!==-1,Ee,Ae,Fe="",De,ze,je=0,We=this._textLines[Te],Ge;xe+=r*(1-this._fontSizeFraction)/this.lineHeight;for(var Ye=0,Xe=We.length-1;Ye<=Xe;Ye++)Ge=Ye===Xe||this.charSpacing,Fe+=We[Ye],De=this.__charBounds[Te][Ye],je===0?(Se+=De.kernedWidth-De.width,je+=De.width):je+=De.kernedWidth,Oe&&!Ge&&this._reSpaceAndTab.test(We[Ye])&&(Ge=!0),Ge||(Ee=Ee||this.getCompleteStyleDeclaration(Te,Ye),Ae=this.getCompleteStyleDeclaration(Te,Ye+1),Ge=this._hasStyleChangedForSvg(Ee,Ae)),Ge&&(ze=this._getStyleDeclaration(Te,Ye)||{},Ce.push(this._createTextCharSpan(Fe,ze,Se,xe)),Fe="",Ee=Ae,Se+=je,je=0)},_pushTextBgRect:function(Ce,Te,Se,xe,r,Oe){var Ee=e.Object.NUM_FRACTION_DIGITS;Ce.push("		<rect ",this._getFillAttributes(Te),' x="',ke(Se,Ee),'" y="',ke(xe,Ee),'" width="',ke(r,Ee),'" height="',ke(Oe,Ee),`"></rect>
`)},_setSVGTextLineBg:function(Ce,Te,Se,xe){for(var r=this._textLines[Te],Oe=this.getHeightOfLine(Te)/this.lineHeight,Ee=0,Ae=0,Fe,De,ze=this.getValueOfPropertyAt(Te,0,"textBackgroundColor"),je=0,We=r.length;je<We;je++)Fe=this.__charBounds[Te][je],De=this.getValueOfPropertyAt(Te,je,"textBackgroundColor"),De!==ze?(ze&&this._pushTextBgRect(Ce,ze,Se+Ae,xe,Ee,Oe),Ae=Fe.left,Ee=Fe.width,ze=De):Ee+=Fe.kernedWidth;De&&this._pushTextBgRect(Ce,De,Se+Ae,xe,Ee,Oe)},_getFillAttributes:function(Ce){var Te=Ce&&typeof Ce=="string"?new e.Color(Ce):"";return!Te||!Te.getSource()||Te.getAlpha()===1?'fill="'+Ce+'"':'opacity="'+Te.getAlpha()+'" fill="'+Te.setAlpha(1).toRgb()+'"'},_getSVGLineTopOffset:function(Ce){for(var Te=0,Se=0,xe=0;xe<Ce;xe++)Te+=this.getHeightOfLine(xe);return Se=this.getHeightOfLine(xe),{lineTop:Te,offset:(this._fontSizeMult-this._fontSizeFraction)*Se/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(Ce){var Te=e.Object.prototype.getSvgStyles.call(this,Ce);return Te+" white-space: pre;"}})}(),function(ke){var _e=ke.fabric||(ke.fabric={});_e.Textbox=_e.util.createClass(_e.IText,_e.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:_e.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(Ce){for(var Te=0,Se=0,xe=0,r={},Oe=0;Oe<Ce.graphemeLines.length;Oe++)Ce.graphemeText[xe]===`
`&&Oe>0?(Se=0,xe++,Te++):!this.splitByGrapheme&&this._reSpaceAndTab.test(Ce.graphemeText[xe])&&Oe>0&&(Se++,xe++),r[Oe]={line:Te,offset:Se},xe+=Ce.graphemeLines[Oe].length,Se+=Ce.graphemeLines[Oe].length;return r},styleHas:function(Ce,Te){if(this._styleMap&&!this.isWrapping){var Se=this._styleMap[Te];Se&&(Te=Se.line)}return _e.Text.prototype.styleHas.call(this,Ce,Te)},isEmptyStyles:function(Ce){if(!this.styles)return!0;var Te=0,Se=Ce+1,xe,r,Oe=!1,Ee=this._styleMap[Ce],Ae=this._styleMap[Ce+1];Ee&&(Ce=Ee.line,Te=Ee.offset),Ae&&(Se=Ae.line,Oe=Se===Ce,xe=Ae.offset),r=typeof Ce=="undefined"?this.styles:{line:this.styles[Ce]};for(var Fe in r)for(var De in r[Fe])if(De>=Te&&(!Oe||De<xe))for(var ze in r[Fe][De])return!1;return!0},_getStyleDeclaration:function(Ce,Te){if(this._styleMap&&!this.isWrapping){var Se=this._styleMap[Ce];if(!Se)return null;Ce=Se.line,Te=Se.offset+Te}return this.callSuper("_getStyleDeclaration",Ce,Te)},_setStyleDeclaration:function(Ce,Te,Se){var xe=this._styleMap[Ce];Ce=xe.line,Te=xe.offset+Te,this.styles[Ce][Te]=Se},_deleteStyleDeclaration:function(Ce,Te){var Se=this._styleMap[Ce];Ce=Se.line,Te=Se.offset+Te,delete this.styles[Ce][Te]},_getLineStyle:function(Ce){var Te=this._styleMap[Ce];return!!this.styles[Te.line]},_setLineStyle:function(Ce){var Te=this._styleMap[Ce];this.styles[Te.line]={}},_wrapText:function(Ce,Te){var Se=[],xe;for(this.isWrapping=!0,xe=0;xe<Ce.length;xe++)Se=Se.concat(this._wrapLine(Ce[xe],xe,Te));return this.isWrapping=!1,Se},_measureWord:function(Ce,Te,Se){var xe=0,r,Oe=!0;Se=Se||0;for(var Ee=0,Ae=Ce.length;Ee<Ae;Ee++){var Fe=this._getGraphemeBox(Ce[Ee],Te,Ee+Se,r,Oe);xe+=Fe.kernedWidth,r=Ce[Ee]}return xe},_wrapLine:function(Ce,Te,Se,xe){var r=0,Oe=this.splitByGrapheme,Ee=[],Ae=[],Fe=Oe?_e.util.string.graphemeSplit(Ce):Ce.split(this._wordJoiners),De="",ze=0,je=Oe?"":" ",We=0,Ge=0,Ye=0,Xe=!0,Ke=this._getWidthOfCharSpacing(),xe=xe||0;Fe.length===0&&Fe.push([]),Se-=xe;for(var er=0;er<Fe.length;er++)De=Oe?Fe[er]:_e.util.string.graphemeSplit(Fe[er]),We=this._measureWord(De,Te,ze),ze+=De.length,r+=Ge+We-Ke,r>Se&&!Xe?(Ee.push(Ae),Ae=[],r=We,Xe=!0):r+=Ke,!Xe&&!Oe&&Ae.push(je),Ae=Ae.concat(De),Ge=Oe?0:this._measureWord([je],Te,ze),ze++,Xe=!1,We>Ye&&(Ye=We);return er&&Ee.push(Ae),Ye+xe>this.dynamicMinWidth&&(this.dynamicMinWidth=Ye-Ke+xe),Ee},isEndOfWrapping:function(Ce){return!this._styleMap[Ce+1]||this._styleMap[Ce+1].line!==this._styleMap[Ce].line},missingNewlineOffset:function(Ce){return this.splitByGrapheme?this.isEndOfWrapping(Ce)?1:0:1},_splitTextIntoLines:function(Ce){for(var Te=_e.Text.prototype._splitTextIntoLines.call(this,Ce),Se=this._wrapText(Te.lines,this.width),xe=new Array(Se.length),r=0;r<Se.length;r++)xe[r]=Se[r].join("");return Te.lines=xe,Te.graphemeLines=Se,Te},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var Ce={};for(var Te in this._styleMap)this._textLines[Te]&&(Ce[this._styleMap[Te].line]=1);for(var Te in this.styles)Ce[Te]||delete this.styles[Te]},toObject:function(Ce){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(Ce))}}),_e.Textbox.fromObject=function(Ce,Te){return _e.Object._fromObject("Textbox",Ce,Te,"text")}}(Re),function(){var ke=e.controlsUtils,_e=ke.scaleSkewCursorStyleHandler,Ce=ke.scaleCursorStyleHandler,Te=ke.scalingEqually,Se=ke.scalingYOrSkewingX,xe=ke.scalingXOrSkewingY,r=ke.scaleOrSkewActionName,Oe=e.Object.prototype.controls;if(Oe.ml=new e.Control({x:-.5,y:0,cursorStyleHandler:_e,actionHandler:xe,getActionName:r}),Oe.mr=new e.Control({x:.5,y:0,cursorStyleHandler:_e,actionHandler:xe,getActionName:r}),Oe.mb=new e.Control({x:0,y:.5,cursorStyleHandler:_e,actionHandler:Se,getActionName:r}),Oe.mt=new e.Control({x:0,y:-.5,cursorStyleHandler:_e,actionHandler:Se,getActionName:r}),Oe.tl=new e.Control({x:-.5,y:-.5,cursorStyleHandler:Ce,actionHandler:Te}),Oe.tr=new e.Control({x:.5,y:-.5,cursorStyleHandler:Ce,actionHandler:Te}),Oe.bl=new e.Control({x:-.5,y:.5,cursorStyleHandler:Ce,actionHandler:Te}),Oe.br=new e.Control({x:.5,y:.5,cursorStyleHandler:Ce,actionHandler:Te}),Oe.mtr=new e.Control({x:0,y:-.5,actionHandler:ke.rotationWithSnapping,cursorStyleHandler:ke.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),e.Textbox){var Ee=e.Textbox.prototype.controls={};Ee.mtr=Oe.mtr,Ee.tr=Oe.tr,Ee.br=Oe.br,Ee.tl=Oe.tl,Ee.bl=Oe.bl,Ee.mt=Oe.mt,Ee.mb=Oe.mb,Ee.mr=new e.Control({x:.5,y:0,actionHandler:ke.changeWidth,cursorStyleHandler:_e,actionName:"resizing"}),Ee.ml=new e.Control({x:-.5,y:0,actionHandler:ke.changeWidth,cursorStyleHandler:_e,actionName:"resizing"})}}()})(fabric);var loadImage={exports:{}};(function(Re){(function(e){var t=e.URL||e.webkitURL;function Pe(Ce){return t?t.createObjectURL(Ce):!1}function Me(Ce){return t?t.revokeObjectURL(Ce):!1}function Ie(Ce,Te){Ce&&Ce.slice(0,5)==="blob:"&&!(Te&&Te.noRevoke)&&Me(Ce)}function Be(Ce,Te,Se,xe){if(!e.FileReader)return!1;var r=new FileReader;r.onload=function(){Te.call(r,this.result)},Se&&(r.onabort=r.onerror=function(){Se.call(r,this.error)});var Oe=r[xe||"readAsDataURL"];if(Oe)return Oe.call(r,Ce),r}function ke(Ce,Te){return Object.prototype.toString.call(Te)==="[object "+Ce+"]"}function _e(Ce,Te,Se){function xe(r,Oe){var Ee=document.createElement("img"),Ae;function Fe(ze,je){if(r===Oe){r&&r(ze,je);return}else if(ze instanceof Error){Oe(ze);return}je=je||{},je.image=ze,r(je)}function De(ze,je){je&&e.console&&console.log(je),ze&&ke("Blob",ze)?(Ce=ze,Ae=Pe(Ce)):(Ae=Ce,Se&&Se.crossOrigin&&(Ee.crossOrigin=Se.crossOrigin)),Ee.src=Ae}if(Ee.onerror=function(ze){Ie(Ae,Se),Oe&&Oe.call(Ee,ze)},Ee.onload=function(){Ie(Ae,Se);var ze={originalWidth:Ee.naturalWidth||Ee.width,originalHeight:Ee.naturalHeight||Ee.height};try{_e.transform(Ee,Se,Fe,Ce,ze)}catch(je){Oe&&Oe(je)}},typeof Ce=="string")return _e.requiresMetaData(Se)?_e.fetchBlob(Ce,De,Se):De(),Ee;if(ke("Blob",Ce)||ke("File",Ce))return Ae=Pe(Ce),Ae?(Ee.src=Ae,Ee):Be(Ce,function(ze){Ee.src=ze},Oe)}return e.Promise&&typeof Te!="function"?(Se=Te,new Promise(xe)):xe(Te,Te)}_e.requiresMetaData=function(Ce){return Ce&&Ce.meta},_e.fetchBlob=function(Ce,Te){Te()},_e.transform=function(Ce,Te,Se,xe,r){Se(Ce,r)},_e.global=e,_e.readFile=Be,_e.isInstanceOf=ke,_e.createObjectURL=Pe,_e.revokeObjectURL=Me,Re.exports?Re.exports=_e:e.loadImage=_e})(typeof window!="undefined"&&window||commonjsGlobal)})(loadImage);var loadImageScale={exports:{}};(function(Re){(function(e){Re.exports?e(loadImage.exports):e(window.loadImage)})(function(e){var t=e.transform;e.createCanvas=function(Pe,Me,Ie){if(Ie&&e.global.OffscreenCanvas)return new OffscreenCanvas(Pe,Me);var Be=document.createElement("canvas");return Be.width=Pe,Be.height=Me,Be},e.transform=function(Pe,Me,Ie,Be,ke){t.call(e,e.scale(Pe,Me,ke),Me,Ie,Be,ke)},e.transformCoordinates=function(){},e.getTransformedOptions=function(Pe,Me){var Ie=Me.aspectRatio,Be,ke,_e,Ce;if(!Ie)return Me;Be={};for(ke in Me)Object.prototype.hasOwnProperty.call(Me,ke)&&(Be[ke]=Me[ke]);return Be.crop=!0,_e=Pe.naturalWidth||Pe.width,Ce=Pe.naturalHeight||Pe.height,_e/Ce>Ie?(Be.maxWidth=Ce*Ie,Be.maxHeight=Ce):(Be.maxWidth=_e,Be.maxHeight=_e/Ie),Be},e.drawImage=function(Pe,Me,Ie,Be,ke,_e,Ce,Te,Se){var xe=Me.getContext("2d");return Se.imageSmoothingEnabled===!1?(xe.msImageSmoothingEnabled=!1,xe.imageSmoothingEnabled=!1):Se.imageSmoothingQuality&&(xe.imageSmoothingQuality=Se.imageSmoothingQuality),xe.drawImage(Pe,Ie,Be,ke,_e,0,0,Ce,Te),xe},e.requiresCanvas=function(Pe){return Pe.canvas||Pe.crop||!!Pe.aspectRatio},e.scale=function(Pe,Me,Ie){Me=Me||{},Ie=Ie||{};var Be=Pe.getContext||e.requiresCanvas(Me)&&!!e.global.HTMLCanvasElement,ke=Pe.naturalWidth||Pe.width,_e=Pe.naturalHeight||Pe.height,Ce=ke,Te=_e,Se,xe,r,Oe,Ee,Ae,Fe,De,ze,je,We,Ge;function Ye(){var Ke=Math.max((r||Ce)/Ce,(Oe||Te)/Te);Ke>1&&(Ce*=Ke,Te*=Ke)}function Xe(){var Ke=Math.min((Se||Ce)/Ce,(xe||Te)/Te);Ke<1&&(Ce*=Ke,Te*=Ke)}if(Be&&(Me=e.getTransformedOptions(Pe,Me,Ie),Fe=Me.left||0,De=Me.top||0,Me.sourceWidth?(Ee=Me.sourceWidth,Me.right!==void 0&&Me.left===void 0&&(Fe=ke-Ee-Me.right)):Ee=ke-Fe-(Me.right||0),Me.sourceHeight?(Ae=Me.sourceHeight,Me.bottom!==void 0&&Me.top===void 0&&(De=_e-Ae-Me.bottom)):Ae=_e-De-(Me.bottom||0),Ce=Ee,Te=Ae),Se=Me.maxWidth,xe=Me.maxHeight,r=Me.minWidth,Oe=Me.minHeight,Be&&Se&&xe&&Me.crop?(Ce=Se,Te=xe,We=Ee/Ae-Se/xe,We<0?(Ae=xe*Ee/Se,Me.top===void 0&&Me.bottom===void 0&&(De=(_e-Ae)/2)):We>0&&(Ee=Se*Ae/xe,Me.left===void 0&&Me.right===void 0&&(Fe=(ke-Ee)/2))):((Me.contain||Me.cover)&&(r=Se=Se||r,Oe=xe=xe||Oe),Me.cover?(Xe(),Ye()):(Ye(),Xe())),Be){if(ze=Me.pixelRatio,ze>1&&!(Pe.style.width&&Math.floor(parseFloat(Pe.style.width,10))===Math.floor(ke/ze))&&(Ce*=ze,Te*=ze),e.orientationCropBug&&!Pe.getContext&&(Fe||De||Ee!==ke||Ae!==_e)&&(We=Pe,Pe=e.createCanvas(ke,_e,!0),e.drawImage(We,Pe,0,0,ke,_e,ke,_e,Me)),je=Me.downsamplingRatio,je>0&&je<1&&Ce<Ee&&Te<Ae)for(;Ee*je>Ce;)Ge=e.createCanvas(Ee*je,Ae*je,!0),e.drawImage(Pe,Ge,Fe,De,Ee,Ae,Ge.width,Ge.height,Me),Fe=0,De=0,Ee=Ge.width,Ae=Ge.height,Pe=Ge;return Ge=e.createCanvas(Ce,Te),e.transformCoordinates(Ge,Me,Ie),ze>1&&(Ge.style.width=Ge.width/ze+"px"),e.drawImage(Pe,Ge,Fe,De,Ee,Ae,Ce,Te,Me).setTransform(1,0,0,1,0,0),Ge}return Pe.width=Ce,Pe.height=Te,Pe}})})(loadImageScale);var loadImageMeta={exports:{}};(function(Re){(function(e){Re.exports?e(loadImage.exports):e(window.loadImage)})(function(e){var t=e.global,Pe=e.transform,Me=t.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),Ie=t.ArrayBuffer&&ArrayBuffer.prototype.slice||function(Te,Se){Se=Se||this.byteLength-Te;var xe=new Uint8Array(this,Te,Se),r=new Uint8Array(Se);return r.set(xe),r.buffer},Be={jpeg:{65505:[],65517:[]}};function ke(Te,Se,xe,r){var Oe=this;function Ee(Ae,Fe){if(!(t.DataView&&Me&&Te&&Te.size>=12&&Te.type==="image/jpeg"))return Ae(r);var De=xe.maxMetaDataSize||262144;e.readFile(Me.call(Te,0,De),function(ze){var je=new DataView(ze);if(je.getUint16(0)!==65496)return Fe(new Error("Invalid JPEG file: Missing JPEG marker."));for(var We=2,Ge=je.byteLength-4,Ye=We,Xe,Ke,er,Qe;We<Ge&&(Xe=je.getUint16(We),Xe>=65504&&Xe<=65519||Xe===65534);){if(Ke=je.getUint16(We+2)+2,We+Ke>je.byteLength)break;if(er=Be.jpeg[Xe],er&&!xe.disableMetaDataParsers)for(Qe=0;Qe<er.length;Qe+=1)er[Qe].call(Oe,je,We,Ke,r,xe);We+=Ke,Ye=We}!xe.disableImageHead&&Ye>6&&(r.imageHead=Ie.call(ze,0,Ye)),Ae(r)},Fe,"readAsArrayBuffer")||Ae(r)}return xe=xe||{},t.Promise&&typeof Se!="function"?(xe=Se||{},r=xe,new Promise(Ee)):(r=r||{},Ee(Se,Se))}function _e(Te,Se,xe){return!Te||!Se||!xe?null:new Blob([xe,Me.call(Te,Se.byteLength)],{type:"image/jpeg"})}function Ce(Te,Se,xe){var r={maxMetaDataSize:1024,disableMetaDataParsers:!0};if(!xe&&t.Promise)return ke(Te,r).then(function(Oe){return _e(Te,Oe.imageHead,Se)});ke(Te,function(Oe){xe(_e(Te,Oe.imageHead,Se))},r)}e.transform=function(Te,Se,xe,r,Oe){e.requiresMetaData(Se)?(Oe=Oe||{},ke(r,function(Ee){Ee!==Oe&&(t.console&&console.log(Ee),Ee=Oe),Pe.call(e,Te,Se,xe,r,Ee)},Se,Oe)):Pe.apply(e,arguments)},e.blobSlice=Me,e.bufferSlice=Ie,e.replaceHead=Ce,e.parseMetaData=ke,e.metaDataParsers=Be})})(loadImageMeta);var loadImageFetch={exports:{}};(function(Re){(function(e){Re.exports?e(loadImage.exports):e(window.loadImage)})(function(e){var t=e.global;t.fetch&&t.Request&&t.Response&&t.Response.prototype.blob?e.fetchBlob=function(Pe,Me,Ie){function Be(ke){return ke.blob()}if(t.Promise&&typeof Me!="function")return fetch(new Request(Pe,Me)).then(Be);fetch(new Request(Pe,Ie)).then(Be).then(Me).catch(function(ke){Me(null,ke)})}:t.XMLHttpRequest&&new XMLHttpRequest().responseType===""&&(e.fetchBlob=function(Pe,Me,Ie){function Be(ke,_e){Ie=Ie||{};var Ce=new XMLHttpRequest;Ce.open(Ie.method||"GET",Pe),Ie.headers&&Object.keys(Ie.headers).forEach(function(Te){Ce.setRequestHeader(Te,Ie.headers[Te])}),Ce.withCredentials=Ie.credentials==="include",Ce.responseType="blob",Ce.onload=function(){ke(Ce.response)},Ce.onerror=Ce.onabort=Ce.ontimeout=function(Te){ke===_e?_e(null,Te):_e(Te)},Ce.send(Ie.body)}return t.Promise&&typeof Me!="function"?(Ie=Me,new Promise(Be)):Be(Me,Me)})})})(loadImageFetch);var loadImageExif={exports:{}};(function(Re){(function(e){Re.exports?e(loadImage.exports,loadImageMeta.exports):e(window.loadImage)})(function(e){function t(Ce){Ce&&(Object.defineProperty(this,"map",{value:this.ifds[Ce].map}),Object.defineProperty(this,"tags",{value:this.tags&&this.tags[Ce]||{}}))}t.prototype.map={Orientation:274,Thumbnail:"ifd1",Blob:513,Exif:34665,GPSInfo:34853,Interoperability:40965},t.prototype.ifds={ifd1:{name:"Thumbnail",map:t.prototype.map},34665:{name:"Exif",map:{}},34853:{name:"GPSInfo",map:{}},40965:{name:"Interoperability",map:{}}},t.prototype.get=function(Ce){return this[Ce]||this[this.map[Ce]]};function Pe(Ce,Te,Se){if(!!Se&&!(Te+Se>Ce.byteLength))return new Blob([e.bufferSlice.call(Ce.buffer,Te,Te+Se)],{type:"image/jpeg"})}var Me={1:{getValue:function(Ce,Te){return Ce.getUint8(Te)},size:1},2:{getValue:function(Ce,Te){return String.fromCharCode(Ce.getUint8(Te))},size:1,ascii:!0},3:{getValue:function(Ce,Te,Se){return Ce.getUint16(Te,Se)},size:2},4:{getValue:function(Ce,Te,Se){return Ce.getUint32(Te,Se)},size:4},5:{getValue:function(Ce,Te,Se){return Ce.getUint32(Te,Se)/Ce.getUint32(Te+4,Se)},size:8},9:{getValue:function(Ce,Te,Se){return Ce.getInt32(Te,Se)},size:4},10:{getValue:function(Ce,Te,Se){return Ce.getInt32(Te,Se)/Ce.getInt32(Te+4,Se)},size:8}};Me[7]=Me[1];function Ie(Ce,Te,Se,xe,r,Oe){var Ee=Me[xe],Ae,Fe,De,ze,je,We;if(!!Ee&&(Ae=Ee.size*r,Fe=Ae>4?Te+Ce.getUint32(Se+8,Oe):Se+8,!(Fe+Ae>Ce.byteLength))){if(r===1)return Ee.getValue(Ce,Fe,Oe);for(De=[],ze=0;ze<r;ze+=1)De[ze]=Ee.getValue(Ce,Fe+ze*Ee.size,Oe);if(Ee.ascii){for(je="",ze=0;ze<De.length&&(We=De[ze],We!=="\0");ze+=1)je+=We;return je}return De}}function Be(Ce,Te,Se){return(!Ce||Ce[Se])&&(!Te||Te[Se]!==!0)}function ke(Ce,Te,Se,xe,r,Oe,Ee,Ae){var Fe,De,ze,je,We,Ge;if(!(Se+6>Ce.byteLength)&&(Fe=Ce.getUint16(Se,xe),De=Se+2+12*Fe,!(De+4>Ce.byteLength))){for(ze=0;ze<Fe;ze+=1)je=Se+2+12*ze,We=Ce.getUint16(je,xe),!!Be(Ee,Ae,We)&&(Ge=Ie(Ce,Te,je,Ce.getUint16(je+2,xe),Ce.getUint32(je+4,xe),xe),r[We]=Ge,Oe&&(Oe[We]=je));return Ce.getUint32(De,xe)}}function _e(Ce,Te,Se,xe,r,Oe,Ee){var Ae=Ce.exif[Te];Ae&&(Ce.exif[Te]=new t(Te),Ce.exifOffsets&&(Ce.exifOffsets[Te]=new t(Te)),ke(Se,xe,xe+Ae,r,Ce.exif[Te],Ce.exifOffsets&&Ce.exifOffsets[Te],Oe&&Oe[Te],Ee&&Ee[Te]))}e.parseExifData=function(Ce,Te,Se,xe,r){if(!r.disableExif){var Oe=r.includeExifTags,Ee=r.excludeExifTags||{34665:{37500:!0}},Ae=Te+10,Fe,De,ze;if(Ce.getUint32(Te+4)===1165519206&&!(Ae+8>Ce.byteLength)&&Ce.getUint16(Te+8)===0){switch(Ce.getUint16(Ae)){case 18761:Fe=!0;break;case 19789:Fe=!1;break;default:return}Ce.getUint16(Ae+2,Fe)===42&&(De=Ce.getUint32(Ae+4,Fe),xe.exif=new t,r.disableExifOffsets||(xe.exifOffsets=new t,xe.exifTiffOffset=Ae,xe.exifLittleEndian=Fe),De=ke(Ce,Ae,Ae+De,Fe,xe.exif,xe.exifOffsets,Oe,Ee),De&&Be(Oe,Ee,"ifd1")&&(xe.exif.ifd1=De,xe.exifOffsets&&(xe.exifOffsets.ifd1=Ae+De)),Object.keys(xe.exif.ifds).forEach(function(je){_e(xe,je,Ce,Ae,Fe,Oe,Ee)}),ze=xe.exif.ifd1,ze&&ze[513]&&(ze[513]=Pe(Ce,Ae+ze[513],ze[514])))}}},e.metaDataParsers.jpeg[65505].push(e.parseExifData),e.exifWriters={274:function(Ce,Te,Se){var xe=Te.exifOffsets[274];if(!xe)return Ce;var r=new DataView(Ce,xe+8,2);return r.setUint16(0,Se,Te.exifLittleEndian),Ce}},e.writeExifData=function(Ce,Te,Se,xe){return e.exifWriters[Te.exif.map[Se]](Ce,Te,xe)},e.ExifMap=t})})(loadImageExif);var loadImageExifMap={exports:{}};(function(Re){(function(e){Re.exports?e(loadImage.exports,loadImageExif.exports):e(window.loadImage)})(function(e){var t=e.ExifMap.prototype;t.tags={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright",34665:{36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",42240:"Gamma",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",36880:"OffsetTime",36881:"OffsetTimeOriginal",36882:"OffsetTimeDigitized",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"PhotographicSensitivity",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber"},34853:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},40965:{1:"InteroperabilityIndex"}},t.tags.ifd1=t.tags,t.stringValues={ExposureProgram:{0:"Undefined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Undefined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},ComponentsConfiguration:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"},Orientation:{1:"Original",2:"Horizontal flip",3:"Rotate 180\xB0 CCW",4:"Vertical flip",5:"Vertical flip + Rotate 90\xB0 CW",6:"Rotate 90\xB0 CW",7:"Horizontal flip + Rotate 90\xB0 CW",8:"Rotate 90\xB0 CCW"}},t.getText=function(Pe){var Me=this.get(Pe);switch(Pe){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":case"Orientation":return this.stringValues[Pe][Me];case"ExifVersion":case"FlashpixVersion":return Me?String.fromCharCode(Me[0],Me[1],Me[2],Me[3]):void 0;case"ComponentsConfiguration":return Me?this.stringValues[Pe][Me[0]]+this.stringValues[Pe][Me[1]]+this.stringValues[Pe][Me[2]]+this.stringValues[Pe][Me[3]]:void 0;case"GPSVersionID":return Me?Me[0]+"."+Me[1]+"."+Me[2]+"."+Me[3]:void 0}return String(Me)},t.getAll=function(){var Pe={},Me,Ie,Be;for(Me in this)Object.prototype.hasOwnProperty.call(this,Me)&&(Ie=this[Me],Ie&&Ie.getAll?Pe[this.ifds[Me].name]=Ie.getAll():(Be=this.tags[Me],Be&&(Pe[Be]=this.getText(Be))));return Pe},t.getName=function(Pe){var Me=this.tags[Pe];return typeof Me=="object"?this.ifds[Pe].name:Me},function(){var Pe=t.tags,Me,Ie,Be;for(Me in Pe)if(Object.prototype.hasOwnProperty.call(Pe,Me))if(Ie=t.ifds[Me],Ie){Be=Pe[Me];for(Me in Be)Object.prototype.hasOwnProperty.call(Be,Me)&&(Ie.map[Be[Me]]=Number(Me))}else t.map[Pe[Me]]=Number(Me)}()})})(loadImageExifMap);var loadImageIptc={exports:{}};(function(Re){(function(e){Re.exports?e(loadImage.exports,loadImageMeta.exports):e(window.loadImage)})(function(e){function t(){}t.prototype.map={ObjectName:5},t.prototype.types={0:"Uint16",200:"Uint16",201:"Uint16",202:"binary"},t.prototype.get=function(Ce){return this[Ce]||this[this.map[Ce]]};function Pe(Ce,Te,Se){for(var xe="",r=Te+Se,Oe=Te;Oe<r;Oe+=1)xe+=String.fromCharCode(Ce.getUint8(Oe));return xe}function Me(Ce,Te,Se,xe,r){return Te.types[Ce]==="binary"?new Blob([Se.buffer.slice(xe,xe+r)]):Te.types[Ce]==="Uint16"?Se.getUint16(xe):Pe(Se,xe,r)}function Ie(Ce,Te){return Ce===void 0?Te:Ce instanceof Array?(Ce.push(Te),Ce):[Ce,Te]}function Be(Ce,Te,Se,xe,r,Oe){for(var Ee,Ae,Fe,De=Te+Se,ze=Te;ze<De;)Ce.getUint8(ze)===28&&Ce.getUint8(ze+1)===2&&(Fe=Ce.getUint8(ze+2),(!r||r[Fe])&&(!Oe||!Oe[Fe])&&(Ae=Ce.getInt16(ze+3),Ee=Me(Fe,xe.iptc,Ce,ze+5,Ae),xe.iptc[Fe]=Ie(xe.iptc[Fe],Ee),xe.iptcOffsets&&(xe.iptcOffsets[Fe]=ze))),ze+=1}function ke(Ce,Te){return Ce.getUint32(Te)===943868237&&Ce.getUint16(Te+4)===1028}function _e(Ce,Te){var Se=Ce.getUint8(Te+7);return Se%2!=0&&(Se+=1),Se===0&&(Se=4),Se}e.parseIptcData=function(Ce,Te,Se,xe,r){if(!r.disableIptc)for(var Oe=Te+Se;Te+8<Oe;){if(ke(Ce,Te)){var Ee=_e(Ce,Te),Ae=Te+8+Ee;if(Ae>Oe)break;var Fe=Ce.getUint16(Te+6+Ee);if(Te+Fe>Oe)break;xe.iptc=new t,r.disableIptcOffsets||(xe.iptcOffsets=new t),Be(Ce,Ae,Fe,xe,r.includeIptcTags,r.excludeIptcTags||{202:!0});return}Te+=1}},e.metaDataParsers.jpeg[65517].push(e.parseIptcData),e.IptcMap=t})})(loadImageIptc);var loadImageIptcMap={exports:{}};(function(Re){(function(e){Re.exports?e(loadImage.exports,loadImageIptc.exports):e(window.loadImage)})(function(e){var t=e.IptcMap.prototype;t.tags={0:"ApplicationRecordVersion",3:"ObjectTypeReference",4:"ObjectAttributeReference",5:"ObjectName",7:"EditStatus",8:"EditorialUpdate",10:"Urgency",12:"SubjectReference",15:"Category",20:"SupplementalCategories",22:"FixtureIdentifier",25:"Keywords",26:"ContentLocationCode",27:"ContentLocationName",30:"ReleaseDate",35:"ReleaseTime",37:"ExpirationDate",38:"ExpirationTime",40:"SpecialInstructions",42:"ActionAdvised",45:"ReferenceService",47:"ReferenceDate",50:"ReferenceNumber",55:"DateCreated",60:"TimeCreated",62:"DigitalCreationDate",63:"DigitalCreationTime",65:"OriginatingProgram",70:"ProgramVersion",75:"ObjectCycle",80:"Byline",85:"BylineTitle",90:"City",92:"Sublocation",95:"State",100:"CountryCode",101:"Country",103:"OriginalTransmissionReference",105:"Headline",110:"Credit",115:"Source",116:"CopyrightNotice",118:"Contact",120:"Caption",121:"LocalCaption",122:"Writer",125:"RasterizedCaption",130:"ImageType",131:"ImageOrientation",135:"LanguageIdentifier",150:"AudioType",151:"AudioSamplingRate",152:"AudioSamplingResolution",153:"AudioDuration",154:"AudioOutcue",184:"JobID",185:"MasterDocumentID",186:"ShortDocumentID",187:"UniqueDocumentID",188:"OwnerID",200:"ObjectPreviewFileFormat",201:"ObjectPreviewFileVersion",202:"ObjectPreviewData",221:"Prefs",225:"ClassifyState",228:"SimilarityIndex",230:"DocumentNotes",231:"DocumentHistory",232:"ExifCameraInfo",255:"CatalogSets"},t.stringValues={10:{0:"0 (reserved)",1:"1 (most urgent)",2:"2",3:"3",4:"4",5:"5 (normal urgency)",6:"6",7:"7",8:"8 (least urgent)",9:"9 (user-defined priority)"},75:{a:"Morning",b:"Both Morning and Evening",p:"Evening"},131:{L:"Landscape",P:"Portrait",S:"Square"}},t.getText=function(Pe){var Me=this.get(Pe),Ie=this.map[Pe],Be=this.stringValues[Ie];return Be?Be[Me]:String(Me)},t.getAll=function(){var Pe={},Me,Ie;for(Me in this)Object.prototype.hasOwnProperty.call(this,Me)&&(Ie=this.tags[Me],Ie&&(Pe[Ie]=this.getText(Ie)));return Pe},t.getName=function(Pe){return this.tags[Pe]},function(){var Pe=t.tags,Me=t.map||{},Ie;for(Ie in Pe)Object.prototype.hasOwnProperty.call(Pe,Ie)&&(Me[Pe[Ie]]=Number(Ie))}()})})(loadImageIptcMap);var loadImageOrientation={exports:{}};(function(Re){(function(e){Re.exports?e(loadImage.exports,loadImageScale.exports,loadImageMeta.exports):e(window.loadImage)})(function(e){var t=e.transform,Pe=e.requiresCanvas,Me=e.requiresMetaData,Ie=e.transformCoordinates,Be=e.getTransformedOptions;(function(Te){if(!!Te.global.document){var Se="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAIAAwMBEQACEQEDEQH/xABRAAEAAAAAAAAAAAAAAAAAAAAKEAEBAQADAQEAAAAAAAAAAAAGBQQDCAkCBwEBAAAAAAAAAAAAAAAAAAAAABEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8AG8T9NfSMEVMhQvoP3fFiRZ+MTHDifa/95OFSZU5OzRzxkyejv8ciEfhSceSXGjS8eSdLnZc2HDm4M3BxcXwH/9k=",xe=document.createElement("img");xe.onload=function(){if(Te.orientation=xe.width===2&&xe.height===3,Te.orientation){var r=Te.createCanvas(1,1,!0),Oe=r.getContext("2d");Oe.drawImage(xe,1,1,1,1,0,0,1,1),Te.orientationCropBug=Oe.getImageData(0,0,1,1).data.toString()!=="255,255,255,255"}},xe.src=Se}})(e);function ke(Te,Se){var xe=Te&&Te.orientation;return xe===!0&&!e.orientation||xe===1&&e.orientation||(!Se||e.orientation)&&xe>1&&xe<9}function _e(Te,Se){return Te!==Se&&(Te===1&&Se>1&&Se<9||Te>1&&Te<9)}function Ce(Te,Se){if(Se>1&&Se<9)switch(Te){case 2:case 4:return Se>4;case 5:case 7:return Se%2==0;case 6:case 8:return Se===2||Se===4||Se===5||Se===7}return!1}e.requiresCanvas=function(Te){return ke(Te)||Pe.call(e,Te)},e.requiresMetaData=function(Te){return ke(Te,!0)||Me.call(e,Te)},e.transform=function(Te,Se,xe,r,Oe){t.call(e,Te,Se,function(Ee,Ae){if(Ae){var Fe=e.orientation&&Ae.exif&&Ae.exif.get("Orientation");if(Fe>4&&Fe<9){var De=Ae.originalWidth,ze=Ae.originalHeight;Ae.originalWidth=ze,Ae.originalHeight=De}}xe(Ee,Ae)},r,Oe)},e.getTransformedOptions=function(Te,Se,xe){var r=Be.call(e,Te,Se),Oe=xe.exif&&xe.exif.get("Orientation"),Ee=r.orientation,Ae=e.orientation&&Oe;if(Ee===!0&&(Ee=Oe),!_e(Ee,Ae))return r;var Fe=r.top,De=r.right,ze=r.bottom,je=r.left,We={};for(var Ge in r)Object.prototype.hasOwnProperty.call(r,Ge)&&(We[Ge]=r[Ge]);if(We.orientation=Ee,(Ee>4&&!(Ae>4)||Ee<5&&Ae>4)&&(We.maxWidth=r.maxHeight,We.maxHeight=r.maxWidth,We.minWidth=r.minHeight,We.minHeight=r.minWidth,We.sourceWidth=r.sourceHeight,We.sourceHeight=r.sourceWidth),Ae>1){switch(Ae){case 2:De=r.left,je=r.right;break;case 3:Fe=r.bottom,De=r.left,ze=r.top,je=r.right;break;case 4:Fe=r.bottom,ze=r.top;break;case 5:Fe=r.left,De=r.bottom,ze=r.right,je=r.top;break;case 6:Fe=r.left,De=r.top,ze=r.right,je=r.bottom;break;case 7:Fe=r.right,De=r.top,ze=r.left,je=r.bottom;break;case 8:Fe=r.right,De=r.bottom,ze=r.left,je=r.top;break}if(Ce(Ee,Ae)){var Ye=Fe,Xe=De;Fe=ze,De=je,ze=Ye,je=Xe}}switch(We.top=Fe,We.right=De,We.bottom=ze,We.left=je,Ee){case 2:We.right=je,We.left=De;break;case 3:We.top=ze,We.right=je,We.bottom=Fe,We.left=De;break;case 4:We.top=ze,We.bottom=Fe;break;case 5:We.top=je,We.right=ze,We.bottom=De,We.left=Fe;break;case 6:We.top=De,We.right=ze,We.bottom=je,We.left=Fe;break;case 7:We.top=De,We.right=Fe,We.bottom=je,We.left=ze;break;case 8:We.top=je,We.right=Fe,We.bottom=De,We.left=ze;break}return We},e.transformCoordinates=function(Te,Se,xe){Ie.call(e,Te,Se,xe);var r=Se.orientation,Oe=e.orientation&&xe.exif&&xe.exif.get("Orientation");if(!!_e(r,Oe)){var Ee=Te.getContext("2d"),Ae=Te.width,Fe=Te.height,De=Ae,ze=Fe;switch((r>4&&!(Oe>4)||r<5&&Oe>4)&&(Te.width=Fe,Te.height=Ae),r>4&&(De=Fe,ze=Ae),Oe){case 2:Ee.translate(De,0),Ee.scale(-1,1);break;case 3:Ee.translate(De,ze),Ee.rotate(Math.PI);break;case 4:Ee.translate(0,ze),Ee.scale(1,-1);break;case 5:Ee.rotate(-.5*Math.PI),Ee.scale(-1,1);break;case 6:Ee.rotate(-.5*Math.PI),Ee.translate(-De,0);break;case 7:Ee.rotate(-.5*Math.PI),Ee.translate(-De,ze),Ee.scale(1,-1);break;case 8:Ee.rotate(.5*Math.PI),Ee.translate(0,-ze);break}switch(Ce(r,Oe)&&(Ee.translate(De,ze),Ee.rotate(Math.PI)),r){case 2:Ee.translate(Ae,0),Ee.scale(-1,1);break;case 3:Ee.translate(Ae,Fe),Ee.rotate(Math.PI);break;case 4:Ee.translate(0,Fe),Ee.scale(1,-1);break;case 5:Ee.rotate(.5*Math.PI),Ee.scale(1,-1);break;case 6:Ee.rotate(.5*Math.PI),Ee.translate(0,-Fe);break;case 7:Ee.rotate(.5*Math.PI),Ee.translate(Ae,-Fe),Ee.scale(-1,1);break;case 8:Ee.rotate(-.5*Math.PI),Ee.translate(-Ae,0);break}}}})})(loadImageOrientation);var js=loadImage.exports;const Format={JPEG:"jpg",PNG:"png",PDF:"pdf",SVG:"svg"},Unit={in:"in",mm:"mm"},Size={A2:[594,420],A3:[420,297],A4:[297,210],A5:[210,148],A6:[148,105],B2:[707,500],B3:[500,353],B4:[353,250],B5:[250,176],B6:[176,125]},PageOrientation={Landscape:"landscape",Portrait:"portrait"},DPI={72:72,96:96,200:200,300:300,400:400};class MapGenerator{constructor(e,t,Pe,Me,Ie,Be){pi(this,"map");pi(this,"width");pi(this,"height");pi(this,"dpi");pi(this,"format");pi(this,"unit");pi(this,"backgroundColor");this.map=e,this.width=t?t[0]:Size.A4[0],this.height=t?t[1]:Size.A4[1],this.dpi=Pe||300,this.format=Me||Format.PNG.toString(),this.unit=Ie||Unit.mm,this.backgroundColor=Be||""}_createRenderMap(e){const t=new vjmap_min$1.exports.Map({container:e,center:this.map.getCenter(),zoom:this.map.getZoom(),bearing:this.map.getBearing(),pitch:this.map.getPitch(),interactive:!1,preserveDrawingBuffer:!0,fadeDuration:0,attributionControl:!1,transformRequest:this.map._requestManager._transformRequestFn}),Pe=this.map.getStyle();if(Pe&&Pe.sources){const Me=Pe.sources;Object.keys(Me).forEach(Ie=>{const Be=this.map.getSource(Ie),ke=Me[Ie];Object.keys(ke).forEach(_e=>{ke[_e]||delete ke[_e],_e=="tiles"&&Array.isArray(Be.tiles)&&Be.tiles.length==1&&Array.isArray(ke.tiles)&&ke.tiles.length==1&&Be.tiles[0]!=ke.tiles[0]&&(ke[_e]=Be[_e])})})}return this.backgroundColor&&Pe.layers&&(Pe.layers=[{id:"background"+vjmap.RandomID(),type:"background",paint:{"background-color":this.backgroundColor}},...Pe.layers]),t.setStyle(Pe),t}async toBase64(e){return new Promise((t,Pe)=>{const Me=this,Ie=window.devicePixelRatio;Object.defineProperty(window,"devicePixelRatio",{get(){return Me.dpi/96}});const Be=document.createElement("div");Be.className="hidden-map",document.body.appendChild(Be);const ke=document.createElement("div");ke.style.width=this.toPixels(this.width),ke.style.height=this.toPixels(this.height),Be.appendChild(ke);const _e=this._createRenderMap(ke);_e.once("idle",()=>{var xe;const Ce=_e.getCanvas(),Se=js.scale(Ce,{maxWidth:e}).toDataURL("image/png");_e.remove(),(xe=Be.parentNode)==null||xe.removeChild(Be),Object.defineProperty(window,"devicePixelRatio",{get(){return Ie}}),t(Se)})})}generate(){const e=this,t=window.devicePixelRatio;Object.defineProperty(window,"devicePixelRatio",{get(){return e.dpi/96}});const Pe=document.createElement("div");Pe.className="hidden-map",document.body.appendChild(Pe);const Me=document.createElement("div");Me.style.width=this.toPixels(this.width),Me.style.height=this.toPixels(this.height),Pe.appendChild(Me);const Ie=this._createRenderMap(Me);Ie.once("idle",()=>{var _e;const Be=Ie.getCanvas(),ke=`map.${e.format}`;switch(e.format){case Format.PNG:e.toPNG(Be,ke);break;case Format.JPEG:e.toJPEG(Be,ke);break;case Format.PDF:e.toPDF(Ie,ke);break;case Format.SVG:e.toSVG(Be,ke);break;default:console.error(`Invalid file format: ${e.format}`);break}Ie.remove(),(_e=Pe.parentNode)==null||_e.removeChild(Pe),Object.defineProperty(window,"devicePixelRatio",{get(){return t}})})}toPNG(e,t){e.toBlob(Pe=>{FileSaver_min.exports.saveAs(Pe,t)})}toJPEG(e,t){const Pe=e.toDataURL("image/jpeg",.85),Me=document.createElement("a");Me.href=Pe,Me.download=t,Me.click(),Me.remove()}toPDF(e,t){const Pe=e.getCanvas(),Me=new E({orientation:this.width>this.height?"l":"p",unit:this.unit,compress:!0});Me.addImage(Pe.toDataURL("image/png"),"png",0,0,this.width,this.height,void 0,"FAST");const{lng:Ie,lat:Be}=e.getCenter();Me.setProperties({title:e.getStyle().name,subject:`center: [${Ie}, ${Be}], zoom: ${e.getZoom()}`,creator:"VjMap Export Plugin",author:"(c)vjmap"}),Me.save(t)}toSVG(e,t){const Pe=e.toDataURL("image/png");fabric.fabric.Image.fromURL(Pe,Me=>{const Ie=new fabric.fabric.Canvas("canvas"),Be=Number(this.toPixels(this.width,this.dpi).replace("px","")),ke=Number(this.toPixels(this.height,this.dpi).replace("px",""));Me.scaleToWidth(Be),Me.scaleToHeight(ke),Ie.add(Me);const _e=Ie.toSVG({x:0,y:0,width:Be,height:ke,viewBox:{x:0,y:0,width:Be,height:ke}}),Ce=document.createElement("a");Ce.href=`data:application/xml,${encodeURIComponent(_e)}`,Ce.download=t,Ce.click(),Ce.remove()})}toPixels(e,t=96){return this.unit===Unit.mm&&(t/=25.4),`${t*e}px`}}class PrintableAreaManager{constructor(e){pi(this,"map");pi(this,"width");pi(this,"height");pi(this,"unit");pi(this,"svgCanvas");pi(this,"svgPath");var Be,ke,_e;if(this.map=e,this.map===void 0)return;this.mapResize=this.mapResize.bind(this),this.map.on("resize",this.mapResize);const t=(Be=this.map)==null?void 0:Be.getCanvas().clientWidth,Pe=(ke=this.map)==null?void 0:ke.getCanvas().clientHeight,Me=document.createElementNS("http://www.w3.org/2000/svg","svg");Me.style.position="absolute",Me.style.top="0px",Me.style.left="0px",Me.setAttribute("width",`${t}px`),Me.setAttribute("height",`${Pe}px`);const Ie=document.createElementNS("http://www.w3.org/2000/svg","path");Ie.setAttribute("style","fill:#888888;stroke-width:0"),Ie.setAttribute("fill-opacity","0.5"),Me.append(Ie),(_e=this.map)==null||_e.getCanvasContainer().appendChild(Me),this.svgCanvas=Me,this.svgPath=Ie}mapResize(){this.generateCutOut()}updateArea(e,t){this.width=e,this.height=t,this.unit=Unit.mm,this.generateCutOut()}generateCutOut(){var Ce,Te;if(this.map===void 0||this.svgCanvas===void 0||this.svgPath===void 0)return;const e=this.toPixels(this.width),t=this.toPixels(this.height),Pe=(Ce=this.map)==null?void 0:Ce.getCanvas().clientWidth,Me=(Te=this.map)==null?void 0:Te.getCanvas().clientHeight,Ie=Pe/2-e/2,Be=Ie+e,ke=Me/2-t/2,_e=ke+t;this.svgCanvas.setAttribute("width",`${Pe}px`),this.svgCanvas.setAttribute("height",`${Me}px`),this.svgPath.setAttribute("d",`M 0 0 L ${Pe} 0 L ${Pe} ${Me} L 0 ${Me} M ${Ie} ${ke} L ${Ie} ${_e} L ${Be} ${_e} L ${Be} ${ke}`)}destroy(){this.svgCanvas!==void 0&&(this.svgCanvas.remove(),this.svgCanvas=void 0),this.map!==void 0&&(this.map=void 0)}toPixels(e,t=96){return this.unit===Unit.mm&&(t/=25.4),t*e}}class MapExportControl{constructor(e){pi(this,"controlContainer");pi(this,"exportContainer");pi(this,"crosshair");pi(this,"printableArea");pi(this,"map");pi(this,"exportButton");pi(this,"options",{PageSize:Size.A4,PageOrientation:PageOrientation.Landscape,Format:Format.PDF,DPI:DPI[300],Crosshair:!0,PrintableArea:!0});e&&(this.options=Object.assign(this.options,e)),this.onDocumentClick=this.onDocumentClick.bind(this)}getDefaultPosition(){return"top-right"}onAdd(e){this.map=e,this.controlContainer=document.createElement("div"),this.controlContainer.classList.add("vjmapgis-ctrl"),this.controlContainer.classList.add("vjmapgis-ctrl-group"),this.exportContainer=document.createElement("div"),this.exportContainer.classList.add("vjmapgis-export-list"),this.exportButton=document.createElement("button"),this.exportButton.classList.add("vjmapgis-ctrl-icon"),this.exportButton.classList.add("vjmapgis-export-control"),this.exportButton.type="button",this.exportButton.style.backgroundImage=`url('data:image/svg+xml;charset=UTF-8,<svg id="Capa_1" enable-background="new 0 0 512 512" height="512" viewBox="0 0 512 512" width="512" xmlns="http://www.w3.org/2000/svg"><g><path d="m422.5 99v-24c0-41.355-33.645-75-75-75h-184c-41.355 0-75 33.645-75 75v24z"/><path d="m118.5 319v122 26 15c0 16.568 13.431 30 30 30h214c16.569 0 30-13.432 30-30v-15-26-122zm177 128h-80c-8.284 0-15-6.716-15-15s6.716-15 15-15h80c8.284 0 15 6.716 15 15s-6.716 15-15 15zm0-64h-80c-8.284 0-15-6.716-15-15s6.716-15 15-15h80c8.284 0 15 6.716 15 15s-6.716 15-15 15z"/><path d="m436.5 129h-361c-41.355 0-75 33.645-75 75v120c0 41.355 33.645 75 75 75h13v-80h-9c-8.284 0-15-6.716-15-15s6.716-15 15-15h24 304 24c8.284 0 15 6.716 15 15s-6.716 15-15 15h-9v80h14c41.355 0 75-33.645 75-75v-120c0-41.355-33.645-75-75-75zm-309 94h-48c-8.284 0-15-6.716-15-15s6.716-15 15-15h48c8.284 0 15 6.716 15 15s-6.716 15-15 15z"/></g></svg>')`,this.exportButton.style.backgroundPosition="center",this.exportButton.style.backgroundRepeat="no-repeat",this.exportButton.style.backgroundSize="70%",this.exportContainer.style.display="none",this.exportButton.addEventListener("click",()=>{this.exportButton.style.display="none",this.exportContainer.style.display="block",this.toggleCrosshair(!0),this.togglePrintableArea(!0)}),document.addEventListener("click",this.onDocumentClick),this.controlContainer.appendChild(this.exportButton),this.controlContainer.appendChild(this.exportContainer);const t=document.createElement("TABLE");t.className="print-table";const Pe=this.createSelection(Size,"\u9875\u9762\u5C3A\u5BF8","page-size",this.options.PageSize,(_e,Ce)=>JSON.stringify(_e[Ce]));t.appendChild(Pe);const Me=this.createSelection(PageOrientation,"\u9875\u9762\u65B9\u5411","page-orientaiton",this.options.PageOrientation,(_e,Ce)=>_e[Ce]);t.appendChild(Me);const Ie=this.createSelection(Format,"\u5BFC\u51FA\u683C\u5F0F","format-type",this.options.Format,(_e,Ce)=>_e[Ce]);t.appendChild(Ie);const Be=this.createSelection(DPI,"\u5206\u8FA8\u7387DPI","dpi-type",this.options.DPI,(_e,Ce)=>_e[Ce]);t.appendChild(Be),this.exportContainer.appendChild(t);const ke=document.createElement("button");return ke.type="button",ke.textContent="\u5BFC\u51FA",ke.classList.add("generate-button"),ke.addEventListener("click",()=>{var Ae,Fe,De;const _e=document.getElementById("vjmap-export-page-size"),Ce=document.getElementById("vjmap-export-page-orientaiton"),Te=document.getElementById("vjmap-export-format-type"),Se=document.getElementById("vjmap-export-dpi-type"),xe=Ce.value;let r=JSON.parse(_e.value);xe===PageOrientation.Portrait&&(r=r.reverse());let Oe="";((De=(Fe=(Ae=this.map)==null?void 0:Ae.getService())==null?void 0:Fe.currentMapParam())==null?void 0:De.darkMode)&&(Oe="#022B4F"),new MapGenerator(e,r,Number(Se.value),Te.value,Unit.mm,Oe).generate()}),this.exportContainer.appendChild(ke),this.controlContainer}createSelection(e,t,Pe,Me,Ie){const Be=document.createElement("label");Be.textContent=t;const ke=document.createElement("select");ke.setAttribute("id",`vjmap-export-${Pe}`),ke.style.width="100%",Object.keys(e).forEach(Se=>{const xe=document.createElement("option");xe.setAttribute("value",Ie(e,Se)),xe.appendChild(document.createTextNode(Se)),xe.setAttribute("name",Pe),Me===e[Se]&&(xe.selected=!0),ke.appendChild(xe)}),ke.addEventListener("change",()=>{this.updatePrintableArea()});const _e=document.createElement("TR"),Ce=document.createElement("TD"),Te=document.createElement("TD");return Ce.appendChild(Be),Te.appendChild(ke),_e.appendChild(Ce),_e.appendChild(Te),_e}onRemove(){!this.controlContainer||!this.controlContainer.parentNode||!this.map||!this.exportButton||(this.exportButton.removeEventListener("click",this.onDocumentClick),this.controlContainer.parentNode.removeChild(this.controlContainer),document.removeEventListener("click",this.onDocumentClick),this.crosshair!==void 0&&(this.crosshair.destroy(),this.crosshair=void 0),this.map=void 0)}onDocumentClick(e){this.controlContainer&&!this.controlContainer.contains(e.target)&&this.exportContainer&&this.exportButton&&(this.exportContainer.style.display="none",this.exportButton.style.display="block",this.toggleCrosshair(!1),this.togglePrintableArea(!1))}toggleCrosshair(e){this.options.Crosshair===!0&&(e===!1?this.crosshair!==void 0&&(this.crosshair.destroy(),this.crosshair=void 0):(this.crosshair=new CrosshairManager(this.map),this.crosshair.create()))}togglePrintableArea(e){this.options.PrintableArea===!0&&(e===!1?this.printableArea!==void 0&&(this.printableArea.destroy(),this.printableArea=void 0):(this.printableArea=new PrintableAreaManager(this.map),this.updatePrintableArea()))}updatePrintableArea(){if(this.printableArea===void 0)return;const e=document.getElementById("vjmap-export-page-size"),Pe=document.getElementById("vjmap-export-page-orientaiton").value;let Me=JSON.parse(e.value);Pe===PageOrientation.Portrait&&(Me=Me.reverse()),this.printableArea.updateArea(Me[0],Me[1])}}const useMapAction=(Re,e)=>{const t=ref(!1),Pe=Me=>{t.value=Me==null?void 0:Me.do};return emitter.on("ismapDoAction",Pe),onUnmounted(()=>emitter.off("ismapDoAction",Pe)),watch(t,Me=>{for(const Ie of Re){const Be=document.getElementsByClassName(Ie);for(let ke=0;ke<Be.length;ke++){const _e=Be.item(ke);_e&&_e.style&&(Me?(_e.style._restore_display=_e.style.display,_e.style.display="none"):_e.style._restore_display!==void 0&&(_e.style.display=_e.style._restore_display,delete _e.style._restore_display))}}for(const Ie of e){const Be=document.getElementById(Ie);Be&&Be.style&&(Me?(Be.style._restore_pointerEvents=Be.style.pointerEvents,Be.style.pointerEvents="none"):Be.style._restore_pointerEvents!==void 0&&(Be.style.pointerEvents=Be.style._restore_pointerEvents,delete Be.style._restore_pointerEvents))}}),{isMapDoActioning:t}};var MapContainer_vue_vue_type_style_index_0_scoped_true_lang="";const _hoisted_1$i={class:"wrapper"},_sfc_main$l=defineComponent({setup(Re){const e=useAppStore(),t=useRoute();let Pe;const Me=ref(!1),{isMapDoActioning:Ie}=useMapAction(["mapui","el-overlay","vjmapgis-control-container"],["labelCanvas"]),Be=computed(()=>useOperationStoreHook().GET_CURRENT_BLUEPRINT().location);let ke=vjmap.MapOpenWay.GeomRender,_e=ref(!1),Ce=ref(!1);const Te=e.serviceUrl,Se=e.accessToken,xe=computed(()=>({mapid:Be.value,mapopenway:ke,version:e.curVersion,style:{backcolor:Ce.value?16777215:0}}));provide("map",()=>Pe),onBeforeMount(()=>{var Ae,Fe;const Ee=computed(()=>useOperationStoreHook().GET_CURRENT_BLUEPRINT().id);getBlueprintSnapData(Ee.value).then(De=>{if(De.success){const ze=De.data;ze?e.myAnnotataions=JSON.parse(ze):e.myAnnotataions={}}}).catch(De=>{console.log(De.message)}),e.setCurMapIdVer(Be.value,"v1"),((Ae=t.query)==null?void 0:Ae.vector)&&(_e.value=t.query.vector=="true"),((Fe=t.query)==null?void 0:Fe.theme)?Ce.value=t.query.theme=="light":Ce.value=e.lightTheme});const r=async Ee=>{Pe=Ee,Me.value=!0,Oe(Ee)},Oe=Ee=>{if(e.showMousePositionControl){let Ae=new vjmap.MousePositionControl({showZoom:!0});Ee.addControl(Ae,"bottom-left")}if(e.showMapExportControl){let Ae=new MapExportControl;Ee.addControl(Ae,"top-left")}};return(Ee,Ae)=>(openBlock(),createElementBlock("div",_hoisted_1$i,[unref(Be)?(openBlock(),createBlock(MapView,{key:0,class:normalizeClass("container map-container-"+(unref(Ce)?"light":"dark")),serviceUrl:unref(Te),accessToken:unref(Se),openMapParam:unref(xe),isVectorStyle:unref(_e),zoom:1,onLoaded:r},{default:withCtx(()=>[unref(e).showNavigationControl?(openBlock(),createBlock(VjNavigationControl,{key:0,position:"top-left"})):createCommentVNode("",!0)]),_:1},8,["class","serviceUrl","accessToken","openMapParam","isVectorStyle"])):createCommentVNode("",!0),Me.value?(openBlock(),createBlock(unref(UiView),{key:1})):createCommentVNode("",!0),unref(Ie)?(openBlock(),createBlock(unref(DoMapAction),{key:2})):createCommentVNode("",!0)]))}});var mapContainer=_export_sfc$1(_sfc_main$l,[["__scopeId","data-v-49f0c50c"]]);const _sfc_main$k=defineComponent({name:"Check"}),_hoisted_1$h={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$f=createBaseVNode("path",{fill:"currentColor",d:"M406.656 706.944L195.84 496.256a32 32 0 10-45.248 45.248l256 256 512-512a32 32 0 00-45.248-45.248L406.592 706.944z"},null,-1),_hoisted_3$d=[_hoisted_2$f];function _sfc_render$7(Re,e,t,Pe,Me,Ie){return openBlock(),createElementBlock("svg",_hoisted_1$h,_hoisted_3$d)}var check=_export_sfc$2(_sfc_main$k,[["render",_sfc_render$7]]);const _sfc_main$j=defineComponent({name:"Close"}),_hoisted_1$g={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$e=createBaseVNode("path",{fill:"currentColor",d:"M764.288 214.592L512 466.88 259.712 214.592a31.936 31.936 0 00-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1045.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0045.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 10-45.12-45.184z"},null,-1),_hoisted_3$c=[_hoisted_2$e];function _sfc_render$6(Re,e,t,Pe,Me,Ie){return openBlock(),createElementBlock("svg",_hoisted_1$g,_hoisted_3$c)}var close=_export_sfc$2(_sfc_main$j,[["render",_sfc_render$6]]);const _sfc_main$i=defineComponent({name:"DocumentAdd"}),_hoisted_1$f={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$d=createBaseVNode("path",{fill:"currentColor",d:"M832 384H576V128H192v768h640V384zm-26.496-64L640 154.496V320h165.504zM160 64h480l256 256v608a32 32 0 01-32 32H160a32 32 0 01-32-32V96a32 32 0 0132-32zm320 512V448h64v128h128v64H544v128h-64V640H352v-64h128z"},null,-1),_hoisted_3$b=[_hoisted_2$d];function _sfc_render$5(Re,e,t,Pe,Me,Ie){return openBlock(),createElementBlock("svg",_hoisted_1$f,_hoisted_3$b)}var documentAdd=_export_sfc$2(_sfc_main$i,[["render",_sfc_render$5]]);const _sfc_main$h=defineComponent({name:"Edit"}),_hoisted_1$e={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$c=createBaseVNode("path",{fill:"currentColor",d:"M832 512a32 32 0 1164 0v352a32 32 0 01-32 32H160a32 32 0 01-32-32V160a32 32 0 0132-32h352a32 32 0 010 64H192v640h640V512z"},null,-1),_hoisted_3$a=createBaseVNode("path",{fill:"currentColor",d:"M469.952 554.24l52.8-7.552L847.104 222.4a32 32 0 10-45.248-45.248L477.44 501.44l-7.552 52.8zm422.4-422.4a96 96 0 010 135.808l-331.84 331.84a32 32 0 01-18.112 9.088L436.8 623.68a32 32 0 01-36.224-36.224l15.104-105.6a32 32 0 019.024-18.112l331.904-331.84a96 96 0 01135.744 0z"},null,-1),_hoisted_4$6=[_hoisted_2$c,_hoisted_3$a];function _sfc_render$4(Re,e,t,Pe,Me,Ie){return openBlock(),createElementBlock("svg",_hoisted_1$e,_hoisted_4$6)}var edit=_export_sfc$2(_sfc_main$h,[["render",_sfc_render$4]]);const _sfc_main$g=defineComponent({name:"FullScreen"}),_hoisted_1$d={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$b=createBaseVNode("path",{fill:"currentColor",d:"M160 96.064l192 .192a32 32 0 010 64l-192-.192V352a32 32 0 01-64 0V96h64v.064zm0 831.872V928H96V672a32 32 0 1164 0v191.936l192-.192a32 32 0 110 64l-192 .192zM864 96.064V96h64v256a32 32 0 11-64 0V160.064l-192 .192a32 32 0 110-64l192-.192zm0 831.872l-192-.192a32 32 0 010-64l192 .192V672a32 32 0 1164 0v256h-64v-.064z"},null,-1),_hoisted_3$9=[_hoisted_2$b];function _sfc_render$3(Re,e,t,Pe,Me,Ie){return openBlock(),createElementBlock("svg",_hoisted_1$d,_hoisted_3$9)}var fullScreen=_export_sfc$2(_sfc_main$g,[["render",_sfc_render$3]]);const _sfc_main$f=defineComponent({name:"Remove"}),_hoisted_1$c={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$a=createBaseVNode("path",{fill:"currentColor",d:"M352 480h320a32 32 0 110 64H352a32 32 0 010-64z"},null,-1),_hoisted_3$8=createBaseVNode("path",{fill:"currentColor",d:"M512 896a384 384 0 100-768 384 384 0 000 768zm0 64a448 448 0 110-896 448 448 0 010 896z"},null,-1),_hoisted_4$5=[_hoisted_2$a,_hoisted_3$8];function _sfc_render$2(Re,e,t,Pe,Me,Ie){return openBlock(),createElementBlock("svg",_hoisted_1$c,_hoisted_4$5)}var remove=_export_sfc$2(_sfc_main$f,[["render",_sfc_render$2]]);const _sfc_main$e=defineComponent({name:"Switch"}),_hoisted_1$b={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},_hoisted_2$9=createBaseVNode("path",{fill:"currentColor",d:"M118.656 438.656a32 32 0 010-45.248L416 96l4.48-3.776A32 32 0 01461.248 96l3.712 4.48a32.064 32.064 0 01-3.712 40.832L218.56 384H928a32 32 0 110 64H141.248a32 32 0 01-22.592-9.344zM64 608a32 32 0 0132-32h786.752a32 32 0 0122.656 54.592L608 928l-4.48 3.776a32.064 32.064 0 01-40.832-49.024L805.632 640H96a32 32 0 01-32-32z"},null,-1),_hoisted_3$7=[_hoisted_2$9];function _sfc_render$1(Re,e,t,Pe,Me,Ie){return openBlock(),createElementBlock("svg",_hoisted_1$b,_hoisted_3$7)}var _switch=_export_sfc$2(_sfc_main$e,[["render",_sfc_render$1]]);const snapCache={},getMapSnapPoints=async(Re,e)=>{var Ce,Te;const t=useAppStore(),Pe=computed(()=>useOperationStoreHook().GET_CURRENT_BLUEPRINT().id);if(t.snapQueryLimit===0){e.features=[];return}const Me=Re.getService(),Ie=(Ce=Me.currentMapParam())==null?void 0:Ce.mapid,Be=(Te=Me.currentMapParam())==null?void 0:Te.version,ke=`${Ie}_${Be}`;if(ke in snapCache){e.features=[...snapCache[ke].features];return}else{let Se;getBlueprintSnapData(Pe).then(xe=>{if(xe.success&&(Se=xe.data,Se))try{const r=JSON.parse(Se);if(Array.isArray(r)){e.features=[...r],snapCache[ke]=e;return}}catch(r){console.log(r.message)}})}let _e=await Me.conditionQueryFeature({fields:"s3",condition:"s3 != ''",limit:t.snapQueryLimit});if(!!_e.result){_e=_e.result.map(Se=>Se.s3.split(";")),e.features=[];for(const Se of _e){const xe=[];for(const r of Se){const Oe=r.split(",");Oe.length>=2&&xe.push(Re.toLngLat([+Oe[0],+Oe[1]]))}xe.length==1?e.features.push({type:"Feature",geometry:{type:"Point",coordinates:xe[0]}}):xe.length>1&&e.features.push({type:"Feature",geometry:{type:"LineString",coordinates:xe}})}snapCache[ke]=e;try{saveBlueprintSnapData({id:Pe,snapData:JSON.stringify(e.features)})}catch(Se){console.log(Se.message)}}};function useDrawTool(Re){const e=useAppStore();let t;const Pe={};function Me(){return[{id:"SaveJson",title:"\u4FDD\u5B58\u6570\u636E\uFF0C\u4E0B\u6B21\u6253\u5F00\u5730\u56FE\u65F6\u5C06\u81EA\u52A8\u52A0\u8F7D",style:{"background-size":"90% 90%","background-repeat":"no-repeat","background-image":"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAUBJREFUWEftl18SwTAQxvM5Ag6gTsIhePLGIZQHvOAQXMAl9CQ4AI7QNduRDtU0G5P6M9O8dKbdZH/Z/bLZQn154Mv+VQXwuxGoB+EQSg3e0QgB0fWwXEjm5kag2Rp3qFbbSxYw2ZBScwlELkAjCPcK6CCOu9qBBnp8l+f8EVwCYQU4n9YRO2q0J8TPy2FZqBttl4JbIlEaABH6AO0YpCgSzgBSXXCk6sG0Z4MoFYBhUwii6HJcpZrSGxEDSHeetUtPVAXw9xHgXLroQNcPbxrIFhgbjC5Y/gGIkspoHEASqdIApKW4VACTHjjv2TvDewp4Z/q2fErD/Zh9DiBHBFxqPwJQpEHvAO82JC/NjEslTPpBYGM76y7fiWh0Pa622TnG7iZRLzBzcWKyBdFCV0YxgA/HkjV+979AQu/DporADW28gzByvbLmAAAAAElFTkSuQmCC')"},onActivate:async _e=>{const Ce=_e.api.getAll(),Te=useOperationStoreHook().GET_CURRENT_BLUEPRINT().id,Se={};for(const xe in e.myAnnotataions)Se[xe]=e.myAnnotataions[xe];saveBlueprintSnapData({id:Te,snapData:JSON.stringify(Se)}).then(xe=>{xe.success&&ElMessage({type:"success",message:"\u4FDD\u5B58\u6210\u529F"})}).catch(xe=>{ElMessage({type:"error",message:xe.message})}),saveBlueprintDrawData({id:Te,drawData:JSON.stringify(Ce)}).then(xe=>{xe.success&&ElMessage({type:"success",message:"\u4FDD\u5B58\u6210\u529F"})}).catch(xe=>{ElMessage({type:"error",message:xe.message})})}}]}const Ie=()=>{if(t)Re.removeControl(t),t=void 0;else{const _e=new vjmap_min$1.exports.Draw.Tool({addControls:Me(),api:{getSnapFeatures:Pe}});Re.addControl(_e,"top-left"),t=_e,loadData(t)}ke()};let Be=!1;const ke=async()=>{!Be&&e.snapQueryLimit>0&&(Be=!0,Pe.features=[],getMapSnapPoints(Re,Pe))};return{showHideDrawTool:Ie}}const loadData=Re=>{const e=computed(()=>useOperationStoreHook().GET_CURRENT_BLUEPRINT().id);let t;getBlueprintDrawData(e.value).then(Pe=>{if(Pe.success&&(t=Pe.data,t!==null&&t!=""))try{t=JSON.parse(t),Re.set(t)}catch(Me){console.log(Me)}})};var cmdBar_vue_vue_type_style_index_0_scoped_true_lang="";const _hoisted_1$a=createTextVNode("\u56FE\u5C42\u7BA1\u7406"),_hoisted_2$8=createTextVNode("\u5C5E\u6027\u9762\u677F"),_hoisted_3$6=createTextVNode("\u89C6\u56FE\u7BA1\u7406"),_hoisted_4$4=createTextVNode("\u7ED8\u56FE\u5DE5\u5177"),_hoisted_5$2=createTextVNode("\u56FE\u7EB8\u6279\u6CE8"),_sfc_main$d=defineComponent({setup(Re){const e=inject("map")(),t=useDrawTool(e);let Pe=inject("disabled");const Me=(Ie,Be)=>{emitter.emit("activeSideBarTabs",du({name:Ie},Be))};return(Ie,Be)=>{const ke=resolveComponent("el-button"),_e=resolveComponent("el-tooltip"),Ce=resolveComponent("SvgIcon"),Te=resolveComponent("el-button-group");return openBlock(),createBlock(Te,{class:"btn-bar"},{default:withCtx(()=>[createVNode(_e,{effect:"dark",content:"\u5168\u56FE\u663E\u793A",placement:"top"},{default:withCtx(()=>[createVNode(ke,{plain:"",icon:unref(fullScreen),onClick:Be[0]||(Be[0]=Se=>unref(e).fitMapBounds())},null,8,["icon"])]),_:1}),createVNode(ke,{onClick:Be[1]||(Be[1]=Se=>Me("LayerManage"))},{default:withCtx(()=>[createVNode(Ce,{name:"layer-group",width:16,height:16,color:"#0000ff"}),_hoisted_1$a]),_:1}),createVNode(ke,{onClick:Be[2]||(Be[2]=Se=>Me("Property"))},{default:withCtx(()=>[createVNode(Ce,{name:"property",width:16,height:16,color:"#0000ff"}),_hoisted_2$8]),_:1}),createVNode(ke,{onClick:Be[3]||(Be[3]=Se=>Me("ViewPort"))},{default:withCtx(()=>[createVNode(Ce,{name:"viewport",width:16,height:16,color:"#0000ff"}),_hoisted_3$6]),_:1}),createVNode(ke,{onClick:Be[4]||(Be[4]=Se=>unref(t).showHideDrawTool()),disabled:unref(Pe)},{default:withCtx(()=>[createVNode(Ce,{name:"drawing",width:16,height:16,color:"#0000ff"}),_hoisted_4$4]),_:1},8,["disabled"]),createVNode(ke,{onClick:Be[5]||(Be[5]=Se=>Me("Annotation"))},{default:withCtx(()=>[createVNode(Ce,{name:"annotation",width:16,height:16,color:"#0000ff"}),_hoisted_5$2]),_:1})]),_:1})}}});var cmdBar=_export_sfc$1(_sfc_main$d,[["__scopeId","data-v-1a218752"]]);const waitSourceLoaded=async(Re,e)=>new Promise(async(t,Pe)=>{let Me;for(Me=0;Me<300;Me++){if(Re.isSourceLoaded(e)&&Re.isStyleLoaded()){t(!0);break}await sleep()}Me>=300&&Pe("timeout")}),createDivSvg=(Re,e,t,Pe,Me,Ie,Be)=>{Be=Be.substring(Be.indexOf("<desc>"));const ke=document.createElement("div");ke.id=e,ke.innerHTML=`
        <svg viewBox="0 0 ${Me} ${Ie}" preserveAspectRatio="xMinYMin meet" version="1.1" xmlns="http://www.w3.org/2000/svg">
            ${Be}
        </svg>
    `,ke.style.position="absolute",ke.style.pointerEvents="none",ke.style.width=Me+"px",ke.style.height=Ie+"px";const _e=new vjmap_min$1.exports.DivOverlay({bounds:[[t.x,Pe.y],[t.x,t.y],[Pe.x,t.y],[Pe.x,Pe.y]],element:ke,width:Me,height:Ie,updateDivSize:!0});return _e.addTo(Re),_e};var Annotation_vue_vue_type_style_index_0_scoped_true_lang="";const _hoisted_1$9={class:"listPanel"},_hoisted_2$7={class:"header"},_hoisted_3$5=createTextVNode("\u65B0\u589E\u6279\u6CE8"),_hoisted_4$3={class:"card-header"},_hoisted_5$1=["title","onClick"],_sfc_main$c=defineComponent({setup(Re){const e=useAppStore(),t=inject("map")();let Pe=inject("disabled");const Me=computed(()=>{let Te=`${e.curMapId}_${e.curVersion}`,Se=e.getAnnotatation();return!Se||!(Te in Se)?[]:[...Se[Te]].reverse()}),Ie=async()=>{emitter.emit("changeUiAction","annotataion")},Be=async Te=>{try{await showConfirm(`\u662F\u5426\u771F\u7684\u8981\u5220\u9664\u6279\u6CE8 ${Te.name}`),e.removeAnnotataion(e.curMapId,e.curVersion,Te.id);let Se=e.annoIdDivOverlay,xe=Se[Te.id];xe&&(xe.remove(),delete Se[Te.id])}catch(Se){console.log(Se.message)}},ke=async Te=>{t.setCenter([Te.centerX,Te.centerY]),t.setZoom(Te.zoom),t.setBearing(Te.bearing),t.setPitch(Te.pitch),emitter.emit("changeUiAction","annotataion"),await nextTick(),emitter.emit("loadAnnotataion",Te)},_e=Te=>{let Se=document.getElementById(Te.id);Se&&(Se.style.display=Se.style.display=="none"?"":"none")},Ce=Te=>{if(!document.getElementById(Te.id)){let xe=createDivSvg(t,Te.id,Te.pt1,Te.pt2,Te.width,Te.height,Te.svg);e.annoIdDivOverlay[Te.id]=xe}t.flyTo({center:[Te.centerX,Te.centerY],zoom:Te.zoom,pitch:Te.pitch,bearing:Te.bearing})};return(Te,Se)=>{const xe=resolveComponent("el-button"),r=resolveComponent("el-empty"),Oe=resolveComponent("el-tooltip"),Ee=resolveComponent("el-button-group"),Ae=resolveComponent("el-card"),Fe=resolveComponent("el-space"),De=resolveComponent("el-scrollbar");return openBlock(),createElementBlock("div",_hoisted_1$9,[createBaseVNode("div",_hoisted_2$7,[createVNode(xe,{type:"primary",size:"small",icon:unref(documentAdd),disabled:unref(Pe),onClick:Ie},{default:withCtx(()=>[_hoisted_3$5]),_:1},8,["icon","disabled"])]),createVNode(De,{class:"content"},{default:withCtx(()=>[createVNode(Fe,{direction:"vertical"},{default:withCtx(()=>[unref(Me).length===0?(openBlock(),createBlock(r,{key:0,description:"\u7A7A\u7A7A\u5982\u4E5F"})):createCommentVNode("",!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(Me),ze=>(openBlock(),createBlock(Ae,{key:ze.id,class:"box-card"},{header:withCtx(()=>[createBaseVNode("div",_hoisted_4$3,[createBaseVNode("div",{title:ze.name,onClick:()=>Ce(ze)},toDisplayString(ze.name),9,_hoisted_5$1),createVNode(Ee,{class:"ml-4"},{default:withCtx(()=>[createVNode(Oe,{effect:"dark",content:"\u7F16\u8F91\u6807\u6CE8",placement:"top"},{default:withCtx(()=>[createVNode(xe,{class:"button",size:"small",icon:unref(edit),onClick:()=>ke(ze)},null,8,["icon","onClick"])]),_:2},1024),createVNode(Oe,{effect:"dark",content:"\u663E\u793A\u6216\u9690\u85CF\u6807\u6CE8",placement:"top"},{default:withCtx(()=>[createVNode(xe,{class:"button",size:"small",icon:unref(_switch),onClick:()=>_e(ze)},null,8,["icon","onClick"])]),_:2},1024),createVNode(Oe,{effect:"dark",content:"\u5220\u9664\u6807\u6CE8",placement:"top"},{default:withCtx(()=>[createVNode(xe,{class:"button",size:"small",icon:unref(remove),onClick:()=>Be(ze)},null,8,["icon","onClick"])]),_:2},1024)]),_:2},1024)])]),_:2},1024))),128))]),_:1})]),_:1})])}}});var annotation=_export_sfc$1(_sfc_main$c,[["__scopeId","data-v-30abe092"]]),LayerManage_vue_vue_type_style_index_0_scoped_true_lang="";const _withScopeId=Re=>(pushScopeId("data-v-5dc4c337"),Re=Re(),popScopeId(),Re),_hoisted_1$8={class:"listPanel"},_hoisted_2$6={class:"header"},_hoisted_3$4=_withScopeId(()=>createBaseVNode("div",null,"\u5168\u90E8\u56FE\u5C42",-1)),_hoisted_4$2=["title"],_sfc_main$b=defineComponent({setup(Re){const e=inject("map")(),t=ref(!1),Pe=ref(e.getService().getMapLayers()),Me=()=>Pe.value.reduce((ke,_e)=>(_e.isOff||ke.push(_e.name),ke),[]),Ie=()=>{e.switchLayers(e.getService(),Me())},Be=()=>{Pe.value.forEach(ke=>ke.isOff=t.value),Ie()};return(ke,_e)=>{const Ce=resolveComponent("el-switch"),Te=resolveComponent("el-scrollbar");return openBlock(),createElementBlock("div",_hoisted_1$8,[createBaseVNode("div",_hoisted_2$6,[_hoisted_3$4,createVNode(Ce,{modelValue:t.value,"onUpdate:modelValue":_e[0]||(_e[0]=Se=>t.value=Se),"inline-prompt":"","active-color":"#777777","inactive-color":"#13ce66","active-icon":unref(close),"inactive-icon":unref(check),onChange:Be},null,8,["modelValue","active-icon","inactive-icon"])]),createVNode(Te,{class:"content"},{default:withCtx(()=>[createBaseVNode("ul",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(Pe.value,Se=>(openBlock(),createElementBlock("li",{key:Se.index,class:"layeritem"},[createBaseVNode("div",{class:"layer-colorBlock",style:normalizeStyle("background:"+Se.color)},null,4),createBaseVNode("div",{class:"layer-text",title:Se.name},toDisplayString(Se.name),9,_hoisted_4$2),createVNode(Ce,{modelValue:Se.isOff,"onUpdate:modelValue":xe=>Se.isOff=xe,"inline-prompt":"","active-color":"#777777","inactive-color":"#13ce66","active-icon":unref(close),"inactive-icon":unref(check),onChange:Ie},null,8,["modelValue","onUpdate:modelValue","active-icon","inactive-icon"])]))),128))])]),_:1})])}}});var layerManage=_export_sfc$1(_sfc_main$b,[["__scopeId","data-v-5dc4c337"]]),Property_vue_vue_type_style_index_0_scoped_true_lang="";const _hoisted_1$7={class:"listPanel"},_hoisted_2$5={class:"header"},_hoisted_3$3=["title"],_sfc_main$a=defineComponent({setup(Re){const e=inject("map")(),t=ref([]),Pe=ref("\u5F53\u524D\u56FE\u5F62");let Me=e.getService(),Ie=ref([]);Ie.value=[...Array(50).keys()].map(ke=>vjmap.randomColor()),onMounted(async()=>{const{entTypeIdMap:ke}=await Me.getConstData();e.enableLayerClickHighlight(Me,_e=>{if(emitter.emit("activeSideBarTabs",{name:"Property",noAutoAdd:!0}),_e){Pe.value=_e.name,_e.entType=Object.keys(ke).find(Te=>ke[Te]==_e.name);let Ce=(_e.color>>>0).toString(16);_e.colorRGB="#"+Ce.substring(6,8)+Ce.substring(4,6)+Ce.substring(2,4),Be(_e,!0)}else Pe.value="\u5F53\u524D\u56FE\u5F62",Be(Me.currentMapParam())})}),onUnmounted(()=>{e.disableLayerClickHighlight()});const Be=(ke,_e)=>{if(t.value=[],!ke)return;let Ce=Object.keys(ke);_e&&(Ce=Ce.sort());for(let Te of Ce){let Se=ke[Te]!==void 0?ke[Te]+"":"";typeof ke[Te]=="object"&&(Se=JSON.stringify(ke[Te])),t.value.push({name:Te,value:Se})}};return Be(Me.currentMapParam()),(ke,_e)=>{const Ce=resolveComponent("el-input"),Te=resolveComponent("el-tooltip"),Se=resolveComponent("el-scrollbar");return openBlock(),createElementBlock("div",_hoisted_1$7,[createBaseVNode("div",_hoisted_2$5,[createBaseVNode("div",null,toDisplayString(Pe.value),1)]),createVNode(Se,{class:"content"},{default:withCtx(()=>[createBaseVNode("ul",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(t.value,(xe,r)=>{var Oe;return openBlock(),createElementBlock("li",{key:xe.name+r,class:"layeritem"},[createBaseVNode("div",{class:"colorBlock",style:normalizeStyle("background:"+unref(Ie)[r%unref(Ie).length])},null,4),createBaseVNode("div",{class:"propname",title:xe.name},toDisplayString(xe.name),9,_hoisted_3$3),createVNode(Te,{class:"propvalue",effect:"dark",content:(Oe=xe.value)==null?void 0:Oe.substring(0,200),placement:"top-end"},{default:withCtx(()=>[createVNode(Ce,{class:"propvalue",modelValue:xe.value,"onUpdate:modelValue":Ee=>xe.value=Ee},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["content"])])}),128))])]),_:1})])}}});var property=_export_sfc$1(_sfc_main$a,[["__scopeId","data-v-158031fe"]]);const takeScreenshot=(Re,e,t)=>new Promise(function(Pe,Me){Re.once("render",function(){if(e){const Ie=js.scale(Re.getCanvas(),{width:e,canvas:!0,aspectRatio:1,pixelRatio:2,imageSmoothingEnabled:!0,imageSmoothingQuality:"high"});Pe(t?Ie:Ie.toDataURL())}else Pe(t?Re.getCanvas():Re.getCanvas().toDataURL())}),Re.setBearing(Re.getBearing())});var ViewPort_vue_vue_type_style_index_0_scoped_true_lang="";const _hoisted_1$6={class:"listPanel"},_hoisted_2$4={class:"header"},_hoisted_3$2=createTextVNode("\u65B0\u589E\u89C6\u56FE"),_hoisted_4$1={class:"card-header"},_sfc_main$9=defineComponent({setup(Re){const e=useAppStore(),t=inject("map")();let Pe=t.getService();const Me=computed(()=>{let _e=`${e.curMapId}_${e.curVersion}`,Ce=e.myViewPorts;return!Ce||!(_e in Ce)?[]:[...Ce[_e]].reverse()}),Ie=async()=>{var _e;try{let Ce=await getInput("\u65B0\u589E\u89C6\u56FE","\u8BF7\u8F93\u5165\u89C6\u56FE\u540D\u79F0"),Te=await takeScreenshot(t,300),Se=t.getCenter(),xe={mapId:e.curMapId,version:e.curVersion,name:Ce,darkTheme:((_e=Pe.currentMapParam())==null?void 0:_e.darkMode)===!0,imgSrc:Te,zoom:t.getZoom(),centerX:Se.lng,centerY:Se.lat,bearing:t.getBearing(),pitch:t.getPitch(),id:vjmap.RandomID()};e.saveViewPort(xe)}catch(Ce){console.log(Ce.message)}},Be=async _e=>{try{await showConfirm(`\u662F\u5426\u771F\u7684\u8981\u5220\u9664\u89C6\u53E3 ${_e.name}`),e.removeViewPort(e.curMapId,e.curVersion,_e.id)}catch(Ce){console.log(Ce.message)}},ke=_e=>{t.flyTo({center:[_e.centerX,_e.centerY],zoom:_e.zoom,pitch:_e.pitch,bearing:_e.bearing})};return(_e,Ce)=>{const Te=resolveComponent("el-button"),Se=resolveComponent("el-empty"),xe=resolveComponent("el-image"),r=resolveComponent("el-card"),Oe=resolveComponent("el-space"),Ee=resolveComponent("el-scrollbar");return openBlock(),createElementBlock("div",_hoisted_1$6,[createBaseVNode("div",_hoisted_2$4,[createVNode(Te,{type:"success",size:"small",icon:unref(documentAdd),onClick:Ie},{default:withCtx(()=>[_hoisted_3$2]),_:1},8,["icon"])]),createVNode(Ee,{class:"content"},{default:withCtx(()=>[createVNode(Oe,{direction:"vertical"},{default:withCtx(()=>[unref(Me).length==0?(openBlock(),createBlock(Se,{key:0,description:"\u7A7A\u7A7A\u5982\u4E5F"})):createCommentVNode("",!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(Me),Ae=>(openBlock(),createBlock(r,{key:Ae.id,class:"box-card"},{header:withCtx(()=>[createBaseVNode("div",_hoisted_4$1,[createBaseVNode("span",null,toDisplayString(Ae.name),1),createVNode(Te,{class:"button",size:"small",icon:unref(remove),onClick:()=>Be(Ae)},null,8,["icon","onClick"])])]),default:withCtx(()=>[createVNode(xe,{class:normalizeClass([Ae.darkTheme?"drakBackground":"","img"]),lazy:"",src:Ae.imgSrc,fit:"fill",onClick:()=>ke(Ae)},null,8,["class","src","onClick"])]),_:2},1024))),128))]),_:1})]),_:1})])}}});var viewPort=_export_sfc$1(_sfc_main$9,[["__scopeId","data-v-11834d14"]]);const Annotation=Object.assign(annotation,{install(Re){Re.component(annotation.name,annotation)}}),LayerManage=Object.assign(layerManage,{install(Re){Re.component(layerManage.name,layerManage)}}),Property=Object.assign(property,{install(Re){Re.component(property.name,property)}}),ViewPort=Object.assign(viewPort,{install(Re){Re.component(viewPort.name,viewPort)}});var sideBar_vue_vue_type_style_index_0_scoped_true_lang="";const _sfc_main$8=defineComponent({setup(Re){const e={Annotation:["\u6279\u6CE8",Annotation],LayerManage:["\u56FE\u5C42",LayerManage],Property:["\u5C5E\u6027",Property],ViewPort:["\u89C6\u53E3",ViewPort]},t=ref("0"),Pe=ref([]),Me=(ke,_e)=>{if(!e[ke])return;if(Pe.value.findIndex(Se=>Se.name===ke)==-1){if(_e)return;Pe.value.push({title:e[ke][0],name:ke})}t.value=ke},Ie=(ke,_e)=>{if(_e==="remove"){const Ce=Pe.value;let Te=t.value;Te===ke&&Ce.forEach((Se,xe)=>{if(Se.name===ke){const r=Ce[xe+1]||Ce[xe-1];r&&(Te=r.name)}}),t.value=Te,Pe.value=Ce.filter(Se=>Se.name!==ke)}},Be=ke=>{let _e=ke.name;Me(_e,ke.noAutoAdd)};return emitter.on("activeSideBarTabs",Be),onUnmounted(()=>emitter.off("activeSideBarTabs",Be)),Me("Property"),(ke,_e)=>{const Ce=resolveComponent("el-tab-pane"),Te=resolveComponent("el-tabs");return Pe.value.length?(openBlock(),createBlock(Te,{key:0,modelValue:t.value,"onUpdate:modelValue":_e[0]||(_e[0]=Se=>t.value=Se),type:"border-card",closable:!0,class:"box-card",onEdit:Ie},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(Pe.value,Se=>(openBlock(),createBlock(Ce,{key:Se.name,label:Se.title,name:Se.name},{default:withCtx(()=>[(openBlock(),createBlock(KeepAlive,null,[(openBlock(),createBlock(resolveDynamicComponent(e[Se.name][1])))],1024))]),_:2},1032,["label","name"]))),128))]),_:1},8,["modelValue"])):createCommentVNode("",!0)}}});var sideBar=_export_sfc$1(_sfc_main$8,[["__scopeId","data-v-41551b2c"]]),DoMapAction_vue_vue_type_style_index_0_scoped_true_lang="";const _hoisted_1$5={class:"righttop"},_hoisted_2$3=createTextVNode("\u786E\u5B9A"),_hoisted_3$1=createTextVNode("\u53D6\u6D88"),_sfc_main$7=defineComponent({setup(Re){const e=inject("map")(),t=ref(""),Pe=ref(!1),Me=()=>{Be("ok")},Ie=()=>{Be("cancel")},Be=_e=>{emitter.emit("ismapDoAction",{do:!1,sel:_e})},ke=_e=>{_e.message!==void 0&&(t.value=_e.message),_e.disableButtons!==void 0&&(Pe.value=_e.disableButtons)};return emitter.on("changActionUiStatus",ke),onUnmounted(()=>emitter.off("changActionUiStatus",ke)),onMounted(()=>e.setIsInteracting(!0)),onUnmounted(()=>e.setIsInteracting(!1)),(_e,Ce)=>{const Te=resolveComponent("el-tag"),Se=resolveComponent("el-button");return openBlock(),createElementBlock("div",_hoisted_1$5,[t.value!=""?(openBlock(),createBlock(Te,{key:0,effect:"dark",size:"large",type:"success",class:"tag"},{default:withCtx(()=>[createTextVNode(toDisplayString(t.value),1)]),_:1})):createCommentVNode("",!0),createVNode(Se,{type:"success",onClick:Ce[0]||(Ce[0]=xe=>Me()),disabled:Pe.value},{default:withCtx(()=>[_hoisted_2$3]),_:1},8,["disabled"]),createVNode(Se,{type:"info",onClick:Ce[1]||(Ce[1]=xe=>Ie()),disabled:Pe.value},{default:withCtx(()=>[_hoisted_3$1]),_:1},8,["disabled"])])}}});var doMapAction=_export_sfc$1(_sfc_main$7,[["__scopeId","data-v-515f2068"]]);const _hoisted_1$4={style:{"z-index":"2"},class:"mapui"},_sfc_main$6=defineComponent({setup(Re){const e=ref("free"),t=Pe=>{e.value=Pe};return emitter.on("changeUiAction",t),onUnmounted(()=>emitter.off("changeUiAction",t)),watch(e,Pe=>{let Me=Pe=="free"?"":"none",Ie=document.getElementsByClassName("vjmapgis-control-container")[0];Ie.style.display=Me}),(Pe,Me)=>(openBlock(),createElementBlock("div",_hoisted_1$4,[e.value=="free"?(openBlock(),createBlock(unref(CmdBar),{key:0})):createCommentVNode("",!0),e.value=="free"?(openBlock(),createBlock(unref(SideBar),{key:1})):createCommentVNode("",!0),e.value=="annotataion"?(openBlock(),createBlock(unref(AnnoBar),{key:2})):createCommentVNode("",!0)]))}});var AnnoBar_vue_vue_type_style_index_0_scoped_true_lang="";const _hoisted_1$3={class:"btmcenter"},_hoisted_2$2=createTextVNode("\u7ED8\u5236\u7BAD\u5934"),_hoisted_3=createTextVNode("\u968F\u624B\u7ED8\u5236"),_hoisted_4=createTextVNode("\u76F4\u7EBF"),_hoisted_5=createTextVNode("\u865A\u7EBF"),_hoisted_6=createTextVNode("\u5706"),_hoisted_7=createTextVNode("\u692D\u5706"),_hoisted_8=createTextVNode("\u77E9\u5F62"),_hoisted_9=createTextVNode("\u76F4\u89D2\u4E09\u89D2\u5F62"),_hoisted_10=createTextVNode("\u7B49\u8FB9\u4E09\u89D2\u5F62"),_hoisted_11=createTextVNode("\u6587\u672C"),_hoisted_12=createTextVNode("\u5220\u9664\u9009\u62E9"),_hoisted_13=createTextVNode(" \u7EBF\u5BBD "),_hoisted_14=createTextVNode("\u4FDD\u5B58\u6279\u6CE8"),_hoisted_15=createTextVNode("\u53D6\u6D88"),_sfc_main$5={setup(Re){const e=useAppStore(),t=inject("map")();let Pe=t.getService();const Me=ref("#e34f51"),Ie=ref(5);let Be,ke,_e,Ce,Te,Se,xe,r="",Oe;const Ee=()=>{if(Be)return;t.setPitch(0),t.setBearing(0);let Ke=t.getCanvas();Be=document.createElement("canvas"),Be.style.position="absolute";let er=Ke.getBoundingClientRect();Be.style.left=er.left+"px",Be.style.top=er.top+"px",Be.style.width=er.width+"px",Be.style.height=er.height+"px",Ae(Be,Ke.parentNode),Te=er.width,Se=er.height,Fe(Be,Te,Se),_e=t.fromLngLat(t.unproject(new vjmap.Point(0,0))),Ce=t.fromLngLat(t.unproject(new vjmap.Point(Te,Se)))},Ae=(Ke,er)=>{var Qe=er.parentNode;Qe.lastChild==er?Qe.appendChild(Ke):Qe.insertBefore(Ke,er.nextSibling)},Fe=(Ke,er,Qe)=>{let nr=new fabric.fabric.Canvas(Ke,{isDrawingMode:!1,selectable:!0,selection:!0,width:er,height:Qe});ke=nr;let ir={},cr={},br=null,wr=null,xr=1,Sr=!1;nr.freeDrawingBrush.color=Me.value,nr.freeDrawingBrush.width=Ie.value,nr.on("mouse:down",function($e){ke.selection||(ir.x=$e.e.offsetX,ir.y=$e.e.offsetY,Sr=!0)}),nr.on("mouse:up",function($e){ke.selection||(cr.x=$e.e.offsetX,cr.y=$e.e.offsetY,wr&&(ke.setActiveObject(wr),ke.requestRenderAll()),wr=null,xr=1,Sr=!1,ke.isDrawingMode=!1,ke.selection=!0)}),nr.on("mouse:move",function($e){ke.selection||xr%2&&!Sr||(xr++,cr.x=$e.e.offsetX,cr.y=$e.e.offsetY,lr())});function lr(){wr&&nr.remove(wr);var $e=null;switch(xe){case"arrow":$e=new fabric.fabric.Path(fr(ir.x,ir.y,cr.x,cr.y,30,30),{stroke:Me.value,fill:"rgba(255,255,255,0)",strokeWidth:Ie.value});break;case"line":$e=new fabric.fabric.Line([ir.x,ir.y,cr.x,cr.y],{stroke:Me.value,strokeWidth:Ie.value});break;case"dottedline":$e=new fabric.fabric.Line([ir.x,ir.y,cr.x,cr.y],{strokeDashArray:[3,1],stroke:Me.value,strokeWidth:Ie.value});break;case"circle":var Ve=ir.x,Je=ir.y,Ze=Math.sqrt((cr.x-Ve)*(cr.x-Ve)+(cr.y-Je)*(cr.y-Je))/2;$e=new fabric.fabric.Circle({left:Ve,top:Je,stroke:Me.value,fill:"rgba(255, 255, 255, 0)",radius:Ze,strokeWidth:Ie.value});break;case"ellipse":var Ve=ir.x,Je=ir.y,Ze=Math.sqrt((cr.x-Ve)*(cr.x-Ve)+(cr.y-Je)*(cr.y-Je))/2;$e=new fabric.fabric.Ellipse({left:Ve,top:Je,stroke:Me.value,fill:"rgba(255, 255, 255, 0)",originX:"center",originY:"center",rx:Math.abs(Ve-cr.x),ry:Math.abs(Je-cr.y),strokeWidth:Ie.value});break;case"rectangle":var St="M "+ir.x+" "+ir.y+" L "+cr.x+" "+ir.y+" L "+cr.x+" "+cr.y+" L "+ir.x+" "+cr.y+" L "+ir.x+" "+ir.y+" z";$e=new fabric.fabric.Path(St,{left:Ve,top:Je,stroke:Me.value,strokeWidth:Ie.value,fill:"rgba(255, 255, 255, 0)"});break;case"rightangle":var St="M "+ir.x+" "+ir.y+" L "+ir.x+" "+cr.y+" L "+cr.x+" "+cr.y+" z";$e=new fabric.fabric.Path(St,{left:Ve,top:Je,stroke:Me.value,strokeWidth:Ie.value,fill:"rgba(255, 255, 255, 0)"});break;case"equilateral":var vr=cr.y-ir.y;$e=new fabric.fabric.Triangle({top:ir.y,left:ir.x,width:Math.sqrt(Math.pow(vr,2)+Math.pow(vr/2,2)),height:vr,stroke:Me.value,strokeWidth:Ie.value,fill:"rgba(255,255,255,0)"});break;case"text":br=new fabric.fabric.Textbox("",{left:ir.x-60,top:ir.y-20,width:150,fontSize:30,borderColor:"yellow",fill:Me.value,hasControls:!0}),nr.add(br),br.enterEditing(),br.hiddenTextarea.focus();break}$e&&(nr.add($e),wr=$e)}function fr($e,Ve,Je,Ze,St,vr){St=typeof St!="undefined"?St:30,vr=typeof St!="undefined"?vr:10;var mr=Math.atan2(Ve-Ze,$e-Je)*180/Math.PI,Cr=(mr+St)*Math.PI/180,_r=(mr-St)*Math.PI/180,pr=vr*Math.cos(Cr),dr=vr*Math.sin(Cr),ur=vr*Math.cos(_r),rr=vr*Math.sin(_r),gr=$e-pr,hr=Ve-dr,sr=" M "+$e+" "+Ve;return sr+=" L "+Je+" "+Ze,gr=Je+pr,hr=Ze+dr,sr+=" M "+gr+" "+hr,sr+=" L "+Je+" "+Ze,gr=Je+ur,hr=Ze+rr,sr+=" L "+gr+" "+hr,sr}},De=Ke=>{Ee(),Ke=="freedraw"?(ke.freeDrawingBrush.color=Me.value,ke.freeDrawingBrush.width=Ie.value,ke.isDrawingMode=!0):ke.isDrawingMode=!1,ke.selection=!1,xe=Ke},ze=()=>{var Ke=ke.getActiveObjects(),er=new fabric.fabric.ActiveSelection(Ke,{canvas:ke});!er||(er.forEachObject(function(Qe){ke.remove(Qe)}),ke.discardActiveObject().renderAll())},je=(Ke,er,Qe,nr)=>{nr=nr!=null?nr:"canvasid_"+vjmap.RandomID();let ir=t.toLngLat(Ke),cr=t.toLngLat(er),br=new vjmap.GeoPoint,wr=new vjmap.GeoPoint;return br.x=ir[0],br.y=ir[1],wr.x=cr[0],wr.y=cr[1],t.addSource(nr+"_source",{type:"canvas",canvas:Qe,coordinates:[[br.x,br.y],[wr.x,br.y],[wr.x,wr.y],[br.x,wr.y]]}),t.addRasterLayer(nr+ +"_layer",nr+"_source",{visibility:"visible"}),nr},We=()=>{!_e||Be&&(t.getCanvas().parentNode.parentNode.removeChild(Be.parentElement),Be=null)},Ge=async()=>{var Ke;try{let er=await getInput("\u6279\u6CE8","\u8BF7\u8F93\u5165\u6279\u6CE8\u5185\u5BB9",Oe==null?void 0:Oe.name);r=je(_e,Ce,Be,Oe==null?void 0:Oe.id),await waitSourceLoaded(t,r+"_source");let Qe=t.getCenter(),nr={mapId:e.curMapId,version:e.curVersion,name:er,darkTheme:((Ke=Pe.currentMapParam())==null?void 0:Ke.darkMode)===!0,zoom:t.getZoom(),centerX:Qe.lng,centerY:Qe.lat,bearing:t.getBearing(),pitch:t.getPitch(),id:r,pt1:_e,pt2:Ce,width:Te,height:Se,svg:ke.toSVG(),json:ke.toJSON()};e.saveAnnotataion(nr),r&&t.removeSourceEx(r+"_source");let ir=createDivSvg(t,r,_e,Ce,Te,Se,nr.svg);e.annoIdDivOverlay[r]=ir,await Ye()}catch(er){r&&t.removeSourceEx(r+"_source"),console.warn(er)}},Ye=async()=>{We(),emitter.emit("changeUiAction","free"),await nextTick(),emitter.emit("activeSideBarTabs",{name:"Annotation"})},Xe=Ke=>{Oe=Ke,ke&&ke.loadFromJSON(Ke.json,function(){ke.renderAll()})};return Ee(),emitter.on("loadAnnotataion",Xe),onUnmounted(()=>emitter.off("loadAnnotataion",Xe)),(Ke,er)=>{const Qe=resolveComponent("el-button"),nr=resolveComponent("el-dropdown-item"),ir=resolveComponent("el-dropdown-menu"),cr=resolveComponent("el-dropdown"),br=resolveComponent("el-color-picker"),wr=resolveComponent("el-button-group");return openBlock(),createElementBlock("div",_hoisted_1$3,[createVNode(wr,null,{default:withCtx(()=>[createVNode(Qe,{size:"small",onClick:er[0]||(er[0]=xr=>De("arrow"))},{default:withCtx(()=>[_hoisted_2$2]),_:1}),createVNode(Qe,{size:"small",onClick:er[1]||(er[1]=xr=>De("freedraw"))},{default:withCtx(()=>[_hoisted_3]),_:1}),createVNode(Qe,{size:"small",onClick:er[2]||(er[2]=xr=>De("line"))},{default:withCtx(()=>[_hoisted_4]),_:1}),createVNode(Qe,{size:"small",onClick:er[3]||(er[3]=xr=>De("dottedline"))},{default:withCtx(()=>[_hoisted_5]),_:1}),createVNode(Qe,{size:"small",onClick:er[4]||(er[4]=xr=>De("circle"))},{default:withCtx(()=>[_hoisted_6]),_:1}),createVNode(Qe,{size:"small",onClick:er[5]||(er[5]=xr=>De("ellipse"))},{default:withCtx(()=>[_hoisted_7]),_:1}),createVNode(Qe,{size:"small",onClick:er[6]||(er[6]=xr=>De("rectangle"))},{default:withCtx(()=>[_hoisted_8]),_:1}),createVNode(Qe,{size:"small",onClick:er[7]||(er[7]=xr=>De("rightangle"))},{default:withCtx(()=>[_hoisted_9]),_:1}),createVNode(Qe,{size:"small",onClick:er[8]||(er[8]=xr=>De("equilateral"))},{default:withCtx(()=>[_hoisted_10]),_:1}),createVNode(Qe,{size:"small",onClick:er[9]||(er[9]=xr=>De("text"))},{default:withCtx(()=>[_hoisted_11]),_:1}),createVNode(Qe,{size:"small",onClick:er[10]||(er[10]=xr=>ze())},{default:withCtx(()=>[_hoisted_12]),_:1}),createVNode(cr,{"split-button":"",size:"small",onCommand:er[11]||(er[11]=xr=>Ie.value=+xr)},{dropdown:withCtx(()=>[createVNode(ir,null,{default:withCtx(()=>[(openBlock(),createElementBlock(Fragment,null,renderList(10,xr=>createVNode(nr,{key:xr,command:xr},{default:withCtx(()=>[createTextVNode(toDisplayString(xr),1)]),_:2},1032,["command"])),64))]),_:1})]),default:withCtx(()=>[_hoisted_13]),_:1}),createVNode(br,{modelValue:Me.value,"onUpdate:modelValue":er[12]||(er[12]=xr=>Me.value=xr),size:"small"},null,8,["modelValue"])]),_:1}),createVNode(wr,null,{default:withCtx(()=>[createVNode(Qe,{type:"primary",onClick:er[13]||(er[13]=xr=>Ge()),size:"small"},{default:withCtx(()=>[_hoisted_14]),_:1}),createVNode(Qe,{type:"info",onClick:er[14]||(er[14]=xr=>Ye()),size:"small"},{default:withCtx(()=>[_hoisted_15]),_:1})]),_:1})])}}};var annoBar=_export_sfc$1(_sfc_main$5,[["__scopeId","data-v-0b4f1835"]]);const MapContainer=Object.assign(mapContainer,{install(Re){Re.component(mapContainer.name,mapContainer)}}),CmdBar=Object.assign(cmdBar,{install(Re){Re.component(cmdBar.name,cmdBar)}}),SideBar=Object.assign(sideBar,{install(Re){Re.component(sideBar.name,sideBar)}}),DoMapAction=Object.assign(doMapAction,{install(Re){Re.component(doMapAction.name,doMapAction)}}),UiView=Object.assign(_sfc_main$6,{install(Re){Re.component(_sfc_main$6.name,_sfc_main$6)}}),AnnoBar=Object.assign(annoBar,{install(Re){Re.component(annoBar.name,annoBar)}});var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(Re,e,t)=>e in Re?__defProp(Re,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):Re[e]=t,__spreadValues=(Re,e)=>{for(var t in e||(e={}))__hasOwnProp.call(e,t)&&__defNormalProp(Re,t,e[t]);if(__getOwnPropSymbols)for(var t of __getOwnPropSymbols(e))__propIsEnum.call(e,t)&&__defNormalProp(Re,t,e[t]);return Re},__spreadProps=(Re,e)=>__defProps(Re,__getOwnPropDescs(e)),__objRest=(Re,e)=>{var t={};for(var Pe in Re)__hasOwnProp.call(Re,Pe)&&e.indexOf(Pe)<0&&(t[Pe]=Re[Pe]);if(Re!=null&&__getOwnPropSymbols)for(var Pe of __getOwnPropSymbols(Re))e.indexOf(Pe)<0&&__propIsEnum.call(Re,Pe)&&(t[Pe]=Re[Pe]);return t};const _sfc_main$1$1={name:"splitpanes",emits:["ready","resize","resized","pane-click","pane-maximize","pane-add","pane-remove","splitter-click"],props:{horizontal:{type:Boolean},pushOtherPanes:{type:Boolean,default:!0},dblClickSplitter:{type:Boolean,default:!0},rtl:{type:Boolean,default:!1},firstSplitter:{type:Boolean}},provide(){return{requestUpdate:this.requestUpdate,onPaneAdd:this.onPaneAdd,onPaneRemove:this.onPaneRemove,onPaneClick:this.onPaneClick}},data:()=>({container:null,ready:!1,panes:[],touch:{mouseDown:!1,dragging:!1,activeSplitter:null},splitterTaps:{splitter:null,timeoutId:null}}),computed:{panesCount(){return this.panes.length},indexedPanes(){return this.panes.reduce((Re,e)=>(Re[e.id]=e)&&Re,{})}},methods:{updatePaneComponents(){this.panes.forEach(Re=>{Re.update&&Re.update({[this.horizontal?"height":"width"]:`${this.indexedPanes[Re.id].size}%`})})},bindEvents(){document.addEventListener("mousemove",this.onMouseMove,{passive:!1}),document.addEventListener("mouseup",this.onMouseUp),"ontouchstart"in window&&(document.addEventListener("touchmove",this.onMouseMove,{passive:!1}),document.addEventListener("touchend",this.onMouseUp))},unbindEvents(){document.removeEventListener("mousemove",this.onMouseMove,{passive:!1}),document.removeEventListener("mouseup",this.onMouseUp),"ontouchstart"in window&&(document.removeEventListener("touchmove",this.onMouseMove,{passive:!1}),document.removeEventListener("touchend",this.onMouseUp))},onMouseDown(Re,e){this.bindEvents(),this.touch.mouseDown=!0,this.touch.activeSplitter=e},onMouseMove(Re){this.touch.mouseDown&&(Re.preventDefault(),this.touch.dragging=!0,this.calculatePanesSize(this.getCurrentMouseDrag(Re)),this.$emit("resize",this.panes.map(e=>({min:e.min,max:e.max,size:e.size}))))},onMouseUp(){this.touch.dragging&&this.$emit("resized",this.panes.map(Re=>({min:Re.min,max:Re.max,size:Re.size}))),this.touch.mouseDown=!1,setTimeout(()=>{this.touch.dragging=!1,this.unbindEvents()},100)},onSplitterClick(Re,e){"ontouchstart"in window&&(Re.preventDefault(),this.dblClickSplitter&&(this.splitterTaps.splitter===e?(clearTimeout(this.splitterTaps.timeoutId),this.splitterTaps.timeoutId=null,this.onSplitterDblClick(Re,e),this.splitterTaps.splitter=null):(this.splitterTaps.splitter=e,this.splitterTaps.timeoutId=setTimeout(()=>{this.splitterTaps.splitter=null},500)))),this.touch.dragging||this.$emit("splitter-click",this.panes[e])},onSplitterDblClick(Re,e){let t=0;this.panes=this.panes.map((Pe,Me)=>(Pe.size=Me===e?Pe.max:Pe.min,Me!==e&&(t+=Pe.min),Pe)),this.panes[e].size-=t,this.$emit("pane-maximize",this.panes[e])},onPaneClick(Re,e){this.$emit("pane-click",this.indexedPanes[e])},getCurrentMouseDrag(Re){const e=this.container.getBoundingClientRect(),{clientX:t,clientY:Pe}="ontouchstart"in window&&Re.touches?Re.touches[0]:Re;return{x:t-e.left,y:Pe-e.top}},getCurrentDragPercentage(Re){Re=Re[this.horizontal?"y":"x"];const e=this.container[this.horizontal?"clientHeight":"clientWidth"];return this.rtl&&!this.horizontal&&(Re=e-Re),Re*100/e},calculatePanesSize(Re){const e=this.touch.activeSplitter;let t={prevPanesSize:this.sumPrevPanesSize(e),nextPanesSize:this.sumNextPanesSize(e),prevReachedMinPanes:0,nextReachedMinPanes:0};const Pe=0+(this.pushOtherPanes?0:t.prevPanesSize),Me=100-(this.pushOtherPanes?0:t.nextPanesSize),Ie=Math.max(Math.min(this.getCurrentDragPercentage(Re),Me),Pe);let Be=[e,e+1],ke=this.panes[Be[0]]||null,_e=this.panes[Be[1]]||null;const Ce=ke.max<100&&Ie>=ke.max+t.prevPanesSize,Te=_e.max<100&&Ie<=100-(_e.max+this.sumNextPanesSize(e+1));if(Ce||Te){Ce?(ke.size=ke.max,_e.size=Math.max(100-ke.max-t.prevPanesSize-t.nextPanesSize,0)):(ke.size=Math.max(100-_e.max-t.prevPanesSize-this.sumNextPanesSize(e+1),0),_e.size=_e.max);return}if(this.pushOtherPanes){const Se=this.doPushOtherPanes(t,Ie);if(!Se)return;({sums:t,panesToResize:Be}=Se),ke=this.panes[Be[0]]||null,_e=this.panes[Be[1]]||null}ke!==null&&(ke.size=Math.min(Math.max(Ie-t.prevPanesSize-t.prevReachedMinPanes,ke.min),ke.max)),_e!==null&&(_e.size=Math.min(Math.max(100-Ie-t.nextPanesSize-t.nextReachedMinPanes,_e.min),_e.max))},doPushOtherPanes(Re,e){const t=this.touch.activeSplitter,Pe=[t,t+1];return e<Re.prevPanesSize+this.panes[Pe[0]].min&&(Pe[0]=this.findPrevExpandedPane(t).index,Re.prevReachedMinPanes=0,Pe[0]<t&&this.panes.forEach((Me,Ie)=>{Ie>Pe[0]&&Ie<=t&&(Me.size=Me.min,Re.prevReachedMinPanes+=Me.min)}),Re.prevPanesSize=this.sumPrevPanesSize(Pe[0]),Pe[0]===void 0)?(Re.prevReachedMinPanes=0,this.panes[0].size=this.panes[0].min,this.panes.forEach((Me,Ie)=>{Ie>0&&Ie<=t&&(Me.size=Me.min,Re.prevReachedMinPanes+=Me.min)}),this.panes[Pe[1]].size=100-Re.prevReachedMinPanes-this.panes[0].min-Re.prevPanesSize-Re.nextPanesSize,null):e>100-Re.nextPanesSize-this.panes[Pe[1]].min&&(Pe[1]=this.findNextExpandedPane(t).index,Re.nextReachedMinPanes=0,Pe[1]>t+1&&this.panes.forEach((Me,Ie)=>{Ie>t&&Ie<Pe[1]&&(Me.size=Me.min,Re.nextReachedMinPanes+=Me.min)}),Re.nextPanesSize=this.sumNextPanesSize(Pe[1]-1),Pe[1]===void 0)?(Re.nextReachedMinPanes=0,this.panes[this.panesCount-1].size=this.panes[this.panesCount-1].min,this.panes.forEach((Me,Ie)=>{Ie<this.panesCount-1&&Ie>=t+1&&(Me.size=Me.min,Re.nextReachedMinPanes+=Me.min)}),this.panes[Pe[0]].size=100-Re.prevPanesSize-Re.nextReachedMinPanes-this.panes[this.panesCount-1].min-Re.nextPanesSize,null):{sums:Re,panesToResize:Pe}},sumPrevPanesSize(Re){return this.panes.reduce((e,t,Pe)=>e+(Pe<Re?t.size:0),0)},sumNextPanesSize(Re){return this.panes.reduce((e,t,Pe)=>e+(Pe>Re+1?t.size:0),0)},findPrevExpandedPane(Re){return[...this.panes].reverse().find(t=>t.index<Re&&t.size>t.min)||{}},findNextExpandedPane(Re){return this.panes.find(t=>t.index>Re+1&&t.size>t.min)||{}},checkSplitpanesNodes(){Array.from(this.container.children).forEach(e=>{const t=e.classList.contains("splitpanes__pane"),Pe=e.classList.contains("splitpanes__splitter");if(!t&&!Pe){e.parentNode.removeChild(e),console.warn("Splitpanes: Only <pane> elements are allowed at the root of <splitpanes>. One of your DOM nodes was removed.");return}})},addSplitter(Re,e,t=!1){const Pe=Re-1,Me=document.createElement("div");Me.classList.add("splitpanes__splitter"),t||(Me.onmousedown=Ie=>this.onMouseDown(Ie,Pe),typeof window!="undefined"&&"ontouchstart"in window&&(Me.ontouchstart=Ie=>this.onMouseDown(Ie,Pe)),Me.onclick=Ie=>this.onSplitterClick(Ie,Pe+1)),this.dblClickSplitter&&(Me.ondblclick=Ie=>this.onSplitterDblClick(Ie,Pe+1)),e.parentNode.insertBefore(Me,e)},removeSplitter(Re){Re.onmousedown=void 0,Re.onclick=void 0,Re.ondblclick=void 0,Re.parentNode.removeChild(Re)},redoSplitters(){const Re=Array.from(this.container.children);Re.forEach(t=>{t.className.includes("splitpanes__splitter")&&this.removeSplitter(t)});let e=0;Re.forEach(t=>{t.className.includes("splitpanes__pane")&&(!e&&this.firstSplitter?this.addSplitter(e,t,!0):e&&this.addSplitter(e,t),e++)})},requestUpdate(Re){var e=Re,{target:t}=e,Pe=__objRest(e,["target"]);const Me=this.indexedPanes[t._.uid];Object.entries(Pe).forEach(([Ie,Be])=>Me[Ie]=Be)},onPaneAdd(Re){let e=-1;Array.from(Re.$el.parentNode.children).some(Me=>(Me.className.includes("splitpanes__pane")&&e++,Me===Re.$el));const t=parseFloat(Re.minSize),Pe=parseFloat(Re.maxSize);this.panes.splice(e,0,{id:Re._.uid,index:e,min:isNaN(t)?0:t,max:isNaN(Pe)?100:Pe,size:Re.size===null?null:parseFloat(Re.size),givenSize:Re.size,update:Re.update}),this.panes.forEach((Me,Ie)=>Me.index=Ie),this.ready&&this.$nextTick(()=>{this.redoSplitters(),this.resetPaneSizes({addedPane:this.panes[e]}),this.$emit("pane-add",{index:e,panes:this.panes.map(Me=>({min:Me.min,max:Me.max,size:Me.size}))})})},onPaneRemove(Re){const e=this.panes.findIndex(Pe=>Pe.id===Re._.uid),t=this.panes.splice(e,1)[0];this.panes.forEach((Pe,Me)=>Pe.index=Me),this.$nextTick(()=>{this.redoSplitters(),this.resetPaneSizes({removedPane:__spreadProps(__spreadValues({},t),{index:e})}),this.$emit("pane-remove",{removed:t,panes:this.panes.map(Pe=>({min:Pe.min,max:Pe.max,size:Pe.size}))})})},resetPaneSizes(Re={}){!Re.addedPane&&!Re.removedPane?this.initialPanesSizing():this.panes.some(e=>e.givenSize!==null||e.min||e.max<100)?this.equalizeAfterAddOrRemove(Re):this.equalize(),this.ready&&this.$emit("resized",this.panes.map(e=>({min:e.min,max:e.max,size:e.size})))},equalize(){const Re=100/this.panesCount;let e=0,t=[],Pe=[];this.panes.forEach(Me=>{Me.size=Math.max(Math.min(Re,Me.max),Me.min),e-=Me.size,Me.size>=Me.max&&t.push(Me.id),Me.size<=Me.min&&Pe.push(Me.id)}),e>.1&&this.readjustSizes(e,t,Pe)},initialPanesSizing(){100/this.panesCount;let Re=100,e=[],t=[],Pe=0;this.panes.forEach(Ie=>{Re-=Ie.size,Ie.size!==null&&Pe++,Ie.size>=Ie.max&&e.push(Ie.id),Ie.size<=Ie.min&&t.push(Ie.id)});let Me=100;Re>.1&&(this.panes.forEach(Ie=>{Ie.size===null&&(Ie.size=Math.max(Math.min(Re/(this.panesCount-Pe),Ie.max),Ie.min)),Me-=Ie.size}),Me>.1&&this.readjustSizes(Re,e,t))},equalizeAfterAddOrRemove({addedPane:Re,removedPane:e}={}){let t=100/this.panesCount,Pe=0,Me=[],Ie=[];Re&&Re.givenSize!==null&&(t=(100-Re.givenSize)/(this.panesCount-1)),this.panes.forEach(Be=>{Pe-=Be.size,Be.size>=Be.max&&Me.push(Be.id),Be.size<=Be.min&&Ie.push(Be.id)}),!(Math.abs(Pe)<.1)&&(this.panes.forEach(Be=>{Re&&Re.givenSize!==null&&Re.id===Be.id||(Be.size=Math.max(Math.min(t,Be.max),Be.min)),Pe-=Be.size,Be.size>=Be.max&&Me.push(Be.id),Be.size<=Be.min&&Ie.push(Be.id)}),Pe>.1&&this.readjustSizes(Pe,Me,Ie))},readjustSizes(Re,e,t){let Pe;Re>0?Pe=Re/(this.panesCount-e.length):Pe=Re/(this.panesCount-t.length),this.panes.forEach((Me,Ie)=>{if(Re>0&&!e.includes(Me.id)){const Be=Math.max(Math.min(Me.size+Pe,Me.max),Me.min);Re-=Be-Me.size,Me.size=Be}else if(!t.includes(Me.id)){const Be=Math.max(Math.min(Me.size+Pe,Me.max),Me.min);Re-=Be-Me.size,Me.size=Be}Me.update({[this.horizontal?"height":"width"]:`${this.indexedPanes[Me.id].size}%`})}),Math.abs(Re)>.1&&this.$nextTick(()=>{this.ready&&console.warn("Splitpanes: Could not resize panes correctly due to their constraints.")})}},watch:{panes:{deep:!0,immediate:!1,handler(){this.updatePaneComponents()}},horizontal(){this.updatePaneComponents()},firstSplitter(){this.redoSplitters()},dblClickSplitter(Re){[...this.container.querySelectorAll(".splitpanes__splitter")].forEach((t,Pe)=>{t.ondblclick=Re?Me=>this.onSplitterDblClick(Me,Pe):void 0})}},beforeUnmount(){this.ready=!1},mounted(){this.container=this.$refs.container,this.checkSplitpanesNodes(),this.redoSplitters(),this.resetPaneSizes(),this.$emit("ready"),this.ready=!0},render(){return h$1("div",{ref:"container",class:["splitpanes",`splitpanes--${this.horizontal?"horizontal":"vertical"}`,{"splitpanes--dragging":this.touch.dragging}]},this.$slots.default())}};var _export_sfc=(Re,e)=>{const t=Re.__vccOpts||Re;for(const[Pe,Me]of e)t[Pe]=Me;return t};const _sfc_main$4={name:"pane",inject:["requestUpdate","onPaneAdd","onPaneRemove","onPaneClick"],props:{size:{type:[Number,String],default:null},minSize:{type:[Number,String],default:0},maxSize:{type:[Number,String],default:100}},data:()=>({style:{}}),mounted(){this.onPaneAdd(this)},beforeUnmount(){this.onPaneRemove(this)},methods:{update(Re){this.style=Re}},computed:{sizeNumber(){return this.size||this.size===0?parseFloat(this.size):null},minSizeNumber(){return parseFloat(this.minSize)},maxSizeNumber(){return parseFloat(this.maxSize)}},watch:{sizeNumber(Re){this.requestUpdate({target:this,size:Re})},minSizeNumber(Re){this.requestUpdate({target:this,min:Re})},maxSizeNumber(Re){this.requestUpdate({target:this,max:Re})}}};function _sfc_render(Re,e,t,Pe,Me,Ie){return openBlock(),createElementBlock("div",{class:"splitpanes__pane",onClick:e[0]||(e[0]=Be=>Ie.onPaneClick(Be,Re._.uid)),style:normalizeStyle(Re.style)},[renderSlot(Re.$slots,"default")],4)}var pane=_export_sfc(_sfc_main$4,[["render",_sfc_render]]),splitpanes="",TaskInfo_vue_vue_type_style_index_0_lang="";const _hoisted_1$2={class:"form-container"},_hoisted_2$1=createTextVNode("\u4FDD\u5B58"),_sfc_main$3=defineComponent({setup(Re){const e=useOperationStoreHook().GET_CURRENT_TASK();let t=inject("show"),Pe=computed(()=>useOperationStoreHook().GET_CURRENT_BLUEPRINT());const Me=reactive(JSON.parse(e.formJson?e.formJson:"{}")),Ie=reactive(JSON.parse(e.formData?e.formData:"{}")),Be=reactive({}),ke=ref(null);let _e=computed(()=>t.value==1||t.value==2?100:50);const Ce=computed(()=>{if(!!Pe.value)return Pe.value.filename?Pe.value.filename.endsWith(".dwg")?"dwg":"pdf":""});function Te(){return t.value!=2}function Se(){return t.value!=1}let xe=computed(()=>t.value==1?100:t.value==2?0:20),r=computed(()=>t.value==1?0:t.value==2?100:20);const Oe=()=>{ke.value.getFormData().then(Ee=>{saveFormData({id:e.id,formData:JSON.stringify(Ee)}).then(Ae=>{Ae.success&&ElMessage.success("\u4FDD\u5B58\u6210\u529F")})}).catch(Ee=>{ElMessage.error(Ee)})};return(Ee,Ae)=>{const Fe=resolveComponent("v-form-render"),De=resolveComponent("el-button"),ze=resolveComponent("el-scrollbar");return openBlock(),createElementBlock("div",null,[createVNode(unref(_sfc_main$1$1),{class:"default-theme"},{default:withCtx(()=>[withDirectives(createVNode(unref(pane),{size:unref(_e),"min-size":unref(xe)},{default:withCtx(()=>[createVNode(ze,{height:"80vh"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$2,[createVNode(Fe,{"form-json":unref(Me),"form-data":unref(Ie),"option-data":unref(Be),ref_key:"vFormRef",ref:ke},null,8,["form-json","form-data","option-data"]),createVNode(De,{type:"primary",onClick:Oe},{default:withCtx(()=>[_hoisted_2$1]),_:1})])]),_:1})]),_:1},8,["size","min-size"]),[[vShow,Te()]]),withDirectives(createVNode(unref(pane),{size:unref(_e),"min-size":unref(r)},{default:withCtx(()=>[createVNode(ze,{height:"80vh"},{default:withCtx(()=>[unref(Ce)==="dwg"?(openBlock(),createBlock(unref(MapContainer),{key:unref(Pe).filename})):unref(Ce)==="pdf"?(openBlock(),createBlock(unref(PdfView),{key:1})):createCommentVNode("",!0)]),_:1})]),_:1},8,["size","min-size"]),[[vShow,Se()]])]),_:1})])}}});var TaskInfo=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:_sfc_main$3}),pdf$1={exports:{}},ponyfill={exports:{}};(function(Re,e){(function(t,Pe){Pe(e)})(commonjsGlobal,function(t){var Pe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:function(He){return"Symbol("+He+")"};function Me(){}function Ie(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof commonjsGlobal!="undefined")return commonjsGlobal}var Be=Ie();function ke(He){return typeof He=="object"&&He!==null||typeof He=="function"}var _e=Me,Ce=Promise,Te=Promise.prototype.then,Se=Promise.resolve.bind(Ce),xe=Promise.reject.bind(Ce);function r(He){return new Ce(He)}function Oe(He){return Se(He)}function Ee(He){return xe(He)}function Ae(He,ar,kr){return Te.call(He,ar,kr)}function Fe(He,ar,kr){Ae(Ae(He,ar,kr),void 0,_e)}function De(He,ar){Fe(He,ar)}function ze(He,ar){Fe(He,void 0,ar)}function je(He,ar,kr){return Ae(He,ar,kr)}function We(He){Ae(He,void 0,_e)}var Ge=function(){var He=Be&&Be.queueMicrotask;if(typeof He=="function")return He;var ar=Oe(void 0);return function(kr){return Ae(ar,kr)}}();function Ye(He,ar,kr){if(typeof He!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(He,ar,kr)}function Xe(He,ar,kr){try{return Oe(Ye(He,ar,kr))}catch(Yr){return Ee(Yr)}}var Ke=16384,er=function(){function He(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}return Object.defineProperty(He.prototype,"length",{get:function(){return this._size},enumerable:!1,configurable:!0}),He.prototype.push=function(ar){var kr=this._back,Yr=kr;kr._elements.length===Ke-1&&(Yr={_elements:[],_next:void 0}),kr._elements.push(ar),Yr!==kr&&(this._back=Yr,kr._next=Yr),++this._size},He.prototype.shift=function(){var ar=this._front,kr=ar,Yr=this._cursor,hn=Yr+1,kn=ar._elements,Dn=kn[Yr];return hn===Ke&&(kr=ar._next,hn=0),--this._size,this._cursor=hn,ar!==kr&&(this._front=kr),kn[Yr]=void 0,Dn},He.prototype.forEach=function(ar){for(var kr=this._cursor,Yr=this._front,hn=Yr._elements;(kr!==hn.length||Yr._next!==void 0)&&!(kr===hn.length&&(Yr=Yr._next,hn=Yr._elements,kr=0,hn.length===0));)ar(hn[kr]),++kr},He.prototype.peek=function(){var ar=this._front,kr=this._cursor;return ar._elements[kr]},He}();function Qe(He,ar){He._ownerReadableStream=ar,ar._reader=He,ar._state==="readable"?br(He):ar._state==="closed"?xr(He):wr(He,ar._storedError)}function nr(He,ar){var kr=He._ownerReadableStream;return Hi(kr,ar)}function ir(He){He._ownerReadableStream._state==="readable"?Sr(He,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):lr(He,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),He._ownerReadableStream._reader=void 0,He._ownerReadableStream=void 0}function cr(He){return new TypeError("Cannot "+He+" a stream using a released reader")}function br(He){He._closedPromise=r(function(ar,kr){He._closedPromise_resolve=ar,He._closedPromise_reject=kr})}function wr(He,ar){br(He),Sr(He,ar)}function xr(He){br(He),fr(He)}function Sr(He,ar){He._closedPromise_reject!==void 0&&(We(He._closedPromise),He._closedPromise_reject(ar),He._closedPromise_resolve=void 0,He._closedPromise_reject=void 0)}function lr(He,ar){wr(He,ar)}function fr(He){He._closedPromise_resolve!==void 0&&(He._closedPromise_resolve(void 0),He._closedPromise_resolve=void 0,He._closedPromise_reject=void 0)}var $e=Pe("[[AbortSteps]]"),Ve=Pe("[[ErrorSteps]]"),Je=Pe("[[CancelSteps]]"),Ze=Pe("[[PullSteps]]"),St=Number.isFinite||function(He){return typeof He=="number"&&isFinite(He)},vr=Math.trunc||function(He){return He<0?Math.ceil(He):Math.floor(He)};function mr(He){return typeof He=="object"||typeof He=="function"}function Cr(He,ar){if(He!==void 0&&!mr(He))throw new TypeError(ar+" is not an object.")}function _r(He,ar){if(typeof He!="function")throw new TypeError(ar+" is not a function.")}function pr(He){return typeof He=="object"&&He!==null||typeof He=="function"}function dr(He,ar){if(!pr(He))throw new TypeError(ar+" is not an object.")}function ur(He,ar,kr){if(He===void 0)throw new TypeError("Parameter "+ar+" is required in '"+kr+"'.")}function rr(He,ar,kr){if(He===void 0)throw new TypeError(ar+" is required in '"+kr+"'.")}function gr(He){return Number(He)}function hr(He){return He===0?0:He}function sr(He){return hr(vr(He))}function Ar(He,ar){var kr=0,Yr=Number.MAX_SAFE_INTEGER,hn=Number(He);if(hn=hr(hn),!St(hn))throw new TypeError(ar+" is not a finite number");if(hn=sr(hn),hn<kr||hn>Yr)throw new TypeError(ar+" is outside the accepted range of "+kr+" to "+Yr+", inclusive");return!St(hn)||hn===0?0:hn}function Or(He,ar){if(!ia(He))throw new TypeError(ar+" is not a ReadableStream.")}function Mr(He){return new rn(He)}function Gr(He,ar){He._reader._readRequests.push(ar)}function zr(He,ar,kr){var Yr=He._reader,hn=Yr._readRequests.shift();kr?hn._closeSteps():hn._chunkSteps(ar)}function Ir(He){return He._reader._readRequests.length}function Qr(He){var ar=He._reader;return!(ar===void 0||!sn(ar))}var rn=function(){function He(ar){if(ur(ar,1,"ReadableStreamDefaultReader"),Or(ar,"First parameter"),Yi(ar))throw new TypeError("This stream has already been locked for exclusive reading by another reader");Qe(this,ar),this._readRequests=new er}return Object.defineProperty(He.prototype,"closed",{get:function(){return sn(this)?this._closedPromise:Ee(mn("closed"))},enumerable:!1,configurable:!0}),He.prototype.cancel=function(ar){return ar===void 0&&(ar=void 0),sn(this)?this._ownerReadableStream===void 0?Ee(cr("cancel")):nr(this,ar):Ee(mn("cancel"))},He.prototype.read=function(){if(!sn(this))return Ee(mn("read"));if(this._ownerReadableStream===void 0)return Ee(cr("read from"));var ar,kr,Yr=r(function(kn,Dn){ar=kn,kr=Dn}),hn={_chunkSteps:function(kn){return ar({value:kn,done:!1})},_closeSteps:function(){return ar({value:void 0,done:!0})},_errorSteps:function(kn){return kr(kn)}};return pn(this,hn),Yr},He.prototype.releaseLock=function(){if(!sn(this))throw mn("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");ir(this)}},He}();Object.defineProperties(rn.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof Pe.toStringTag=="symbol"&&Object.defineProperty(rn.prototype,Pe.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function sn(He){return!ke(He)||!Object.prototype.hasOwnProperty.call(He,"_readRequests")?!1:He instanceof rn}function pn(He,ar){var kr=He._ownerReadableStream;kr._disturbed=!0,kr._state==="closed"?ar._closeSteps():kr._state==="errored"?ar._errorSteps(kr._storedError):kr._readableStreamController[Ze](ar)}function mn(He){return new TypeError("ReadableStreamDefaultReader.prototype."+He+" can only be used on a ReadableStreamDefaultReader")}var Sn,Cn;typeof Pe.asyncIterator=="symbol"&&(Cn=(Sn={},Sn[Pe.asyncIterator]=function(){return this},Sn),Object.defineProperty(Cn,Pe.asyncIterator,{enumerable:!1}));var Xr=function(){function He(ar,kr){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=ar,this._preventCancel=kr}return He.prototype.next=function(){var ar=this,kr=function(){return ar._nextSteps()};return this._ongoingPromise=this._ongoingPromise?je(this._ongoingPromise,kr,kr):kr(),this._ongoingPromise},He.prototype.return=function(ar){var kr=this,Yr=function(){return kr._returnSteps(ar)};return this._ongoingPromise?je(this._ongoingPromise,Yr,Yr):Yr()},He.prototype._nextSteps=function(){var ar=this;if(this._isFinished)return Promise.resolve({value:void 0,done:!0});var kr=this._reader;if(kr._ownerReadableStream===void 0)return Ee(cr("iterate"));var Yr,hn,kn=r(function(Gn,ei){Yr=Gn,hn=ei}),Dn={_chunkSteps:function(Gn){ar._ongoingPromise=void 0,Ge(function(){return Yr({value:Gn,done:!1})})},_closeSteps:function(){ar._ongoingPromise=void 0,ar._isFinished=!0,ir(kr),Yr({value:void 0,done:!0})},_errorSteps:function(Gn){ar._ongoingPromise=void 0,ar._isFinished=!0,ir(kr),hn(Gn)}};return pn(kr,Dn),kn},He.prototype._returnSteps=function(ar){if(this._isFinished)return Promise.resolve({value:ar,done:!0});this._isFinished=!0;var kr=this._reader;if(kr._ownerReadableStream===void 0)return Ee(cr("finish iterating"));if(!this._preventCancel){var Yr=nr(kr,ar);return ir(kr),je(Yr,function(){return{value:ar,done:!0}})}return ir(kr),Oe({value:ar,done:!0})},He}(),Er={next:function(){return Dr(this)?this._asyncIteratorImpl.next():Ee(Br("next"))},return:function(He){return Dr(this)?this._asyncIteratorImpl.return(He):Ee(Br("return"))}};Cn!==void 0&&Object.setPrototypeOf(Er,Cn);function Rr(He,ar){var kr=Mr(He),Yr=new Xr(kr,ar),hn=Object.create(Er);return hn._asyncIteratorImpl=Yr,hn}function Dr(He){if(!ke(He)||!Object.prototype.hasOwnProperty.call(He,"_asyncIteratorImpl"))return!1;try{return He._asyncIteratorImpl instanceof Xr}catch{return!1}}function Br(He){return new TypeError("ReadableStreamAsyncIterator."+He+" can only be used on a ReadableSteamAsyncIterator")}var Wr=Number.isNaN||function(He){return He!==He};function Ur(He){return He.slice()}function Hr(He,ar,kr,Yr,hn){new Uint8Array(He).set(new Uint8Array(kr,Yr,hn),ar)}function $r(He){return He}function Kr(He){return!1}function tn(He,ar,kr){if(He.slice)return He.slice(ar,kr);var Yr=kr-ar,hn=new ArrayBuffer(Yr);return Hr(hn,0,He,ar,Yr),hn}function yn(He){return!(typeof He!="number"||Wr(He)||He<0)}function Pn(He){var ar=tn(He.buffer,He.byteOffset,He.byteOffset+He.byteLength);return new Uint8Array(ar)}function bn(He){var ar=He._queue.shift();return He._queueTotalSize-=ar.size,He._queueTotalSize<0&&(He._queueTotalSize=0),ar.value}function dn(He,ar,kr){if(!yn(kr)||kr===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");He._queue.push({value:ar,size:kr}),He._queueTotalSize+=kr}function Tn(He){var ar=He._queue.peek();return ar.value}function xn(He){He._queue=new er,He._queueTotalSize=0}var Nn=function(){function He(){throw new TypeError("Illegal constructor")}return Object.defineProperty(He.prototype,"view",{get:function(){if(!Fn(this))throw ya("view");return this._view},enumerable:!1,configurable:!0}),He.prototype.respond=function(ar){if(!Fn(this))throw ya("respond");if(ur(ar,1,"respond"),ar=Ar(ar,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");Kr(this._view.buffer),sa(this._associatedReadableByteStreamController,ar)},He.prototype.respondWithNewView=function(ar){if(!Fn(this))throw ya("respondWithNewView");if(ur(ar,1,"respondWithNewView"),!ArrayBuffer.isView(ar))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");Kr(ar.buffer),ma(this._associatedReadableByteStreamController,ar)},He}();Object.defineProperties(Nn.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),typeof Pe.toStringTag=="symbol"&&Object.defineProperty(Nn.prototype,Pe.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});var In=function(){function He(){throw new TypeError("Illegal constructor")}return Object.defineProperty(He.prototype,"byobRequest",{get:function(){if(!Bn(this))throw Mi("byobRequest");return Ua(this)},enumerable:!1,configurable:!0}),Object.defineProperty(He.prototype,"desiredSize",{get:function(){if(!Bn(this))throw Mi("desiredSize");return Li(this)},enumerable:!1,configurable:!0}),He.prototype.close=function(){if(!Bn(this))throw Mi("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");var ar=this._controlledReadableByteStream._state;if(ar!=="readable")throw new TypeError("The stream (in "+ar+" state) is not in the readable state and cannot be closed");gi(this)},He.prototype.enqueue=function(ar){if(!Bn(this))throw Mi("enqueue");if(ur(ar,1,"enqueue"),!ArrayBuffer.isView(ar))throw new TypeError("chunk must be an array buffer view");if(ar.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(ar.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");var kr=this._controlledReadableByteStream._state;if(kr!=="readable")throw new TypeError("The stream (in "+kr+" state) is not in the readable state and cannot be enqueued to");ji(this,ar)},He.prototype.error=function(ar){if(ar===void 0&&(ar=void 0),!Bn(this))throw Mi("error");mi(this,ar)},He.prototype[Je]=function(ar){ni(this),xn(this);var kr=this._cancelAlgorithm(ar);return Gi(this),kr},He.prototype[Ze]=function(ar){var kr=this._controlledReadableByteStream;if(this._queueTotalSize>0){var Yr=this._queue.shift();this._queueTotalSize-=Yr.byteLength,_n(this);var hn=new Uint8Array(Yr.buffer,Yr.byteOffset,Yr.byteLength);ar._chunkSteps(hn);return}var kn=this._autoAllocateChunkSize;if(kn!==void 0){var Dn=void 0;try{Dn=new ArrayBuffer(kn)}catch(ei){ar._errorSteps(ei);return}var Gn={buffer:Dn,bufferByteLength:kn,byteOffset:0,byteLength:kn,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(Gn)}Gr(kr,ar),qn(this)},He}();Object.defineProperties(In.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof Pe.toStringTag=="symbol"&&Object.defineProperty(In.prototype,Pe.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function Bn(He){return!ke(He)||!Object.prototype.hasOwnProperty.call(He,"_controlledReadableByteStream")?!1:He instanceof In}function Fn(He){return!ke(He)||!Object.prototype.hasOwnProperty.call(He,"_associatedReadableByteStreamController")?!1:He instanceof Nn}function qn(He){var ar=Pi(He);if(!!ar){if(He._pulling){He._pullAgain=!0;return}He._pulling=!0;var kr=He._pullAlgorithm();Fe(kr,function(){He._pulling=!1,He._pullAgain&&(He._pullAgain=!1,qn(He))},function(Yr){mi(He,Yr)})}}function ni(He){Jr(He),He._pendingPullIntos=new er}function si(He,ar){var kr=!1;He._state==="closed"&&(kr=!0);var Yr=ii(ar);ar.readerType==="default"?zr(He,Yr,kr):xs(He,Yr,kr)}function ii(He){var ar=He.bytesFilled,kr=He.elementSize;return new He.viewConstructor(He.buffer,He.byteOffset,ar/kr)}function fi(He,ar,kr,Yr){He._queue.push({buffer:ar,byteOffset:kr,byteLength:Yr}),He._queueTotalSize+=Yr}function ki(He,ar){var kr=ar.elementSize,Yr=ar.bytesFilled-ar.bytesFilled%kr,hn=Math.min(He._queueTotalSize,ar.byteLength-ar.bytesFilled),kn=ar.bytesFilled+hn,Dn=kn-kn%kr,Gn=hn,ei=!1;Dn>Yr&&(Gn=Dn-ar.bytesFilled,ei=!0);for(var ti=He._queue;Gn>0;){var ui=ti.peek(),di=Math.min(Gn,ui.byteLength),Di=ar.byteOffset+ar.bytesFilled;Hr(ar.buffer,Di,ui.buffer,ui.byteOffset,di),ui.byteLength===di?ti.shift():(ui.byteOffset+=di,ui.byteLength-=di),He._queueTotalSize-=di,Zr(He,di,ar),Gn-=di}return ei}function Zr(He,ar,kr){kr.bytesFilled+=ar}function _n(He){He._queueTotalSize===0&&He._closeRequested?(Gi(He),Da(He._controlledReadableByteStream)):qn(He)}function Jr(He){He._byobRequest!==null&&(He._byobRequest._associatedReadableByteStreamController=void 0,He._byobRequest._view=null,He._byobRequest=null)}function cn(He){for(;He._pendingPullIntos.length>0;){if(He._queueTotalSize===0)return;var ar=He._pendingPullIntos.peek();ki(He,ar)&&(li(He),si(He._controlledReadableByteStream,ar))}}function jn(He,ar,kr){var Yr=He._controlledReadableByteStream,hn=1;ar.constructor!==DataView&&(hn=ar.constructor.BYTES_PER_ELEMENT);var kn=ar.constructor,Dn=$r(ar.buffer),Gn={buffer:Dn,bufferByteLength:Dn.byteLength,byteOffset:ar.byteOffset,byteLength:ar.byteLength,bytesFilled:0,elementSize:hn,viewConstructor:kn,readerType:"byob"};if(He._pendingPullIntos.length>0){He._pendingPullIntos.push(Gn),Po(Yr,kr);return}if(Yr._state==="closed"){var ei=new kn(Gn.buffer,Gn.byteOffset,0);kr._closeSteps(ei);return}if(He._queueTotalSize>0){if(ki(He,Gn)){var ti=ii(Gn);_n(He),kr._chunkSteps(ti);return}if(He._closeRequested){var ui=new TypeError("Insufficient bytes to fill elements in the given buffer");mi(He,ui),kr._errorSteps(ui);return}}He._pendingPullIntos.push(Gn),Po(Yr,kr),qn(He)}function Vn(He,ar){var kr=He._controlledReadableByteStream;if(jo(kr))for(;Ni(kr)>0;){var Yr=li(He);si(kr,Yr)}}function Yn(He,ar,kr){if(Zr(He,ar,kr),!(kr.bytesFilled<kr.elementSize)){li(He);var Yr=kr.bytesFilled%kr.elementSize;if(Yr>0){var hn=kr.byteOffset+kr.bytesFilled,kn=tn(kr.buffer,hn-Yr,hn);fi(He,kn,0,kn.byteLength)}kr.bytesFilled-=Yr,si(He._controlledReadableByteStream,kr),cn(He)}}function Xn(He,ar){var kr=He._pendingPullIntos.peek();Jr(He);var Yr=He._controlledReadableByteStream._state;Yr==="closed"?Vn(He):Yn(He,ar,kr),qn(He)}function li(He){var ar=He._pendingPullIntos.shift();return ar}function Pi(He){var ar=He._controlledReadableByteStream;if(ar._state!=="readable"||He._closeRequested||!He._started)return!1;if(Qr(ar)&&Ir(ar)>0||jo(ar)&&Ni(ar)>0)return!0;var kr=Li(He);return kr>0}function Gi(He){He._pullAlgorithm=void 0,He._cancelAlgorithm=void 0}function gi(He){var ar=He._controlledReadableByteStream;if(!(He._closeRequested||ar._state!=="readable")){if(He._queueTotalSize>0){He._closeRequested=!0;return}if(He._pendingPullIntos.length>0){var kr=He._pendingPullIntos.peek();if(kr.bytesFilled>0){var Yr=new TypeError("Insufficient bytes to fill elements in the given buffer");throw mi(He,Yr),Yr}}Gi(He),Da(ar)}}function ji(He,ar){var kr=He._controlledReadableByteStream;if(!(He._closeRequested||kr._state!=="readable")){var Yr=ar.buffer,hn=ar.byteOffset,kn=ar.byteLength,Dn=$r(Yr);if(He._pendingPullIntos.length>0){var Gn=He._pendingPullIntos.peek();Kr(Gn.buffer),Gn.buffer=$r(Gn.buffer)}if(Jr(He),Qr(kr))if(Ir(kr)===0)fi(He,Dn,hn,kn);else{He._pendingPullIntos.length>0&&li(He);var ei=new Uint8Array(Dn,hn,kn);zr(kr,ei,!1)}else jo(kr)?(fi(He,Dn,hn,kn),cn(He)):fi(He,Dn,hn,kn);qn(He)}}function mi(He,ar){var kr=He._controlledReadableByteStream;kr._state==="readable"&&(ni(He),xn(He),Gi(He),No(kr,ar))}function Ua(He){if(He._byobRequest===null&&He._pendingPullIntos.length>0){var ar=He._pendingPullIntos.peek(),kr=new Uint8Array(ar.buffer,ar.byteOffset+ar.bytesFilled,ar.byteLength-ar.bytesFilled),Yr=Object.create(Nn.prototype);ko(Yr,He,kr),He._byobRequest=Yr}return He._byobRequest}function Li(He){var ar=He._controlledReadableByteStream._state;return ar==="errored"?null:ar==="closed"?0:He._strategyHWM-He._queueTotalSize}function sa(He,ar){var kr=He._pendingPullIntos.peek(),Yr=He._controlledReadableByteStream._state;if(Yr==="closed"){if(ar!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(ar===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(kr.bytesFilled+ar>kr.byteLength)throw new RangeError("bytesWritten out of range")}kr.buffer=$r(kr.buffer),Xn(He,ar)}function ma(He,ar){var kr=He._pendingPullIntos.peek(),Yr=He._controlledReadableByteStream._state;if(Yr==="closed"){if(ar.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(ar.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(kr.byteOffset+kr.bytesFilled!==ar.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(kr.bufferByteLength!==ar.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(kr.bytesFilled+ar.byteLength>kr.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");var hn=ar.byteLength;kr.buffer=$r(ar.buffer),Xn(He,hn)}function co(He,ar,kr,Yr,hn,kn,Dn){ar._controlledReadableByteStream=He,ar._pullAgain=!1,ar._pulling=!1,ar._byobRequest=null,ar._queue=ar._queueTotalSize=void 0,xn(ar),ar._closeRequested=!1,ar._started=!1,ar._strategyHWM=kn,ar._pullAlgorithm=Yr,ar._cancelAlgorithm=hn,ar._autoAllocateChunkSize=Dn,ar._pendingPullIntos=new er,He._readableStreamController=ar;var Gn=kr();Fe(Oe(Gn),function(){ar._started=!0,qn(ar)},function(ei){mi(ar,ei)})}function Ja(He,ar,kr){var Yr=Object.create(In.prototype),hn=function(){},kn=function(){return Oe(void 0)},Dn=function(){return Oe(void 0)};ar.start!==void 0&&(hn=function(){return ar.start(Yr)}),ar.pull!==void 0&&(kn=function(){return ar.pull(Yr)}),ar.cancel!==void 0&&(Dn=function(ei){return ar.cancel(ei)});var Gn=ar.autoAllocateChunkSize;if(Gn===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");co(He,Yr,hn,kn,Dn,kr,Gn)}function ko(He,ar,kr){He._associatedReadableByteStreamController=ar,He._view=kr}function ya(He){return new TypeError("ReadableStreamBYOBRequest.prototype."+He+" can only be used on a ReadableStreamBYOBRequest")}function Mi(He){return new TypeError("ReadableByteStreamController.prototype."+He+" can only be used on a ReadableByteStreamController")}function qi(He){return new Qa(He)}function Po(He,ar){He._reader._readIntoRequests.push(ar)}function xs(He,ar,kr){var Yr=He._reader,hn=Yr._readIntoRequests.shift();kr?hn._closeSteps(ar):hn._chunkSteps(ar)}function Ni(He){return He._reader._readIntoRequests.length}function jo(He){var ar=He._reader;return!(ar===void 0||!Wa(ar))}var Qa=function(){function He(ar){if(ur(ar,1,"ReadableStreamBYOBReader"),Or(ar,"First parameter"),Yi(ar))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!Bn(ar._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");Qe(this,ar),this._readIntoRequests=new er}return Object.defineProperty(He.prototype,"closed",{get:function(){return Wa(this)?this._closedPromise:Ee(zo("closed"))},enumerable:!1,configurable:!0}),He.prototype.cancel=function(ar){return ar===void 0&&(ar=void 0),Wa(this)?this._ownerReadableStream===void 0?Ee(cr("cancel")):nr(this,ar):Ee(zo("cancel"))},He.prototype.read=function(ar){if(!Wa(this))return Ee(zo("read"));if(!ArrayBuffer.isView(ar))return Ee(new TypeError("view must be an array buffer view"));if(ar.byteLength===0)return Ee(new TypeError("view must have non-zero byteLength"));if(ar.buffer.byteLength===0)return Ee(new TypeError("view's buffer must have non-zero byteLength"));if(Kr(ar.buffer),this._ownerReadableStream===void 0)return Ee(cr("read from"));var kr,Yr,hn=r(function(Dn,Gn){kr=Dn,Yr=Gn}),kn={_chunkSteps:function(Dn){return kr({value:Dn,done:!1})},_closeSteps:function(Dn){return kr({value:Dn,done:!0})},_errorSteps:function(Dn){return Yr(Dn)}};return as(this,ar,kn),hn},He.prototype.releaseLock=function(){if(!Wa(this))throw zo("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");ir(this)}},He}();Object.defineProperties(Qa.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof Pe.toStringTag=="symbol"&&Object.defineProperty(Qa.prototype,Pe.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function Wa(He){return!ke(He)||!Object.prototype.hasOwnProperty.call(He,"_readIntoRequests")?!1:He instanceof Qa}function as(He,ar,kr){var Yr=He._ownerReadableStream;Yr._disturbed=!0,Yr._state==="errored"?kr._errorSteps(Yr._storedError):jn(Yr._readableStreamController,ar,kr)}function zo(He){return new TypeError("ReadableStreamBYOBReader.prototype."+He+" can only be used on a ReadableStreamBYOBReader")}function ra(He,ar){var kr=He.highWaterMark;if(kr===void 0)return ar;if(Wr(kr)||kr<0)throw new RangeError("Invalid highWaterMark");return kr}function na(He){var ar=He.size;return ar||function(){return 1}}function ba(He,ar){Cr(He,ar);var kr=He==null?void 0:He.highWaterMark,Yr=He==null?void 0:He.size;return{highWaterMark:kr===void 0?void 0:gr(kr),size:Yr===void 0?void 0:os(Yr,ar+" has member 'size' that")}}function os(He,ar){return _r(He,ar),function(kr){return gr(He(kr))}}function qs(He,ar){Cr(He,ar);var kr=He==null?void 0:He.abort,Yr=He==null?void 0:He.close,hn=He==null?void 0:He.start,kn=He==null?void 0:He.type,Dn=He==null?void 0:He.write;return{abort:kr===void 0?void 0:As(kr,He,ar+" has member 'abort' that"),close:Yr===void 0?void 0:Xs(Yr,He,ar+" has member 'close' that"),start:hn===void 0?void 0:Cs(hn,He,ar+" has member 'start' that"),write:Dn===void 0?void 0:Ys(Dn,He,ar+" has member 'write' that"),type:kn}}function As(He,ar,kr){return _r(He,kr),function(Yr){return Xe(He,ar,[Yr])}}function Xs(He,ar,kr){return _r(He,kr),function(){return Xe(He,ar,[])}}function Cs(He,ar,kr){return _r(He,kr),function(Yr){return Ye(He,ar,[Yr])}}function Ys(He,ar,kr){return _r(He,kr),function(Yr,hn){return Xe(He,ar,[Yr,hn])}}function ks(He,ar){if(!Ii(He))throw new TypeError(ar+" is not a WritableStream.")}function ss(He){if(typeof He!="object"||He===null)return!1;try{return typeof He.aborted=="boolean"}catch{return!1}}var $s=typeof AbortController=="function";function Ks(){if($s)return new AbortController}var fa=function(){function He(ar,kr){ar===void 0&&(ar={}),kr===void 0&&(kr={}),ar===void 0?ar=null:dr(ar,"First parameter");var Yr=ba(kr,"Second parameter"),hn=qs(ar,"First parameter");ho(this);var kn=hn.type;if(kn!==void 0)throw new RangeError("Invalid type is specified");var Dn=na(Yr),Gn=ra(Yr,1);tl(this,hn,Gn,Dn)}return Object.defineProperty(He.prototype,"locked",{get:function(){if(!Ii(this))throw vo("locked");return fo(this)},enumerable:!1,configurable:!0}),He.prototype.abort=function(ar){return ar===void 0&&(ar=void 0),Ii(this)?fo(this)?Ee(new TypeError("Cannot abort a stream that already has a writer")):Oo(this,ar):Ee(vo("abort"))},He.prototype.close=function(){return Ii(this)?fo(this)?Ee(new TypeError("Cannot close a stream that already has a writer")):wa(this)?Ee(new TypeError("Cannot close an already-closing stream")):Ps(this):Ee(vo("close"))},He.prototype.getWriter=function(){if(!Ii(this))throw vo("getWriter");return To(this)},He}();Object.defineProperties(fa.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),typeof Pe.toStringTag=="symbol"&&Object.defineProperty(fa.prototype,Pe.toStringTag,{value:"WritableStream",configurable:!0});function To(He){return new Ra(He)}function Js(He,ar,kr,Yr,hn,kn){hn===void 0&&(hn=1),kn===void 0&&(kn=function(){return 1});var Dn=Object.create(fa.prototype);ho(Dn);var Gn=Object.create(Ji.prototype);return po(Dn,Gn,He,ar,kr,Yr,hn,kn),Dn}function ho(He){He._state="writable",He._storedError=void 0,He._writer=void 0,He._writableStreamController=void 0,He._writeRequests=new er,He._inFlightWriteRequest=void 0,He._closeRequest=void 0,He._inFlightCloseRequest=void 0,He._pendingAbortRequest=void 0,He._backpressure=!1}function Ii(He){return!ke(He)||!Object.prototype.hasOwnProperty.call(He,"_writableStreamController")?!1:He instanceof fa}function fo(He){return He._writer!==void 0}function Oo(He,ar){var kr;if(He._state==="closed"||He._state==="errored")return Oe(void 0);He._writableStreamController._abortReason=ar,(kr=He._writableStreamController._abortController)===null||kr===void 0||kr.abort();var Yr=He._state;if(Yr==="closed"||Yr==="errored")return Oe(void 0);if(He._pendingAbortRequest!==void 0)return He._pendingAbortRequest._promise;var hn=!1;Yr==="erroring"&&(hn=!0,ar=void 0);var kn=r(function(Dn,Gn){He._pendingAbortRequest={_promise:void 0,_resolve:Dn,_reject:Gn,_reason:ar,_wasAlreadyErroring:hn}});return He._pendingAbortRequest._promise=kn,hn||Sa(He,ar),kn}function Ps(He){var ar=He._state;if(ar==="closed"||ar==="errored")return Ee(new TypeError("The stream (in "+ar+" state) is not in the writable state and cannot be closed"));var kr=r(function(hn,kn){var Dn={_resolve:hn,_reject:kn};He._closeRequest=Dn}),Yr=He._writer;return Yr!==void 0&&He._backpressure&&ar==="writable"&&xi(Yr),rl(He._writableStreamController),kr}function Qn(He){var ar=r(function(kr,Yr){var hn={_resolve:kr,_reject:Yr};He._writeRequests.push(hn)});return ar}function ls(He,ar){var kr=He._state;if(kr==="writable"){Sa(He,ar);return}Uo(He)}function Sa(He,ar){var kr=He._writableStreamController;He._state="erroring",He._storedError=ar;var Yr=He._writer;Yr!==void 0&&fs(Yr,ar),!Zs(He)&&kr._started&&Uo(He)}function Uo(He){He._state="errored",He._writableStreamController[Ve]();var ar=He._storedError;if(He._writeRequests.forEach(function(hn){hn._reject(ar)}),He._writeRequests=new er,He._pendingAbortRequest===void 0){la(He);return}var kr=He._pendingAbortRequest;if(He._pendingAbortRequest=void 0,kr._wasAlreadyErroring){kr._reject(ar),la(He);return}var Yr=He._writableStreamController[$e](kr._reason);Fe(Yr,function(){kr._resolve(),la(He)},function(hn){kr._reject(hn),la(He)})}function Ts(He){He._inFlightWriteRequest._resolve(void 0),He._inFlightWriteRequest=void 0}function Wo(He,ar){He._inFlightWriteRequest._reject(ar),He._inFlightWriteRequest=void 0,ls(He,ar)}function us(He){He._inFlightCloseRequest._resolve(void 0),He._inFlightCloseRequest=void 0;var ar=He._state;ar==="erroring"&&(He._storedError=void 0,He._pendingAbortRequest!==void 0&&(He._pendingAbortRequest._resolve(),He._pendingAbortRequest=void 0)),He._state="closed";var kr=He._writer;kr!==void 0&&An(kr)}function Qs(He,ar){He._inFlightCloseRequest._reject(ar),He._inFlightCloseRequest=void 0,He._pendingAbortRequest!==void 0&&(He._pendingAbortRequest._reject(ar),He._pendingAbortRequest=void 0),ls(He,ar)}function wa(He){return!(He._closeRequest===void 0&&He._inFlightCloseRequest===void 0)}function Zs(He){return!(He._inFlightWriteRequest===void 0&&He._inFlightCloseRequest===void 0)}function cs(He){He._inFlightCloseRequest=He._closeRequest,He._closeRequest=void 0}function Os(He){He._inFlightWriteRequest=He._writeRequests.shift()}function la(He){He._closeRequest!==void 0&&(He._closeRequest._reject(He._storedError),He._closeRequest=void 0);var ar=He._writer;ar!==void 0&&en(ar,He._storedError)}function hs(He,ar){var kr=He._writer;kr!==void 0&&ar!==He._backpressure&&(ar?ai(kr):xi(kr)),He._backpressure=ar}var Ra=function(){function He(ar){if(ur(ar,1,"WritableStreamDefaultWriter"),ks(ar,"First parameter"),fo(ar))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=ar,ar._writer=this;var kr=ar._state;if(kr==="writable")!wa(ar)&&ar._backpressure?Ln(this):Kn(this),tr(this);else if(kr==="erroring")Wn(this,ar._storedError),tr(this);else if(kr==="closed")Kn(this),qr(this);else{var Yr=ar._storedError;Wn(this,Yr),Tr(this,Yr)}}return Object.defineProperty(He.prototype,"closed",{get:function(){return La(this)?this._closedPromise:Ee(ua("closed"))},enumerable:!1,configurable:!0}),Object.defineProperty(He.prototype,"desiredSize",{get:function(){if(!La(this))throw ua("desiredSize");if(this._ownerWritableStream===void 0)throw no("desiredSize");return Za(this)},enumerable:!1,configurable:!0}),Object.defineProperty(He.prototype,"ready",{get:function(){return La(this)?this._readyPromise:Ee(ua("ready"))},enumerable:!1,configurable:!0}),He.prototype.abort=function(ar){return ar===void 0&&(ar=void 0),La(this)?this._ownerWritableStream===void 0?Ee(no("abort")):el(this,ar):Ee(ua("abort"))},He.prototype.close=function(){if(!La(this))return Ee(ua("close"));var ar=this._ownerWritableStream;return ar===void 0?Ee(no("close")):wa(ar)?Ee(new TypeError("Cannot close an already-closing stream")):Eo(this)},He.prototype.releaseLock=function(){if(!La(this))throw ua("releaseLock");var ar=this._ownerWritableStream;ar!==void 0&&Va(this)},He.prototype.write=function(ar){return ar===void 0&&(ar=void 0),La(this)?this._ownerWritableStream===void 0?Ee(no("write to")):Ls(this,ar):Ee(ua("write"))},He}();Object.defineProperties(Ra.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),typeof Pe.toStringTag=="symbol"&&Object.defineProperty(Ra.prototype,Pe.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function La(He){return!ke(He)||!Object.prototype.hasOwnProperty.call(He,"_ownerWritableStream")?!1:He instanceof Ra}function el(He,ar){var kr=He._ownerWritableStream;return Oo(kr,ar)}function Eo(He){var ar=He._ownerWritableStream;return Ps(ar)}function Es(He){var ar=He._ownerWritableStream,kr=ar._state;return wa(ar)||kr==="closed"?Oe(void 0):kr==="errored"?Ee(ar._storedError):Eo(He)}function Rs(He,ar){He._closedPromiseState==="pending"?en(He,ar):fn(He,ar)}function fs(He,ar){He._readyPromiseState==="pending"?Zn(He,ar):ci(He,ar)}function Za(He){var ar=He._ownerWritableStream,kr=ar._state;return kr==="errored"||kr==="erroring"?null:kr==="closed"?0:Vo(ar._writableStreamController)}function Va(He){var ar=He._ownerWritableStream,kr=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");fs(He,kr),Rs(He,kr),ar._writer=void 0,He._ownerWritableStream=void 0}function Ls(He,ar){var kr=He._ownerWritableStream,Yr=kr._writableStreamController,hn=ds(Yr,ar);if(kr!==He._ownerWritableStream)return Ee(no("write to"));var kn=kr._state;if(kn==="errored")return Ee(kr._storedError);if(wa(kr)||kn==="closed")return Ee(new TypeError("The stream is closing or closed and cannot be written to"));if(kn==="erroring")return Ee(kr._storedError);var Dn=Qn(kr);return Ms(Yr,ar,hn),Dn}var Fs={},Ji=function(){function He(){throw new TypeError("Illegal constructor")}return Object.defineProperty(He.prototype,"abortReason",{get:function(){if(!xa(this))throw ro("abortReason");return this._abortReason},enumerable:!1,configurable:!0}),Object.defineProperty(He.prototype,"signal",{get:function(){if(!xa(this))throw ro("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal},enumerable:!1,configurable:!0}),He.prototype.error=function(ar){if(ar===void 0&&(ar=void 0),!xa(this))throw ro("error");var kr=this._controlledWritableStream._state;kr==="writable"&&Ro(this,ar)},He.prototype[$e]=function(ar){var kr=this._abortAlgorithm(ar);return eo(this),kr},He.prototype[Ve]=function(){xn(this)},He}();Object.defineProperties(Ji.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof Pe.toStringTag=="symbol"&&Object.defineProperty(Ji.prototype,Pe.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function xa(He){return!ke(He)||!Object.prototype.hasOwnProperty.call(He,"_controlledWritableStream")?!1:He instanceof Ji}function po(He,ar,kr,Yr,hn,kn,Dn,Gn){ar._controlledWritableStream=He,He._writableStreamController=ar,ar._queue=void 0,ar._queueTotalSize=void 0,xn(ar),ar._abortReason=void 0,ar._abortController=Ks(),ar._started=!1,ar._strategySizeAlgorithm=Gn,ar._strategyHWM=Dn,ar._writeAlgorithm=Yr,ar._closeAlgorithm=hn,ar._abortAlgorithm=kn;var ei=ps(ar);hs(He,ei);var ti=kr(),ui=Oe(ti);Fe(ui,function(){ar._started=!0,to(ar)},function(di){ar._started=!0,ls(He,di)})}function tl(He,ar,kr,Yr){var hn=Object.create(Ji.prototype),kn=function(){},Dn=function(){return Oe(void 0)},Gn=function(){return Oe(void 0)},ei=function(){return Oe(void 0)};ar.start!==void 0&&(kn=function(){return ar.start(hn)}),ar.write!==void 0&&(Dn=function(ti){return ar.write(ti,hn)}),ar.close!==void 0&&(Gn=function(){return ar.close()}),ar.abort!==void 0&&(ei=function(ti){return ar.abort(ti)}),po(He,hn,kn,Dn,Gn,ei,kr,Yr)}function eo(He){He._writeAlgorithm=void 0,He._closeAlgorithm=void 0,He._abortAlgorithm=void 0,He._strategySizeAlgorithm=void 0}function rl(He){dn(He,Fs,0),to(He)}function ds(He,ar){try{return He._strategySizeAlgorithm(ar)}catch(kr){return Go(He,kr),1}}function Vo(He){return He._strategyHWM-He._queueTotalSize}function Ms(He,ar,kr){try{dn(He,ar,kr)}catch(kn){Go(He,kn);return}var Yr=He._controlledWritableStream;if(!wa(Yr)&&Yr._state==="writable"){var hn=ps(He);hs(Yr,hn)}to(He)}function to(He){var ar=He._controlledWritableStream;if(!!He._started&&ar._inFlightWriteRequest===void 0){var kr=ar._state;if(kr==="erroring"){Uo(ar);return}if(He._queue.length!==0){var Yr=Tn(He);Yr===Fs?Ho(He):Ns(He,Yr)}}}function Go(He,ar){He._controlledWritableStream._state==="writable"&&Ro(He,ar)}function Ho(He){var ar=He._controlledWritableStream;cs(ar),bn(He);var kr=He._closeAlgorithm();eo(He),Fe(kr,function(){us(ar)},function(Yr){Qs(ar,Yr)})}function Ns(He,ar){var kr=He._controlledWritableStream;Os(kr);var Yr=He._writeAlgorithm(ar);Fe(Yr,function(){Ts(kr);var hn=kr._state;if(bn(He),!wa(kr)&&hn==="writable"){var kn=ps(He);hs(kr,kn)}to(He)},function(hn){kr._state==="writable"&&eo(He),Wo(kr,hn)})}function ps(He){var ar=Vo(He);return ar<=0}function Ro(He,ar){var kr=He._controlledWritableStream;eo(He),Sa(kr,ar)}function vo(He){return new TypeError("WritableStream.prototype."+He+" can only be used on a WritableStream")}function ro(He){return new TypeError("WritableStreamDefaultController.prototype."+He+" can only be used on a WritableStreamDefaultController")}function ua(He){return new TypeError("WritableStreamDefaultWriter.prototype."+He+" can only be used on a WritableStreamDefaultWriter")}function no(He){return new TypeError("Cannot "+He+" a stream using a released writer")}function tr(He){He._closedPromise=r(function(ar,kr){He._closedPromise_resolve=ar,He._closedPromise_reject=kr,He._closedPromiseState="pending"})}function Tr(He,ar){tr(He),en(He,ar)}function qr(He){tr(He),An(He)}function en(He,ar){He._closedPromise_reject!==void 0&&(We(He._closedPromise),He._closedPromise_reject(ar),He._closedPromise_resolve=void 0,He._closedPromise_reject=void 0,He._closedPromiseState="rejected")}function fn(He,ar){Tr(He,ar)}function An(He){He._closedPromise_resolve!==void 0&&(He._closedPromise_resolve(void 0),He._closedPromise_resolve=void 0,He._closedPromise_reject=void 0,He._closedPromiseState="resolved")}function Ln(He){He._readyPromise=r(function(ar,kr){He._readyPromise_resolve=ar,He._readyPromise_reject=kr}),He._readyPromiseState="pending"}function Wn(He,ar){Ln(He),Zn(He,ar)}function Kn(He){Ln(He),xi(He)}function Zn(He,ar){He._readyPromise_reject!==void 0&&(We(He._readyPromise),He._readyPromise_reject(ar),He._readyPromise_resolve=void 0,He._readyPromise_reject=void 0,He._readyPromiseState="rejected")}function ai(He){Ln(He)}function ci(He,ar){Wn(He,ar)}function xi(He){He._readyPromise_resolve!==void 0&&(He._readyPromise_resolve(void 0),He._readyPromise_resolve=void 0,He._readyPromise_reject=void 0,He._readyPromiseState="fulfilled")}var Ti=typeof DOMException!="undefined"?DOMException:void 0;function zi(He){if(!(typeof He=="function"||typeof He=="object"))return!1;try{return new He,!0}catch{return!1}}function Qi(){var He=function(kr,Yr){this.message=kr||"",this.name=Yr||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return He.prototype=Object.create(Error.prototype),Object.defineProperty(He.prototype,"constructor",{value:He,writable:!0,configurable:!0}),He}var Xi=zi(Ti)?Ti:Qi();function Aa(He,ar,kr,Yr,hn,kn){var Dn=Mr(He),Gn=To(ar);He._disturbed=!0;var ei=!1,ti=Oe(void 0);return r(function(ui,di){var Di;if(kn!==void 0){if(Di=function(){var $n=new Xi("Aborted","AbortError"),ri=[];Yr||ri.push(function(){return ar._state==="writable"?Oo(ar,$n):Oe(void 0)}),hn||ri.push(function(){return He._state==="readable"?Hi(He,$n):Oe(void 0)}),Bi(function(){return Promise.all(ri.map(function(Fi){return Fi()}))},!0,$n)},kn.aborted){Di();return}kn.addEventListener("abort",Di)}function Ba(){return r(function($n,ri){function Fi($a){$a?$n():Ae(Qo(),Fi,ri)}Fi(!1)})}function Qo(){return ei?Oe(!0):Ae(Gn._readyPromise,function(){return r(function($n,ri){pn(Dn,{_chunkSteps:function(Fi){ti=Ae(Ls(Gn,Fi),void 0,Me),$n(!1)},_closeSteps:function(){return $n(!0)},_errorSteps:ri})})})}if(Ei(He,Dn._closedPromise,function($n){Yr?so(!0,$n):Bi(function(){return Oo(ar,$n)},!0,$n)}),Ei(ar,Gn._closedPromise,function($n){hn?so(!0,$n):Bi(function(){return Hi(He,$n)},!0,$n)}),Wi(He,Dn._closedPromise,function(){kr?so():Bi(function(){return Es(Gn)})}),wa(ar)||ar._state==="closed"){var Ao=new TypeError("the destination writable stream closed before all data could be piped to it");hn?so(!0,Ao):Bi(function(){return Hi(He,Ao)},!0,Ao)}We(Ba());function Ya(){var $n=ti;return Ae(ti,function(){return $n!==ti?Ya():void 0})}function Ei($n,ri,Fi){$n._state==="errored"?Fi($n._storedError):ze(ri,Fi)}function Wi($n,ri,Fi){$n._state==="closed"?Fi():De(ri,Fi)}function Bi($n,ri,Fi){if(ei)return;ei=!0,ar._state==="writable"&&!wa(ar)?De(Ya(),$a):$a();function $a(){Fe($n(),function(){return Ri(ri,Fi)},function(lo){return Ri(!0,lo)})}}function so($n,ri){ei||(ei=!0,ar._state==="writable"&&!wa(ar)?De(Ya(),function(){return Ri($n,ri)}):Ri($n,ri))}function Ri($n,ri){Va(Gn),ir(Dn),kn!==void 0&&kn.removeEventListener("abort",Di),$n?di(ri):ui(void 0)}})}var Fa=function(){function He(){throw new TypeError("Illegal constructor")}return Object.defineProperty(He.prototype,"desiredSize",{get:function(){if(!Ca(this))throw _o("desiredSize");return bo(this)},enumerable:!1,configurable:!0}),He.prototype.close=function(){if(!Ca(this))throw _o("close");if(!Ma(this))throw new TypeError("The stream is not in a state that permits close");Ga(this)},He.prototype.enqueue=function(ar){if(ar===void 0&&(ar=void 0),!Ca(this))throw _o("enqueue");if(!Ma(this))throw new TypeError("The stream is not in a state that permits enqueue");return yo(this,ar)},He.prototype.error=function(ar){if(ar===void 0&&(ar=void 0),!Ca(this))throw _o("error");ka(this,ar)},He.prototype[Je]=function(ar){xn(this);var kr=this._cancelAlgorithm(ar);return mo(this),kr},He.prototype[Ze]=function(ar){var kr=this._controlledReadableStream;if(this._queue.length>0){var Yr=bn(this);this._closeRequested&&this._queue.length===0?(mo(this),Da(kr)):go(this),ar._chunkSteps(Yr)}else Gr(kr,ar),go(this)},He}();Object.defineProperties(Fa.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof Pe.toStringTag=="symbol"&&Object.defineProperty(Fa.prototype,Pe.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function Ca(He){return!ke(He)||!Object.prototype.hasOwnProperty.call(He,"_controlledReadableStream")?!1:He instanceof Fa}function go(He){var ar=qo(He);if(!!ar){if(He._pulling){He._pullAgain=!0;return}He._pulling=!0;var kr=He._pullAlgorithm();Fe(kr,function(){He._pulling=!1,He._pullAgain&&(He._pullAgain=!1,go(He))},function(Yr){ka(He,Yr)})}}function qo(He){var ar=He._controlledReadableStream;if(!Ma(He)||!He._started)return!1;if(Yi(ar)&&Ir(ar)>0)return!0;var kr=bo(He);return kr>0}function mo(He){He._pullAlgorithm=void 0,He._cancelAlgorithm=void 0,He._strategySizeAlgorithm=void 0}function Ga(He){if(!!Ma(He)){var ar=He._controlledReadableStream;He._closeRequested=!0,He._queue.length===0&&(mo(He),Da(ar))}}function yo(He,ar){if(!!Ma(He)){var kr=He._controlledReadableStream;if(Yi(kr)&&Ir(kr)>0)zr(kr,ar,!1);else{var Yr=void 0;try{Yr=He._strategySizeAlgorithm(ar)}catch(hn){throw ka(He,hn),hn}try{dn(He,ar,Yr)}catch(hn){throw ka(He,hn),hn}}go(He)}}function ka(He,ar){var kr=He._controlledReadableStream;kr._state==="readable"&&(xn(He),mo(He),No(kr,ar))}function bo(He){var ar=He._controlledReadableStream._state;return ar==="errored"?null:ar==="closed"?0:He._strategyHWM-He._queueTotalSize}function ca(He){return!qo(He)}function Ma(He){var ar=He._controlledReadableStream._state;return!He._closeRequested&&ar==="readable"}function Lo(He,ar,kr,Yr,hn,kn,Dn){ar._controlledReadableStream=He,ar._queue=void 0,ar._queueTotalSize=void 0,xn(ar),ar._started=!1,ar._closeRequested=!1,ar._pullAgain=!1,ar._pulling=!1,ar._strategySizeAlgorithm=Dn,ar._strategyHWM=kn,ar._pullAlgorithm=Yr,ar._cancelAlgorithm=hn,He._readableStreamController=ar;var Gn=kr();Fe(Oe(Gn),function(){ar._started=!0,go(ar)},function(ei){ka(ar,ei)})}function Xo(He,ar,kr,Yr){var hn=Object.create(Fa.prototype),kn=function(){},Dn=function(){return Oe(void 0)},Gn=function(){return Oe(void 0)};ar.start!==void 0&&(kn=function(){return ar.start(hn)}),ar.pull!==void 0&&(Dn=function(){return ar.pull(hn)}),ar.cancel!==void 0&&(Gn=function(ei){return ar.cancel(ei)}),Lo(He,hn,kn,Dn,Gn,kr,Yr)}function _o(He){return new TypeError("ReadableStreamDefaultController.prototype."+He+" can only be used on a ReadableStreamDefaultController")}function ha(He,ar){return Bn(He._readableStreamController)?vs(He):nl(He)}function nl(He,ar){var kr=Mr(He),Yr=!1,hn=!1,kn=!1,Dn=!1,Gn,ei,ti,ui,di,Di=r(function(Ei){di=Ei});function Ba(){if(Yr)return hn=!0,Oe(void 0);Yr=!0;var Ei={_chunkSteps:function(Wi){Ge(function(){hn=!1;var Bi=Wi,so=Wi;kn||yo(ti._readableStreamController,Bi),Dn||yo(ui._readableStreamController,so),Yr=!1,hn&&Ba()})},_closeSteps:function(){Yr=!1,kn||Ga(ti._readableStreamController),Dn||Ga(ui._readableStreamController),(!kn||!Dn)&&di(void 0)},_errorSteps:function(){Yr=!1}};return pn(kr,Ei),Oe(void 0)}function Qo(Ei){if(kn=!0,Gn=Ei,Dn){var Wi=Ur([Gn,ei]),Bi=Hi(He,Wi);di(Bi)}return Di}function Ao(Ei){if(Dn=!0,ei=Ei,kn){var Wi=Ur([Gn,ei]),Bi=Hi(He,Wi);di(Bi)}return Di}function Ya(){}return ti=pa(Ya,Ba,Qo),ui=pa(Ya,Ba,Ao),ze(kr._closedPromise,function(Ei){ka(ti._readableStreamController,Ei),ka(ui._readableStreamController,Ei),(!kn||!Dn)&&di(void 0)}),[ti,ui]}function vs(He){var ar=Mr(He),kr=!1,Yr=!1,hn=!1,kn=!1,Dn=!1,Gn,ei,ti,ui,di,Di=r(function(Ri){di=Ri});function Ba(Ri){ze(Ri._closedPromise,function($n){Ri===ar&&(mi(ti._readableStreamController,$n),mi(ui._readableStreamController,$n),(!kn||!Dn)&&di(void 0))})}function Qo(){Wa(ar)&&(ir(ar),ar=Mr(He),Ba(ar));var Ri={_chunkSteps:function($n){Ge(function(){Yr=!1,hn=!1;var ri=$n,Fi=$n;if(!kn&&!Dn)try{Fi=Pn($n)}catch($a){mi(ti._readableStreamController,$a),mi(ui._readableStreamController,$a),di(Hi(He,$a));return}kn||ji(ti._readableStreamController,ri),Dn||ji(ui._readableStreamController,Fi),kr=!1,Yr?Ya():hn&&Ei()})},_closeSteps:function(){kr=!1,kn||gi(ti._readableStreamController),Dn||gi(ui._readableStreamController),ti._readableStreamController._pendingPullIntos.length>0&&sa(ti._readableStreamController,0),ui._readableStreamController._pendingPullIntos.length>0&&sa(ui._readableStreamController,0),(!kn||!Dn)&&di(void 0)},_errorSteps:function(){kr=!1}};pn(ar,Ri)}function Ao(Ri,$n){sn(ar)&&(ir(ar),ar=qi(He),Ba(ar));var ri=$n?ui:ti,Fi=$n?ti:ui,$a={_chunkSteps:function(lo){Ge(function(){Yr=!1,hn=!1;var Io=$n?Dn:kn,Zo=$n?kn:Dn;if(Zo)Io||ma(ri._readableStreamController,lo);else{var hl=void 0;try{hl=Pn(lo)}catch(dl){mi(ri._readableStreamController,dl),mi(Fi._readableStreamController,dl),di(Hi(He,dl));return}Io||ma(ri._readableStreamController,lo),ji(Fi._readableStreamController,hl)}kr=!1,Yr?Ya():hn&&Ei()})},_closeSteps:function(lo){kr=!1;var Io=$n?Dn:kn,Zo=$n?kn:Dn;Io||gi(ri._readableStreamController),Zo||gi(Fi._readableStreamController),lo!==void 0&&(Io||ma(ri._readableStreamController,lo),!Zo&&Fi._readableStreamController._pendingPullIntos.length>0&&sa(Fi._readableStreamController,0)),(!Io||!Zo)&&di(void 0)},_errorSteps:function(){kr=!1}};as(ar,Ri,$a)}function Ya(){if(kr)return Yr=!0,Oe(void 0);kr=!0;var Ri=Ua(ti._readableStreamController);return Ri===null?Qo():Ao(Ri._view,!1),Oe(void 0)}function Ei(){if(kr)return hn=!0,Oe(void 0);kr=!0;var Ri=Ua(ui._readableStreamController);return Ri===null?Qo():Ao(Ri._view,!0),Oe(void 0)}function Wi(Ri){if(kn=!0,Gn=Ri,Dn){var $n=Ur([Gn,ei]),ri=Hi(He,$n);di(ri)}return Di}function Bi(Ri){if(Dn=!0,ei=Ri,kn){var $n=Ur([Gn,ei]),ri=Hi(He,$n);di(ri)}return Di}function so(){}return ti=Fo(so,Ya,Wi),ui=Fo(so,Ei,Bi),Ba(ar),[ti,ui]}function Is(He,ar){Cr(He,ar);var kr=He,Yr=kr==null?void 0:kr.autoAllocateChunkSize,hn=kr==null?void 0:kr.cancel,kn=kr==null?void 0:kr.pull,Dn=kr==null?void 0:kr.start,Gn=kr==null?void 0:kr.type;return{autoAllocateChunkSize:Yr===void 0?void 0:Ar(Yr,ar+" has member 'autoAllocateChunkSize' that"),cancel:hn===void 0?void 0:Na(hn,kr,ar+" has member 'cancel' that"),pull:kn===void 0?void 0:gs(kn,kr,ar+" has member 'pull' that"),start:Dn===void 0?void 0:il(Dn,kr,ar+" has member 'start' that"),type:Gn===void 0?void 0:al(Gn,ar+" has member 'type' that")}}function Na(He,ar,kr){return _r(He,kr),function(Yr){return Xe(He,ar,[Yr])}}function gs(He,ar,kr){return _r(He,kr),function(Yr){return Xe(He,ar,[Yr])}}function il(He,ar,kr){return _r(He,kr),function(Yr){return Ye(He,ar,[Yr])}}function al(He,ar){if(He=""+He,He!=="bytes")throw new TypeError(ar+" '"+He+"' is not a valid enumeration value for ReadableStreamType");return He}function So(He,ar){Cr(He,ar);var kr=He==null?void 0:He.mode;return{mode:kr===void 0?void 0:Pa(kr,ar+" has member 'mode' that")}}function Pa(He,ar){if(He=""+He,He!=="byob")throw new TypeError(ar+" '"+He+"' is not a valid enumeration value for ReadableStreamReaderMode");return He}function Ia(He,ar){Cr(He,ar);var kr=He==null?void 0:He.preventCancel;return{preventCancel:Boolean(kr)}}function io(He,ar){Cr(He,ar);var kr=He==null?void 0:He.preventAbort,Yr=He==null?void 0:He.preventCancel,hn=He==null?void 0:He.preventClose,kn=He==null?void 0:He.signal;return kn!==void 0&&Ha(kn,ar+" has member 'signal' that"),{preventAbort:Boolean(kr),preventCancel:Boolean(Yr),preventClose:Boolean(hn),signal:kn}}function Ha(He,ar){if(!ss(He))throw new TypeError(ar+" is not an AbortSignal.")}function ao(He,ar){Cr(He,ar);var kr=He==null?void 0:He.readable;rr(kr,"readable","ReadableWritablePair"),Or(kr,ar+" has member 'readable' that");var Yr=He==null?void 0:He.writable;return rr(Yr,"writable","ReadableWritablePair"),ks(Yr,ar+" has member 'writable' that"),{readable:kr,writable:Yr}}var da=function(){function He(ar,kr){ar===void 0&&(ar={}),kr===void 0&&(kr={}),ar===void 0?ar=null:dr(ar,"First parameter");var Yr=ba(kr,"Second parameter"),hn=Is(ar,"First parameter");if(Mo(this),hn.type==="bytes"){if(Yr.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");var kn=ra(Yr,0);Ja(this,hn,kn)}else{var Dn=na(Yr),kn=ra(Yr,1);Xo(this,hn,kn,Dn)}}return Object.defineProperty(He.prototype,"locked",{get:function(){if(!ia(this))throw va("locked");return Yi(this)},enumerable:!1,configurable:!0}),He.prototype.cancel=function(ar){return ar===void 0&&(ar=void 0),ia(this)?Yi(this)?Ee(new TypeError("Cannot cancel a stream that already has a reader")):Hi(this,ar):Ee(va("cancel"))},He.prototype.getReader=function(ar){if(ar===void 0&&(ar=void 0),!ia(this))throw va("getReader");var kr=So(ar,"First parameter");return kr.mode===void 0?Mr(this):qi(this)},He.prototype.pipeThrough=function(ar,kr){if(kr===void 0&&(kr={}),!ia(this))throw va("pipeThrough");ur(ar,1,"pipeThrough");var Yr=ao(ar,"First parameter"),hn=io(kr,"Second parameter");if(Yi(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(fo(Yr.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");var kn=Aa(this,Yr.writable,hn.preventClose,hn.preventAbort,hn.preventCancel,hn.signal);return We(kn),Yr.readable},He.prototype.pipeTo=function(ar,kr){if(kr===void 0&&(kr={}),!ia(this))return Ee(va("pipeTo"));if(ar===void 0)return Ee("Parameter 1 is required in 'pipeTo'.");if(!Ii(ar))return Ee(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));var Yr;try{Yr=io(kr,"Second parameter")}catch(hn){return Ee(hn)}return Yi(this)?Ee(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):fo(ar)?Ee(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):Aa(this,ar,Yr.preventClose,Yr.preventAbort,Yr.preventCancel,Yr.signal)},He.prototype.tee=function(){if(!ia(this))throw va("tee");var ar=ha(this);return Ur(ar)},He.prototype.values=function(ar){if(ar===void 0&&(ar=void 0),!ia(this))throw va("values");var kr=Ia(ar,"First parameter");return Rr(this,kr.preventCancel)},He}();Object.defineProperties(da.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),typeof Pe.toStringTag=="symbol"&&Object.defineProperty(da.prototype,Pe.toStringTag,{value:"ReadableStream",configurable:!0}),typeof Pe.asyncIterator=="symbol"&&Object.defineProperty(da.prototype,Pe.asyncIterator,{value:da.prototype.values,writable:!0,configurable:!0});function pa(He,ar,kr,Yr,hn){Yr===void 0&&(Yr=1),hn===void 0&&(hn=function(){return 1});var kn=Object.create(da.prototype);Mo(kn);var Dn=Object.create(Fa.prototype);return Lo(kn,Dn,He,ar,kr,Yr,hn),kn}function Fo(He,ar,kr){var Yr=Object.create(da.prototype);Mo(Yr);var hn=Object.create(In.prototype);return co(Yr,hn,He,ar,kr,0,void 0),Yr}function Mo(He){He._state="readable",He._reader=void 0,He._storedError=void 0,He._disturbed=!1}function ia(He){return!ke(He)||!Object.prototype.hasOwnProperty.call(He,"_readableStreamController")?!1:He instanceof da}function Yi(He){return He._reader!==void 0}function Hi(He,ar){if(He._disturbed=!0,He._state==="closed")return Oe(void 0);if(He._state==="errored")return Ee(He._storedError);Da(He);var kr=He._reader;kr!==void 0&&Wa(kr)&&(kr._readIntoRequests.forEach(function(hn){hn._closeSteps(void 0)}),kr._readIntoRequests=new er);var Yr=He._readableStreamController[Je](ar);return je(Yr,Me)}function Da(He){He._state="closed";var ar=He._reader;ar!==void 0&&(fr(ar),sn(ar)&&(ar._readRequests.forEach(function(kr){kr._closeSteps()}),ar._readRequests=new er))}function No(He,ar){He._state="errored",He._storedError=ar;var kr=He._reader;kr!==void 0&&(Sr(kr,ar),sn(kr)?(kr._readRequests.forEach(function(Yr){Yr._errorSteps(ar)}),kr._readRequests=new er):(kr._readIntoRequests.forEach(function(Yr){Yr._errorSteps(ar)}),kr._readIntoRequests=new er))}function va(He){return new TypeError("ReadableStream.prototype."+He+" can only be used on a ReadableStream")}function oo(He,ar){Cr(He,ar);var kr=He==null?void 0:He.highWaterMark;return rr(kr,"highWaterMark","QueuingStrategyInit"),{highWaterMark:gr(kr)}}var Yo=function(He){return He.byteLength};Object.defineProperty(Yo,"name",{value:"size",configurable:!0});var aa=function(){function He(ar){ur(ar,1,"ByteLengthQueuingStrategy"),ar=oo(ar,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=ar.highWaterMark}return Object.defineProperty(He.prototype,"highWaterMark",{get:function(){if(!bi(this))throw qa("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark},enumerable:!1,configurable:!0}),Object.defineProperty(He.prototype,"size",{get:function(){if(!bi(this))throw qa("size");return Yo},enumerable:!1,configurable:!0}),He}();Object.defineProperties(aa.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof Pe.toStringTag=="symbol"&&Object.defineProperty(aa.prototype,Pe.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function qa(He){return new TypeError("ByteLengthQueuingStrategy.prototype."+He+" can only be used on a ByteLengthQueuingStrategy")}function bi(He){return!ke(He)||!Object.prototype.hasOwnProperty.call(He,"_byteLengthQueuingStrategyHighWaterMark")?!1:He instanceof aa}var _i=function(){return 1};Object.defineProperty(_i,"name",{value:"size",configurable:!0});var Oi=function(){function He(ar){ur(ar,1,"CountQueuingStrategy"),ar=oo(ar,"First parameter"),this._countQueuingStrategyHighWaterMark=ar.highWaterMark}return Object.defineProperty(He.prototype,"highWaterMark",{get:function(){if(!Xa(this))throw Ui("highWaterMark");return this._countQueuingStrategyHighWaterMark},enumerable:!1,configurable:!0}),Object.defineProperty(He.prototype,"size",{get:function(){if(!Xa(this))throw Ui("size");return _i},enumerable:!1,configurable:!0}),He}();Object.defineProperties(Oi.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof Pe.toStringTag=="symbol"&&Object.defineProperty(Oi.prototype,Pe.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function Ui(He){return new TypeError("CountQueuingStrategy.prototype."+He+" can only be used on a CountQueuingStrategy")}function Xa(He){return!ke(He)||!Object.prototype.hasOwnProperty.call(He,"_countQueuingStrategyHighWaterMark")?!1:He instanceof Oi}function wo(He,ar){Cr(He,ar);var kr=He==null?void 0:He.flush,Yr=He==null?void 0:He.readableType,hn=He==null?void 0:He.start,kn=He==null?void 0:He.transform,Dn=He==null?void 0:He.writableType;return{flush:kr===void 0?void 0:$o(kr,He,ar+" has member 'flush' that"),readableType:Yr,start:hn===void 0?void 0:Ds(hn,He,ar+" has member 'start' that"),transform:kn===void 0?void 0:bl(kn,He,ar+" has member 'transform' that"),writableType:Dn}}function $o(He,ar,kr){return _r(He,kr),function(Yr){return Xe(He,ar,[Yr])}}function Ds(He,ar,kr){return _r(He,kr),function(Yr){return Ye(He,ar,[Yr])}}function bl(He,ar,kr){return _r(He,kr),function(Yr,hn){return Xe(He,ar,[Yr,hn])}}var ms=function(){function He(ar,kr,Yr){ar===void 0&&(ar={}),kr===void 0&&(kr={}),Yr===void 0&&(Yr={}),ar===void 0&&(ar=null);var hn=ba(kr,"Second parameter"),kn=ba(Yr,"Third parameter"),Dn=wo(ar,"First parameter");if(Dn.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(Dn.writableType!==void 0)throw new RangeError("Invalid writableType specified");var Gn=ra(kn,0),ei=na(kn),ti=ra(hn,1),ui=na(hn),di,Di=r(function(Ba){di=Ba});_l(this,Di,ti,ui,Gn,ei),Bs(this,Dn),Dn.start!==void 0?di(Dn.start(this._transformStreamController)):di(void 0)}return Object.defineProperty(He.prototype,"readable",{get:function(){if(!ol(this))throw wl("readable");return this._readable},enumerable:!1,configurable:!0}),Object.defineProperty(He.prototype,"writable",{get:function(){if(!ol(this))throw wl("writable");return this._writable},enumerable:!1,configurable:!0}),He}();Object.defineProperties(ms.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof Pe.toStringTag=="symbol"&&Object.defineProperty(ms.prototype,Pe.toStringTag,{value:"TransformStream",configurable:!0});function _l(He,ar,kr,Yr,hn,kn){function Dn(){return ar}function Gn(Di){return Sl(He,Di)}function ei(Di){return ul(He,Di)}function ti(){return cl(He)}He._writable=Js(Dn,Gn,ti,ei,kr,Yr);function ui(){return Us(He)}function di(Di){return bs(He,Di),Oe(void 0)}He._readable=pa(Dn,ui,di,hn,kn),He._backpressure=void 0,He._backpressureChangePromise=void 0,He._backpressureChangePromise_resolve=void 0,Ko(He,!0),He._transformStreamController=void 0}function ol(He){return!ke(He)||!Object.prototype.hasOwnProperty.call(He,"_transformStreamController")?!1:He instanceof ms}function ys(He,ar){ka(He._readable._readableStreamController,ar),bs(He,ar)}function bs(He,ar){_s(He._transformStreamController),Go(He._writable._writableStreamController,ar),He._backpressure&&Ko(He,!1)}function Ko(He,ar){He._backpressureChangePromise!==void 0&&He._backpressureChangePromise_resolve(),He._backpressureChangePromise=r(function(kr){He._backpressureChangePromise_resolve=kr}),He._backpressure=ar}var xo=function(){function He(){throw new TypeError("Illegal constructor")}return Object.defineProperty(He.prototype,"desiredSize",{get:function(){if(!Zi(this))throw Jo("desiredSize");var ar=this._controlledTransformStream._readable._readableStreamController;return bo(ar)},enumerable:!1,configurable:!0}),He.prototype.enqueue=function(ar){if(ar===void 0&&(ar=void 0),!Zi(this))throw Jo("enqueue");sl(this,ar)},He.prototype.error=function(ar){if(ar===void 0&&(ar=void 0),!Zi(this))throw Jo("error");zs(this,ar)},He.prototype.terminate=function(){if(!Zi(this))throw Jo("terminate");ll(this)},He}();Object.defineProperties(xo.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof Pe.toStringTag=="symbol"&&Object.defineProperty(xo.prototype,Pe.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function Zi(He){return!ke(He)||!Object.prototype.hasOwnProperty.call(He,"_controlledTransformStream")?!1:He instanceof xo}function Ta(He,ar,kr,Yr){ar._controlledTransformStream=He,He._transformStreamController=ar,ar._transformAlgorithm=kr,ar._flushAlgorithm=Yr}function Bs(He,ar){var kr=Object.create(xo.prototype),Yr=function(kn){try{return sl(kr,kn),Oe(void 0)}catch(Dn){return Ee(Dn)}},hn=function(){return Oe(void 0)};ar.transform!==void 0&&(Yr=function(kn){return ar.transform(kn,kr)}),ar.flush!==void 0&&(hn=function(){return ar.flush(kr)}),Ta(He,kr,Yr,hn)}function _s(He){He._transformAlgorithm=void 0,He._flushAlgorithm=void 0}function sl(He,ar){var kr=He._controlledTransformStream,Yr=kr._readable._readableStreamController;if(!Ma(Yr))throw new TypeError("Readable side is not in a state that permits enqueue");try{yo(Yr,ar)}catch(kn){throw bs(kr,kn),kr._readable._storedError}var hn=ca(Yr);hn!==kr._backpressure&&Ko(kr,!0)}function zs(He,ar){ys(He._controlledTransformStream,ar)}function Ss(He,ar){var kr=He._transformAlgorithm(ar);return je(kr,void 0,function(Yr){throw ys(He._controlledTransformStream,Yr),Yr})}function ll(He){var ar=He._controlledTransformStream,kr=ar._readable._readableStreamController;Ga(kr);var Yr=new TypeError("TransformStream terminated");bs(ar,Yr)}function Sl(He,ar){var kr=He._transformStreamController;if(He._backpressure){var Yr=He._backpressureChangePromise;return je(Yr,function(){var hn=He._writable,kn=hn._state;if(kn==="erroring")throw hn._storedError;return Ss(kr,ar)})}return Ss(kr,ar)}function ul(He,ar){return ys(He,ar),Oe(void 0)}function cl(He){var ar=He._readable,kr=He._transformStreamController,Yr=kr._flushAlgorithm();return _s(kr),je(Yr,function(){if(ar._state==="errored")throw ar._storedError;Ga(ar._readableStreamController)},function(hn){throw ys(He,hn),ar._storedError})}function Us(He){return Ko(He,!1),He._backpressureChangePromise}function Jo(He){return new TypeError("TransformStreamDefaultController.prototype."+He+" can only be used on a TransformStreamDefaultController")}function wl(He){return new TypeError("TransformStream.prototype."+He+" can only be used on a TransformStream")}t.ByteLengthQueuingStrategy=aa,t.CountQueuingStrategy=Oi,t.ReadableByteStreamController=In,t.ReadableStream=da,t.ReadableStreamBYOBReader=Qa,t.ReadableStreamBYOBRequest=Nn,t.ReadableStreamDefaultController=Fa,t.ReadableStreamDefaultReader=rn,t.TransformStream=ms,t.TransformStreamDefaultController=xo,t.WritableStream=fa,t.WritableStreamDefaultController=Ji,t.WritableStreamDefaultWriter=Ra,Object.defineProperty(t,"__esModule",{value:!0})})})(ponyfill,ponyfill.exports);(function(module,exports){(function(e,t){module.exports=t()})(commonjsGlobal,function(){return(()=>{var __webpack_modules__=[,(Re,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.VerbosityLevel=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.UNSUPPORTED_FEATURES=e.TextRenderingMode=e.StreamType=e.RenderingIntentFlag=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.IsLittleEndianCached=e.IsEvalSupportedCached=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatError=e.FontType=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.AnnotationType=e.AnnotationStateModelType=e.AnnotationReviewState=e.AnnotationReplyType=e.AnnotationMode=e.AnnotationMarkedState=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0,e.arrayByteLength=Wr,e.arraysToBytes=Ur,e.assert=Gr,e.bytesToString=Dr,e.createPromiseCapability=ki,e.createValidAbsoluteUrl=Qr,e.escapeString=In,e.getModificationDate=fi,e.getVerbosityLevel=sr,e.info=Ar,e.isArrayBuffer=si,e.isArrayEqual=ii,e.isAscii=Bn,e.isSameOrigin=zr,e.objectFromMap=Kr,e.objectSize=$r,e.setVerbosityLevel=hr,e.shadow=rn,e.string32=Hr,e.stringToBytes=Br,e.stringToPDFString=Nn,e.stringToUTF16BEString=Fn,e.stringToUTF8String=qn,e.unreachable=Mr,e.utf8StringToString=ni,e.warn=Or,t(2);function Pe(Zr){return Be(Zr)||Ie(Zr)||xe(Zr)||Me()}function Me(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ie(Zr){if(typeof Symbol!="undefined"&&Zr[Symbol.iterator]!=null||Zr["@@iterator"]!=null)return Array.from(Zr)}function Be(Zr){if(Array.isArray(Zr))return r(Zr)}function ke(Zr,_n){return Te(Zr)||Ce(Zr,_n)||xe(Zr,_n)||_e()}function _e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ce(Zr,_n){var Jr=Zr==null?null:typeof Symbol!="undefined"&&Zr[Symbol.iterator]||Zr["@@iterator"];if(Jr!=null){var cn=[],jn=!0,Vn=!1,Yn,Xn;try{for(Jr=Jr.call(Zr);!(jn=(Yn=Jr.next()).done)&&(cn.push(Yn.value),!(_n&&cn.length===_n));jn=!0);}catch(li){Vn=!0,Xn=li}finally{try{!jn&&Jr.return!=null&&Jr.return()}finally{if(Vn)throw Xn}}return cn}}function Te(Zr){if(Array.isArray(Zr))return Zr}function Se(Zr,_n){var Jr=typeof Symbol!="undefined"&&Zr[Symbol.iterator]||Zr["@@iterator"];if(!Jr){if(Array.isArray(Zr)||(Jr=xe(Zr))||_n&&Zr&&typeof Zr.length=="number"){Jr&&(Zr=Jr);var cn=0,jn=function(){};return{s:jn,n:function(){return cn>=Zr.length?{done:!0}:{done:!1,value:Zr[cn++]}},e:function(Pi){throw Pi},f:jn}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Vn=!0,Yn=!1,Xn;return{s:function(){Jr=Jr.call(Zr)},n:function(){var Pi=Jr.next();return Vn=Pi.done,Pi},e:function(Pi){Yn=!0,Xn=Pi},f:function(){try{!Vn&&Jr.return!=null&&Jr.return()}finally{if(Yn)throw Xn}}}}function xe(Zr,_n){if(!!Zr){if(typeof Zr=="string")return r(Zr,_n);var Jr=Object.prototype.toString.call(Zr).slice(8,-1);if(Jr==="Object"&&Zr.constructor&&(Jr=Zr.constructor.name),Jr==="Map"||Jr==="Set")return Array.from(Zr);if(Jr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Jr))return r(Zr,_n)}}function r(Zr,_n){(_n==null||_n>Zr.length)&&(_n=Zr.length);for(var Jr=0,cn=new Array(_n);Jr<_n;Jr++)cn[Jr]=Zr[Jr];return cn}function Oe(Zr){return Oe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_n){return typeof _n}:function(_n){return _n&&typeof Symbol=="function"&&_n.constructor===Symbol&&_n!==Symbol.prototype?"symbol":typeof _n},Oe(Zr)}function Ee(Zr,_n){for(var Jr=0;Jr<_n.length;Jr++){var cn=_n[Jr];cn.enumerable=cn.enumerable||!1,cn.configurable=!0,"value"in cn&&(cn.writable=!0),Object.defineProperty(Zr,cn.key,cn)}}function Ae(Zr,_n,Jr){return _n&&Ee(Zr.prototype,_n),Jr&&Ee(Zr,Jr),Object.defineProperty(Zr,"prototype",{writable:!1}),Zr}function Fe(Zr,_n){if(!(Zr instanceof _n))throw new TypeError("Cannot call a class as a function")}function De(Zr,_n){if(typeof _n!="function"&&_n!==null)throw new TypeError("Super expression must either be null or a function");Zr.prototype=Object.create(_n&&_n.prototype,{constructor:{value:Zr,writable:!0,configurable:!0}}),Object.defineProperty(Zr,"prototype",{writable:!1}),_n&&ze(Zr,_n)}function ze(Zr,_n){return ze=Object.setPrototypeOf||function(cn,jn){return cn.__proto__=jn,cn},ze(Zr,_n)}function je(Zr){var _n=Ye();return function(){var cn=Xe(Zr),jn;if(_n){var Vn=Xe(this).constructor;jn=Reflect.construct(cn,arguments,Vn)}else jn=cn.apply(this,arguments);return We(this,jn)}}function We(Zr,_n){if(_n&&(Oe(_n)==="object"||typeof _n=="function"))return _n;if(_n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ge(Zr)}function Ge(Zr){if(Zr===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Zr}function Ye(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Xe(Zr){return Xe=Object.setPrototypeOf?Object.getPrototypeOf:function(Jr){return Jr.__proto__||Object.getPrototypeOf(Jr)},Xe(Zr)}var Ke=[1,0,0,1,0,0];e.IDENTITY_MATRIX=Ke;var er=[.001,0,0,.001,0,0];e.FONT_IDENTITY_MATRIX=er;var Qe={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};e.RenderingIntentFlag=Qe;var nr={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};e.AnnotationMode=nr;var ir={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};e.PermissionFlag=ir;var cr={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};e.TextRenderingMode=cr;var br={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};e.ImageKind=br;var wr={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};e.AnnotationType=wr;var xr={MARKED:"Marked",REVIEW:"Review"};e.AnnotationStateModelType=xr;var Sr={MARKED:"Marked",UNMARKED:"Unmarked"};e.AnnotationMarkedState=Sr;var lr={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};e.AnnotationReviewState=lr;var fr={GROUP:"Group",REPLY:"R"};e.AnnotationReplyType=fr;var $e={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};e.AnnotationFlag=$e;var Ve={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};e.AnnotationFieldFlag=Ve;var Je={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};e.AnnotationBorderStyleType=Je;var Ze={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};e.AnnotationActionEventType=Ze;var St={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};e.DocumentActionEventType=St;var vr={O:"PageOpen",C:"PageClose"};e.PageActionEventType=vr;var mr={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};e.StreamType=mr;var Cr={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};e.FontType=Cr;var _r={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=_r;var pr={NONE:0,BINARY:1,STREAM:2};e.CMapCompressionType=pr;var dr={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};e.OPS=dr;var ur={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};e.UNSUPPORTED_FEATURES=ur;var rr={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};e.PasswordResponses=rr;var gr=_r.WARNINGS;function hr(Zr){Number.isInteger(Zr)&&(gr=Zr)}function sr(){return gr}function Ar(Zr){gr>=_r.INFOS&&console.log("Info: ".concat(Zr))}function Or(Zr){gr>=_r.WARNINGS&&console.log("Warning: ".concat(Zr))}function Mr(Zr){throw new Error(Zr)}function Gr(Zr,_n){Zr||Mr(_n)}function zr(Zr,_n){var Jr;try{if(Jr=new URL(Zr),!Jr.origin||Jr.origin==="null")return!1}catch{return!1}var cn=new URL(_n,Jr);return Jr.origin===cn.origin}function Ir(Zr){if(!Zr)return!1;switch(Zr.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Qr(Zr){var _n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,Jr=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!Zr)return null;try{if(Jr&&typeof Zr=="string"){if(Jr.addDefaultProtocol&&Zr.startsWith("www.")){var cn=Zr.match(/\./g);cn&&cn.length>=2&&(Zr="http://".concat(Zr))}if(Jr.tryConvertEncoding)try{Zr=qn(Zr)}catch{}}var jn=_n?new URL(Zr,_n):new URL(Zr);if(Ir(jn))return jn}catch{}return null}function rn(Zr,_n,Jr){return Object.defineProperty(Zr,_n,{value:Jr,enumerable:!0,configurable:!0,writable:!1}),Jr}var sn=function(){function _n(Jr,cn){this.constructor===_n&&Mr("Cannot initialize BaseException."),this.message=Jr,this.name=cn}return _n.prototype=new Error,_n.constructor=_n,_n}();e.BaseException=sn;var pn=function(Zr){De(Jr,Zr);var _n=je(Jr);function Jr(cn,jn){var Vn;return Fe(this,Jr),Vn=_n.call(this,cn,"PasswordException"),Vn.code=jn,Vn}return Ae(Jr)}(sn);e.PasswordException=pn;var mn=function(Zr){De(Jr,Zr);var _n=je(Jr);function Jr(cn,jn){var Vn;return Fe(this,Jr),Vn=_n.call(this,cn,"UnknownErrorException"),Vn.details=jn,Vn}return Ae(Jr)}(sn);e.UnknownErrorException=mn;var Sn=function(Zr){De(Jr,Zr);var _n=je(Jr);function Jr(cn){return Fe(this,Jr),_n.call(this,cn,"InvalidPDFException")}return Ae(Jr)}(sn);e.InvalidPDFException=Sn;var Cn=function(Zr){De(Jr,Zr);var _n=je(Jr);function Jr(cn){return Fe(this,Jr),_n.call(this,cn,"MissingPDFException")}return Ae(Jr)}(sn);e.MissingPDFException=Cn;var Xr=function(Zr){De(Jr,Zr);var _n=je(Jr);function Jr(cn,jn){var Vn;return Fe(this,Jr),Vn=_n.call(this,cn,"UnexpectedResponseException"),Vn.status=jn,Vn}return Ae(Jr)}(sn);e.UnexpectedResponseException=Xr;var Er=function(Zr){De(Jr,Zr);var _n=je(Jr);function Jr(cn){return Fe(this,Jr),_n.call(this,cn,"FormatError")}return Ae(Jr)}(sn);e.FormatError=Er;var Rr=function(Zr){De(Jr,Zr);var _n=je(Jr);function Jr(cn){return Fe(this,Jr),_n.call(this,cn,"AbortException")}return Ae(Jr)}(sn);e.AbortException=Rr;function Dr(Zr){(Oe(Zr)!=="object"||Zr===null||Zr.length===void 0)&&Mr("Invalid argument for bytesToString");var _n=Zr.length,Jr=8192;if(_n<Jr)return String.fromCharCode.apply(null,Zr);for(var cn=[],jn=0;jn<_n;jn+=Jr){var Vn=Math.min(jn+Jr,_n),Yn=Zr.subarray(jn,Vn);cn.push(String.fromCharCode.apply(null,Yn))}return cn.join("")}function Br(Zr){typeof Zr!="string"&&Mr("Invalid argument for stringToBytes");for(var _n=Zr.length,Jr=new Uint8Array(_n),cn=0;cn<_n;++cn)Jr[cn]=Zr.charCodeAt(cn)&255;return Jr}function Wr(Zr){if(Zr.length!==void 0)return Zr.length;if(Zr.byteLength!==void 0)return Zr.byteLength;Mr("Invalid argument for arrayByteLength")}function Ur(Zr){var _n=Zr.length;if(_n===1&&Zr[0]instanceof Uint8Array)return Zr[0];for(var Jr=0,cn=0;cn<_n;cn++)Jr+=Wr(Zr[cn]);for(var jn=0,Vn=new Uint8Array(Jr),Yn=0;Yn<_n;Yn++){var Xn=Zr[Yn];Xn instanceof Uint8Array||(typeof Xn=="string"?Xn=Br(Xn):Xn=new Uint8Array(Xn));var li=Xn.byteLength;Vn.set(Xn,jn),jn+=li}return Vn}function Hr(Zr){return String.fromCharCode(Zr>>24&255,Zr>>16&255,Zr>>8&255,Zr&255)}function $r(Zr){return Object.keys(Zr).length}function Kr(Zr){var _n=Object.create(null),Jr=Se(Zr),cn;try{for(Jr.s();!(cn=Jr.n()).done;){var jn=ke(cn.value,2),Vn=jn[0],Yn=jn[1];_n[Vn]=Yn}}catch(Xn){Jr.e(Xn)}finally{Jr.f()}return _n}function tn(){var Zr=new Uint8Array(4);Zr[0]=1;var _n=new Uint32Array(Zr.buffer,0,1);return _n[0]===1}var yn={get value(){return rn(this,"value",tn())}};e.IsLittleEndianCached=yn;function Pn(){try{return new Function(""),!0}catch{return!1}}var bn={get value(){return rn(this,"value",Pn())}};e.IsEvalSupportedCached=bn;var dn=Pe(Array(256).keys()).map(function(Zr){return Zr.toString(16).padStart(2,"0")}),Tn=function(){function Zr(){Fe(this,Zr)}return Ae(Zr,null,[{key:"makeHexColor",value:function(Jr,cn,jn){return"#".concat(dn[Jr]).concat(dn[cn]).concat(dn[jn])}},{key:"transform",value:function(Jr,cn){return[Jr[0]*cn[0]+Jr[2]*cn[1],Jr[1]*cn[0]+Jr[3]*cn[1],Jr[0]*cn[2]+Jr[2]*cn[3],Jr[1]*cn[2]+Jr[3]*cn[3],Jr[0]*cn[4]+Jr[2]*cn[5]+Jr[4],Jr[1]*cn[4]+Jr[3]*cn[5]+Jr[5]]}},{key:"applyTransform",value:function(Jr,cn){var jn=Jr[0]*cn[0]+Jr[1]*cn[2]+cn[4],Vn=Jr[0]*cn[1]+Jr[1]*cn[3]+cn[5];return[jn,Vn]}},{key:"applyInverseTransform",value:function(Jr,cn){var jn=cn[0]*cn[3]-cn[1]*cn[2],Vn=(Jr[0]*cn[3]-Jr[1]*cn[2]+cn[2]*cn[5]-cn[4]*cn[3])/jn,Yn=(-Jr[0]*cn[1]+Jr[1]*cn[0]+cn[4]*cn[1]-cn[5]*cn[0])/jn;return[Vn,Yn]}},{key:"getAxialAlignedBoundingBox",value:function(Jr,cn){var jn=Zr.applyTransform(Jr,cn),Vn=Zr.applyTransform(Jr.slice(2,4),cn),Yn=Zr.applyTransform([Jr[0],Jr[3]],cn),Xn=Zr.applyTransform([Jr[2],Jr[1]],cn);return[Math.min(jn[0],Vn[0],Yn[0],Xn[0]),Math.min(jn[1],Vn[1],Yn[1],Xn[1]),Math.max(jn[0],Vn[0],Yn[0],Xn[0]),Math.max(jn[1],Vn[1],Yn[1],Xn[1])]}},{key:"inverseTransform",value:function(Jr){var cn=Jr[0]*Jr[3]-Jr[1]*Jr[2];return[Jr[3]/cn,-Jr[1]/cn,-Jr[2]/cn,Jr[0]/cn,(Jr[2]*Jr[5]-Jr[4]*Jr[3])/cn,(Jr[4]*Jr[1]-Jr[5]*Jr[0])/cn]}},{key:"apply3dTransform",value:function(Jr,cn){return[Jr[0]*cn[0]+Jr[1]*cn[1]+Jr[2]*cn[2],Jr[3]*cn[0]+Jr[4]*cn[1]+Jr[5]*cn[2],Jr[6]*cn[0]+Jr[7]*cn[1]+Jr[8]*cn[2]]}},{key:"singularValueDecompose2dScale",value:function(Jr){var cn=[Jr[0],Jr[2],Jr[1],Jr[3]],jn=Jr[0]*cn[0]+Jr[1]*cn[2],Vn=Jr[0]*cn[1]+Jr[1]*cn[3],Yn=Jr[2]*cn[0]+Jr[3]*cn[2],Xn=Jr[2]*cn[1]+Jr[3]*cn[3],li=(jn+Xn)/2,Pi=Math.sqrt(Math.pow(jn+Xn,2)-4*(jn*Xn-Yn*Vn))/2,Gi=li+Pi||1,gi=li-Pi||1;return[Math.sqrt(Gi),Math.sqrt(gi)]}},{key:"normalizeRect",value:function(Jr){var cn=Jr.slice(0);return Jr[0]>Jr[2]&&(cn[0]=Jr[2],cn[2]=Jr[0]),Jr[1]>Jr[3]&&(cn[1]=Jr[3],cn[3]=Jr[1]),cn}},{key:"intersect",value:function(Jr,cn){function jn(li,Pi){return li-Pi}var Vn=[Jr[0],Jr[2],cn[0],cn[2]].sort(jn),Yn=[Jr[1],Jr[3],cn[1],cn[3]].sort(jn),Xn=[];if(Jr=Zr.normalizeRect(Jr),cn=Zr.normalizeRect(cn),Vn[0]===Jr[0]&&Vn[1]===cn[0]||Vn[0]===cn[0]&&Vn[1]===Jr[0])Xn[0]=Vn[1],Xn[2]=Vn[2];else return null;if(Yn[0]===Jr[1]&&Yn[1]===cn[1]||Yn[0]===cn[1]&&Yn[1]===Jr[1])Xn[1]=Yn[1],Xn[3]=Yn[2];else return null;return Xn}},{key:"bezierBoundingBox",value:function(Jr,cn,jn,Vn,Yn,Xn,li,Pi){for(var Gi=[],gi=[[],[]],ji,mi,Ua,Li,sa,ma,co,Ja,ko=0;ko<2;++ko){if(ko===0?(mi=6*Jr-12*jn+6*Yn,ji=-3*Jr+9*jn-9*Yn+3*li,Ua=3*jn-3*Jr):(mi=6*cn-12*Vn+6*Xn,ji=-3*cn+9*Vn-9*Xn+3*Pi,Ua=3*Vn-3*cn),Math.abs(ji)<1e-12){if(Math.abs(mi)<1e-12)continue;Li=-Ua/mi,0<Li&&Li<1&&Gi.push(Li);continue}co=mi*mi-4*Ua*ji,Ja=Math.sqrt(co),!(co<0)&&(sa=(-mi+Ja)/(2*ji),0<sa&&sa<1&&Gi.push(sa),ma=(-mi-Ja)/(2*ji),0<ma&&ma<1&&Gi.push(ma))}for(var ya=Gi.length,Mi,qi=ya;ya--;)Li=Gi[ya],Mi=1-Li,gi[0][ya]=Mi*Mi*Mi*Jr+3*Mi*Mi*Li*jn+3*Mi*Li*Li*Yn+Li*Li*Li*li,gi[1][ya]=Mi*Mi*Mi*cn+3*Mi*Mi*Li*Vn+3*Mi*Li*Li*Xn+Li*Li*Li*Pi;return gi[0][qi]=Jr,gi[1][qi]=cn,gi[0][qi+1]=li,gi[1][qi+1]=Pi,gi[0].length=gi[1].length=qi+2,[Math.min.apply(Math,Pe(gi[0])),Math.min.apply(Math,Pe(gi[1])),Math.max.apply(Math,Pe(gi[0])),Math.max.apply(Math,Pe(gi[1]))]}}]),Zr}();e.Util=Tn;var xn=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Nn(Zr){if(Zr[0]>="\xEF"){var _n;if(Zr[0]==="\xFE"&&Zr[1]==="\xFF"?_n="utf-16be":Zr[0]==="\xFF"&&Zr[1]==="\xFE"?_n="utf-16le":Zr[0]==="\xEF"&&Zr[1]==="\xBB"&&Zr[2]==="\xBF"&&(_n="utf-8"),_n)try{var Jr=new TextDecoder(_n,{fatal:!0}),cn=Br(Zr);return Jr.decode(cn)}catch(li){Or('stringToPDFString: "'.concat(li,'".'))}}for(var jn=[],Vn=0,Yn=Zr.length;Vn<Yn;Vn++){var Xn=xn[Zr.charCodeAt(Vn)];jn.push(Xn?String.fromCharCode(Xn):Zr.charAt(Vn))}return jn.join("")}function In(Zr){return Zr.replace(/([()\\\n\r])/g,function(_n){return _n===`
`?"\\n":_n==="\r"?"\\r":"\\".concat(_n)})}function Bn(Zr){return/^[\x00-\x7F]*$/.test(Zr)}function Fn(Zr){for(var _n=["\xFE\xFF"],Jr=0,cn=Zr.length;Jr<cn;Jr++){var jn=Zr.charCodeAt(Jr);_n.push(String.fromCharCode(jn>>8&255),String.fromCharCode(jn&255))}return _n.join("")}function qn(Zr){return decodeURIComponent(escape(Zr))}function ni(Zr){return unescape(encodeURIComponent(Zr))}function si(Zr){return Oe(Zr)==="object"&&Zr!==null&&Zr.byteLength!==void 0}function ii(Zr,_n){if(Zr.length!==_n.length)return!1;for(var Jr=0,cn=Zr.length;Jr<cn;Jr++)if(Zr[Jr]!==_n[Jr])return!1;return!0}function fi(){var Zr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Date,_n=[Zr.getUTCFullYear().toString(),(Zr.getUTCMonth()+1).toString().padStart(2,"0"),Zr.getUTCDate().toString().padStart(2,"0"),Zr.getUTCHours().toString().padStart(2,"0"),Zr.getUTCMinutes().toString().padStart(2,"0"),Zr.getUTCSeconds().toString().padStart(2,"0")];return _n.join("")}function ki(){var Zr=Object.create(null),_n=!1;return Object.defineProperty(Zr,"settled",{get:function(){return _n}}),Zr.promise=new Promise(function(Jr,cn){Zr.resolve=function(jn){_n=!0,Jr(jn)},Zr.reject=function(jn){_n=!0,cn(jn)}}),Zr}},(Re,e,t)=>{var Pe=t(3);globalThis._pdfjsCompatibilityChecked||(globalThis._pdfjsCompatibilityChecked=!0,function(){globalThis.btoa||!Pe.isNodeJS||(globalThis.btoa=function(Ie){return Buffer.from(Ie,"binary").toString("base64")})}(),function(){globalThis.atob||!Pe.isNodeJS||(globalThis.atob=function(Ie){return Buffer.from(Ie,"base64").toString("binary")})}(),function(){globalThis.DOMMatrix||!Pe.isNodeJS||(globalThis.DOMMatrix=t(4))}(),function(){globalThis.Promise.allSettled||(globalThis.Promise=t(5))}(),function(){globalThis.ReadableStream||!Pe.isNodeJS||(globalThis.ReadableStream=ponyfill.exports.ReadableStream)}(),function(){globalThis.structuredClone||t(129)}())},(Re,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isNodeJS=void 0;function t(Me){return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ie){return typeof Ie}:function(Ie){return Ie&&typeof Symbol=="function"&&Ie.constructor===Symbol&&Ie!==Symbol.prototype?"symbol":typeof Ie},t(Me)}var Pe=(typeof process=="undefined"?"undefined":t(process))==="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");e.isNodeJS=Pe},(Re,e,t)=>{var Pe,Me;function Ie(Be){return Ie=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ke){return typeof ke}:function(ke){return ke&&typeof Symbol=="function"&&ke.constructor===Symbol&&ke!==Symbol.prototype?"symbol":typeof ke},Ie(Be)}(function(Be,ke){Ie(e)==="object"?Re.exports=ke():(Pe=ke,Me=typeof Pe=="function"?Pe.call(e,t,e,Re):Pe,Me!==void 0&&(Re.exports=Me))})(void 0,function(){function Be(je){var We=new Ae,Ge=Array.from(je);if(!Ge.every(function(_r){return!Number.isNaN(_r)}))throw TypeError('CSSMatrix: "'+je+'" must only have numbers.');if(Ge.length===16){var Ye=Ge[0],Xe=Ge[1],Ke=Ge[2],er=Ge[3],Qe=Ge[4],nr=Ge[5],ir=Ge[6],cr=Ge[7],br=Ge[8],wr=Ge[9],xr=Ge[10],Sr=Ge[11],lr=Ge[12],fr=Ge[13],$e=Ge[14],Ve=Ge[15];We.m11=Ye,We.a=Ye,We.m21=Qe,We.c=Qe,We.m31=br,We.m41=lr,We.e=lr,We.m12=Xe,We.b=Xe,We.m22=nr,We.d=nr,We.m32=wr,We.m42=fr,We.f=fr,We.m13=Ke,We.m23=ir,We.m33=xr,We.m43=$e,We.m14=er,We.m24=cr,We.m34=Sr,We.m44=Ve}else if(Ge.length===6){var Je=Ge[0],Ze=Ge[1],St=Ge[2],vr=Ge[3],mr=Ge[4],Cr=Ge[5];We.m11=Je,We.a=Je,We.m12=Ze,We.b=Ze,We.m21=St,We.c=St,We.m22=vr,We.d=vr,We.m41=mr,We.e=mr,We.m42=Cr,We.f=Cr}else throw new TypeError("CSSMatrix: expecting an Array of 6/16 values.");return We}function ke(je){var We=Object.keys(new Ae);if(Ie(je)==="object"&&We.every(function(Ge){return Ge in je}))return Be([je.m11,je.m12,je.m13,je.m14,je.m21,je.m22,je.m23,je.m24,je.m31,je.m32,je.m33,je.m34,je.m41,je.m42,je.m43,je.m44]);throw TypeError('CSSMatrix: "'+je+'" is not a DOMMatrix / CSSMatrix / JSON compatible object.')}function _e(je){if(typeof je!="string")throw TypeError('CSSMatrix: "'+je+'" is not a string.');var We=String(je).replace(/\s/g,""),Ge=new Ae,Ye='CSSMatrix: invalid transform string "'+je+'"';return We.split(")").filter(function(Xe){return Xe}).forEach(function(Xe){var Ke=Xe.split("("),er=Ke[0],Qe=Ke[1];if(!Qe)throw TypeError(Ye);var nr=Qe.split(",").map(function(vr){return vr.includes("rad")?parseFloat(vr)*(180/Math.PI):parseFloat(vr)}),ir=nr[0],cr=nr[1],br=nr[2],wr=nr[3],xr=[ir,cr,br],Sr=[ir,cr,br,wr];if(er==="perspective"&&ir&&[cr,br].every(function(vr){return vr===void 0}))Ge.m34=-1/ir;else if(er.includes("matrix")&&[6,16].includes(nr.length)&&nr.every(function(vr){return!Number.isNaN(+vr)})){var lr=nr.map(function(vr){return Math.abs(vr)<1e-6?0:vr});Ge=Ge.multiply(Be(lr))}else if(er==="translate3d"&&xr.every(function(vr){return!Number.isNaN(+vr)}))Ge=Ge.translate(ir,cr,br);else if(er==="translate"&&ir&&br===void 0)Ge=Ge.translate(ir,cr||0,0);else if(er==="rotate3d"&&Sr.every(function(vr){return!Number.isNaN(+vr)})&&wr)Ge=Ge.rotateAxisAngle(ir,cr,br,wr);else if(er==="rotate"&&ir&&[cr,br].every(function(vr){return vr===void 0}))Ge=Ge.rotate(0,0,ir);else if(er==="scale3d"&&xr.every(function(vr){return!Number.isNaN(+vr)})&&xr.some(function(vr){return vr!==1}))Ge=Ge.scale(ir,cr,br);else if(er==="scale"&&!Number.isNaN(ir)&&ir!==1&&br===void 0){var fr=Number.isNaN(+cr),$e=fr?ir:cr;Ge=Ge.scale(ir,$e,1)}else if(er==="skew"&&ir&&br===void 0)Ge=Ge.skewX(ir),Ge=cr?Ge.skewY(cr):Ge;else if(/[XYZ]/.test(er)&&ir&&[cr,br].every(function(vr){return vr===void 0})&&["translate","rotate","scale","skew"].some(function(vr){return er.includes(vr)}))if(["skewX","skewY"].includes(er))Ge=Ge[er](ir);else{var Ve=er.replace(/[XYZ]/,""),Je=er.replace(Ve,""),Ze=["X","Y","Z"].indexOf(Je),St=[Ze===0?ir:0,Ze===1?ir:0,Ze===2?ir:0];Ge=Ge[Ve].apply(Ge,St)}else throw TypeError(Ye)}),Ge}function Ce(je,We,Ge){var Ye=new Ae;return Ye.m41=je,Ye.e=je,Ye.m42=We,Ye.f=We,Ye.m43=Ge,Ye}function Te(je,We,Ge){var Ye=new Ae,Xe=Math.PI/180,Ke=je*Xe,er=We*Xe,Qe=Ge*Xe,nr=Math.cos(Ke),ir=-Math.sin(Ke),cr=Math.cos(er),br=-Math.sin(er),wr=Math.cos(Qe),xr=-Math.sin(Qe),Sr=cr*wr,lr=-cr*xr;Ye.m11=Sr,Ye.a=Sr,Ye.m12=lr,Ye.b=lr,Ye.m13=br;var fr=ir*br*wr+nr*xr;Ye.m21=fr,Ye.c=fr;var $e=nr*wr-ir*br*xr;return Ye.m22=$e,Ye.d=$e,Ye.m23=-ir*cr,Ye.m31=ir*xr-nr*br*wr,Ye.m32=ir*wr+nr*br*xr,Ye.m33=nr*cr,Ye}function Se(je,We,Ge,Ye){var Xe=new Ae,Ke=Ye*(Math.PI/360),er=Math.sin(Ke),Qe=Math.cos(Ke),nr=er*er,ir=Math.sqrt(je*je+We*We+Ge*Ge),cr=je,br=We,wr=Ge;ir===0?(cr=0,br=0,wr=1):(cr/=ir,br/=ir,wr/=ir);var xr=cr*cr,Sr=br*br,lr=wr*wr,fr=1-2*(Sr+lr)*nr;Xe.m11=fr,Xe.a=fr;var $e=2*(cr*br*nr+wr*er*Qe);Xe.m12=$e,Xe.b=$e,Xe.m13=2*(cr*wr*nr-br*er*Qe);var Ve=2*(br*cr*nr-wr*er*Qe);Xe.m21=Ve,Xe.c=Ve;var Je=1-2*(lr+xr)*nr;return Xe.m22=Je,Xe.d=Je,Xe.m23=2*(br*wr*nr+cr*er*Qe),Xe.m31=2*(wr*cr*nr+br*er*Qe),Xe.m32=2*(wr*br*nr-cr*er*Qe),Xe.m33=1-2*(xr+Sr)*nr,Xe}function xe(je,We,Ge){var Ye=new Ae;return Ye.m11=je,Ye.a=je,Ye.m22=We,Ye.d=We,Ye.m33=Ge,Ye}function r(je){var We=new Ae,Ge=je*Math.PI/180,Ye=Math.tan(Ge);return We.m21=Ye,We.c=Ye,We}function Oe(je){var We=new Ae,Ge=je*Math.PI/180,Ye=Math.tan(Ge);return We.m12=Ye,We.b=Ye,We}function Ee(je,We){var Ge=We.m11*je.m11+We.m12*je.m21+We.m13*je.m31+We.m14*je.m41,Ye=We.m11*je.m12+We.m12*je.m22+We.m13*je.m32+We.m14*je.m42,Xe=We.m11*je.m13+We.m12*je.m23+We.m13*je.m33+We.m14*je.m43,Ke=We.m11*je.m14+We.m12*je.m24+We.m13*je.m34+We.m14*je.m44,er=We.m21*je.m11+We.m22*je.m21+We.m23*je.m31+We.m24*je.m41,Qe=We.m21*je.m12+We.m22*je.m22+We.m23*je.m32+We.m24*je.m42,nr=We.m21*je.m13+We.m22*je.m23+We.m23*je.m33+We.m24*je.m43,ir=We.m21*je.m14+We.m22*je.m24+We.m23*je.m34+We.m24*je.m44,cr=We.m31*je.m11+We.m32*je.m21+We.m33*je.m31+We.m34*je.m41,br=We.m31*je.m12+We.m32*je.m22+We.m33*je.m32+We.m34*je.m42,wr=We.m31*je.m13+We.m32*je.m23+We.m33*je.m33+We.m34*je.m43,xr=We.m31*je.m14+We.m32*je.m24+We.m33*je.m34+We.m34*je.m44,Sr=We.m41*je.m11+We.m42*je.m21+We.m43*je.m31+We.m44*je.m41,lr=We.m41*je.m12+We.m42*je.m22+We.m43*je.m32+We.m44*je.m42,fr=We.m41*je.m13+We.m42*je.m23+We.m43*je.m33+We.m44*je.m43,$e=We.m41*je.m14+We.m42*je.m24+We.m43*je.m34+We.m44*je.m44;return Be([Ge,Ye,Xe,Ke,er,Qe,nr,ir,cr,br,wr,xr,Sr,lr,fr,$e])}var Ae=function(){for(var We=[],Ge=arguments.length;Ge--;)We[Ge]=arguments[Ge];var Ye=this;if(Ye.a=1,Ye.b=0,Ye.c=0,Ye.d=1,Ye.e=0,Ye.f=0,Ye.m11=1,Ye.m12=0,Ye.m13=0,Ye.m14=0,Ye.m21=0,Ye.m22=1,Ye.m23=0,Ye.m24=0,Ye.m31=0,Ye.m32=0,Ye.m33=1,Ye.m34=0,Ye.m41=0,Ye.m42=0,Ye.m43=0,Ye.m44=1,We&&We.length){var Xe=[16,6].some(function(Ke){return Ke===We.length})?We:We[0];return Ye.setMatrixValue(Xe)}return Ye},Fe={isIdentity:{configurable:!0},is2D:{configurable:!0}};Fe.isIdentity.set=function(je){this.isIdentity=je},Fe.isIdentity.get=function(){var je=this;return je.m11===1&&je.m12===0&&je.m13===0&&je.m14===0&&je.m21===0&&je.m22===1&&je.m23===0&&je.m24===0&&je.m31===0&&je.m32===0&&je.m33===1&&je.m34===0&&je.m41===0&&je.m42===0&&je.m43===0&&je.m44===1},Fe.is2D.get=function(){var je=this;return je.m31===0&&je.m32===0&&je.m33===1&&je.m34===0&&je.m43===0&&je.m44===1},Fe.is2D.set=function(je){this.is2D=je},Ae.prototype.setMatrixValue=function(We){var Ge=this;return[Array,Float64Array,Float32Array].some(function(Ye){return We instanceof Ye})?Be(We):typeof We=="string"&&We.length&&We!=="none"?_e(We):Ie(We)==="object"?ke(We):Ge},Ae.prototype.toArray=function(){var We=this,Ge=Math.pow(10,6),Ye;return We.is2D?Ye=[We.a,We.b,We.c,We.d,We.e,We.f]:Ye=[We.m11,We.m12,We.m13,We.m14,We.m21,We.m22,We.m23,We.m24,We.m31,We.m32,We.m33,We.m34,We.m41,We.m42,We.m43,We.m44],Ye.map(function(Xe){return Math.abs(Xe)<1e-6?0:(Xe*Ge>>0)/Ge})},Ae.prototype.toString=function(){var We=this,Ge=We.toArray(),Ye=We.is2D?"matrix":"matrix3d";return Ye+"("+Ge+")"},Ae.prototype.toJSON=function(){var We=this,Ge=We.is2D,Ye=We.isIdentity;return Object.assign({},We,{is2D:Ge,isIdentity:Ye})},Ae.prototype.multiply=function(We){return Ee(this,We)},Ae.prototype.translate=function(We,Ge,Ye){var Xe=We,Ke=Ge,er=Ye;return er===void 0&&(er=0),Ke===void 0&&(Ke=0),Ee(this,Ce(Xe,Ke,er))},Ae.prototype.scale=function(We,Ge,Ye){var Xe=We,Ke=Ge,er=Ye;return Ke===void 0&&(Ke=We),er===void 0&&(er=1),Ee(this,xe(Xe,Ke,er))},Ae.prototype.rotate=function(We,Ge,Ye){var Xe=We,Ke=Ge,er=Ye;return Ke===void 0&&(Ke=0),er===void 0&&(er=Xe,Xe=0),Ee(this,Te(Xe,Ke,er))},Ae.prototype.rotateAxisAngle=function(We,Ge,Ye,Xe){if([We,Ge,Ye,Xe].some(function(Ke){return Number.isNaN(Ke)}))throw new TypeError("CSSMatrix: expecting 4 values");return Ee(this,Se(We,Ge,Ye,Xe))},Ae.prototype.skewX=function(We){return Ee(this,r(We))},Ae.prototype.skewY=function(We){return Ee(this,Oe(We))},Ae.prototype.transformPoint=function(We){var Ge=this,Ye=Ce(We.x,We.y,We.z);return Ye.m44=We.w||1,Ye=Ge.multiply(Ye),{x:Ye.m41,y:Ye.m42,z:Ye.m43,w:Ye.m44}},Ae.prototype.transform=function(We){var Ge=this,Ye=Ge.m11*We.x+Ge.m12*We.y+Ge.m13*We.z+Ge.m14*We.w,Xe=Ge.m21*We.x+Ge.m22*We.y+Ge.m23*We.z+Ge.m24*We.w,Ke=Ge.m31*We.x+Ge.m32*We.y+Ge.m33*We.z+Ge.m34*We.w,er=Ge.m41*We.x+Ge.m42*We.y+Ge.m43*We.z+Ge.m44*We.w;return{x:Ye/er,y:Xe/er,z:Ke/er,w:er}},Object.defineProperties(Ae.prototype,Fe),Object.assign(Ae,{Translate:Ce,Rotate:Te,RotateAxisAngle:Se,Scale:xe,SkewX:r,SkewY:Oe,Multiply:Ee,fromArray:Be,fromMatrix:ke,fromString:_e});var De="0.0.24",ze=De;return Object.assign(Ae,{Version:ze}),Ae})},(Re,e,t)=>{t(6),t(91),t(97),t(99),t(123),t(124),t(125),t(126);var Pe=t(128);Re.exports=Pe.Promise},(Re,e,t)=>{var Pe=t(7),Me=t(8),Ie=t(27),Be=t(69),ke=t(71),_e=t(57),Ce=t(73),Te=t(46),Se=t(15),xe=t(77),r=t(78),Oe=t(79),Ee=t(88),Ae=t(36),Fe=t(90),De=Ae("toStringTag"),ze=Me.Error,je=[].push,We=function(Xe,Ke){var er=arguments.length>2?arguments[2]:void 0,Qe=Ie(Ge,this),nr;ke?nr=ke(new ze,Qe?Be(this):Ge):(nr=Qe?this:Ce(Ge),Te(nr,De,"Error")),Ke!==void 0&&Te(nr,"message",Ee(Ke)),Fe&&Te(nr,"stack",xe(nr.stack,1)),r(nr,er);var ir=[];return Oe(Xe,je,{that:ir}),Te(nr,"errors",ir),nr};ke?ke(We,ze):_e(We,ze,{name:!0});var Ge=We.prototype=Ce(ze.prototype,{constructor:Se(1,We),message:Se(1,""),name:Se(1,"AggregateError")});Pe({global:!0},{AggregateError:We})},(Re,e,t)=>{var Pe=t(8),Me=t(9).f,Ie=t(46),Be=t(50),ke=t(40),_e=t(57),Ce=t(68);Re.exports=function(Te,Se){var xe=Te.target,r=Te.global,Oe=Te.stat,Ee,Ae,Fe,De,ze,je;if(r?Ae=Pe:Oe?Ae=Pe[xe]||ke(xe,{}):Ae=(Pe[xe]||{}).prototype,Ae)for(Fe in Se){if(ze=Se[Fe],Te.noTargetGet?(je=Me(Ae,Fe),De=je&&je.value):De=Ae[Fe],Ee=Ce(r?Fe:xe+(Oe?".":"#")+Fe,Te.forced),!Ee&&De!==void 0){if(typeof ze==typeof De)continue;_e(ze,De)}(Te.sham||De&&De.sham)&&Ie(ze,"sham",!0),Be(Ae,Fe,ze,Te)}}},Re=>{var e=function(t){return t&&t.Math==Math&&t};Re.exports=e(typeof globalThis=="object"&&globalThis)||e(typeof window=="object"&&window)||e(typeof self=="object"&&self)||e(typeof commonjsGlobal=="object"&&commonjsGlobal)||function(){return this}()||Function("return this")()},(Re,e,t)=>{var Pe=t(10),Me=t(12),Ie=t(14),Be=t(15),ke=t(16),_e=t(21),Ce=t(41),Te=t(44),Se=Object.getOwnPropertyDescriptor;e.f=Pe?Se:function(r,Oe){if(r=ke(r),Oe=_e(Oe),Te)try{return Se(r,Oe)}catch{}if(Ce(r,Oe))return Be(!Me(Ie.f,r,Oe),r[Oe])}},(Re,e,t)=>{var Pe=t(11);Re.exports=!Pe(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},Re=>{Re.exports=function(e){try{return!!e()}catch{return!0}}},(Re,e,t)=>{var Pe=t(13),Me=Function.prototype.call;Re.exports=Pe?Me.bind(Me):function(){return Me.apply(Me,arguments)}},(Re,e,t)=>{var Pe=t(11);Re.exports=!Pe(function(){var Me=function(){}.bind();return typeof Me!="function"||Me.hasOwnProperty("prototype")})},(Re,e)=>{var t={}.propertyIsEnumerable,Pe=Object.getOwnPropertyDescriptor,Me=Pe&&!t.call({1:2},1);e.f=Me?function(Be){var ke=Pe(this,Be);return!!ke&&ke.enumerable}:t},Re=>{Re.exports=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}}},(Re,e,t)=>{var Pe=t(17),Me=t(20);Re.exports=function(Ie){return Pe(Me(Ie))}},(Re,e,t)=>{var Pe=t(8),Me=t(18),Ie=t(11),Be=t(19),ke=Pe.Object,_e=Me("".split);Re.exports=Ie(function(){return!ke("z").propertyIsEnumerable(0)})?function(Ce){return Be(Ce)=="String"?_e(Ce,""):ke(Ce)}:ke},(Re,e,t)=>{var Pe=t(13),Me=Function.prototype,Ie=Me.bind,Be=Me.call,ke=Pe&&Ie.bind(Be,Be);Re.exports=Pe?function(_e){return _e&&ke(_e)}:function(_e){return _e&&function(){return Be.apply(_e,arguments)}}},(Re,e,t)=>{var Pe=t(18),Me=Pe({}.toString),Ie=Pe("".slice);Re.exports=function(Be){return Ie(Me(Be),8,-1)}},(Re,e,t)=>{var Pe=t(8),Me=Pe.TypeError;Re.exports=function(Ie){if(Ie==null)throw Me("Can't call method on "+Ie);return Ie}},(Re,e,t)=>{var Pe=t(22),Me=t(25);Re.exports=function(Ie){var Be=Pe(Ie,"string");return Me(Be)?Be:Be+""}},(Re,e,t)=>{var Pe=t(8),Me=t(12),Ie=t(23),Be=t(25),ke=t(32),_e=t(35),Ce=t(36),Te=Pe.TypeError,Se=Ce("toPrimitive");Re.exports=function(xe,r){if(!Ie(xe)||Be(xe))return xe;var Oe=ke(xe,Se),Ee;if(Oe){if(r===void 0&&(r="default"),Ee=Me(Oe,xe,r),!Ie(Ee)||Be(Ee))return Ee;throw Te("Can't convert object to primitive value")}return r===void 0&&(r="number"),_e(xe,r)}},(Re,e,t)=>{var Pe=t(24);Re.exports=function(Me){return typeof Me=="object"?Me!==null:Pe(Me)}},Re=>{Re.exports=function(e){return typeof e=="function"}},(Re,e,t)=>{var Pe=t(8),Me=t(26),Ie=t(24),Be=t(27),ke=t(28),_e=Pe.Object;Re.exports=ke?function(Ce){return typeof Ce=="symbol"}:function(Ce){var Te=Me("Symbol");return Ie(Te)&&Be(Te.prototype,_e(Ce))}},(Re,e,t)=>{var Pe=t(8),Me=t(24),Ie=function(Be){return Me(Be)?Be:void 0};Re.exports=function(Be,ke){return arguments.length<2?Ie(Pe[Be]):Pe[Be]&&Pe[Be][ke]}},(Re,e,t)=>{var Pe=t(18);Re.exports=Pe({}.isPrototypeOf)},(Re,e,t)=>{var Pe=t(29);Re.exports=Pe&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},(Re,e,t)=>{var Pe=t(30),Me=t(11);Re.exports=!!Object.getOwnPropertySymbols&&!Me(function(){var Ie=Symbol();return!String(Ie)||!(Object(Ie)instanceof Symbol)||!Symbol.sham&&Pe&&Pe<41})},(Re,e,t)=>{var Pe=t(8),Me=t(31),Ie=Pe.process,Be=Pe.Deno,ke=Ie&&Ie.versions||Be&&Be.version,_e=ke&&ke.v8,Ce,Te;_e&&(Ce=_e.split("."),Te=Ce[0]>0&&Ce[0]<4?1:+(Ce[0]+Ce[1])),!Te&&Me&&(Ce=Me.match(/Edge\/(\d+)/),(!Ce||Ce[1]>=74)&&(Ce=Me.match(/Chrome\/(\d+)/),Ce&&(Te=+Ce[1]))),Re.exports=Te},(Re,e,t)=>{var Pe=t(26);Re.exports=Pe("navigator","userAgent")||""},(Re,e,t)=>{var Pe=t(33);Re.exports=function(Me,Ie){var Be=Me[Ie];return Be==null?void 0:Pe(Be)}},(Re,e,t)=>{var Pe=t(8),Me=t(24),Ie=t(34),Be=Pe.TypeError;Re.exports=function(ke){if(Me(ke))return ke;throw Be(Ie(ke)+" is not a function")}},(Re,e,t)=>{var Pe=t(8),Me=Pe.String;Re.exports=function(Ie){try{return Me(Ie)}catch{return"Object"}}},(Re,e,t)=>{var Pe=t(8),Me=t(12),Ie=t(24),Be=t(23),ke=Pe.TypeError;Re.exports=function(_e,Ce){var Te,Se;if(Ce==="string"&&Ie(Te=_e.toString)&&!Be(Se=Me(Te,_e))||Ie(Te=_e.valueOf)&&!Be(Se=Me(Te,_e))||Ce!=="string"&&Ie(Te=_e.toString)&&!Be(Se=Me(Te,_e)))return Se;throw ke("Can't convert object to primitive value")}},(Re,e,t)=>{var Pe=t(8),Me=t(37),Ie=t(41),Be=t(43),ke=t(29),_e=t(28),Ce=Me("wks"),Te=Pe.Symbol,Se=Te&&Te.for,xe=_e?Te:Te&&Te.withoutSetter||Be;Re.exports=function(r){if(!Ie(Ce,r)||!(ke||typeof Ce[r]=="string")){var Oe="Symbol."+r;ke&&Ie(Te,r)?Ce[r]=Te[r]:_e&&Se?Ce[r]=Se(Oe):Ce[r]=xe(Oe)}return Ce[r]}},(Re,e,t)=>{var Pe=t(38),Me=t(39);(Re.exports=function(Ie,Be){return Me[Ie]||(Me[Ie]=Be!==void 0?Be:{})})("versions",[]).push({version:"3.21.1",mode:Pe?"pure":"global",copyright:"\xA9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.21.1/LICENSE",source:"https://github.com/zloirock/core-js"})},Re=>{Re.exports=!1},(Re,e,t)=>{var Pe=t(8),Me=t(40),Ie="__core-js_shared__",Be=Pe[Ie]||Me(Ie,{});Re.exports=Be},(Re,e,t)=>{var Pe=t(8),Me=Object.defineProperty;Re.exports=function(Ie,Be){try{Me(Pe,Ie,{value:Be,configurable:!0,writable:!0})}catch{Pe[Ie]=Be}return Be}},(Re,e,t)=>{var Pe=t(18),Me=t(42),Ie=Pe({}.hasOwnProperty);Re.exports=Object.hasOwn||function(ke,_e){return Ie(Me(ke),_e)}},(Re,e,t)=>{var Pe=t(8),Me=t(20),Ie=Pe.Object;Re.exports=function(Be){return Ie(Me(Be))}},(Re,e,t)=>{var Pe=t(18),Me=0,Ie=Math.random(),Be=Pe(1 .toString);Re.exports=function(ke){return"Symbol("+(ke===void 0?"":ke)+")_"+Be(++Me+Ie,36)}},(Re,e,t)=>{var Pe=t(10),Me=t(11),Ie=t(45);Re.exports=!Pe&&!Me(function(){return Object.defineProperty(Ie("div"),"a",{get:function(){return 7}}).a!=7})},(Re,e,t)=>{var Pe=t(8),Me=t(23),Ie=Pe.document,Be=Me(Ie)&&Me(Ie.createElement);Re.exports=function(ke){return Be?Ie.createElement(ke):{}}},(Re,e,t)=>{var Pe=t(10),Me=t(47),Ie=t(15);Re.exports=Pe?function(Be,ke,_e){return Me.f(Be,ke,Ie(1,_e))}:function(Be,ke,_e){return Be[ke]=_e,Be}},(Re,e,t)=>{var Pe=t(8),Me=t(10),Ie=t(44),Be=t(48),ke=t(49),_e=t(21),Ce=Pe.TypeError,Te=Object.defineProperty,Se=Object.getOwnPropertyDescriptor,xe="enumerable",r="configurable",Oe="writable";e.f=Me?Be?function(Ae,Fe,De){if(ke(Ae),Fe=_e(Fe),ke(De),typeof Ae=="function"&&Fe==="prototype"&&"value"in De&&Oe in De&&!De[Oe]){var ze=Se(Ae,Fe);ze&&ze[Oe]&&(Ae[Fe]=De.value,De={configurable:r in De?De[r]:ze[r],enumerable:xe in De?De[xe]:ze[xe],writable:!1})}return Te(Ae,Fe,De)}:Te:function(Ae,Fe,De){if(ke(Ae),Fe=_e(Fe),ke(De),Ie)try{return Te(Ae,Fe,De)}catch{}if("get"in De||"set"in De)throw Ce("Accessors not supported");return"value"in De&&(Ae[Fe]=De.value),Ae}},(Re,e,t)=>{var Pe=t(10),Me=t(11);Re.exports=Pe&&Me(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42})},(Re,e,t)=>{var Pe=t(8),Me=t(23),Ie=Pe.String,Be=Pe.TypeError;Re.exports=function(ke){if(Me(ke))return ke;throw Be(Ie(ke)+" is not an object")}},(Re,e,t)=>{var Pe=t(8),Me=t(24),Ie=t(41),Be=t(46),ke=t(40),_e=t(51),Ce=t(52),Te=t(56).CONFIGURABLE,Se=Ce.get,xe=Ce.enforce,r=String(String).split("String");(Re.exports=function(Oe,Ee,Ae,Fe){var De=Fe?!!Fe.unsafe:!1,ze=Fe?!!Fe.enumerable:!1,je=Fe?!!Fe.noTargetGet:!1,We=Fe&&Fe.name!==void 0?Fe.name:Ee,Ge;if(Me(Ae)&&(String(We).slice(0,7)==="Symbol("&&(We="["+String(We).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!Ie(Ae,"name")||Te&&Ae.name!==We)&&Be(Ae,"name",We),Ge=xe(Ae),Ge.source||(Ge.source=r.join(typeof We=="string"?We:""))),Oe===Pe){ze?Oe[Ee]=Ae:ke(Ee,Ae);return}else De?!je&&Oe[Ee]&&(ze=!0):delete Oe[Ee];ze?Oe[Ee]=Ae:Be(Oe,Ee,Ae)})(Function.prototype,"toString",function(){return Me(this)&&Se(this).source||_e(this)})},(Re,e,t)=>{var Pe=t(18),Me=t(24),Ie=t(39),Be=Pe(Function.toString);Me(Ie.inspectSource)||(Ie.inspectSource=function(ke){return Be(ke)}),Re.exports=Ie.inspectSource},(Re,e,t)=>{var Pe=t(53),Me=t(8),Ie=t(18),Be=t(23),ke=t(46),_e=t(41),Ce=t(39),Te=t(54),Se=t(55),xe="Object already initialized",r=Me.TypeError,Oe=Me.WeakMap,Ee,Ae,Fe,De=function(Ke){return Fe(Ke)?Ae(Ke):Ee(Ke,{})},ze=function(Ke){return function(er){var Qe;if(!Be(er)||(Qe=Ae(er)).type!==Ke)throw r("Incompatible receiver, "+Ke+" required");return Qe}};if(Pe||Ce.state){var je=Ce.state||(Ce.state=new Oe),We=Ie(je.get),Ge=Ie(je.has),Ye=Ie(je.set);Ee=function(Ke,er){if(Ge(je,Ke))throw new r(xe);return er.facade=Ke,Ye(je,Ke,er),er},Ae=function(Ke){return We(je,Ke)||{}},Fe=function(Ke){return Ge(je,Ke)}}else{var Xe=Te("state");Se[Xe]=!0,Ee=function(Ke,er){if(_e(Ke,Xe))throw new r(xe);return er.facade=Ke,ke(Ke,Xe,er),er},Ae=function(Ke){return _e(Ke,Xe)?Ke[Xe]:{}},Fe=function(Ke){return _e(Ke,Xe)}}Re.exports={set:Ee,get:Ae,has:Fe,enforce:De,getterFor:ze}},(Re,e,t)=>{var Pe=t(8),Me=t(24),Ie=t(51),Be=Pe.WeakMap;Re.exports=Me(Be)&&/native code/.test(Ie(Be))},(Re,e,t)=>{var Pe=t(37),Me=t(43),Ie=Pe("keys");Re.exports=function(Be){return Ie[Be]||(Ie[Be]=Me(Be))}},Re=>{Re.exports={}},(Re,e,t)=>{var Pe=t(10),Me=t(41),Ie=Function.prototype,Be=Pe&&Object.getOwnPropertyDescriptor,ke=Me(Ie,"name"),_e=ke&&function(){}.name==="something",Ce=ke&&(!Pe||Pe&&Be(Ie,"name").configurable);Re.exports={EXISTS:ke,PROPER:_e,CONFIGURABLE:Ce}},(Re,e,t)=>{var Pe=t(41),Me=t(58),Ie=t(9),Be=t(47);Re.exports=function(ke,_e,Ce){for(var Te=Me(_e),Se=Be.f,xe=Ie.f,r=0;r<Te.length;r++){var Oe=Te[r];!Pe(ke,Oe)&&!(Ce&&Pe(Ce,Oe))&&Se(ke,Oe,xe(_e,Oe))}}},(Re,e,t)=>{var Pe=t(26),Me=t(18),Ie=t(59),Be=t(67),ke=t(49),_e=Me([].concat);Re.exports=Pe("Reflect","ownKeys")||function(Te){var Se=Ie.f(ke(Te)),xe=Be.f;return xe?_e(Se,xe(Te)):Se}},(Re,e,t)=>{var Pe=t(60),Me=t(66),Ie=Me.concat("length","prototype");e.f=Object.getOwnPropertyNames||function(ke){return Pe(ke,Ie)}},(Re,e,t)=>{var Pe=t(18),Me=t(41),Ie=t(16),Be=t(61).indexOf,ke=t(55),_e=Pe([].push);Re.exports=function(Ce,Te){var Se=Ie(Ce),xe=0,r=[],Oe;for(Oe in Se)!Me(ke,Oe)&&Me(Se,Oe)&&_e(r,Oe);for(;Te.length>xe;)Me(Se,Oe=Te[xe++])&&(~Be(r,Oe)||_e(r,Oe));return r}},(Re,e,t)=>{var Pe=t(16),Me=t(62),Ie=t(64),Be=function(ke){return function(_e,Ce,Te){var Se=Pe(_e),xe=Ie(Se),r=Me(Te,xe),Oe;if(ke&&Ce!=Ce){for(;xe>r;)if(Oe=Se[r++],Oe!=Oe)return!0}else for(;xe>r;r++)if((ke||r in Se)&&Se[r]===Ce)return ke||r||0;return!ke&&-1}};Re.exports={includes:Be(!0),indexOf:Be(!1)}},(Re,e,t)=>{var Pe=t(63),Me=Math.max,Ie=Math.min;Re.exports=function(Be,ke){var _e=Pe(Be);return _e<0?Me(_e+ke,0):Ie(_e,ke)}},Re=>{var e=Math.ceil,t=Math.floor;Re.exports=function(Pe){var Me=+Pe;return Me!==Me||Me===0?0:(Me>0?t:e)(Me)}},(Re,e,t)=>{var Pe=t(65);Re.exports=function(Me){return Pe(Me.length)}},(Re,e,t)=>{var Pe=t(63),Me=Math.min;Re.exports=function(Ie){return Ie>0?Me(Pe(Ie),9007199254740991):0}},Re=>{Re.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},(Re,e)=>{e.f=Object.getOwnPropertySymbols},(Re,e,t)=>{var Pe=t(11),Me=t(24),Ie=/#|\.prototype\./,Be=function(Se,xe){var r=_e[ke(Se)];return r==Te?!0:r==Ce?!1:Me(xe)?Pe(xe):!!xe},ke=Be.normalize=function(Se){return String(Se).replace(Ie,".").toLowerCase()},_e=Be.data={},Ce=Be.NATIVE="N",Te=Be.POLYFILL="P";Re.exports=Be},(Re,e,t)=>{var Pe=t(8),Me=t(41),Ie=t(24),Be=t(42),ke=t(54),_e=t(70),Ce=ke("IE_PROTO"),Te=Pe.Object,Se=Te.prototype;Re.exports=_e?Te.getPrototypeOf:function(xe){var r=Be(xe);if(Me(r,Ce))return r[Ce];var Oe=r.constructor;return Ie(Oe)&&r instanceof Oe?Oe.prototype:r instanceof Te?Se:null}},(Re,e,t)=>{var Pe=t(11);Re.exports=!Pe(function(){function Me(){}return Me.prototype.constructor=null,Object.getPrototypeOf(new Me)!==Me.prototype})},(Re,e,t)=>{var Pe=t(18),Me=t(49),Ie=t(72);Re.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var Be=!1,ke={},_e;try{_e=Pe(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),_e(ke,[]),Be=ke instanceof Array}catch{}return function(Te,Se){return Me(Te),Ie(Se),Be?_e(Te,Se):Te.__proto__=Se,Te}}():void 0)},(Re,e,t)=>{var Pe=t(8),Me=t(24),Ie=Pe.String,Be=Pe.TypeError;Re.exports=function(ke){if(typeof ke=="object"||Me(ke))return ke;throw Be("Can't set "+Ie(ke)+" as a prototype")}},(Re,e,t)=>{var Pe=t(49),Me=t(74),Ie=t(66),Be=t(55),ke=t(76),_e=t(45),Ce=t(54),Te=">",Se="<",xe="prototype",r="script",Oe=Ce("IE_PROTO"),Ee=function(){},Ae=function(We){return Se+r+Te+We+Se+"/"+r+Te},Fe=function(We){We.write(Ae("")),We.close();var Ge=We.parentWindow.Object;return We=null,Ge},De=function(){var We=_e("iframe"),Ge="java"+r+":",Ye;return We.style.display="none",ke.appendChild(We),We.src=String(Ge),Ye=We.contentWindow.document,Ye.open(),Ye.write(Ae("document.F=Object")),Ye.close(),Ye.F},ze,je=function(){try{ze=new ActiveXObject("htmlfile")}catch{}je=typeof document!="undefined"?document.domain&&ze?Fe(ze):De():Fe(ze);for(var We=Ie.length;We--;)delete je[xe][Ie[We]];return je()};Be[Oe]=!0,Re.exports=Object.create||function(Ge,Ye){var Xe;return Ge!==null?(Ee[xe]=Pe(Ge),Xe=new Ee,Ee[xe]=null,Xe[Oe]=Ge):Xe=je(),Ye===void 0?Xe:Me.f(Xe,Ye)}},(Re,e,t)=>{var Pe=t(10),Me=t(48),Ie=t(47),Be=t(49),ke=t(16),_e=t(75);e.f=Pe&&!Me?Object.defineProperties:function(Te,Se){Be(Te);for(var xe=ke(Se),r=_e(Se),Oe=r.length,Ee=0,Ae;Oe>Ee;)Ie.f(Te,Ae=r[Ee++],xe[Ae]);return Te}},(Re,e,t)=>{var Pe=t(60),Me=t(66);Re.exports=Object.keys||function(Be){return Pe(Be,Me)}},(Re,e,t)=>{var Pe=t(26);Re.exports=Pe("document","documentElement")},(Re,e,t)=>{var Pe=t(18),Me=Pe("".replace),Ie=function(_e){return String(Error(_e).stack)}("zxcasd"),Be=/\n\s*at [^:]*:[^\n]*/,ke=Be.test(Ie);Re.exports=function(_e,Ce){if(ke&&typeof _e=="string")for(;Ce--;)_e=Me(_e,Be,"");return _e}},(Re,e,t)=>{var Pe=t(23),Me=t(46);Re.exports=function(Ie,Be){Pe(Be)&&"cause"in Be&&Me(Ie,"cause",Be.cause)}},(Re,e,t)=>{var Pe=t(8),Me=t(80),Ie=t(12),Be=t(49),ke=t(34),_e=t(81),Ce=t(64),Te=t(27),Se=t(83),xe=t(84),r=t(87),Oe=Pe.TypeError,Ee=function(Fe,De){this.stopped=Fe,this.result=De},Ae=Ee.prototype;Re.exports=function(Fe,De,ze){var je=ze&&ze.that,We=!!(ze&&ze.AS_ENTRIES),Ge=!!(ze&&ze.IS_ITERATOR),Ye=!!(ze&&ze.INTERRUPTED),Xe=Me(De,je),Ke,er,Qe,nr,ir,cr,br,wr=function(Sr){return Ke&&r(Ke,"normal",Sr),new Ee(!0,Sr)},xr=function(Sr){return We?(Be(Sr),Ye?Xe(Sr[0],Sr[1],wr):Xe(Sr[0],Sr[1])):Ye?Xe(Sr,wr):Xe(Sr)};if(Ge)Ke=Fe;else{if(er=xe(Fe),!er)throw Oe(ke(Fe)+" is not iterable");if(_e(er)){for(Qe=0,nr=Ce(Fe);nr>Qe;Qe++)if(ir=xr(Fe[Qe]),ir&&Te(Ae,ir))return ir;return new Ee(!1)}Ke=Se(Fe,er)}for(cr=Ke.next;!(br=Ie(cr,Ke)).done;){try{ir=xr(br.value)}catch(Sr){r(Ke,"throw",Sr)}if(typeof ir=="object"&&ir&&Te(Ae,ir))return ir}return new Ee(!1)}},(Re,e,t)=>{var Pe=t(18),Me=t(33),Ie=t(13),Be=Pe(Pe.bind);Re.exports=function(ke,_e){return Me(ke),_e===void 0?ke:Ie?Be(ke,_e):function(){return ke.apply(_e,arguments)}}},(Re,e,t)=>{var Pe=t(36),Me=t(82),Ie=Pe("iterator"),Be=Array.prototype;Re.exports=function(ke){return ke!==void 0&&(Me.Array===ke||Be[Ie]===ke)}},Re=>{Re.exports={}},(Re,e,t)=>{var Pe=t(8),Me=t(12),Ie=t(33),Be=t(49),ke=t(34),_e=t(84),Ce=Pe.TypeError;Re.exports=function(Te,Se){var xe=arguments.length<2?_e(Te):Se;if(Ie(xe))return Be(Me(xe,Te));throw Ce(ke(Te)+" is not iterable")}},(Re,e,t)=>{var Pe=t(85),Me=t(32),Ie=t(82),Be=t(36),ke=Be("iterator");Re.exports=function(_e){if(_e!=null)return Me(_e,ke)||Me(_e,"@@iterator")||Ie[Pe(_e)]}},(Re,e,t)=>{var Pe=t(8),Me=t(86),Ie=t(24),Be=t(19),ke=t(36),_e=ke("toStringTag"),Ce=Pe.Object,Te=Be(function(){return arguments}())=="Arguments",Se=function(xe,r){try{return xe[r]}catch{}};Re.exports=Me?Be:function(xe){var r,Oe,Ee;return xe===void 0?"Undefined":xe===null?"Null":typeof(Oe=Se(r=Ce(xe),_e))=="string"?Oe:Te?Be(r):(Ee=Be(r))=="Object"&&Ie(r.callee)?"Arguments":Ee}},(Re,e,t)=>{var Pe=t(36),Me=Pe("toStringTag"),Ie={};Ie[Me]="z",Re.exports=String(Ie)==="[object z]"},(Re,e,t)=>{var Pe=t(12),Me=t(49),Ie=t(32);Re.exports=function(Be,ke,_e){var Ce,Te;Me(Be);try{if(Ce=Ie(Be,"return"),!Ce){if(ke==="throw")throw _e;return _e}Ce=Pe(Ce,Be)}catch(Se){Te=!0,Ce=Se}if(ke==="throw")throw _e;if(Te)throw Ce;return Me(Ce),_e}},(Re,e,t)=>{var Pe=t(89);Re.exports=function(Me,Ie){return Me===void 0?arguments.length<2?"":Ie:Pe(Me)}},(Re,e,t)=>{var Pe=t(8),Me=t(85),Ie=Pe.String;Re.exports=function(Be){if(Me(Be)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return Ie(Be)}},(Re,e,t)=>{var Pe=t(11),Me=t(15);Re.exports=!Pe(function(){var Ie=Error("a");return"stack"in Ie?(Object.defineProperty(Ie,"stack",Me(1,7)),Ie.stack!==7):!0})},(Re,e,t)=>{var Pe=t(16),Me=t(92),Ie=t(82),Be=t(52),ke=t(47).f,_e=t(93),Ce=t(38),Te=t(10),Se="Array Iterator",xe=Be.set,r=Be.getterFor(Se);Re.exports=_e(Array,"Array",function(Ee,Ae){xe(this,{type:Se,target:Pe(Ee),index:0,kind:Ae})},function(){var Ee=r(this),Ae=Ee.target,Fe=Ee.kind,De=Ee.index++;return!Ae||De>=Ae.length?(Ee.target=void 0,{value:void 0,done:!0}):Fe=="keys"?{value:De,done:!1}:Fe=="values"?{value:Ae[De],done:!1}:{value:[De,Ae[De]],done:!1}},"values");var Oe=Ie.Arguments=Ie.Array;if(Me("keys"),Me("values"),Me("entries"),!Ce&&Te&&Oe.name!=="values")try{ke(Oe,"name",{value:"values"})}catch{}},(Re,e,t)=>{var Pe=t(36),Me=t(73),Ie=t(47),Be=Pe("unscopables"),ke=Array.prototype;ke[Be]==null&&Ie.f(ke,Be,{configurable:!0,value:Me(null)}),Re.exports=function(_e){ke[Be][_e]=!0}},(Re,e,t)=>{var Pe=t(7),Me=t(12),Ie=t(38),Be=t(56),ke=t(24),_e=t(94),Ce=t(69),Te=t(71),Se=t(96),xe=t(46),r=t(50),Oe=t(36),Ee=t(82),Ae=t(95),Fe=Be.PROPER,De=Be.CONFIGURABLE,ze=Ae.IteratorPrototype,je=Ae.BUGGY_SAFARI_ITERATORS,We=Oe("iterator"),Ge="keys",Ye="values",Xe="entries",Ke=function(){return this};Re.exports=function(er,Qe,nr,ir,cr,br,wr){_e(nr,Qe,ir);var xr=function(mr){if(mr===cr&&Ve)return Ve;if(!je&&mr in fr)return fr[mr];switch(mr){case Ge:return function(){return new nr(this,mr)};case Ye:return function(){return new nr(this,mr)};case Xe:return function(){return new nr(this,mr)}}return function(){return new nr(this)}},Sr=Qe+" Iterator",lr=!1,fr=er.prototype,$e=fr[We]||fr["@@iterator"]||cr&&fr[cr],Ve=!je&&$e||xr(cr),Je=Qe=="Array"&&fr.entries||$e,Ze,St,vr;if(Je&&(Ze=Ce(Je.call(new er)),Ze!==Object.prototype&&Ze.next&&(!Ie&&Ce(Ze)!==ze&&(Te?Te(Ze,ze):ke(Ze[We])||r(Ze,We,Ke)),Se(Ze,Sr,!0,!0),Ie&&(Ee[Sr]=Ke))),Fe&&cr==Ye&&$e&&$e.name!==Ye&&(!Ie&&De?xe(fr,"name",Ye):(lr=!0,Ve=function(){return Me($e,this)})),cr)if(St={values:xr(Ye),keys:br?Ve:xr(Ge),entries:xr(Xe)},wr)for(vr in St)(je||lr||!(vr in fr))&&r(fr,vr,St[vr]);else Pe({target:Qe,proto:!0,forced:je||lr},St);return(!Ie||wr)&&fr[We]!==Ve&&r(fr,We,Ve,{name:cr}),Ee[Qe]=Ve,St}},(Re,e,t)=>{var Pe=t(95).IteratorPrototype,Me=t(73),Ie=t(15),Be=t(96),ke=t(82),_e=function(){return this};Re.exports=function(Ce,Te,Se,xe){var r=Te+" Iterator";return Ce.prototype=Me(Pe,{next:Ie(+!xe,Se)}),Be(Ce,r,!1,!0),ke[r]=_e,Ce}},(Re,e,t)=>{var Pe=t(11),Me=t(24),Ie=t(73),Be=t(69),ke=t(50),_e=t(36),Ce=t(38),Te=_e("iterator"),Se=!1,xe,r,Oe;[].keys&&(Oe=[].keys(),"next"in Oe?(r=Be(Be(Oe)),r!==Object.prototype&&(xe=r)):Se=!0);var Ee=xe==null||Pe(function(){var Ae={};return xe[Te].call(Ae)!==Ae});Ee?xe={}:Ce&&(xe=Ie(xe)),Me(xe[Te])||ke(xe,Te,function(){return this}),Re.exports={IteratorPrototype:xe,BUGGY_SAFARI_ITERATORS:Se}},(Re,e,t)=>{var Pe=t(47).f,Me=t(41),Ie=t(36),Be=Ie("toStringTag");Re.exports=function(ke,_e,Ce){ke&&!Ce&&(ke=ke.prototype),ke&&!Me(ke,Be)&&Pe(ke,Be,{configurable:!0,value:_e})}},(Re,e,t)=>{var Pe=t(86),Me=t(50),Ie=t(98);Pe||Me(Object.prototype,"toString",Ie,{unsafe:!0})},(Re,e,t)=>{var Pe=t(86),Me=t(85);Re.exports=Pe?{}.toString:function(){return"[object "+Me(this)+"]"}},(Re,e,t)=>{var Pe=t(7),Me=t(38),Ie=t(8),Be=t(26),ke=t(12),_e=t(100),Ce=t(50),Te=t(101),Se=t(71),xe=t(96),r=t(102),Oe=t(33),Ee=t(24),Ae=t(23),Fe=t(103),De=t(51),ze=t(79),je=t(104),We=t(105),Ge=t(108).set,Ye=t(114),Xe=t(117),Ke=t(119),er=t(118),Qe=t(120),nr=t(121),ir=t(52),cr=t(68),br=t(36),wr=t(122),xr=t(113),Sr=t(30),lr=br("species"),fr="Promise",$e=ir.getterFor(fr),Ve=ir.set,Je=ir.getterFor(fr),Ze=_e&&_e.prototype,St=_e,vr=Ze,mr=Ie.TypeError,Cr=Ie.document,_r=Ie.process,pr=er.f,dr=pr,ur=!!(Cr&&Cr.createEvent&&Ie.dispatchEvent),rr=Ee(Ie.PromiseRejectionEvent),gr="unhandledrejection",hr="rejectionhandled",sr=0,Ar=1,Or=2,Mr=1,Gr=2,zr=!1,Ir,Qr,rn,sn,pn=cr(fr,function(){var $r=De(St),Kr=$r!==String(St);if(!Kr&&Sr===66||Me&&!vr.finally)return!0;if(Sr>=51&&/native code/.test($r))return!1;var tn=new St(function(bn){bn(1)}),yn=function(bn){bn(function(){},function(){})},Pn=tn.constructor={};return Pn[lr]=yn,zr=tn.then(function(){})instanceof yn,zr?!Kr&&wr&&!rr:!0}),mn=pn||!je(function($r){St.all($r).catch(function(){})}),Sn=function($r){var Kr;return Ae($r)&&Ee(Kr=$r.then)?Kr:!1},Cn=function($r,Kr){var tn=Kr.value,yn=Kr.state==Ar,Pn=yn?$r.ok:$r.fail,bn=$r.resolve,dn=$r.reject,Tn=$r.domain,xn,Nn,In;try{Pn?(yn||(Kr.rejection===Gr&&Br(Kr),Kr.rejection=Mr),Pn===!0?xn=tn:(Tn&&Tn.enter(),xn=Pn(tn),Tn&&(Tn.exit(),In=!0)),xn===$r.promise?dn(mr("Promise-chain cycle")):(Nn=Sn(xn))?ke(Nn,xn,bn,dn):bn(xn)):dn(tn)}catch(Bn){Tn&&!In&&Tn.exit(),dn(Bn)}},Xr=function($r,Kr){$r.notified||($r.notified=!0,Ye(function(){for(var tn=$r.reactions,yn;yn=tn.get();)Cn(yn,$r);$r.notified=!1,Kr&&!$r.rejection&&Rr($r)}))},Er=function($r,Kr,tn){var yn,Pn;ur?(yn=Cr.createEvent("Event"),yn.promise=Kr,yn.reason=tn,yn.initEvent($r,!1,!0),Ie.dispatchEvent(yn)):yn={promise:Kr,reason:tn},!rr&&(Pn=Ie["on"+$r])?Pn(yn):$r===gr&&Ke("Unhandled promise rejection",tn)},Rr=function($r){ke(Ge,Ie,function(){var Kr=$r.facade,tn=$r.value,yn=Dr($r),Pn;if(yn&&(Pn=Qe(function(){xr?_r.emit("unhandledRejection",tn,Kr):Er(gr,Kr,tn)}),$r.rejection=xr||Dr($r)?Gr:Mr,Pn.error))throw Pn.value})},Dr=function($r){return $r.rejection!==Mr&&!$r.parent},Br=function($r){ke(Ge,Ie,function(){var Kr=$r.facade;xr?_r.emit("rejectionHandled",Kr):Er(hr,Kr,$r.value)})},Wr=function($r,Kr,tn){return function(yn){$r(Kr,yn,tn)}},Ur=function($r,Kr,tn){$r.done||($r.done=!0,tn&&($r=tn),$r.value=Kr,$r.state=Or,Xr($r,!0))},Hr=function($r,Kr,tn){if(!$r.done){$r.done=!0,tn&&($r=tn);try{if($r.facade===Kr)throw mr("Promise can't be resolved itself");var yn=Sn(Kr);yn?Ye(function(){var Pn={done:!1};try{ke(yn,Kr,Wr(Hr,Pn,$r),Wr(Ur,Pn,$r))}catch(bn){Ur(Pn,bn,$r)}}):($r.value=Kr,$r.state=Ar,Xr($r,!1))}catch(Pn){Ur({done:!1},Pn,$r)}}};if(pn&&(St=function(Kr){Fe(this,vr),Oe(Kr),ke(Ir,this);var tn=$e(this);try{Kr(Wr(Hr,tn),Wr(Ur,tn))}catch(yn){Ur(tn,yn)}},vr=St.prototype,Ir=function(Kr){Ve(this,{type:fr,done:!1,notified:!1,parent:!1,reactions:new nr,rejection:!1,state:sr,value:void 0})},Ir.prototype=Te(vr,{then:function(Kr,tn){var yn=Je(this),Pn=pr(We(this,St));return yn.parent=!0,Pn.ok=Ee(Kr)?Kr:!0,Pn.fail=Ee(tn)&&tn,Pn.domain=xr?_r.domain:void 0,yn.state==sr?yn.reactions.add(Pn):Ye(function(){Cn(Pn,yn)}),Pn.promise},catch:function($r){return this.then(void 0,$r)}}),Qr=function(){var $r=new Ir,Kr=$e($r);this.promise=$r,this.resolve=Wr(Hr,Kr),this.reject=Wr(Ur,Kr)},er.f=pr=function($r){return $r===St||$r===rn?new Qr($r):dr($r)},!Me&&Ee(_e)&&Ze!==Object.prototype)){sn=Ze.then,zr||(Ce(Ze,"then",function(Kr,tn){var yn=this;return new St(function(Pn,bn){ke(sn,yn,Pn,bn)}).then(Kr,tn)},{unsafe:!0}),Ce(Ze,"catch",vr.catch,{unsafe:!0}));try{delete Ze.constructor}catch{}Se&&Se(Ze,vr)}Pe({global:!0,wrap:!0,forced:pn},{Promise:St}),xe(St,fr,!1,!0),r(fr),rn=Be(fr),Pe({target:fr,stat:!0,forced:pn},{reject:function(Kr){var tn=pr(this);return ke(tn.reject,void 0,Kr),tn.promise}}),Pe({target:fr,stat:!0,forced:Me||pn},{resolve:function(Kr){return Xe(Me&&this===rn?St:this,Kr)}}),Pe({target:fr,stat:!0,forced:mn},{all:function(Kr){var tn=this,yn=pr(tn),Pn=yn.resolve,bn=yn.reject,dn=Qe(function(){var Tn=Oe(tn.resolve),xn=[],Nn=0,In=1;ze(Kr,function(Bn){var Fn=Nn++,qn=!1;In++,ke(Tn,tn,Bn).then(function(ni){qn||(qn=!0,xn[Fn]=ni,--In||Pn(xn))},bn)}),--In||Pn(xn)});return dn.error&&bn(dn.value),yn.promise},race:function(Kr){var tn=this,yn=pr(tn),Pn=yn.reject,bn=Qe(function(){var dn=Oe(tn.resolve);ze(Kr,function(Tn){ke(dn,tn,Tn).then(yn.resolve,Pn)})});return bn.error&&Pn(bn.value),yn.promise}})},(Re,e,t)=>{var Pe=t(8);Re.exports=Pe.Promise},(Re,e,t)=>{var Pe=t(50);Re.exports=function(Me,Ie,Be){for(var ke in Ie)Pe(Me,ke,Ie[ke],Be);return Me}},(Re,e,t)=>{var Pe=t(26),Me=t(47),Ie=t(36),Be=t(10),ke=Ie("species");Re.exports=function(_e){var Ce=Pe(_e),Te=Me.f;Be&&Ce&&!Ce[ke]&&Te(Ce,ke,{configurable:!0,get:function(){return this}})}},(Re,e,t)=>{var Pe=t(8),Me=t(27),Ie=Pe.TypeError;Re.exports=function(Be,ke){if(Me(ke,Be))return Be;throw Ie("Incorrect invocation")}},(Re,e,t)=>{var Pe=t(36),Me=Pe("iterator"),Ie=!1;try{var Be=0,ke={next:function(){return{done:!!Be++}},return:function(){Ie=!0}};ke[Me]=function(){return this},Array.from(ke,function(){throw 2})}catch{}Re.exports=function(_e,Ce){if(!Ce&&!Ie)return!1;var Te=!1;try{var Se={};Se[Me]=function(){return{next:function(){return{done:Te=!0}}}},_e(Se)}catch{}return Te}},(Re,e,t)=>{var Pe=t(49),Me=t(106),Ie=t(36),Be=Ie("species");Re.exports=function(ke,_e){var Ce=Pe(ke).constructor,Te;return Ce===void 0||(Te=Pe(Ce)[Be])==null?_e:Me(Te)}},(Re,e,t)=>{var Pe=t(8),Me=t(107),Ie=t(34),Be=Pe.TypeError;Re.exports=function(ke){if(Me(ke))return ke;throw Be(Ie(ke)+" is not a constructor")}},(Re,e,t)=>{var Pe=t(18),Me=t(11),Ie=t(24),Be=t(85),ke=t(26),_e=t(51),Ce=function(){},Te=[],Se=ke("Reflect","construct"),xe=/^\s*(?:class|function)\b/,r=Pe(xe.exec),Oe=!xe.exec(Ce),Ee=function(De){if(!Ie(De))return!1;try{return Se(Ce,Te,De),!0}catch{return!1}},Ae=function(De){if(!Ie(De))return!1;switch(Be(De)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Oe||!!r(xe,_e(De))}catch{return!0}};Ae.sham=!0,Re.exports=!Se||Me(function(){var Fe;return Ee(Ee.call)||!Ee(Object)||!Ee(function(){Fe=!0})||Fe})?Ae:Ee},(Re,e,t)=>{var Pe=t(8),Me=t(109),Ie=t(80),Be=t(24),ke=t(41),_e=t(11),Ce=t(76),Te=t(110),Se=t(45),xe=t(111),r=t(112),Oe=t(113),Ee=Pe.setImmediate,Ae=Pe.clearImmediate,Fe=Pe.process,De=Pe.Dispatch,ze=Pe.Function,je=Pe.MessageChannel,We=Pe.String,Ge=0,Ye={},Xe="onreadystatechange",Ke,er,Qe,nr;try{Ke=Pe.location}catch{}var ir=function(xr){if(ke(Ye,xr)){var Sr=Ye[xr];delete Ye[xr],Sr()}},cr=function(xr){return function(){ir(xr)}},br=function(xr){ir(xr.data)},wr=function(xr){Pe.postMessage(We(xr),Ke.protocol+"//"+Ke.host)};(!Ee||!Ae)&&(Ee=function(Sr){xe(arguments.length,1);var lr=Be(Sr)?Sr:ze(Sr),fr=Te(arguments,1);return Ye[++Ge]=function(){Me(lr,void 0,fr)},er(Ge),Ge},Ae=function(Sr){delete Ye[Sr]},Oe?er=function(xr){Fe.nextTick(cr(xr))}:De&&De.now?er=function(xr){De.now(cr(xr))}:je&&!r?(Qe=new je,nr=Qe.port2,Qe.port1.onmessage=br,er=Ie(nr.postMessage,nr)):Pe.addEventListener&&Be(Pe.postMessage)&&!Pe.importScripts&&Ke&&Ke.protocol!=="file:"&&!_e(wr)?(er=wr,Pe.addEventListener("message",br,!1)):Xe in Se("script")?er=function(xr){Ce.appendChild(Se("script"))[Xe]=function(){Ce.removeChild(this),ir(xr)}}:er=function(xr){setTimeout(cr(xr),0)}),Re.exports={set:Ee,clear:Ae}},(Re,e,t)=>{var Pe=t(13),Me=Function.prototype,Ie=Me.apply,Be=Me.call;Re.exports=typeof Reflect=="object"&&Reflect.apply||(Pe?Be.bind(Ie):function(){return Be.apply(Ie,arguments)})},(Re,e,t)=>{var Pe=t(18);Re.exports=Pe([].slice)},(Re,e,t)=>{var Pe=t(8),Me=Pe.TypeError;Re.exports=function(Ie,Be){if(Ie<Be)throw Me("Not enough arguments");return Ie}},(Re,e,t)=>{var Pe=t(31);Re.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(Pe)},(Re,e,t)=>{var Pe=t(19),Me=t(8);Re.exports=Pe(Me.process)=="process"},(Re,e,t)=>{var Pe=t(8),Me=t(80),Ie=t(9).f,Be=t(108).set,ke=t(112),_e=t(115),Ce=t(116),Te=t(113),Se=Pe.MutationObserver||Pe.WebKitMutationObserver,xe=Pe.document,r=Pe.process,Oe=Pe.Promise,Ee=Ie(Pe,"queueMicrotask"),Ae=Ee&&Ee.value,Fe,De,ze,je,We,Ge,Ye,Xe;Ae||(Fe=function(){var Ke,er;for(Te&&(Ke=r.domain)&&Ke.exit();De;){er=De.fn,De=De.next;try{er()}catch(Qe){throw De?je():ze=void 0,Qe}}ze=void 0,Ke&&Ke.enter()},!ke&&!Te&&!Ce&&Se&&xe?(We=!0,Ge=xe.createTextNode(""),new Se(Fe).observe(Ge,{characterData:!0}),je=function(){Ge.data=We=!We}):!_e&&Oe&&Oe.resolve?(Ye=Oe.resolve(void 0),Ye.constructor=Oe,Xe=Me(Ye.then,Ye),je=function(){Xe(Fe)}):Te?je=function(){r.nextTick(Fe)}:(Be=Me(Be,Pe),je=function(){Be(Fe)})),Re.exports=Ae||function(Ke){var er={fn:Ke,next:void 0};ze&&(ze.next=er),De||(De=er,je()),ze=er}},(Re,e,t)=>{var Pe=t(31),Me=t(8);Re.exports=/ipad|iphone|ipod/i.test(Pe)&&Me.Pebble!==void 0},(Re,e,t)=>{var Pe=t(31);Re.exports=/web0s(?!.*chrome)/i.test(Pe)},(Re,e,t)=>{var Pe=t(49),Me=t(23),Ie=t(118);Re.exports=function(Be,ke){if(Pe(Be),Me(ke)&&ke.constructor===Be)return ke;var _e=Ie.f(Be),Ce=_e.resolve;return Ce(ke),_e.promise}},(Re,e,t)=>{var Pe=t(33),Me=function(Ie){var Be,ke;this.promise=new Ie(function(_e,Ce){if(Be!==void 0||ke!==void 0)throw TypeError("Bad Promise constructor");Be=_e,ke=Ce}),this.resolve=Pe(Be),this.reject=Pe(ke)};Re.exports.f=function(Ie){return new Me(Ie)}},(Re,e,t)=>{var Pe=t(8);Re.exports=function(Me,Ie){var Be=Pe.console;Be&&Be.error&&(arguments.length==1?Be.error(Me):Be.error(Me,Ie))}},Re=>{Re.exports=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}}},Re=>{var e=function(){this.head=null,this.tail=null};e.prototype={add:function(t){var Pe={item:t,next:null};this.head?this.tail.next=Pe:this.head=Pe,this.tail=Pe},get:function(){var t=this.head;if(t)return this.head=t.next,this.tail===t&&(this.tail=null),t.item}},Re.exports=e},Re=>{Re.exports=typeof window=="object"},(Re,e,t)=>{var Pe=t(7),Me=t(12),Ie=t(33),Be=t(118),ke=t(120),_e=t(79);Pe({target:"Promise",stat:!0},{allSettled:function(Te){var Se=this,xe=Be.f(Se),r=xe.resolve,Oe=xe.reject,Ee=ke(function(){var Ae=Ie(Se.resolve),Fe=[],De=0,ze=1;_e(Te,function(je){var We=De++,Ge=!1;ze++,Me(Ae,Se,je).then(function(Ye){Ge||(Ge=!0,Fe[We]={status:"fulfilled",value:Ye},--ze||r(Fe))},function(Ye){Ge||(Ge=!0,Fe[We]={status:"rejected",reason:Ye},--ze||r(Fe))})}),--ze||r(Fe)});return Ee.error&&Oe(Ee.value),xe.promise}})},(Re,e,t)=>{var Pe=t(7),Me=t(33),Ie=t(26),Be=t(12),ke=t(118),_e=t(120),Ce=t(79),Te="No one promise resolved";Pe({target:"Promise",stat:!0},{any:function(xe){var r=this,Oe=Ie("AggregateError"),Ee=ke.f(r),Ae=Ee.resolve,Fe=Ee.reject,De=_e(function(){var ze=Me(r.resolve),je=[],We=0,Ge=1,Ye=!1;Ce(xe,function(Xe){var Ke=We++,er=!1;Ge++,Be(ze,r,Xe).then(function(Qe){er||Ye||(Ye=!0,Ae(Qe))},function(Qe){er||Ye||(er=!0,je[Ke]=Qe,--Ge||Fe(new Oe(je,Te)))})}),--Ge||Fe(new Oe(je,Te))});return De.error&&Fe(De.value),Ee.promise}})},(Re,e,t)=>{var Pe=t(7),Me=t(38),Ie=t(100),Be=t(11),ke=t(26),_e=t(24),Ce=t(105),Te=t(117),Se=t(50),xe=!!Ie&&Be(function(){Ie.prototype.finally.call({then:function(){}},function(){})});if(Pe({target:"Promise",proto:!0,real:!0,forced:xe},{finally:function(Oe){var Ee=Ce(this,ke("Promise")),Ae=_e(Oe);return this.then(Ae?function(Fe){return Te(Ee,Oe()).then(function(){return Fe})}:Oe,Ae?function(Fe){return Te(Ee,Oe()).then(function(){throw Fe})}:Oe)}}),!Me&&_e(Ie)){var r=ke("Promise").prototype.finally;Ie.prototype.finally!==r&&Se(Ie.prototype,"finally",r,{unsafe:!0})}},(Re,e,t)=>{var Pe=t(127).charAt,Me=t(89),Ie=t(52),Be=t(93),ke="String Iterator",_e=Ie.set,Ce=Ie.getterFor(ke);Be(String,"String",function(Te){_e(this,{type:ke,string:Me(Te),index:0})},function(){var Se=Ce(this),xe=Se.string,r=Se.index,Oe;return r>=xe.length?{value:void 0,done:!0}:(Oe=Pe(xe,r),Se.index+=Oe.length,{value:Oe,done:!1})})},(Re,e,t)=>{var Pe=t(18),Me=t(63),Ie=t(89),Be=t(20),ke=Pe("".charAt),_e=Pe("".charCodeAt),Ce=Pe("".slice),Te=function(Se){return function(xe,r){var Oe=Ie(Be(xe)),Ee=Me(r),Ae=Oe.length,Fe,De;return Ee<0||Ee>=Ae?Se?"":void 0:(Fe=_e(Oe,Ee),Fe<55296||Fe>56319||Ee+1===Ae||(De=_e(Oe,Ee+1))<56320||De>57343?Se?ke(Oe,Ee):Fe:Se?Ce(Oe,Ee,Ee+2):(Fe-55296<<10)+(De-56320)+65536)}};Re.exports={codeAt:Te(!1),charAt:Te(!0)}},(Re,e,t)=>{var Pe=t(8);Re.exports=Pe},(Re,e,t)=>{t(91),t(97),t(130),t(141),t(142);var Pe=t(128);Re.exports=Pe.structuredClone},(Re,e,t)=>{var Pe=t(131),Me=t(140);Pe("Map",function(Ie){return function(){return Ie(this,arguments.length?arguments[0]:void 0)}},Me)},(Re,e,t)=>{var Pe=t(7),Me=t(8),Ie=t(18),Be=t(68),ke=t(50),_e=t(132),Ce=t(79),Te=t(103),Se=t(24),xe=t(23),r=t(11),Oe=t(104),Ee=t(96),Ae=t(139);Re.exports=function(Fe,De,ze){var je=Fe.indexOf("Map")!==-1,We=Fe.indexOf("Weak")!==-1,Ge=je?"set":"add",Ye=Me[Fe],Xe=Ye&&Ye.prototype,Ke=Ye,er={},Qe=function(Sr){var lr=Ie(Xe[Sr]);ke(Xe,Sr,Sr=="add"?function($e){return lr(this,$e===0?0:$e),this}:Sr=="delete"?function(fr){return We&&!xe(fr)?!1:lr(this,fr===0?0:fr)}:Sr=="get"?function($e){return We&&!xe($e)?void 0:lr(this,$e===0?0:$e)}:Sr=="has"?function($e){return We&&!xe($e)?!1:lr(this,$e===0?0:$e)}:function($e,Ve){return lr(this,$e===0?0:$e,Ve),this})},nr=Be(Fe,!Se(Ye)||!(We||Xe.forEach&&!r(function(){new Ye().entries().next()})));if(nr)Ke=ze.getConstructor(De,Fe,je,Ge),_e.enable();else if(Be(Fe,!0)){var ir=new Ke,cr=ir[Ge](We?{}:-0,1)!=ir,br=r(function(){ir.has(1)}),wr=Oe(function(Sr){new Ye(Sr)}),xr=!We&&r(function(){for(var Sr=new Ye,lr=5;lr--;)Sr[Ge](lr,lr);return!Sr.has(-0)});wr||(Ke=De(function(Sr,lr){Te(Sr,Xe);var fr=Ae(new Ye,Sr,Ke);return lr!=null&&Ce(lr,fr[Ge],{that:fr,AS_ENTRIES:je}),fr}),Ke.prototype=Xe,Xe.constructor=Ke),(br||xr)&&(Qe("delete"),Qe("has"),je&&Qe("get")),(xr||cr)&&Qe(Ge),We&&Xe.clear&&delete Xe.clear}return er[Fe]=Ke,Pe({global:!0,forced:Ke!=Ye},er),Ee(Ke,Fe),We||ze.setStrong(Ke,Fe,je),Ke}},(Re,e,t)=>{var Pe=t(7),Me=t(18),Ie=t(55),Be=t(23),ke=t(41),_e=t(47).f,Ce=t(59),Te=t(133),Se=t(136),xe=t(43),r=t(138),Oe=!1,Ee=xe("meta"),Ae=0,Fe=function(Ye){_e(Ye,Ee,{value:{objectID:"O"+Ae++,weakData:{}}})},De=function(Ye,Xe){if(!Be(Ye))return typeof Ye=="symbol"?Ye:(typeof Ye=="string"?"S":"P")+Ye;if(!ke(Ye,Ee)){if(!Se(Ye))return"F";if(!Xe)return"E";Fe(Ye)}return Ye[Ee].objectID},ze=function(Ye,Xe){if(!ke(Ye,Ee)){if(!Se(Ye))return!0;if(!Xe)return!1;Fe(Ye)}return Ye[Ee].weakData},je=function(Ye){return r&&Oe&&Se(Ye)&&!ke(Ye,Ee)&&Fe(Ye),Ye},We=function(){Ge.enable=function(){},Oe=!0;var Ye=Ce.f,Xe=Me([].splice),Ke={};Ke[Ee]=1,Ye(Ke).length&&(Ce.f=function(er){for(var Qe=Ye(er),nr=0,ir=Qe.length;nr<ir;nr++)if(Qe[nr]===Ee){Xe(Qe,nr,1);break}return Qe},Pe({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:Te.f}))},Ge=Re.exports={enable:We,fastKey:De,getWeakData:ze,onFreeze:je};Ie[Ee]=!0},(Re,e,t)=>{var Pe=t(19),Me=t(16),Ie=t(59).f,Be=t(134),ke=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],_e=function(Ce){try{return Ie(Ce)}catch{return Be(ke)}};Re.exports.f=function(Te){return ke&&Pe(Te)=="Window"?_e(Te):Ie(Me(Te))}},(Re,e,t)=>{var Pe=t(8),Me=t(62),Ie=t(64),Be=t(135),ke=Pe.Array,_e=Math.max;Re.exports=function(Ce,Te,Se){for(var xe=Ie(Ce),r=Me(Te,xe),Oe=Me(Se===void 0?xe:Se,xe),Ee=ke(_e(Oe-r,0)),Ae=0;r<Oe;r++,Ae++)Be(Ee,Ae,Ce[r]);return Ee.length=Ae,Ee}},(Re,e,t)=>{var Pe=t(21),Me=t(47),Ie=t(15);Re.exports=function(Be,ke,_e){var Ce=Pe(ke);Ce in Be?Me.f(Be,Ce,Ie(0,_e)):Be[Ce]=_e}},(Re,e,t)=>{var Pe=t(11),Me=t(23),Ie=t(19),Be=t(137),ke=Object.isExtensible,_e=Pe(function(){});Re.exports=_e||Be?function(Te){return!Me(Te)||Be&&Ie(Te)=="ArrayBuffer"?!1:ke?ke(Te):!0}:ke},(Re,e,t)=>{var Pe=t(11);Re.exports=Pe(function(){if(typeof ArrayBuffer=="function"){var Me=new ArrayBuffer(8);Object.isExtensible(Me)&&Object.defineProperty(Me,"a",{value:8})}})},(Re,e,t)=>{var Pe=t(11);Re.exports=!Pe(function(){return Object.isExtensible(Object.preventExtensions({}))})},(Re,e,t)=>{var Pe=t(24),Me=t(23),Ie=t(71);Re.exports=function(Be,ke,_e){var Ce,Te;return Ie&&Pe(Ce=ke.constructor)&&Ce!==_e&&Me(Te=Ce.prototype)&&Te!==_e.prototype&&Ie(Be,Te),Be}},(Re,e,t)=>{var Pe=t(47).f,Me=t(73),Ie=t(101),Be=t(80),ke=t(103),_e=t(79),Ce=t(93),Te=t(102),Se=t(10),xe=t(132).fastKey,r=t(52),Oe=r.set,Ee=r.getterFor;Re.exports={getConstructor:function(Ae,Fe,De,ze){var je=Ae(function(Ke,er){ke(Ke,We),Oe(Ke,{type:Fe,index:Me(null),first:void 0,last:void 0,size:0}),Se||(Ke.size=0),er!=null&&_e(er,Ke[ze],{that:Ke,AS_ENTRIES:De})}),We=je.prototype,Ge=Ee(Fe),Ye=function(Ke,er,Qe){var nr=Ge(Ke),ir=Xe(Ke,er),cr,br;return ir?ir.value=Qe:(nr.last=ir={index:br=xe(er,!0),key:er,value:Qe,previous:cr=nr.last,next:void 0,removed:!1},nr.first||(nr.first=ir),cr&&(cr.next=ir),Se?nr.size++:Ke.size++,br!=="F"&&(nr.index[br]=ir)),Ke},Xe=function(Ke,er){var Qe=Ge(Ke),nr=xe(er),ir;if(nr!=="F")return Qe.index[nr];for(ir=Qe.first;ir;ir=ir.next)if(ir.key==er)return ir};return Ie(We,{clear:function(){for(var er=this,Qe=Ge(er),nr=Qe.index,ir=Qe.first;ir;)ir.removed=!0,ir.previous&&(ir.previous=ir.previous.next=void 0),delete nr[ir.index],ir=ir.next;Qe.first=Qe.last=void 0,Se?Qe.size=0:er.size=0},delete:function(Ke){var er=this,Qe=Ge(er),nr=Xe(er,Ke);if(nr){var ir=nr.next,cr=nr.previous;delete Qe.index[nr.index],nr.removed=!0,cr&&(cr.next=ir),ir&&(ir.previous=cr),Qe.first==nr&&(Qe.first=ir),Qe.last==nr&&(Qe.last=cr),Se?Qe.size--:er.size--}return!!nr},forEach:function(er){for(var Qe=Ge(this),nr=Be(er,arguments.length>1?arguments[1]:void 0),ir;ir=ir?ir.next:Qe.first;)for(nr(ir.value,ir.key,this);ir&&ir.removed;)ir=ir.previous},has:function(er){return!!Xe(this,er)}}),Ie(We,De?{get:function(er){var Qe=Xe(this,er);return Qe&&Qe.value},set:function(er,Qe){return Ye(this,er===0?0:er,Qe)}}:{add:function(er){return Ye(this,er=er===0?0:er,er)}}),Se&&Pe(We,"size",{get:function(){return Ge(this).size}}),je},setStrong:function(Ae,Fe,De){var ze=Fe+" Iterator",je=Ee(Fe),We=Ee(ze);Ce(Ae,Fe,function(Ge,Ye){Oe(this,{type:ze,target:Ge,state:je(Ge),kind:Ye,last:void 0})},function(){for(var Ge=We(this),Ye=Ge.kind,Xe=Ge.last;Xe&&Xe.removed;)Xe=Xe.previous;return!Ge.target||!(Ge.last=Xe=Xe?Xe.next:Ge.state.first)?(Ge.target=void 0,{value:void 0,done:!0}):Ye=="keys"?{value:Xe.key,done:!1}:Ye=="values"?{value:Xe.value,done:!1}:{value:[Xe.key,Xe.value],done:!1}},De?"entries":"values",!De,!0),Te(Fe)}}},(Re,e,t)=>{var Pe=t(131),Me=t(140);Pe("Set",function(Ie){return function(){return Ie(this,arguments.length?arguments[0]:void 0)}},Me)},(Re,e,t)=>{var Pe=t(38),Me=t(7),Ie=t(8),Be=t(26),ke=t(18),_e=t(11),Ce=t(43),Te=t(24),Se=t(107),xe=t(23),r=t(25),Oe=t(79),Ee=t(49),Ae=t(85),Fe=t(41),De=t(135),ze=t(46),je=t(64),We=t(111),Ge=t(143),Ye=t(90),Xe=Ie.Object,Ke=Ie.Date,er=Ie.Error,Qe=Ie.EvalError,nr=Ie.RangeError,ir=Ie.ReferenceError,cr=Ie.SyntaxError,br=Ie.TypeError,wr=Ie.URIError,xr=Ie.PerformanceMark,Sr=Ie.WebAssembly,lr=Sr&&Sr.CompileError||er,fr=Sr&&Sr.LinkError||er,$e=Sr&&Sr.RuntimeError||er,Ve=Be("DOMException"),Je=Be("Set"),Ze=Be("Map"),St=Ze.prototype,vr=ke(St.has),mr=ke(St.get),Cr=ke(St.set),_r=ke(Je.prototype.add),pr=Be("Object","keys"),dr=ke([].push),ur=ke((!0).valueOf),rr=ke(1 .valueOf),gr=ke("".valueOf),hr=ke(Ge),sr=ke(Ke.prototype.getTime),Ar=Ce("structuredClone"),Or="DataCloneError",Mr="Transferring",Gr=function(Er){return!_e(function(){var Rr=new Ie.Set([7]),Dr=Er(Rr),Br=Er(Xe(7));return Dr==Rr||!Dr.has(7)||typeof Br!="object"||Br!=7})&&Er},zr=function(Er){return!_e(function(){var Rr=Er(new Ie.AggregateError([1],Ar,{cause:3}));return Rr.name!="AggregateError"||Rr.errors[0]!=1||Rr.message!=Ar||Rr.cause!=3})&&Er},Ir=Ie.structuredClone,Qr=Pe||!zr(Ir),rn=!Ir&&Gr(function(Er){return new xr(Ar,{detail:Er}).detail}),sn=Gr(Ir)||rn,pn=function(Er){throw new Ve("Uncloneable type: "+Er,Or)},mn=function(Er,Rr){throw new Ve((Rr||"Cloning")+" of "+Er+" cannot be properly polyfilled in this engine",Or)},Sn=function(Er,Rr){if(r(Er)&&pn("Symbol"),!xe(Er))return Er;if(Rr){if(vr(Rr,Er))return mr(Rr,Er)}else Rr=new Ze;var Dr=Ae(Er),Br=!1,Wr,Ur,Hr,$r,Kr,tn,yn,Pn,bn,dn;switch(Dr){case"Array":Hr=[],Br=!0;break;case"Object":Hr={},Br=!0;break;case"Map":Hr=new Ze,Br=!0;break;case"Set":Hr=new Je,Br=!0;break;case"RegExp":Hr=new RegExp(Er.source,"flags"in Er?Er.flags:hr(Er));break;case"Error":switch(Ur=Er.name,Ur){case"AggregateError":Hr=Be("AggregateError")([]);break;case"EvalError":Hr=Qe();break;case"RangeError":Hr=nr();break;case"ReferenceError":Hr=ir();break;case"SyntaxError":Hr=cr();break;case"TypeError":Hr=br();break;case"URIError":Hr=wr();break;case"CompileError":Hr=lr();break;case"LinkError":Hr=fr();break;case"RuntimeError":Hr=$e();break;default:Hr=er()}Br=!0;break;case"DOMException":Hr=new Ve(Er.message,Er.name),Br=!0;break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":Wr=Ie[Dr],xe(Wr)||mn(Dr),Hr=new Wr(Sn(Er.buffer,Rr),Er.byteOffset,Dr==="DataView"?Er.byteLength:Er.length);break;case"DOMQuad":try{Hr=new DOMQuad(Sn(Er.p1,Rr),Sn(Er.p2,Rr),Sn(Er.p3,Rr),Sn(Er.p4,Rr))}catch{sn?Hr=sn(Er):mn(Dr)}break;case"FileList":if(Wr=Ie.DataTransfer,Se(Wr)){for($r=new Wr,Kr=0,tn=je(Er);Kr<tn;Kr++)$r.items.add(Sn(Er[Kr],Rr));Hr=$r.files}else sn?Hr=sn(Er):mn(Dr);break;case"ImageData":try{Hr=new ImageData(Sn(Er.data,Rr),Er.width,Er.height,{colorSpace:Er.colorSpace})}catch{sn?Hr=sn(Er):mn(Dr)}break;default:if(sn)Hr=sn(Er);else switch(Dr){case"BigInt":Hr=Xe(Er.valueOf());break;case"Boolean":Hr=Xe(ur(Er));break;case"Number":Hr=Xe(rr(Er));break;case"String":Hr=Xe(gr(Er));break;case"Date":Hr=new Ke(sr(Er));break;case"ArrayBuffer":Wr=Ie.DataView,!Wr&&typeof Er.slice!="function"&&mn(Dr);try{if(typeof Er.slice=="function")Hr=Er.slice(0);else for(tn=Er.byteLength,Hr=new ArrayBuffer(tn),bn=new Wr(Er),dn=new Wr(Hr),Kr=0;Kr<tn;Kr++)dn.setUint8(Kr,bn.getUint8(Kr))}catch{throw new Ve("ArrayBuffer is detached",Or)}break;case"SharedArrayBuffer":Hr=Er;break;case"Blob":try{Hr=Er.slice(0,Er.size,Er.type)}catch{mn(Dr)}break;case"DOMPoint":case"DOMPointReadOnly":Wr=Ie[Dr];try{Hr=Wr.fromPoint?Wr.fromPoint(Er):new Wr(Er.x,Er.y,Er.z,Er.w)}catch{mn(Dr)}break;case"DOMRect":case"DOMRectReadOnly":Wr=Ie[Dr];try{Hr=Wr.fromRect?Wr.fromRect(Er):new Wr(Er.x,Er.y,Er.width,Er.height)}catch{mn(Dr)}break;case"DOMMatrix":case"DOMMatrixReadOnly":Wr=Ie[Dr];try{Hr=Wr.fromMatrix?Wr.fromMatrix(Er):new Wr(Er)}catch{mn(Dr)}break;case"AudioData":case"VideoFrame":Te(Er.clone)||mn(Dr);try{Hr=Er.clone()}catch{pn(Dr)}break;case"File":try{Hr=new File([Er],Er.name,Er)}catch{mn(Dr)}break;case"CryptoKey":case"GPUCompilationMessage":case"GPUCompilationInfo":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":mn(Dr);default:pn(Dr)}}if(Cr(Rr,Er,Hr),Br)switch(Dr){case"Array":case"Object":for(yn=pr(Er),Kr=0,tn=je(yn);Kr<tn;Kr++)Pn=yn[Kr],De(Hr,Pn,Sn(Er[Pn],Rr));break;case"Map":Er.forEach(function(Tn,xn){Cr(Hr,Sn(xn,Rr),Sn(Tn,Rr))});break;case"Set":Er.forEach(function(Tn){_r(Hr,Sn(Tn,Rr))});break;case"Error":ze(Hr,"message",Sn(Er.message,Rr)),Fe(Er,"cause")&&ze(Hr,"cause",Sn(Er.cause,Rr)),Ur=="AggregateError"&&(Hr.errors=Sn(Er.errors,Rr));case"DOMException":Ye&&ze(Hr,"stack",Sn(Er.stack,Rr))}return Hr},Cn=Ir&&!_e(function(){var Er=new ArrayBuffer(8),Rr=Ir(Er,{transfer:[Er]});return Er.byteLength!=0||Rr.byteLength!=8}),Xr=function(Er,Rr){if(!xe(Er))throw br("Transfer option cannot be converted to a sequence");var Dr=[];Oe(Er,function(bn){dr(Dr,Ee(bn))});var Br=0,Wr=je(Dr),Ur,Hr,$r,Kr,tn,yn,Pn;if(Cn)for(Kr=Ir(Dr,{transfer:Dr});Br<Wr;)Cr(Rr,Dr[Br],Kr[Br++]);else for(;Br<Wr;){if(Ur=Dr[Br++],vr(Rr,Ur))throw new Ve("Duplicate transferable",Or);switch(Hr=Ae(Ur),Hr){case"ImageBitmap":$r=Ie.OffscreenCanvas,Se($r)||mn(Hr,Mr);try{yn=new $r(Ur.width,Ur.height),Pn=yn.getContext("bitmaprenderer"),Pn.transferFromImageBitmap(Ur),tn=yn.transferToImageBitmap()}catch{}break;case"AudioData":case"VideoFrame":(!Te(Ur.clone)||!Te(Ur.close))&&mn(Hr,Mr);try{tn=Ur.clone(),Ur.close()}catch{}break;case"ArrayBuffer":case"MessagePort":case"OffscreenCanvas":case"ReadableStream":case"TransformStream":case"WritableStream":mn(Hr,Mr)}if(tn===void 0)throw new Ve("This object cannot be transferred: "+Hr,Or);Cr(Rr,Ur,tn)}};Me({global:!0,enumerable:!0,sham:!Cn,forced:Qr},{structuredClone:function(Rr){var Dr=We(arguments.length,1)>1?Ee(arguments[1]):void 0,Br=Dr?Dr.transfer:void 0,Wr;return Br!==void 0&&(Wr=new Ze,Xr(Br,Wr)),Sn(Rr,Wr)}})},(Re,e,t)=>{var Pe=t(49);Re.exports=function(){var Me=Pe(this),Ie="";return Me.global&&(Ie+="g"),Me.ignoreCase&&(Ie+="i"),Me.multiline&&(Ie+="m"),Me.dotAll&&(Ie+="s"),Me.unicode&&(Ie+="u"),Me.sticky&&(Ie+="y"),Ie}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _regenerator=_interopRequireDefault(__w_pdfjs_require__(145)),_util=__w_pdfjs_require__(1),_display_utils=__w_pdfjs_require__(147),_font_loader=__w_pdfjs_require__(149),_node_utils=__w_pdfjs_require__(150),_annotation_storage=__w_pdfjs_require__(151),_canvas=__w_pdfjs_require__(152),_worker_options=__w_pdfjs_require__(154),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(155),_metadata=__w_pdfjs_require__(156),_optional_content_config=__w_pdfjs_require__(157),_transport_stream=__w_pdfjs_require__(158),_xfa_text=__w_pdfjs_require__(159);function _interopRequireDefault(Re){return Re&&Re.__esModule?Re:{default:Re}}function _classPrivateMethodInitSpec(Re,e){_checkPrivateRedeclaration(Re,e),e.add(Re)}function _classPrivateMethodGet(Re,e,t){if(!e.has(Re))throw new TypeError("attempted to get private field on non-instance");return t}function _classPrivateFieldInitSpec(Re,e,t){_checkPrivateRedeclaration(Re,e),e.set(Re,t)}function _checkPrivateRedeclaration(Re,e){if(e.has(Re))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldSet(Re,e,t){var Pe=_classExtractFieldDescriptor(Re,e,"set");return _classApplyDescriptorSet(Re,Pe,t),t}function _classApplyDescriptorSet(Re,e,t){if(e.set)e.set.call(Re,t);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=t}}function _classPrivateFieldGet(Re,e){var t=_classExtractFieldDescriptor(Re,e,"get");return _classApplyDescriptorGet(Re,t)}function _classExtractFieldDescriptor(Re,e,t){if(!e.has(Re))throw new TypeError("attempted to "+t+" private field on non-instance");return e.get(Re)}function _classApplyDescriptorGet(Re,e){return e.get?e.get.call(Re):e.value}function _toConsumableArray(Re){return _arrayWithoutHoles(Re)||_iterableToArray(Re)||_unsupportedIterableToArray(Re)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _iterableToArray(Re){if(typeof Symbol!="undefined"&&Re[Symbol.iterator]!=null||Re["@@iterator"]!=null)return Array.from(Re)}function _arrayWithoutHoles(Re){if(Array.isArray(Re))return _arrayLikeToArray(Re)}function _createForOfIteratorHelper(Re,e){var t=typeof Symbol!="undefined"&&Re[Symbol.iterator]||Re["@@iterator"];if(!t){if(Array.isArray(Re)||(t=_unsupportedIterableToArray(Re))||e&&Re&&typeof Re.length=="number"){t&&(Re=t);var Pe=0,Me=function(){};return{s:Me,n:function(){return Pe>=Re.length?{done:!0}:{done:!1,value:Re[Pe++]}},e:function(Ce){throw Ce},f:Me}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ie=!0,Be=!1,ke;return{s:function(){t=t.call(Re)},n:function(){var Ce=t.next();return Ie=Ce.done,Ce},e:function(Ce){Be=!0,ke=Ce},f:function(){try{!Ie&&t.return!=null&&t.return()}finally{if(Be)throw ke}}}}function _classCallCheck(Re,e){if(!(Re instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(Re,e){for(var t=0;t<e.length;t++){var Pe=e[t];Pe.enumerable=Pe.enumerable||!1,Pe.configurable=!0,"value"in Pe&&(Pe.writable=!0),Object.defineProperty(Re,Pe.key,Pe)}}function _createClass(Re,e,t){return e&&_defineProperties(Re.prototype,e),t&&_defineProperties(Re,t),Object.defineProperty(Re,"prototype",{writable:!1}),Re}function asyncGeneratorStep(Re,e,t,Pe,Me,Ie,Be){try{var ke=Re[Ie](Be),_e=ke.value}catch(Ce){t(Ce);return}ke.done?e(_e):Promise.resolve(_e).then(Pe,Me)}function _asyncToGenerator(Re){return function(){var e=this,t=arguments;return new Promise(function(Pe,Me){var Ie=Re.apply(e,t);function Be(_e){asyncGeneratorStep(Ie,Pe,Me,Be,ke,"next",_e)}function ke(_e){asyncGeneratorStep(Ie,Pe,Me,Be,ke,"throw",_e)}Be(void 0)})}}function _slicedToArray(Re,e){return _arrayWithHoles(Re)||_iterableToArrayLimit(Re,e)||_unsupportedIterableToArray(Re,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray(Re,e){if(!!Re){if(typeof Re=="string")return _arrayLikeToArray(Re,e);var t=Object.prototype.toString.call(Re).slice(8,-1);if(t==="Object"&&Re.constructor&&(t=Re.constructor.name),t==="Map"||t==="Set")return Array.from(Re);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return _arrayLikeToArray(Re,e)}}function _arrayLikeToArray(Re,e){(e==null||e>Re.length)&&(e=Re.length);for(var t=0,Pe=new Array(e);t<e;t++)Pe[t]=Re[t];return Pe}function _iterableToArrayLimit(Re,e){var t=Re==null?null:typeof Symbol!="undefined"&&Re[Symbol.iterator]||Re["@@iterator"];if(t!=null){var Pe=[],Me=!0,Ie=!1,Be,ke;try{for(t=t.call(Re);!(Me=(Be=t.next()).done)&&(Pe.push(Be.value),!(e&&Pe.length===e));Me=!0);}catch(_e){Ie=!0,ke=_e}finally{try{!Me&&t.return!=null&&t.return()}finally{if(Ie)throw ke}}return Pe}}function _arrayWithHoles(Re){if(Array.isArray(Re))return Re}function _typeof(Re){return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(Re)}var DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DefaultCanvasFactory=_is_node.isNodeJS?_node_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;var DefaultCMapReaderFactory=_is_node.isNodeJS?_node_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;var DefaultStandardFontDataFactory=_is_node.isNodeJS?_node_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;var createPDFNetworkStream;function setPDFNetworkStreamFactory(Re){createPDFNetworkStream=Re}function getDocument(Re){var e=new PDFDocumentLoadingTask,t;if(typeof Re=="string"||Re instanceof URL)t={url:Re};else if((0,_util.isArrayBuffer)(Re))t={data:Re};else if(Re instanceof PDFDataRangeTransport)t={range:Re};else{if(_typeof(Re)!=="object")throw new Error("Invalid parameter in getDocument, need either string, URL, Uint8Array, or parameter object.");if(!Re.url&&!Re.data&&!Re.range)throw new Error("Invalid parameter object: need either .data, .range or .url");t=Re}var Pe=Object.create(null),Me=null,Ie=null;for(var Be in t){var ke=t[Be];switch(Be){case"url":if(typeof window!="undefined")try{Pe[Be]=new URL(ke,window.location).href;continue}catch(Te){(0,_util.warn)('Cannot create valid URL: "'.concat(Te,'".'))}else if(typeof ke=="string"||ke instanceof URL){Pe[Be]=ke.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":Me=ke;continue;case"worker":Ie=ke;continue;case"data":if(_is_node.isNodeJS&&typeof Buffer!="undefined"&&ke instanceof Buffer)Pe[Be]=new Uint8Array(ke);else{if(ke instanceof Uint8Array)break;if(typeof ke=="string")Pe[Be]=(0,_util.stringToBytes)(ke);else if(_typeof(ke)==="object"&&ke!==null&&!isNaN(ke.length))Pe[Be]=new Uint8Array(ke);else if((0,_util.isArrayBuffer)(ke))Pe[Be]=new Uint8Array(ke);else throw new Error("Invalid PDF binary data: either typed array, string, or array-like object is expected in the data property.")}continue}Pe[Be]=ke}if(Pe.rangeChunkSize=Pe.rangeChunkSize||DEFAULT_RANGE_CHUNK_SIZE,Pe.CMapReaderFactory=Pe.CMapReaderFactory||DefaultCMapReaderFactory,Pe.StandardFontDataFactory=Pe.StandardFontDataFactory||DefaultStandardFontDataFactory,Pe.ignoreErrors=Pe.stopAtErrors!==!0,Pe.fontExtraProperties=Pe.fontExtraProperties===!0,Pe.pdfBug=Pe.pdfBug===!0,Pe.enableXfa=Pe.enableXfa===!0,(typeof Pe.docBaseUrl!="string"||(0,_display_utils.isDataScheme)(Pe.docBaseUrl))&&(Pe.docBaseUrl=null),Number.isInteger(Pe.maxImageSize)||(Pe.maxImageSize=-1),typeof Pe.useWorkerFetch!="boolean"&&(Pe.useWorkerFetch=Pe.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&Pe.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),typeof Pe.isEvalSupported!="boolean"&&(Pe.isEvalSupported=!0),typeof Pe.disableFontFace!="boolean"&&(Pe.disableFontFace=_is_node.isNodeJS),typeof Pe.useSystemFonts!="boolean"&&(Pe.useSystemFonts=!_is_node.isNodeJS&&!Pe.disableFontFace),typeof Pe.ownerDocument=="undefined"&&(Pe.ownerDocument=globalThis.document),typeof Pe.disableRange!="boolean"&&(Pe.disableRange=!1),typeof Pe.disableStream!="boolean"&&(Pe.disableStream=!1),typeof Pe.disableAutoFetch!="boolean"&&(Pe.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(Pe.verbosity),!Ie){var _e={verbosity:Pe.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};Ie=_e.port?PDFWorker.fromPort(_e):new PDFWorker(_e),e._worker=Ie}var Ce=e.docId;return Ie.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");var Te=_fetchDocument(Ie,Pe,Me,Ce),Se=new Promise(function(xe){var r;Me?r=new _transport_stream.PDFDataTransportStream({length:Pe.length,initialData:Pe.initialData,progressiveDone:Pe.progressiveDone,contentDispositionFilename:Pe.contentDispositionFilename,disableRange:Pe.disableRange,disableStream:Pe.disableStream},Me):Pe.data||(r=createPDFNetworkStream({url:Pe.url,length:Pe.length,httpHeaders:Pe.httpHeaders,withCredentials:Pe.withCredentials,rangeChunkSize:Pe.rangeChunkSize,disableRange:Pe.disableRange,disableStream:Pe.disableStream})),xe(r)});return Promise.all([Te,Se]).then(function(xe){var r=_slicedToArray(xe,2),Oe=r[0],Ee=r[1];if(e.destroyed)throw new Error("Loading aborted");var Ae=new _message_handler.MessageHandler(Ce,Oe,Ie.port),Fe=new WorkerTransport(Ae,e,Ee,Pe);e._transport=Fe,Ae.send("Ready",null)})}).catch(e._capability.reject),e}function _fetchDocument(Re,e,t,Pe){return _fetchDocument2.apply(this,arguments)}function _fetchDocument2(){return _fetchDocument2=_asyncToGenerator(_regenerator.default.mark(function Re(e,t,Pe,Me){var Ie;return _regenerator.default.wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:if(!e.destroyed){ke.next=2;break}throw new Error("Worker was destroyed");case 2:return Pe&&(t.length=Pe.length,t.initialData=Pe.initialData,t.progressiveDone=Pe.progressiveDone,t.contentDispositionFilename=Pe.contentDispositionFilename),ke.next=5,e.messageHandler.sendWithPromise("GetDocRequest",{docId:Me,apiVersion:"2.13.216",source:{data:t.data,url:t.url,password:t.password,disableAutoFetch:t.disableAutoFetch,rangeChunkSize:t.rangeChunkSize,length:t.length},maxImageSize:t.maxImageSize,disableFontFace:t.disableFontFace,docBaseUrl:t.docBaseUrl,ignoreErrors:t.ignoreErrors,isEvalSupported:t.isEvalSupported,fontExtraProperties:t.fontExtraProperties,enableXfa:t.enableXfa,useSystemFonts:t.useSystemFonts,cMapUrl:t.useWorkerFetch?t.cMapUrl:null,standardFontDataUrl:t.useWorkerFetch?t.standardFontDataUrl:null});case 5:if(Ie=ke.sent,!e.destroyed){ke.next=8;break}throw new Error("Worker was destroyed");case 8:return ke.abrupt("return",Ie);case 9:case"end":return ke.stop()}},Re)})),_fetchDocument2.apply(this,arguments)}var PDFDocumentLoadingTask=function(){function Re(){_classCallCheck(this,Re),this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId="d".concat(Re.idCounters.doc++),this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}return _createClass(Re,[{key:"promise",get:function(){return this._capability.promise}},{key:"destroy",value:function(){var e=_asyncToGenerator(_regenerator.default.mark(function Pe(){var Me;return _regenerator.default.wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:return this.destroyed=!0,Be.next=3,(Me=this._transport)===null||Me===void 0?void 0:Me.destroy();case 3:this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null);case 5:case"end":return Be.stop()}},Pe,this)}));function t(){return e.apply(this,arguments)}return t}()}],[{key:"idCounters",get:function(){return(0,_util.shadow)(this,"idCounters",{doc:0})}}]),Re}();exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;var PDFDataRangeTransport=function(){function Re(e,t){var Pe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,Me=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;_classCallCheck(this,Re),this.length=e,this.initialData=t,this.progressiveDone=Pe,this.contentDispositionFilename=Me,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}return _createClass(Re,[{key:"addRangeListener",value:function(t){this._rangeListeners.push(t)}},{key:"addProgressListener",value:function(t){this._progressListeners.push(t)}},{key:"addProgressiveReadListener",value:function(t){this._progressiveReadListeners.push(t)}},{key:"addProgressiveDoneListener",value:function(t){this._progressiveDoneListeners.push(t)}},{key:"onDataRange",value:function(t,Pe){var Me=_createForOfIteratorHelper(this._rangeListeners),Ie;try{for(Me.s();!(Ie=Me.n()).done;){var Be=Ie.value;Be(t,Pe)}}catch(ke){Me.e(ke)}finally{Me.f()}}},{key:"onDataProgress",value:function(t,Pe){var Me=this;this._readyCapability.promise.then(function(){var Ie=_createForOfIteratorHelper(Me._progressListeners),Be;try{for(Ie.s();!(Be=Ie.n()).done;){var ke=Be.value;ke(t,Pe)}}catch(_e){Ie.e(_e)}finally{Ie.f()}})}},{key:"onDataProgressiveRead",value:function(t){var Pe=this;this._readyCapability.promise.then(function(){var Me=_createForOfIteratorHelper(Pe._progressiveReadListeners),Ie;try{for(Me.s();!(Ie=Me.n()).done;){var Be=Ie.value;Be(t)}}catch(ke){Me.e(ke)}finally{Me.f()}})}},{key:"onDataProgressiveDone",value:function(){var t=this;this._readyCapability.promise.then(function(){var Pe=_createForOfIteratorHelper(t._progressiveDoneListeners),Me;try{for(Pe.s();!(Me=Pe.n()).done;){var Ie=Me.value;Ie()}}catch(Be){Pe.e(Be)}finally{Pe.f()}})}},{key:"transportReady",value:function(){this._readyCapability.resolve()}},{key:"requestDataRange",value:function(t,Pe){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}},{key:"abort",value:function(){}}]),Re}();exports.PDFDataRangeTransport=PDFDataRangeTransport;var PDFDocumentProxy=function(){function Re(e,t){var Pe=this;_classCallCheck(this,Re),this._pdfInfo=e,this._transport=t,Object.defineProperty(this,"fingerprint",{get:function(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:function(){var Me=_asyncToGenerator(_regenerator.default.mark(function Be(){return _regenerator.default.wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:return(0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),_e.abrupt("return",Pe.stats||{streamTypes:{},fontTypes:{}});case 2:case"end":return _e.stop()}},Be)}));function Ie(){return Me.apply(this,arguments)}return Ie}()})}return _createClass(Re,[{key:"annotationStorage",get:function(){return this._transport.annotationStorage}},{key:"numPages",get:function(){return this._pdfInfo.numPages}},{key:"fingerprints",get:function(){return this._pdfInfo.fingerprints}},{key:"stats",get:function(){return this._transport.stats}},{key:"isPureXfa",get:function(){return!!this._transport._htmlForXfa}},{key:"allXfaHtml",get:function(){return this._transport._htmlForXfa}},{key:"getPage",value:function(t){return this._transport.getPage(t)}},{key:"getPageIndex",value:function(t){return this._transport.getPageIndex(t)}},{key:"getDestinations",value:function(){return this._transport.getDestinations()}},{key:"getDestination",value:function(t){return this._transport.getDestination(t)}},{key:"getPageLabels",value:function(){return this._transport.getPageLabels()}},{key:"getPageLayout",value:function(){return this._transport.getPageLayout()}},{key:"getPageMode",value:function(){return this._transport.getPageMode()}},{key:"getViewerPreferences",value:function(){return this._transport.getViewerPreferences()}},{key:"getOpenAction",value:function(){return this._transport.getOpenAction()}},{key:"getAttachments",value:function(){return this._transport.getAttachments()}},{key:"getJavaScript",value:function(){return this._transport.getJavaScript()}},{key:"getJSActions",value:function(){return this._transport.getDocJSActions()}},{key:"getOutline",value:function(){return this._transport.getOutline()}},{key:"getOptionalContentConfig",value:function(){return this._transport.getOptionalContentConfig()}},{key:"getPermissions",value:function(){return this._transport.getPermissions()}},{key:"getMetadata",value:function(){return this._transport.getMetadata()}},{key:"getMarkInfo",value:function(){return this._transport.getMarkInfo()}},{key:"getData",value:function(){return this._transport.getData()}},{key:"getDownloadInfo",value:function(){return this._transport.downloadInfoCapability.promise}},{key:"cleanup",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return this._transport.startCleanup(t||this.isPureXfa)}},{key:"destroy",value:function(){return this.loadingTask.destroy()}},{key:"loadingParams",get:function(){return this._transport.loadingParams}},{key:"loadingTask",get:function(){return this._transport.loadingTask}},{key:"saveDocument",value:function(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}},{key:"getFieldObjects",value:function(){return this._transport.getFieldObjects()}},{key:"hasJSActions",value:function(){return this._transport.hasJSActions()}},{key:"getCalculationOrderIds",value:function(){return this._transport.getCalculationOrderIds()}}]),Re}();exports.PDFDocumentProxy=PDFDocumentProxy;var PDFPageProxy=function(){function Re(e,t,Pe,Me){var Ie=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;_classCallCheck(this,Re),this._pageIndex=e,this._pageInfo=t,this._ownerDocument=Me,this._transport=Pe,this._stats=Ie?new _display_utils.StatTimer:null,this._pdfBug=Ie,this.commonObjs=Pe.commonObjs,this.objs=new PDFObjects,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}return _createClass(Re,[{key:"pageNumber",get:function(){return this._pageIndex+1}},{key:"rotate",get:function(){return this._pageInfo.rotate}},{key:"ref",get:function(){return this._pageInfo.ref}},{key:"userUnit",get:function(){return this._pageInfo.userUnit}},{key:"view",get:function(){return this._pageInfo.view}},{key:"getViewport",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Pe=t.scale,Me=t.rotation,Ie=Me===void 0?this.rotate:Me,Be=t.offsetX,ke=Be===void 0?0:Be,_e=t.offsetY,Ce=_e===void 0?0:_e,Te=t.dontFlip,Se=Te===void 0?!1:Te;return new _display_utils.PageViewport({viewBox:this.view,scale:Pe,rotation:Ie,offsetX:ke,offsetY:Ce,dontFlip:Se})}},{key:"getAnnotations",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Pe=t.intent,Me=Pe===void 0?"display":Pe,Ie=this._transport.getRenderingIntent(Me),Be=this._annotationPromises.get(Ie.cacheKey);return Be||(Be=this._transport.getAnnotations(this._pageIndex,Ie.renderingIntent),this._annotationPromises.set(Ie.cacheKey,Be),Be=Be.then(function(ke){var _e=_createForOfIteratorHelper(ke),Ce;try{var Te=function(){var xe=Ce.value;xe.titleObj!==void 0&&Object.defineProperty(xe,"title",{get:function(){return(0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),xe.titleObj.str}}),xe.contentsObj!==void 0&&Object.defineProperty(xe,"contents",{get:function(){return(0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),xe.contentsObj.str}})};for(_e.s();!(Ce=_e.n()).done;)Te()}catch(Se){_e.e(Se)}finally{_e.f()}return ke})),Be}},{key:"getJSActions",value:function(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}},{key:"getXfa",value:function(){var e=_asyncToGenerator(_regenerator.default.mark(function Pe(){var Me;return _regenerator.default.wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:return Be.abrupt("return",((Me=this._transport._htmlForXfa)===null||Me===void 0?void 0:Me.children[this._pageIndex])||null);case 1:case"end":return Be.stop()}},Pe,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"render",value:function(t){var Pe,Me,Ie=this,Be,ke=t.canvasContext,_e=t.viewport,Ce=t.intent,Te=Ce===void 0?"display":Ce,Se=t.annotationMode,xe=Se===void 0?_util.AnnotationMode.ENABLE:Se,r=t.transform,Oe=r===void 0?null:r,Ee=t.imageLayer,Ae=Ee===void 0?null:Ee,Fe=t.canvasFactory,De=Fe===void 0?null:Fe,ze=t.background,je=ze===void 0?null:ze,We=t.optionalContentConfigPromise,Ge=We===void 0?null:We,Ye=t.annotationCanvasMap,Xe=Ye===void 0?null:Ye;((Pe=arguments[0])===null||Pe===void 0?void 0:Pe.renderInteractiveForms)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),arguments[0].renderInteractiveForms===!0&&xe===_util.AnnotationMode.ENABLE&&(xe=_util.AnnotationMode.ENABLE_FORMS)),((Me=arguments[0])===null||Me===void 0?void 0:Me.includeAnnotationStorage)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),arguments[0].includeAnnotationStorage===!0&&xe===_util.AnnotationMode.ENABLE&&(xe=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");var Ke=this._transport.getRenderingIntent(Te,xe);this.pendingCleanup=!1,Ge||(Ge=this._transport.getOptionalContentConfig());var er=this._intentStates.get(Ke.cacheKey);er||(er=Object.create(null),this._intentStates.set(Ke.cacheKey,er)),er.streamReaderCancelTimeout&&(clearTimeout(er.streamReaderCancelTimeout),er.streamReaderCancelTimeout=null);var Qe=De||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),nr=!!(Ke.renderingIntent&_util.RenderingIntentFlag.PRINT);er.displayReadyCapability||(er.displayReadyCapability=(0,_util.createPromiseCapability)(),er.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(Ke));var ir=function(xr){er.renderTasks.delete(cr),(Ie.cleanupAfterRender||nr)&&(Ie.pendingCleanup=!0),Ie._tryCleanup(),xr?(cr.capability.reject(xr),Ie._abortOperatorList({intentState:er,reason:xr instanceof Error?xr:new Error(xr)})):cr.capability.resolve(),Ie._stats&&(Ie._stats.timeEnd("Rendering"),Ie._stats.timeEnd("Overall"))},cr=new InternalRenderTask({callback:ir,params:{canvasContext:ke,viewport:_e,transform:Oe,imageLayer:Ae,background:je},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:Xe,operatorList:er.operatorList,pageIndex:this._pageIndex,canvasFactory:Qe,useRequestAnimationFrame:!nr,pdfBug:this._pdfBug});((Be=er).renderTasks||(Be.renderTasks=new Set)).add(cr);var br=cr.task;return Promise.all([er.displayReadyCapability.promise,Ge]).then(function(wr){var xr=_slicedToArray(wr,2),Sr=xr[0],lr=xr[1];if(Ie.pendingCleanup){ir();return}Ie._stats&&Ie._stats.time("Rendering"),cr.initializeGraphics({transparency:Sr,optionalContentConfig:lr}),cr.operatorListChanged()}).catch(ir),br}},{key:"getOperatorList",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Pe=t.intent,Me=Pe===void 0?"display":Pe,Ie=t.annotationMode,Be=Ie===void 0?_util.AnnotationMode.ENABLE:Ie;function ke(){Ce.operatorList.lastChunk&&(Ce.opListReadCapability.resolve(Ce.operatorList),Ce.renderTasks.delete(Te))}var _e=this._transport.getRenderingIntent(Me,Be,!0),Ce=this._intentStates.get(_e.cacheKey);Ce||(Ce=Object.create(null),this._intentStates.set(_e.cacheKey,Ce));var Te;if(!Ce.opListReadCapability){var Se;Te=Object.create(null),Te.operatorListChanged=ke,Ce.opListReadCapability=(0,_util.createPromiseCapability)(),((Se=Ce).renderTasks||(Se.renderTasks=new Set)).add(Te),Ce.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(_e)}return Ce.opListReadCapability.promise}},{key:"streamTextContent",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Pe=t.disableCombineTextItems,Me=Pe===void 0?!1:Pe,Ie=t.includeMarkedContent,Be=Ie===void 0?!1:Ie,ke=100;return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:Me!==!0,includeMarkedContent:Be===!0},{highWaterMark:ke,size:function(Ce){return Ce.items.length}})}},{key:"getTextContent",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this._transport._htmlForXfa)return this.getXfa().then(function(Me){return _xfa_text.XfaText.textContent(Me)});var Pe=this.streamTextContent(t);return new Promise(function(Me,Ie){function Be(){ke.read().then(function(Ce){var Te,Se=Ce.value,xe=Ce.done;if(xe){Me(_e);return}Object.assign(_e.styles,Se.styles),(Te=_e.items).push.apply(Te,_toConsumableArray(Se.items)),Be()},Ie)}var ke=Pe.getReader(),_e={items:[],styles:Object.create(null)};Be()})}},{key:"getStructTree",value:function(){return this._structTreePromise||(this._structTreePromise=this._transport.getStructTree(this._pageIndex))}},{key:"_destroy",value:function(){this.destroyed=!0;var t=[],Pe=_createForOfIteratorHelper(this._intentStates.values()),Me;try{for(Pe.s();!(Me=Pe.n()).done;){var Ie=Me.value;if(this._abortOperatorList({intentState:Ie,reason:new Error("Page was destroyed."),force:!0}),!Ie.opListReadCapability){var Be=_createForOfIteratorHelper(Ie.renderTasks),ke;try{for(Be.s();!(ke=Be.n()).done;){var _e=ke.value;t.push(_e.completed),_e.cancel()}}catch(Ce){Be.e(Ce)}finally{Be.f()}}}}catch(Ce){Pe.e(Ce)}finally{Pe.f()}return this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(t)}},{key:"cleanup",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return this.pendingCleanup=!0,this._tryCleanup(t)}},{key:"_tryCleanup",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!this.pendingCleanup)return!1;var Pe=_createForOfIteratorHelper(this._intentStates.values()),Me;try{for(Pe.s();!(Me=Pe.n()).done;){var Ie=Me.value,Be=Ie.renderTasks,ke=Ie.operatorList;if(Be.size>0||!ke.lastChunk)return!1}}catch(_e){Pe.e(_e)}finally{Pe.f()}return this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,t&&this._stats&&(this._stats=new _display_utils.StatTimer),this.pendingCleanup=!1,!0}},{key:"_startRenderPage",value:function(t,Pe){var Me=this._intentStates.get(Pe);!Me||(this._stats&&this._stats.timeEnd("Page Request"),Me.displayReadyCapability&&Me.displayReadyCapability.resolve(t))}},{key:"_renderPageChunk",value:function(t,Pe){for(var Me=0,Ie=t.length;Me<Ie;Me++)Pe.operatorList.fnArray.push(t.fnArray[Me]),Pe.operatorList.argsArray.push(t.argsArray[Me]);Pe.operatorList.lastChunk=t.lastChunk;var Be=_createForOfIteratorHelper(Pe.renderTasks),ke;try{for(Be.s();!(ke=Be.n()).done;){var _e=ke.value;_e.operatorListChanged()}}catch(Ce){Be.e(Ce)}finally{Be.f()}t.lastChunk&&this._tryCleanup()}},{key:"_pumpOperatorList",value:function(t){var Pe=this,Me=t.renderingIntent,Ie=t.cacheKey,Be=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:Me,cacheKey:Ie,annotationStorage:Me&_util.RenderingIntentFlag.ANNOTATIONS_STORAGE?this._transport.annotationStorage.serializable:null}),ke=Be.getReader(),_e=this._intentStates.get(Ie);_e.streamReader=ke;var Ce=function Te(){ke.read().then(function(Se){var xe=Se.value,r=Se.done;if(r){_e.streamReader=null;return}Pe._transport.destroyed||(Pe._renderPageChunk(xe,_e),Te())},function(Se){if(_e.streamReader=null,!Pe._transport.destroyed){if(_e.operatorList){_e.operatorList.lastChunk=!0;var xe=_createForOfIteratorHelper(_e.renderTasks),r;try{for(xe.s();!(r=xe.n()).done;){var Oe=r.value;Oe.operatorListChanged()}}catch(Ee){xe.e(Ee)}finally{xe.f()}Pe._tryCleanup()}if(_e.displayReadyCapability)_e.displayReadyCapability.reject(Se);else if(_e.opListReadCapability)_e.opListReadCapability.reject(Se);else throw Se}})};Ce()}},{key:"_abortOperatorList",value:function(t){var Pe=this,Me=t.intentState,Ie=t.reason,Be=t.force,ke=Be===void 0?!1:Be;if(!!Me.streamReader){if(!ke){if(Me.renderTasks.size>0)return;if(Ie instanceof _display_utils.RenderingCancelledException){Me.streamReaderCancelTimeout=setTimeout(function(){Pe._abortOperatorList({intentState:Me,reason:Ie,force:!0}),Me.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT);return}}if(Me.streamReader.cancel(new _util.AbortException(Ie.message)).catch(function(){}),Me.streamReader=null,!this._transport.destroyed){var _e=_createForOfIteratorHelper(this._intentStates),Ce;try{for(_e.s();!(Ce=_e.n()).done;){var Te=_slicedToArray(Ce.value,2),Se=Te[0],xe=Te[1];if(xe===Me){this._intentStates.delete(Se);break}}}catch(r){_e.e(r)}finally{_e.f()}this.cleanup()}}}},{key:"stats",get:function(){return this._stats}}]),Re}();exports.PDFPageProxy=PDFPageProxy;var LoopbackPort=function(){function Re(){_classCallCheck(this,Re),this._listeners=[],this._deferred=Promise.resolve()}return _createClass(Re,[{key:"postMessage",value:function(t,Pe){var Me=this,Ie={data:Pe?structuredClone(t,Pe):structuredClone(t)};this._deferred.then(function(){var Be=_createForOfIteratorHelper(Me._listeners),ke;try{for(Be.s();!(ke=Be.n()).done;){var _e=ke.value;_e.call(Me,Ie)}}catch(Ce){Be.e(Ce)}finally{Be.f()}})}},{key:"addEventListener",value:function(t,Pe){this._listeners.push(Pe)}},{key:"removeEventListener",value:function(t,Pe){var Me=this._listeners.indexOf(Pe);this._listeners.splice(Me,1)}},{key:"terminate",value:function(){this._listeners.length=0}}]),Re}();exports.LoopbackPort=LoopbackPort;var PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if((typeof document=="undefined"?"undefined":_typeof(document))==="object"){var _document,_document$currentScri,pdfjsFilePath=(_document=document)===null||_document===void 0||(_document$currentScri=_document.currentScript)===null||_document$currentScri===void 0?void 0:_document$currentScri.src;pdfjsFilePath&&(PDFWorkerUtil.fallbackWorkerSrc=pdfjsFilePath.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.createCDNWrapper=function(Re){var e='importScripts("'.concat(Re,'");');return URL.createObjectURL(new Blob([e]))}}var PDFWorker=function(){function PDFWorker(){var Re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=Re.name,t=e===void 0?null:e,Pe=Re.port,Me=Pe===void 0?null:Pe,Ie=Re.verbosity,Be=Ie===void 0?(0,_util.getVerbosityLevel)():Ie;if(_classCallCheck(this,PDFWorker),Me&&PDFWorker._workerPorts.has(Me))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=t,this.destroyed=!1,this.verbosity=Be,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,Me){PDFWorker._workerPorts.set(Me,this),this._initializeFromPort(Me);return}this._initialize()}return _createClass(PDFWorker,[{key:"promise",get:function(){return this._readyCapability.promise}},{key:"port",get:function(){return this._port}},{key:"messageHandler",get:function(){return this._messageHandler}},{key:"_initializeFromPort",value:function(e){this._port=e,this._messageHandler=new _message_handler.MessageHandler("main","worker",e),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}},{key:"_initialize",value:function(){var e=this;if(typeof Worker!="undefined"&&!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){var t=PDFWorker.workerSrc;try{(0,_util.isSameOrigin)(window.location.href,t)||(t=PDFWorkerUtil.createCDNWrapper(new URL(t,window.location).href));var Pe=new Worker(t),Me=new _message_handler.MessageHandler("main","worker",Pe),Ie=function(){Pe.removeEventListener("error",Be),Me.destroy(),Pe.terminate(),e.destroyed?e._readyCapability.reject(new Error("Worker was destroyed")):e._setupFakeWorker()},Be=function(){e._webWorker||Ie()};Pe.addEventListener("error",Be),Me.on("test",function(_e){if(Pe.removeEventListener("error",Be),e.destroyed){Ie();return}_e?(e._messageHandler=Me,e._port=Pe,e._webWorker=Pe,e._readyCapability.resolve(),Me.send("configure",{verbosity:e.verbosity})):(e._setupFakeWorker(),Me.destroy(),Pe.terminate())}),Me.on("ready",function(_e){if(Pe.removeEventListener("error",Be),e.destroyed){Ie();return}try{ke()}catch{e._setupFakeWorker()}});var ke=function(){var Ce=new Uint8Array([255]);try{Me.send("test",Ce,[Ce.buffer])}catch{(0,_util.warn)("Cannot use postMessage transfers."),Ce[0]=0,Me.send("test",Ce)}};ke();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}},{key:"_setupFakeWorker",value:function(){var e=this;PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then(function(t){if(e.destroyed){e._readyCapability.reject(new Error("Worker was destroyed"));return}var Pe=new LoopbackPort;e._port=Pe;var Me="fake".concat(PDFWorkerUtil.fakeWorkerId++),Ie=new _message_handler.MessageHandler(Me+"_worker",Me,Pe);t.setup(Ie,Pe);var Be=new _message_handler.MessageHandler(Me,Me+"_worker",Pe);e._messageHandler=Be,e._readyCapability.resolve(),Be.send("configure",{verbosity:e.verbosity})}).catch(function(t){e._readyCapability.reject(new Error('Setting up fake worker failed: "'.concat(t.message,'".')))})}},{key:"destroy",value:function(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),PDFWorker._workerPorts.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}}],[{key:"_workerPorts",get:function(){return(0,_util.shadow)(this,"_workerPorts",new WeakMap)}},{key:"fromPort",value:function(e){if(!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return this._workerPorts.has(e.port)?this._workerPorts.get(e.port):new PDFWorker(e)}},{key:"workerSrc",get:function(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}},{key:"_mainThreadWorkerMessageHandler",get:function(){try{var e;return((e=globalThis.pdfjsWorker)===null||e===void 0?void 0:e.WorkerMessageHandler)||null}catch{return null}}},{key:"_setupFakeWorkerGlobal",get:function get(){var _this11=this,loader=function(){var _ref15=_asyncToGenerator(_regenerator.default.mark(function _callee4(){var mainWorkerMessageHandler,worker;return _regenerator.default.wrap(function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(mainWorkerMessageHandler=_this11._mainThreadWorkerMessageHandler,!mainWorkerMessageHandler){_context4.next=3;break}return _context4.abrupt("return",mainWorkerMessageHandler);case 3:if(!(_is_node.isNodeJS&&typeof commonjsRequire=="function")){_context4.next=6;break}return worker=eval("require")(_this11.workerSrc),_context4.abrupt("return",worker.WorkerMessageHandler);case 6:return _context4.next=8,(0,_display_utils.loadScript)(_this11.workerSrc);case 8:return _context4.abrupt("return",window.pdfjsWorker.WorkerMessageHandler);case 9:case"end":return _context4.stop()}},_callee4)}));return function Re(){return _ref15.apply(this,arguments)}}();return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}]),PDFWorker}();exports.PDFWorker=PDFWorker,PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};var _docStats=new WeakMap,_pageCache=new WeakMap,_pagePromises=new WeakMap,_metadataPromise=new WeakMap,WorkerTransport=function(){function Re(e,t,Pe,Me){_classCallCheck(this,Re),_classPrivateFieldInitSpec(this,_docStats,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,_pageCache,{writable:!0,value:new Map}),_classPrivateFieldInitSpec(this,_pagePromises,{writable:!0,value:new Map}),_classPrivateFieldInitSpec(this,_metadataPromise,{writable:!0,value:null}),this.messageHandler=e,this.loadingTask=t,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:t.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:Me.ownerDocument,styleElement:Me.styleElement}),this._params=Me,Me.useWorkerFetch||(this.CMapReaderFactory=new Me.CMapReaderFactory({baseUrl:Me.cMapUrl,isCompressed:Me.cMapPacked}),this.StandardFontDataFactory=new Me.StandardFontDataFactory({baseUrl:Me.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=Pe,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}return _createClass(Re,[{key:"annotationStorage",get:function(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}},{key:"stats",get:function(){return _classPrivateFieldGet(this,_docStats)}},{key:"getRenderingIntent",value:function(t){var Pe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_util.AnnotationMode.ENABLE,Me=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,Ie=_util.RenderingIntentFlag.DISPLAY,Be="";switch(t){case"any":Ie=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":Ie=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)("getRenderingIntent - invalid intent: ".concat(t))}switch(Pe){case _util.AnnotationMode.DISABLE:Ie+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:Ie+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:Ie+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,Be=this.annotationStorage.lastModified;break;default:(0,_util.warn)("getRenderingIntent - invalid annotationMode: ".concat(Pe))}return Me&&(Ie+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:Ie,cacheKey:"".concat(Ie,"_").concat(Be)}}},{key:"destroy",value:function(){var t=this;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));var Pe=[],Me=_createForOfIteratorHelper(_classPrivateFieldGet(this,_pageCache).values()),Ie;try{for(Me.s();!(Ie=Me.n()).done;){var Be=Ie.value;Pe.push(Be._destroy())}}catch(_e){Me.e(_e)}finally{Me.f()}_classPrivateFieldGet(this,_pageCache).clear(),_classPrivateFieldGet(this,_pagePromises).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();var ke=this.messageHandler.sendWithPromise("Terminate",null);return Pe.push(ke),Promise.all(Pe).then(function(){t.commonObjs.clear(),t.fontLoader.clear(),_classPrivateFieldSet(t,_metadataPromise,null),t._getFieldObjectsPromise=null,t._hasJSActionsPromise=null,t._networkStream&&t._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),t.messageHandler&&(t.messageHandler.destroy(),t.messageHandler=null),t.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}},{key:"setupMessageHandler",value:function(){var t=this,Pe=this.messageHandler,Me=this.loadingTask;Pe.on("GetReader",function(Ie,Be){(0,_util.assert)(t._networkStream,"GetReader - no `IPDFStream` instance available."),t._fullReader=t._networkStream.getFullReader(),t._fullReader.onProgress=function(ke){t._lastProgress={loaded:ke.loaded,total:ke.total}},Be.onPull=function(){t._fullReader.read().then(function(ke){var _e=ke.value,Ce=ke.done;if(Ce){Be.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(_e),"GetReader - expected an ArrayBuffer."),Be.enqueue(new Uint8Array(_e),1,[_e])}).catch(function(ke){Be.error(ke)})},Be.onCancel=function(ke){t._fullReader.cancel(ke),Be.ready.catch(function(_e){if(!t.destroyed)throw _e})}}),Pe.on("ReaderHeadersReady",function(Ie){var Be=(0,_util.createPromiseCapability)(),ke=t._fullReader;return ke.headersReady.then(function(){if(!ke.isStreamingSupported||!ke.isRangeSupported){if(t._lastProgress){var _e;(_e=Me.onProgress)===null||_e===void 0||_e.call(Me,t._lastProgress)}ke.onProgress=function(Ce){var Te;(Te=Me.onProgress)===null||Te===void 0||Te.call(Me,{loaded:Ce.loaded,total:Ce.total})}}Be.resolve({isStreamingSupported:ke.isStreamingSupported,isRangeSupported:ke.isRangeSupported,contentLength:ke.contentLength})},Be.reject),Be.promise}),Pe.on("GetRangeReader",function(Ie,Be){(0,_util.assert)(t._networkStream,"GetRangeReader - no `IPDFStream` instance available.");var ke=t._networkStream.getRangeReader(Ie.begin,Ie.end);if(!ke){Be.close();return}Be.onPull=function(){ke.read().then(function(_e){var Ce=_e.value,Te=_e.done;if(Te){Be.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(Ce),"GetRangeReader - expected an ArrayBuffer."),Be.enqueue(new Uint8Array(Ce),1,[Ce])}).catch(function(_e){Be.error(_e)})},Be.onCancel=function(_e){ke.cancel(_e),Be.ready.catch(function(Ce){if(!t.destroyed)throw Ce})}}),Pe.on("GetDoc",function(Ie){var Be=Ie.pdfInfo;t._numPages=Be.numPages,t._htmlForXfa=Be.htmlForXfa,delete Be.htmlForXfa,Me._capability.resolve(new PDFDocumentProxy(Be,t))}),Pe.on("DocException",function(Ie){var Be;switch(Ie.name){case"PasswordException":Be=new _util.PasswordException(Ie.message,Ie.code);break;case"InvalidPDFException":Be=new _util.InvalidPDFException(Ie.message);break;case"MissingPDFException":Be=new _util.MissingPDFException(Ie.message);break;case"UnexpectedResponseException":Be=new _util.UnexpectedResponseException(Ie.message,Ie.status);break;case"UnknownErrorException":Be=new _util.UnknownErrorException(Ie.message,Ie.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}Me._capability.reject(Be)}),Pe.on("PasswordRequest",function(Ie){if(t._passwordCapability=(0,_util.createPromiseCapability)(),Me.onPassword){var Be=function(_e){_e instanceof Error?t._passwordCapability.reject(_e):t._passwordCapability.resolve({password:_e})};try{Me.onPassword(Be,Ie.code)}catch(ke){t._passwordCapability.reject(ke)}}else t._passwordCapability.reject(new _util.PasswordException(Ie.message,Ie.code));return t._passwordCapability.promise}),Pe.on("DataLoaded",function(Ie){var Be;(Be=Me.onProgress)===null||Be===void 0||Be.call(Me,{loaded:Ie.length,total:Ie.length}),t.downloadInfoCapability.resolve(Ie)}),Pe.on("StartRenderPage",function(Ie){if(!t.destroyed){var Be=_classPrivateFieldGet(t,_pageCache).get(Ie.pageIndex);Be._startRenderPage(Ie.transparency,Ie.cacheKey)}}),Pe.on("commonobj",function(Ie){var Be,ke=_slicedToArray(Ie,3),_e=ke[0],Ce=ke[1],Te=ke[2];if(!t.destroyed&&!t.commonObjs.has(_e))switch(Ce){case"Font":var Se=t._params;if("error"in Te){var xe=Te.error;(0,_util.warn)("Error during font loading: ".concat(xe)),t.commonObjs.resolve(_e,xe);break}var r=null;Se.pdfBug&&(Be=globalThis.FontInspector)!==null&&Be!==void 0&&Be.enabled&&(r={registerFont:function(Ae,Fe){globalThis.FontInspector.fontAdded(Ae,Fe)}});var Oe=new _font_loader.FontFaceObject(Te,{isEvalSupported:Se.isEvalSupported,disableFontFace:Se.disableFontFace,ignoreErrors:Se.ignoreErrors,onUnsupportedFeature:t._onUnsupportedFeature.bind(t),fontRegistry:r});t.fontLoader.bind(Oe).catch(function(Ee){return Pe.sendWithPromise("FontFallback",{id:_e})}).finally(function(){!Se.fontExtraProperties&&Oe.data&&(Oe.data=null),t.commonObjs.resolve(_e,Oe)});break;case"FontPath":case"Image":t.commonObjs.resolve(_e,Te);break;default:throw new Error("Got unknown common object type ".concat(Ce))}}),Pe.on("obj",function(Ie){var Be,ke=_slicedToArray(Ie,4),_e=ke[0],Ce=ke[1],Te=ke[2],Se=ke[3];if(!t.destroyed){var xe=_classPrivateFieldGet(t,_pageCache).get(Ce);if(!xe.objs.has(_e))switch(Te){case"Image":xe.objs.resolve(_e,Se);var r=8e6;(Se==null||(Be=Se.data)===null||Be===void 0?void 0:Be.length)>r&&(xe.cleanupAfterRender=!0);break;case"Pattern":xe.objs.resolve(_e,Se);break;default:throw new Error("Got unknown object type ".concat(Te))}}}),Pe.on("DocProgress",function(Ie){var Be;t.destroyed||(Be=Me.onProgress)===null||Be===void 0||Be.call(Me,{loaded:Ie.loaded,total:Ie.total})}),Pe.on("DocStats",function(Ie){t.destroyed||_classPrivateFieldSet(t,_docStats,Object.freeze({streamTypes:Object.freeze(Ie.streamTypes),fontTypes:Object.freeze(Ie.fontTypes)}))}),Pe.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),Pe.on("FetchBuiltInCMap",function(Ie){return t.destroyed?Promise.reject(new Error("Worker was destroyed.")):t.CMapReaderFactory?t.CMapReaderFactory.fetch(Ie):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))}),Pe.on("FetchStandardFontData",function(Ie){return t.destroyed?Promise.reject(new Error("Worker was destroyed.")):t.StandardFontDataFactory?t.StandardFontDataFactory.fetch(Ie):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter."))})}},{key:"_onUnsupportedFeature",value:function(t){var Pe,Me,Ie=t.featureId;this.destroyed||(Pe=(Me=this.loadingTask).onUnsupportedFeature)===null||Pe===void 0||Pe.call(Me,Ie)}},{key:"getData",value:function(){return this.messageHandler.sendWithPromise("GetData",null)}},{key:"getPage",value:function(t){var Pe=this;if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));var Me=t-1,Ie=_classPrivateFieldGet(this,_pagePromises).get(Me);if(Ie)return Ie;var Be=this.messageHandler.sendWithPromise("GetPage",{pageIndex:Me}).then(function(ke){if(Pe.destroyed)throw new Error("Transport destroyed");var _e=new PDFPageProxy(Me,ke,Pe,Pe._params.ownerDocument,Pe._params.pdfBug);return _classPrivateFieldGet(Pe,_pageCache).set(Me,_e),_e});return _classPrivateFieldGet(this,_pagePromises).set(Me,Be),Be}},{key:"getPageIndex",value:function(t){return _typeof(t)!=="object"||t===null||!Number.isInteger(t.num)||t.num<0||!Number.isInteger(t.gen)||t.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen})}},{key:"getAnnotations",value:function(t,Pe){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:Pe})}},{key:"saveDocument",value:function(){var t,Pe,Me=this;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:(t=(Pe=this._fullReader)===null||Pe===void 0?void 0:Pe.filename)!==null&&t!==void 0?t:null}).finally(function(){Me.annotationStorage.resetModified()})}},{key:"getFieldObjects",value:function(){return this._getFieldObjectsPromise||(this._getFieldObjectsPromise=this.messageHandler.sendWithPromise("GetFieldObjects",null))}},{key:"hasJSActions",value:function(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}},{key:"getCalculationOrderIds",value:function(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}},{key:"getDestinations",value:function(){return this.messageHandler.sendWithPromise("GetDestinations",null)}},{key:"getDestination",value:function(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}},{key:"getPageLabels",value:function(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}},{key:"getPageLayout",value:function(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}},{key:"getPageMode",value:function(){return this.messageHandler.sendWithPromise("GetPageMode",null)}},{key:"getViewerPreferences",value:function(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}},{key:"getOpenAction",value:function(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}},{key:"getAttachments",value:function(){return this.messageHandler.sendWithPromise("GetAttachments",null)}},{key:"getJavaScript",value:function(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}},{key:"getDocJSActions",value:function(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}},{key:"getPageJSActions",value:function(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}},{key:"getStructTree",value:function(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}},{key:"getOutline",value:function(){return this.messageHandler.sendWithPromise("GetOutline",null)}},{key:"getOptionalContentConfig",value:function(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(function(t){return new _optional_content_config.OptionalContentConfig(t)})}},{key:"getPermissions",value:function(){return this.messageHandler.sendWithPromise("GetPermissions",null)}},{key:"getMetadata",value:function(){var t=this;return _classPrivateFieldGet(this,_metadataPromise)||_classPrivateFieldSet(this,_metadataPromise,this.messageHandler.sendWithPromise("GetMetadata",null).then(function(Pe){var Me,Ie,Be,ke;return{info:Pe[0],metadata:Pe[1]?new _metadata.Metadata(Pe[1]):null,contentDispositionFilename:(Me=(Ie=t._fullReader)===null||Ie===void 0?void 0:Ie.filename)!==null&&Me!==void 0?Me:null,contentLength:(Be=(ke=t._fullReader)===null||ke===void 0?void 0:ke.contentLength)!==null&&Be!==void 0?Be:null}}))}},{key:"getMarkInfo",value:function(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}},{key:"startCleanup",value:function(){var e=_asyncToGenerator(_regenerator.default.mark(function Pe(){var Me,Ie,Be,ke,_e,Ce=arguments;return _regenerator.default.wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:return Me=Ce.length>0&&Ce[0]!==void 0?Ce[0]:!1,Se.next=3,this.messageHandler.sendWithPromise("Cleanup",null);case 3:if(!this.destroyed){Se.next=5;break}return Se.abrupt("return");case 5:Ie=_createForOfIteratorHelper(_classPrivateFieldGet(this,_pageCache).values()),Se.prev=6,Ie.s();case 8:if((Be=Ie.n()).done){Se.next=15;break}if(ke=Be.value,_e=ke.cleanup(),_e){Se.next=13;break}throw new Error("startCleanup: Page ".concat(ke.pageNumber," is currently rendering."));case 13:Se.next=8;break;case 15:Se.next=20;break;case 17:Se.prev=17,Se.t0=Se.catch(6),Ie.e(Se.t0);case 20:return Se.prev=20,Ie.f(),Se.finish(20);case 23:this.commonObjs.clear(),Me||this.fontLoader.clear(),_classPrivateFieldSet(this,_metadataPromise,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null;case 28:case"end":return Se.stop()}},Pe,this,[[6,17,20,23]])}));function t(){return e.apply(this,arguments)}return t}()},{key:"loadingParams",get:function(){var t=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:t.disableAutoFetch,enableXfa:t.enableXfa})}}]),Re}(),_objs=new WeakMap,_ensureObj=new WeakSet,PDFObjects=function(){function Re(){_classCallCheck(this,Re),_classPrivateMethodInitSpec(this,_ensureObj),_classPrivateFieldInitSpec(this,_objs,{writable:!0,value:Object.create(null)})}return _createClass(Re,[{key:"get",value:function(t){var Pe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(Pe){var Me=_classPrivateMethodGet(this,_ensureObj,_ensureObj2).call(this,t);return Me.capability.promise.then(function(){return Pe(Me.data)}),null}var Ie=_classPrivateFieldGet(this,_objs)[t];if(!(Ie!=null&&Ie.capability.settled))throw new Error("Requesting object that isn't resolved yet ".concat(t,"."));return Ie.data}},{key:"has",value:function(t){var Pe=_classPrivateFieldGet(this,_objs)[t];return(Pe==null?void 0:Pe.capability.settled)||!1}},{key:"resolve",value:function(t){var Pe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,Me=_classPrivateMethodGet(this,_ensureObj,_ensureObj2).call(this,t);Me.data=Pe,Me.capability.resolve()}},{key:"clear",value:function(){_classPrivateFieldSet(this,_objs,Object.create(null))}}]),Re}();function _ensureObj2(Re){var e=_classPrivateFieldGet(this,_objs)[Re];return e||(_classPrivateFieldGet(this,_objs)[Re]={capability:(0,_util.createPromiseCapability)(),data:null})}var RenderTask=function(){function Re(e){_classCallCheck(this,Re),this._internalRenderTask=e,this.onContinue=null}return _createClass(Re,[{key:"promise",get:function(){return this._internalRenderTask.capability.promise}},{key:"cancel",value:function(){this._internalRenderTask.cancel()}}]),Re}();exports.RenderTask=RenderTask;var InternalRenderTask=function(){function Re(e){var t=e.callback,Pe=e.params,Me=e.objs,Ie=e.commonObjs,Be=e.annotationCanvasMap,ke=e.operatorList,_e=e.pageIndex,Ce=e.canvasFactory,Te=e.useRequestAnimationFrame,Se=Te===void 0?!1:Te,xe=e.pdfBug,r=xe===void 0?!1:xe;_classCallCheck(this,Re),this.callback=t,this.params=Pe,this.objs=Me,this.commonObjs=Ie,this.annotationCanvasMap=Be,this.operatorListIdx=null,this.operatorList=ke,this._pageIndex=_e,this.canvasFactory=Ce,this._pdfBug=r,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=Se===!0&&typeof window!="undefined",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=Pe.canvasContext.canvas}return _createClass(Re,[{key:"completed",get:function(){return this.capability.promise.catch(function(){})}},{key:"initializeGraphics",value:function(t){var Pe,Me=t.transparency,Ie=Me===void 0?!1:Me,Be=t.optionalContentConfig;if(!this.cancelled){if(this._canvas){if(Re.canvasInUse.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Re.canvasInUse.add(this._canvas)}this._pdfBug&&(Pe=globalThis.StepperManager)!==null&&Pe!==void 0&&Pe.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());var ke=this.params,_e=ke.canvasContext,Ce=ke.viewport,Te=ke.transform,Se=ke.imageLayer,xe=ke.background;this.gfx=new _canvas.CanvasGraphics(_e,this.commonObjs,this.objs,this.canvasFactory,Se,Be,this.annotationCanvasMap),this.gfx.beginDrawing({transform:Te,viewport:Ce,transparency:Ie,background:xe}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}}},{key:"cancel",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&Re.canvasInUse.delete(this._canvas),this.callback(t||new _display_utils.RenderingCancelledException("Rendering cancelled, page ".concat(this._pageIndex+1),"canvas"))}},{key:"operatorListChanged",value:function(){if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()}},{key:"_continue",value:function(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}},{key:"_scheduleNext",value:function(){var t=this;this._useRequestAnimationFrame?window.requestAnimationFrame(function(){t._nextBound().catch(t._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}},{key:"_next",value:function(){var e=_asyncToGenerator(_regenerator.default.mark(function Pe(){return _regenerator.default.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:if(!this.cancelled){Ie.next=2;break}return Ie.abrupt("return");case 2:this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&Re.canvasInUse.delete(this._canvas),this.callback()));case 4:case"end":return Ie.stop()}},Pe,this)}));function t(){return e.apply(this,arguments)}return t}()}],[{key:"canvasInUse",get:function(){return(0,_util.shadow)(this,"canvasInUse",new WeakSet)}}]),Re}(),version="2.13.216";exports.version=version;var build="399a0ec60";exports.build=build},(Re,e,t)=>{Re.exports=t(146)},(Re,e,t)=>{Re=t.nmd(Re);function Pe(Ie){return Pe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Be){return typeof Be}:function(Be){return Be&&typeof Symbol=="function"&&Be.constructor===Symbol&&Be!==Symbol.prototype?"symbol":typeof Be},Pe(Ie)}var Me=function(Ie){var Be=Object.prototype,ke=Be.hasOwnProperty,_e,Ce=typeof Symbol=="function"?Symbol:{},Te=Ce.iterator||"@@iterator",Se=Ce.asyncIterator||"@@asyncIterator",xe=Ce.toStringTag||"@@toStringTag";function r($e,Ve,Je){return Object.defineProperty($e,Ve,{value:Je,enumerable:!0,configurable:!0,writable:!0}),$e[Ve]}try{r({},"")}catch{r=function(Je,Ze,St){return Je[Ze]=St}}function Oe($e,Ve,Je,Ze){var St=Ve&&Ve.prototype instanceof We?Ve:We,vr=Object.create(St.prototype),mr=new Sr(Ze||[]);return vr._invoke=cr($e,Je,mr),vr}Ie.wrap=Oe;function Ee($e,Ve,Je){try{return{type:"normal",arg:$e.call(Ve,Je)}}catch(Ze){return{type:"throw",arg:Ze}}}var Ae="suspendedStart",Fe="suspendedYield",De="executing",ze="completed",je={};function We(){}function Ge(){}function Ye(){}var Xe={};r(Xe,Te,function(){return this});var Ke=Object.getPrototypeOf,er=Ke&&Ke(Ke(lr([])));er&&er!==Be&&ke.call(er,Te)&&(Xe=er);var Qe=Ye.prototype=We.prototype=Object.create(Xe);Ge.prototype=Ye,r(Qe,"constructor",Ye),r(Ye,"constructor",Ge),Ge.displayName=r(Ye,xe,"GeneratorFunction");function nr($e){["next","throw","return"].forEach(function(Ve){r($e,Ve,function(Je){return this._invoke(Ve,Je)})})}Ie.isGeneratorFunction=function($e){var Ve=typeof $e=="function"&&$e.constructor;return Ve?Ve===Ge||(Ve.displayName||Ve.name)==="GeneratorFunction":!1},Ie.mark=function($e){return Object.setPrototypeOf?Object.setPrototypeOf($e,Ye):($e.__proto__=Ye,r($e,xe,"GeneratorFunction")),$e.prototype=Object.create(Qe),$e},Ie.awrap=function($e){return{__await:$e}};function ir($e,Ve){function Je(vr,mr,Cr,_r){var pr=Ee($e[vr],$e,mr);if(pr.type==="throw")_r(pr.arg);else{var dr=pr.arg,ur=dr.value;return ur&&Pe(ur)==="object"&&ke.call(ur,"__await")?Ve.resolve(ur.__await).then(function(rr){Je("next",rr,Cr,_r)},function(rr){Je("throw",rr,Cr,_r)}):Ve.resolve(ur).then(function(rr){dr.value=rr,Cr(dr)},function(rr){return Je("throw",rr,Cr,_r)})}}var Ze;function St(vr,mr){function Cr(){return new Ve(function(_r,pr){Je(vr,mr,_r,pr)})}return Ze=Ze?Ze.then(Cr,Cr):Cr()}this._invoke=St}nr(ir.prototype),r(ir.prototype,Se,function(){return this}),Ie.AsyncIterator=ir,Ie.async=function($e,Ve,Je,Ze,St){St===void 0&&(St=Promise);var vr=new ir(Oe($e,Ve,Je,Ze),St);return Ie.isGeneratorFunction(Ve)?vr:vr.next().then(function(mr){return mr.done?mr.value:vr.next()})};function cr($e,Ve,Je){var Ze=Ae;return function(vr,mr){if(Ze===De)throw new Error("Generator is already running");if(Ze===ze){if(vr==="throw")throw mr;return fr()}for(Je.method=vr,Je.arg=mr;;){var Cr=Je.delegate;if(Cr){var _r=br(Cr,Je);if(_r){if(_r===je)continue;return _r}}if(Je.method==="next")Je.sent=Je._sent=Je.arg;else if(Je.method==="throw"){if(Ze===Ae)throw Ze=ze,Je.arg;Je.dispatchException(Je.arg)}else Je.method==="return"&&Je.abrupt("return",Je.arg);Ze=De;var pr=Ee($e,Ve,Je);if(pr.type==="normal"){if(Ze=Je.done?ze:Fe,pr.arg===je)continue;return{value:pr.arg,done:Je.done}}else pr.type==="throw"&&(Ze=ze,Je.method="throw",Je.arg=pr.arg)}}}function br($e,Ve){var Je=$e.iterator[Ve.method];if(Je===_e){if(Ve.delegate=null,Ve.method==="throw"){if($e.iterator.return&&(Ve.method="return",Ve.arg=_e,br($e,Ve),Ve.method==="throw"))return je;Ve.method="throw",Ve.arg=new TypeError("The iterator does not provide a 'throw' method")}return je}var Ze=Ee(Je,$e.iterator,Ve.arg);if(Ze.type==="throw")return Ve.method="throw",Ve.arg=Ze.arg,Ve.delegate=null,je;var St=Ze.arg;if(!St)return Ve.method="throw",Ve.arg=new TypeError("iterator result is not an object"),Ve.delegate=null,je;if(St.done)Ve[$e.resultName]=St.value,Ve.next=$e.nextLoc,Ve.method!=="return"&&(Ve.method="next",Ve.arg=_e);else return St;return Ve.delegate=null,je}nr(Qe),r(Qe,xe,"Generator"),r(Qe,Te,function(){return this}),r(Qe,"toString",function(){return"[object Generator]"});function wr($e){var Ve={tryLoc:$e[0]};1 in $e&&(Ve.catchLoc=$e[1]),2 in $e&&(Ve.finallyLoc=$e[2],Ve.afterLoc=$e[3]),this.tryEntries.push(Ve)}function xr($e){var Ve=$e.completion||{};Ve.type="normal",delete Ve.arg,$e.completion=Ve}function Sr($e){this.tryEntries=[{tryLoc:"root"}],$e.forEach(wr,this),this.reset(!0)}Ie.keys=function($e){var Ve=[];for(var Je in $e)Ve.push(Je);return Ve.reverse(),function Ze(){for(;Ve.length;){var St=Ve.pop();if(St in $e)return Ze.value=St,Ze.done=!1,Ze}return Ze.done=!0,Ze}};function lr($e){if($e){var Ve=$e[Te];if(Ve)return Ve.call($e);if(typeof $e.next=="function")return $e;if(!isNaN($e.length)){var Je=-1,Ze=function St(){for(;++Je<$e.length;)if(ke.call($e,Je))return St.value=$e[Je],St.done=!1,St;return St.value=_e,St.done=!0,St};return Ze.next=Ze}}return{next:fr}}Ie.values=lr;function fr(){return{value:_e,done:!0}}return Sr.prototype={constructor:Sr,reset:function(Ve){if(this.prev=0,this.next=0,this.sent=this._sent=_e,this.done=!1,this.delegate=null,this.method="next",this.arg=_e,this.tryEntries.forEach(xr),!Ve)for(var Je in this)Je.charAt(0)==="t"&&ke.call(this,Je)&&!isNaN(+Je.slice(1))&&(this[Je]=_e)},stop:function(){this.done=!0;var Ve=this.tryEntries[0],Je=Ve.completion;if(Je.type==="throw")throw Je.arg;return this.rval},dispatchException:function(Ve){if(this.done)throw Ve;var Je=this;function Ze(pr,dr){return mr.type="throw",mr.arg=Ve,Je.next=pr,dr&&(Je.method="next",Je.arg=_e),!!dr}for(var St=this.tryEntries.length-1;St>=0;--St){var vr=this.tryEntries[St],mr=vr.completion;if(vr.tryLoc==="root")return Ze("end");if(vr.tryLoc<=this.prev){var Cr=ke.call(vr,"catchLoc"),_r=ke.call(vr,"finallyLoc");if(Cr&&_r){if(this.prev<vr.catchLoc)return Ze(vr.catchLoc,!0);if(this.prev<vr.finallyLoc)return Ze(vr.finallyLoc)}else if(Cr){if(this.prev<vr.catchLoc)return Ze(vr.catchLoc,!0)}else if(_r){if(this.prev<vr.finallyLoc)return Ze(vr.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(Ve,Je){for(var Ze=this.tryEntries.length-1;Ze>=0;--Ze){var St=this.tryEntries[Ze];if(St.tryLoc<=this.prev&&ke.call(St,"finallyLoc")&&this.prev<St.finallyLoc){var vr=St;break}}vr&&(Ve==="break"||Ve==="continue")&&vr.tryLoc<=Je&&Je<=vr.finallyLoc&&(vr=null);var mr=vr?vr.completion:{};return mr.type=Ve,mr.arg=Je,vr?(this.method="next",this.next=vr.finallyLoc,je):this.complete(mr)},complete:function(Ve,Je){if(Ve.type==="throw")throw Ve.arg;return Ve.type==="break"||Ve.type==="continue"?this.next=Ve.arg:Ve.type==="return"?(this.rval=this.arg=Ve.arg,this.method="return",this.next="end"):Ve.type==="normal"&&Je&&(this.next=Je),je},finish:function(Ve){for(var Je=this.tryEntries.length-1;Je>=0;--Je){var Ze=this.tryEntries[Je];if(Ze.finallyLoc===Ve)return this.complete(Ze.completion,Ze.afterLoc),xr(Ze),je}},catch:function(Ve){for(var Je=this.tryEntries.length-1;Je>=0;--Je){var Ze=this.tryEntries[Je];if(Ze.tryLoc===Ve){var St=Ze.completion;if(St.type==="throw"){var vr=St.arg;xr(Ze)}return vr}}throw new Error("illegal catch attempt")},delegateYield:function(Ve,Je,Ze){return this.delegate={iterator:lr(Ve),resultName:Je,nextLoc:Ze},this.method==="next"&&(this.arg=_e),je}},Ie}(Pe(Re)==="object"?Re.exports:{});try{regeneratorRuntime=Me}catch{(typeof globalThis=="undefined"?"undefined":Pe(globalThis))==="object"?globalThis.regeneratorRuntime=Me:Function("r","regeneratorRuntime = r")(Me)}},(Re,e,t)=>{function Pe(_r){return Pe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(pr){return typeof pr}:function(pr){return pr&&typeof Symbol=="function"&&pr.constructor===Symbol&&pr!==Symbol.prototype?"symbol":typeof pr},Pe(_r)}Object.defineProperty(e,"__esModule",{value:!0}),e.StatTimer=e.RenderingCancelledException=e.PixelsPerInch=e.PageViewport=e.PDFDateString=e.DOMStandardFontDataFactory=e.DOMSVGFactory=e.DOMCanvasFactory=e.DOMCMapReaderFactory=void 0,e.deprecated=St,e.getFilenameFromUrl=fr,e.getPdfFilenameFromUrl=$e,e.getXfaPageViewport=Cr,e.isDataScheme=Sr,e.isPdfFile=lr,e.isValidFetchUrl=Je,e.loadScript=Ze;var Me=ke(t(145)),Ie=t(148),Be=t(1);function ke(_r){return _r&&_r.__esModule?_r:{default:_r}}function _e(_r,pr){var dr=typeof Symbol!="undefined"&&_r[Symbol.iterator]||_r["@@iterator"];if(!dr){if(Array.isArray(_r)||(dr=Ce(_r))||pr&&_r&&typeof _r.length=="number"){dr&&(_r=dr);var ur=0,rr=function(){};return{s:rr,n:function(){return ur>=_r.length?{done:!0}:{done:!1,value:_r[ur++]}},e:function(Or){throw Or},f:rr}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var gr=!0,hr=!1,sr;return{s:function(){dr=dr.call(_r)},n:function(){var Or=dr.next();return gr=Or.done,Or},e:function(Or){hr=!0,sr=Or},f:function(){try{!gr&&dr.return!=null&&dr.return()}finally{if(hr)throw sr}}}}function Ce(_r,pr){if(!!_r){if(typeof _r=="string")return Te(_r,pr);var dr=Object.prototype.toString.call(_r).slice(8,-1);if(dr==="Object"&&_r.constructor&&(dr=_r.constructor.name),dr==="Map"||dr==="Set")return Array.from(_r);if(dr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(dr))return Te(_r,pr)}}function Te(_r,pr){(pr==null||pr>_r.length)&&(pr=_r.length);for(var dr=0,ur=new Array(pr);dr<pr;dr++)ur[dr]=_r[dr];return ur}function Se(_r,pr,dr,ur,rr,gr,hr){try{var sr=_r[gr](hr),Ar=sr.value}catch(Or){dr(Or);return}sr.done?pr(Ar):Promise.resolve(Ar).then(ur,rr)}function xe(_r){return function(){var pr=this,dr=arguments;return new Promise(function(ur,rr){var gr=_r.apply(pr,dr);function hr(Ar){Se(gr,ur,rr,hr,sr,"next",Ar)}function sr(Ar){Se(gr,ur,rr,hr,sr,"throw",Ar)}hr(void 0)})}}function r(_r,pr){if(typeof pr!="function"&&pr!==null)throw new TypeError("Super expression must either be null or a function");_r.prototype=Object.create(pr&&pr.prototype,{constructor:{value:_r,writable:!0,configurable:!0}}),Object.defineProperty(_r,"prototype",{writable:!1}),pr&&Oe(_r,pr)}function Oe(_r,pr){return Oe=Object.setPrototypeOf||function(ur,rr){return ur.__proto__=rr,ur},Oe(_r,pr)}function Ee(_r){var pr=De();return function(){var ur=ze(_r),rr;if(pr){var gr=ze(this).constructor;rr=Reflect.construct(ur,arguments,gr)}else rr=ur.apply(this,arguments);return Ae(this,rr)}}function Ae(_r,pr){if(pr&&(Pe(pr)==="object"||typeof pr=="function"))return pr;if(pr!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Fe(_r)}function Fe(_r){if(_r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _r}function De(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ze(_r){return ze=Object.setPrototypeOf?Object.getPrototypeOf:function(dr){return dr.__proto__||Object.getPrototypeOf(dr)},ze(_r)}function je(_r,pr){for(var dr=0;dr<pr.length;dr++){var ur=pr[dr];ur.enumerable=ur.enumerable||!1,ur.configurable=!0,"value"in ur&&(ur.writable=!0),Object.defineProperty(_r,ur.key,ur)}}function We(_r,pr,dr){return pr&&je(_r.prototype,pr),dr&&je(_r,dr),Object.defineProperty(_r,"prototype",{writable:!1}),_r}function Ge(_r,pr){if(!(_r instanceof pr))throw new TypeError("Cannot call a class as a function")}function Ye(_r,pr,dr){return pr in _r?Object.defineProperty(_r,pr,{value:dr,enumerable:!0,configurable:!0,writable:!0}):_r[pr]=dr,_r}var Xe="http://www.w3.org/2000/svg",Ke=We(function _r(){Ge(this,_r)});e.PixelsPerInch=Ke,Ye(Ke,"CSS",96),Ye(Ke,"PDF",72),Ye(Ke,"PDF_TO_CSS_UNITS",Ke.CSS/Ke.PDF);var er=function(_r){r(dr,_r);var pr=Ee(dr);function dr(){var ur,rr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},gr=rr.ownerDocument,hr=gr===void 0?globalThis.document:gr;return Ge(this,dr),ur=pr.call(this),ur._document=hr,ur}return We(dr,[{key:"_createCanvas",value:function(rr,gr){var hr=this._document.createElement("canvas");return hr.width=rr,hr.height=gr,hr}}]),dr}(Ie.BaseCanvasFactory);e.DOMCanvasFactory=er;function Qe(_r){return nr.apply(this,arguments)}function nr(){return nr=xe(Me.default.mark(function _r(pr){var dr,ur,rr=arguments;return Me.default.wrap(function(hr){for(;;)switch(hr.prev=hr.next){case 0:if(dr=rr.length>1&&rr[1]!==void 0?rr[1]:!1,!Je(pr,document.baseURI)){hr.next=21;break}return hr.next=4,fetch(pr);case 4:if(ur=hr.sent,ur.ok){hr.next=7;break}throw new Error(ur.statusText);case 7:if(!dr){hr.next=15;break}return hr.t1=Uint8Array,hr.next=11,ur.arrayBuffer();case 11:hr.t2=hr.sent,hr.t0=new hr.t1(hr.t2),hr.next=20;break;case 15:return hr.t3=Be.stringToBytes,hr.next=18,ur.text();case 18:hr.t4=hr.sent,hr.t0=(0,hr.t3)(hr.t4);case 20:return hr.abrupt("return",hr.t0);case 21:return hr.abrupt("return",new Promise(function(sr,Ar){var Or=new XMLHttpRequest;Or.open("GET",pr,!0),dr&&(Or.responseType="arraybuffer"),Or.onreadystatechange=function(){if(Or.readyState===XMLHttpRequest.DONE){if(Or.status===200||Or.status===0){var Mr;if(dr&&Or.response?Mr=new Uint8Array(Or.response):!dr&&Or.responseText&&(Mr=(0,Be.stringToBytes)(Or.responseText)),Mr){sr(Mr);return}}Ar(new Error(Or.statusText))}},Or.send(null)}));case 22:case"end":return hr.stop()}},_r)})),nr.apply(this,arguments)}var ir=function(_r){r(dr,_r);var pr=Ee(dr);function dr(){return Ge(this,dr),pr.apply(this,arguments)}return We(dr,[{key:"_fetchData",value:function(rr,gr){return Qe(rr,this.isCompressed).then(function(hr){return{cMapData:hr,compressionType:gr}})}}]),dr}(Ie.BaseCMapReaderFactory);e.DOMCMapReaderFactory=ir;var cr=function(_r){r(dr,_r);var pr=Ee(dr);function dr(){return Ge(this,dr),pr.apply(this,arguments)}return We(dr,[{key:"_fetchData",value:function(rr){return Qe(rr,!0)}}]),dr}(Ie.BaseStandardFontDataFactory);e.DOMStandardFontDataFactory=cr;var br=function(_r){r(dr,_r);var pr=Ee(dr);function dr(){return Ge(this,dr),pr.apply(this,arguments)}return We(dr,[{key:"_createSVG",value:function(rr){return document.createElementNS(Xe,rr)}}]),dr}(Ie.BaseSVGFactory);e.DOMSVGFactory=br;var wr=function(){function _r(pr){var dr=pr.viewBox,ur=pr.scale,rr=pr.rotation,gr=pr.offsetX,hr=gr===void 0?0:gr,sr=pr.offsetY,Ar=sr===void 0?0:sr,Or=pr.dontFlip,Mr=Or===void 0?!1:Or;Ge(this,_r),this.viewBox=dr,this.scale=ur,this.rotation=rr,this.offsetX=hr,this.offsetY=Ar;var Gr=(dr[2]+dr[0])/2,zr=(dr[3]+dr[1])/2,Ir,Qr,rn,sn;switch(rr%=360,rr<0&&(rr+=360),rr){case 180:Ir=-1,Qr=0,rn=0,sn=1;break;case 90:Ir=0,Qr=1,rn=1,sn=0;break;case 270:Ir=0,Qr=-1,rn=-1,sn=0;break;case 0:Ir=1,Qr=0,rn=0,sn=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Mr&&(rn=-rn,sn=-sn);var pn,mn,Sn,Cn;Ir===0?(pn=Math.abs(zr-dr[1])*ur+hr,mn=Math.abs(Gr-dr[0])*ur+Ar,Sn=Math.abs(dr[3]-dr[1])*ur,Cn=Math.abs(dr[2]-dr[0])*ur):(pn=Math.abs(Gr-dr[0])*ur+hr,mn=Math.abs(zr-dr[1])*ur+Ar,Sn=Math.abs(dr[2]-dr[0])*ur,Cn=Math.abs(dr[3]-dr[1])*ur),this.transform=[Ir*ur,Qr*ur,rn*ur,sn*ur,pn-Ir*ur*Gr-rn*ur*zr,mn-Qr*ur*Gr-sn*ur*zr],this.width=Sn,this.height=Cn}return We(_r,[{key:"clone",value:function(){var dr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ur=dr.scale,rr=ur===void 0?this.scale:ur,gr=dr.rotation,hr=gr===void 0?this.rotation:gr,sr=dr.offsetX,Ar=sr===void 0?this.offsetX:sr,Or=dr.offsetY,Mr=Or===void 0?this.offsetY:Or,Gr=dr.dontFlip,zr=Gr===void 0?!1:Gr;return new _r({viewBox:this.viewBox.slice(),scale:rr,rotation:hr,offsetX:Ar,offsetY:Mr,dontFlip:zr})}},{key:"convertToViewportPoint",value:function(dr,ur){return Be.Util.applyTransform([dr,ur],this.transform)}},{key:"convertToViewportRectangle",value:function(dr){var ur=Be.Util.applyTransform([dr[0],dr[1]],this.transform),rr=Be.Util.applyTransform([dr[2],dr[3]],this.transform);return[ur[0],ur[1],rr[0],rr[1]]}},{key:"convertToPdfPoint",value:function(dr,ur){return Be.Util.applyInverseTransform([dr,ur],this.transform)}}]),_r}();e.PageViewport=wr;var xr=function(_r){r(dr,_r);var pr=Ee(dr);function dr(ur,rr){var gr;return Ge(this,dr),gr=pr.call(this,ur,"RenderingCancelledException"),gr.type=rr,gr}return We(dr)}(Be.BaseException);e.RenderingCancelledException=xr;function Sr(_r){for(var pr=_r.length,dr=0;dr<pr&&_r[dr].trim()==="";)dr++;return _r.substring(dr,dr+5).toLowerCase()==="data:"}function lr(_r){return typeof _r=="string"&&/\.pdf$/i.test(_r)}function fr(_r){var pr=_r.indexOf("#"),dr=_r.indexOf("?"),ur=Math.min(pr>0?pr:_r.length,dr>0?dr:_r.length);return _r.substring(_r.lastIndexOf("/",ur)+1,ur)}function $e(_r){var pr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"document.pdf";if(typeof _r!="string")return pr;if(Sr(_r))return(0,Be.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),pr;var dr=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,ur=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,rr=dr.exec(_r),gr=ur.exec(rr[1])||ur.exec(rr[2])||ur.exec(rr[3]);if(gr&&(gr=gr[0],gr.includes("%")))try{gr=ur.exec(decodeURIComponent(gr))[0]}catch{}return gr||pr}var Ve=function(){function _r(){Ge(this,_r),this.started=Object.create(null),this.times=[]}return We(_r,[{key:"time",value:function(dr){dr in this.started&&(0,Be.warn)("Timer is already running for ".concat(dr)),this.started[dr]=Date.now()}},{key:"timeEnd",value:function(dr){dr in this.started||(0,Be.warn)("Timer has not been started for ".concat(dr)),this.times.push({name:dr,start:this.started[dr],end:Date.now()}),delete this.started[dr]}},{key:"toString",value:function(){var dr=[],ur=0,rr=_e(this.times),gr;try{for(rr.s();!(gr=rr.n()).done;){var hr=gr.value,sr=hr.name;sr.length>ur&&(ur=sr.length)}}catch(zr){rr.e(zr)}finally{rr.f()}var Ar=_e(this.times),Or;try{for(Ar.s();!(Or=Ar.n()).done;){var Mr=Or.value,Gr=Mr.end-Mr.start;dr.push("".concat(Mr.name.padEnd(ur)," ").concat(Gr,`ms
`))}}catch(zr){Ar.e(zr)}finally{Ar.f()}return dr.join("")}}]),_r}();e.StatTimer=Ve;function Je(_r,pr){try{var dr=pr?new URL(_r,pr):new URL(_r),ur=dr.protocol;return ur==="http:"||ur==="https:"}catch{return!1}}function Ze(_r){var pr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return new Promise(function(dr,ur){var rr=document.createElement("script");rr.src=_r,rr.onload=function(gr){pr&&rr.remove(),dr(gr)},rr.onerror=function(){ur(new Error("Cannot load script at: ".concat(rr.src)))},(document.head||document.documentElement).appendChild(rr)})}function St(_r){console.log("Deprecated API usage: "+_r)}var vr,mr=function(){function _r(){Ge(this,_r)}return We(_r,null,[{key:"toDateObject",value:function(dr){if(!dr||typeof dr!="string")return null;vr||(vr=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));var ur=vr.exec(dr);if(!ur)return null;var rr=parseInt(ur[1],10),gr=parseInt(ur[2],10);gr=gr>=1&&gr<=12?gr-1:0;var hr=parseInt(ur[3],10);hr=hr>=1&&hr<=31?hr:1;var sr=parseInt(ur[4],10);sr=sr>=0&&sr<=23?sr:0;var Ar=parseInt(ur[5],10);Ar=Ar>=0&&Ar<=59?Ar:0;var Or=parseInt(ur[6],10);Or=Or>=0&&Or<=59?Or:0;var Mr=ur[7]||"Z",Gr=parseInt(ur[8],10);Gr=Gr>=0&&Gr<=23?Gr:0;var zr=parseInt(ur[9],10)||0;return zr=zr>=0&&zr<=59?zr:0,Mr==="-"?(sr+=Gr,Ar+=zr):Mr==="+"&&(sr-=Gr,Ar-=zr),new Date(Date.UTC(rr,gr,hr,sr,Ar,Or))}}]),_r}();e.PDFDateString=mr;function Cr(_r,pr){var dr=pr.scale,ur=dr===void 0?1:dr,rr=pr.rotation,gr=rr===void 0?0:rr,hr=_r.attributes.style,sr=hr.width,Ar=hr.height,Or=[0,0,parseInt(sr),parseInt(Ar)];return new wr({viewBox:Or,scale:ur,rotation:gr})}},(Re,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseStandardFontDataFactory=e.BaseSVGFactory=e.BaseCanvasFactory=e.BaseCMapReaderFactory=void 0;var Pe=Ie(t(145)),Me=t(1);function Ie(Ee){return Ee&&Ee.__esModule?Ee:{default:Ee}}function Be(Ee,Ae,Fe,De,ze,je,We){try{var Ge=Ee[je](We),Ye=Ge.value}catch(Xe){Fe(Xe);return}Ge.done?Ae(Ye):Promise.resolve(Ye).then(De,ze)}function ke(Ee){return function(){var Ae=this,Fe=arguments;return new Promise(function(De,ze){var je=Ee.apply(Ae,Fe);function We(Ye){Be(je,De,ze,We,Ge,"next",Ye)}function Ge(Ye){Be(je,De,ze,We,Ge,"throw",Ye)}We(void 0)})}}function _e(Ee,Ae){if(!(Ee instanceof Ae))throw new TypeError("Cannot call a class as a function")}function Ce(Ee,Ae){for(var Fe=0;Fe<Ae.length;Fe++){var De=Ae[Fe];De.enumerable=De.enumerable||!1,De.configurable=!0,"value"in De&&(De.writable=!0),Object.defineProperty(Ee,De.key,De)}}function Te(Ee,Ae,Fe){return Ae&&Ce(Ee.prototype,Ae),Fe&&Ce(Ee,Fe),Object.defineProperty(Ee,"prototype",{writable:!1}),Ee}var Se=function(){function Ee(){_e(this,Ee),this.constructor===Ee&&(0,Me.unreachable)("Cannot initialize BaseCanvasFactory.")}return Te(Ee,[{key:"create",value:function(Fe,De){if(Fe<=0||De<=0)throw new Error("Invalid canvas size");var ze=this._createCanvas(Fe,De);return{canvas:ze,context:ze.getContext("2d")}}},{key:"reset",value:function(Fe,De,ze){if(!Fe.canvas)throw new Error("Canvas is not specified");if(De<=0||ze<=0)throw new Error("Invalid canvas size");Fe.canvas.width=De,Fe.canvas.height=ze}},{key:"destroy",value:function(Fe){if(!Fe.canvas)throw new Error("Canvas is not specified");Fe.canvas.width=0,Fe.canvas.height=0,Fe.canvas=null,Fe.context=null}},{key:"_createCanvas",value:function(Fe,De){(0,Me.unreachable)("Abstract method `_createCanvas` called.")}}]),Ee}();e.BaseCanvasFactory=Se;var xe=function(){function Ee(Ae){var Fe=Ae.baseUrl,De=Fe===void 0?null:Fe,ze=Ae.isCompressed,je=ze===void 0?!1:ze;_e(this,Ee),this.constructor===Ee&&(0,Me.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=De,this.isCompressed=je}return Te(Ee,[{key:"fetch",value:function(){var Ae=ke(Pe.default.mark(function De(ze){var je=this,We,Ge,Ye;return Pe.default.wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:if(We=ze.name,this.baseUrl){Ke.next=3;break}throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');case 3:if(We){Ke.next=5;break}throw new Error("CMap name must be specified.");case 5:return Ge=this.baseUrl+We+(this.isCompressed?".bcmap":""),Ye=this.isCompressed?Me.CMapCompressionType.BINARY:Me.CMapCompressionType.NONE,Ke.abrupt("return",this._fetchData(Ge,Ye).catch(function(er){throw new Error("Unable to load ".concat(je.isCompressed?"binary ":"","CMap at: ").concat(Ge))}));case 8:case"end":return Ke.stop()}},De,this)}));function Fe(De){return Ae.apply(this,arguments)}return Fe}()},{key:"_fetchData",value:function(Fe,De){(0,Me.unreachable)("Abstract method `_fetchData` called.")}}]),Ee}();e.BaseCMapReaderFactory=xe;var r=function(){function Ee(Ae){var Fe=Ae.baseUrl,De=Fe===void 0?null:Fe;_e(this,Ee),this.constructor===Ee&&(0,Me.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=De}return Te(Ee,[{key:"fetch",value:function(){var Ae=ke(Pe.default.mark(function De(ze){var je,We;return Pe.default.wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:if(je=ze.filename,this.baseUrl){Ye.next=3;break}throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');case 3:if(je){Ye.next=5;break}throw new Error("Font filename must be specified.");case 5:return We="".concat(this.baseUrl).concat(je),Ye.abrupt("return",this._fetchData(We).catch(function(Xe){throw new Error("Unable to load font data at: ".concat(We))}));case 7:case"end":return Ye.stop()}},De,this)}));function Fe(De){return Ae.apply(this,arguments)}return Fe}()},{key:"_fetchData",value:function(Fe){(0,Me.unreachable)("Abstract method `_fetchData` called.")}}]),Ee}();e.BaseStandardFontDataFactory=r;var Oe=function(){function Ee(){_e(this,Ee),this.constructor===Ee&&(0,Me.unreachable)("Cannot initialize BaseSVGFactory.")}return Te(Ee,[{key:"create",value:function(Fe,De){if(Fe<=0||De<=0)throw new Error("Invalid SVG dimensions");var ze=this._createSVG("svg:svg");return ze.setAttribute("version","1.1"),ze.setAttribute("width","".concat(Fe,"px")),ze.setAttribute("height","".concat(De,"px")),ze.setAttribute("preserveAspectRatio","none"),ze.setAttribute("viewBox","0 0 ".concat(Fe," ").concat(De)),ze}},{key:"createElement",value:function(Fe){if(typeof Fe!="string")throw new Error("Invalid SVG element type");return this._createSVG(Fe)}},{key:"_createSVG",value:function(Fe){(0,Me.unreachable)("Abstract method `_createSVG` called.")}}]),Ee}();e.BaseSVGFactory=Oe},(Re,e,t)=>{function Pe(Ke){return Pe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(er){return typeof er}:function(er){return er&&typeof Symbol=="function"&&er.constructor===Symbol&&er!==Symbol.prototype?"symbol":typeof er},Pe(Ke)}Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var Me=Be(t(145)),Ie=t(1);function Be(Ke){return Ke&&Ke.__esModule?Ke:{default:Ke}}function ke(Ke,er){if(typeof er!="function"&&er!==null)throw new TypeError("Super expression must either be null or a function");Ke.prototype=Object.create(er&&er.prototype,{constructor:{value:Ke,writable:!0,configurable:!0}}),Object.defineProperty(Ke,"prototype",{writable:!1}),er&&_e(Ke,er)}function _e(Ke,er){return _e=Object.setPrototypeOf||function(nr,ir){return nr.__proto__=ir,nr},_e(Ke,er)}function Ce(Ke){var er=xe();return function(){var nr=r(Ke),ir;if(er){var cr=r(this).constructor;ir=Reflect.construct(nr,arguments,cr)}else ir=nr.apply(this,arguments);return Te(this,ir)}}function Te(Ke,er){if(er&&(Pe(er)==="object"||typeof er=="function"))return er;if(er!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Se(Ke)}function Se(Ke){if(Ke===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ke}function xe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function r(Ke){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(Qe){return Qe.__proto__||Object.getPrototypeOf(Qe)},r(Ke)}function Oe(Ke,er,Qe,nr,ir,cr,br){try{var wr=Ke[cr](br),xr=wr.value}catch(Sr){Qe(Sr);return}wr.done?er(xr):Promise.resolve(xr).then(nr,ir)}function Ee(Ke){return function(){var er=this,Qe=arguments;return new Promise(function(nr,ir){var cr=Ke.apply(er,Qe);function br(xr){Oe(cr,nr,ir,br,wr,"next",xr)}function wr(xr){Oe(cr,nr,ir,br,wr,"throw",xr)}br(void 0)})}}function Ae(Ke,er){var Qe=typeof Symbol!="undefined"&&Ke[Symbol.iterator]||Ke["@@iterator"];if(!Qe){if(Array.isArray(Ke)||(Qe=Fe(Ke))||er&&Ke&&typeof Ke.length=="number"){Qe&&(Ke=Qe);var nr=0,ir=function(){};return{s:ir,n:function(){return nr>=Ke.length?{done:!0}:{done:!1,value:Ke[nr++]}},e:function(Sr){throw Sr},f:ir}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var cr=!0,br=!1,wr;return{s:function(){Qe=Qe.call(Ke)},n:function(){var Sr=Qe.next();return cr=Sr.done,Sr},e:function(Sr){br=!0,wr=Sr},f:function(){try{!cr&&Qe.return!=null&&Qe.return()}finally{if(br)throw wr}}}}function Fe(Ke,er){if(!!Ke){if(typeof Ke=="string")return De(Ke,er);var Qe=Object.prototype.toString.call(Ke).slice(8,-1);if(Qe==="Object"&&Ke.constructor&&(Qe=Ke.constructor.name),Qe==="Map"||Qe==="Set")return Array.from(Ke);if(Qe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Qe))return De(Ke,er)}}function De(Ke,er){(er==null||er>Ke.length)&&(er=Ke.length);for(var Qe=0,nr=new Array(er);Qe<er;Qe++)nr[Qe]=Ke[Qe];return nr}function ze(Ke,er){if(!(Ke instanceof er))throw new TypeError("Cannot call a class as a function")}function je(Ke,er){for(var Qe=0;Qe<er.length;Qe++){var nr=er[Qe];nr.enumerable=nr.enumerable||!1,nr.configurable=!0,"value"in nr&&(nr.writable=!0),Object.defineProperty(Ke,nr.key,nr)}}function We(Ke,er,Qe){return er&&je(Ke.prototype,er),Qe&&je(Ke,Qe),Object.defineProperty(Ke,"prototype",{writable:!1}),Ke}var Ge=function(){function Ke(er){var Qe=er.docId,nr=er.onUnsupportedFeature,ir=er.ownerDocument,cr=ir===void 0?globalThis.document:ir;er.styleElement,ze(this,Ke),this.constructor===Ke&&(0,Ie.unreachable)("Cannot initialize BaseFontLoader."),this.docId=Qe,this._onUnsupportedFeature=nr,this._document=cr,this.nativeFontFaces=[],this.styleElement=null}return We(Ke,[{key:"addNativeFontFace",value:function(Qe){this.nativeFontFaces.push(Qe),this._document.fonts.add(Qe)}},{key:"insertRule",value:function(Qe){var nr=this.styleElement;nr||(nr=this.styleElement=this._document.createElement("style"),nr.id="PDFJS_FONT_STYLE_TAG_".concat(this.docId),this._document.documentElement.getElementsByTagName("head")[0].appendChild(nr));var ir=nr.sheet;ir.insertRule(Qe,ir.cssRules.length)}},{key:"clear",value:function(){var Qe=Ae(this.nativeFontFaces),nr;try{for(Qe.s();!(nr=Qe.n()).done;){var ir=nr.value;this._document.fonts.delete(ir)}}catch(cr){Qe.e(cr)}finally{Qe.f()}this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}},{key:"bind",value:function(){var er=Ee(Me.default.mark(function nr(ir){var cr=this,br,wr;return Me.default.wrap(function(Sr){for(;;)switch(Sr.prev=Sr.next){case 0:if(!(ir.attached||ir.missingFile)){Sr.next=2;break}return Sr.abrupt("return");case 2:if(ir.attached=!0,!this.isFontLoadingAPISupported){Sr.next=19;break}if(br=ir.createNativeFontFace(),!br){Sr.next=18;break}return this.addNativeFontFace(br),Sr.prev=7,Sr.next=10,br.loaded;case 10:Sr.next=18;break;case 12:throw Sr.prev=12,Sr.t0=Sr.catch(7),this._onUnsupportedFeature({featureId:Ie.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,Ie.warn)("Failed to load font '".concat(br.family,"': '").concat(Sr.t0,"'.")),ir.disableFontFace=!0,Sr.t0;case 18:return Sr.abrupt("return");case 19:if(wr=ir.createFontFaceRule(),!wr){Sr.next=26;break}if(this.insertRule(wr),!this.isSyncFontLoadingSupported){Sr.next=24;break}return Sr.abrupt("return");case 24:return Sr.next=26,new Promise(function(lr){var fr=cr._queueLoadingCallback(lr);cr._prepareFontLoadEvent([wr],[ir],fr)});case 26:case"end":return Sr.stop()}},nr,this,[[7,12]])}));function Qe(nr){return er.apply(this,arguments)}return Qe}()},{key:"_queueLoadingCallback",value:function(Qe){(0,Ie.unreachable)("Abstract method `_queueLoadingCallback`.")}},{key:"isFontLoadingAPISupported",get:function(){var Qe,nr=!!((Qe=this._document)!==null&&Qe!==void 0&&Qe.fonts);return(0,Ie.shadow)(this,"isFontLoadingAPISupported",nr)}},{key:"isSyncFontLoadingSupported",get:function(){(0,Ie.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}},{key:"_loadTestFont",get:function(){(0,Ie.unreachable)("Abstract method `_loadTestFont`.")}},{key:"_prepareFontLoadEvent",value:function(Qe,nr,ir){(0,Ie.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}]),Ke}(),Ye;e.FontLoader=Ye,e.FontLoader=Ye=function(Ke){ke(Qe,Ke);var er=Ce(Qe);function Qe(nr){var ir;return ze(this,Qe),ir=er.call(this,nr),ir.loadingContext={requests:[],nextRequestId:0},ir.loadTestFontId=0,ir}return We(Qe,[{key:"isSyncFontLoadingSupported",get:function(){var ir=!1;if(typeof navigator=="undefined")ir=!0;else{var cr=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);(cr==null?void 0:cr[1])>=14&&(ir=!0)}return(0,Ie.shadow)(this,"isSyncFontLoadingSupported",ir)}},{key:"_queueLoadingCallback",value:function(ir){function cr(){for((0,Ie.assert)(!wr.done,"completeRequest() cannot be called twice."),wr.done=!0;br.requests.length>0&&br.requests[0].done;){var xr=br.requests.shift();setTimeout(xr.callback,0)}}var br=this.loadingContext,wr={id:"pdfjs-font-loading-".concat(br.nextRequestId++),done:!1,complete:cr,callback:ir};return br.requests.push(wr),wr}},{key:"_loadTestFont",get:function(){var ir=function(){return atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==")};return(0,Ie.shadow)(this,"_loadTestFont",ir())}},{key:"_prepareFontLoadEvent",value:function(ir,cr,br){function wr(zr,Ir){return zr.charCodeAt(Ir)<<24|zr.charCodeAt(Ir+1)<<16|zr.charCodeAt(Ir+2)<<8|zr.charCodeAt(Ir+3)&255}function xr(zr,Ir,Qr,rn){var sn=zr.substring(0,Ir),pn=zr.substring(Ir+Qr);return sn+rn+pn}var Sr,lr,fr=this._document.createElement("canvas");fr.width=1,fr.height=1;var $e=fr.getContext("2d"),Ve=0;function Je(zr,Ir){if(Ve++,Ve>30){(0,Ie.warn)("Load test font never loaded."),Ir();return}$e.font="30px "+zr,$e.fillText(".",0,20);var Qr=$e.getImageData(0,0,1,1);if(Qr.data[3]>0){Ir();return}setTimeout(Je.bind(null,zr,Ir))}var Ze="lt".concat(Date.now()).concat(this.loadTestFontId++),St=this._loadTestFont,vr=976;St=xr(St,vr,Ze.length,Ze);var mr=16,Cr=1482184792,_r=wr(St,mr);for(Sr=0,lr=Ze.length-3;Sr<lr;Sr+=4)_r=_r-Cr+wr(Ze,Sr)|0;Sr<Ze.length&&(_r=_r-Cr+wr(Ze+"XXX",Sr)|0),St=xr(St,mr,4,(0,Ie.string32)(_r));var pr="url(data:font/opentype;base64,".concat(btoa(St),");"),dr='@font-face {font-family:"'.concat(Ze,'";src:').concat(pr,"}");this.insertRule(dr);var ur=[],rr=Ae(cr),gr;try{for(rr.s();!(gr=rr.n()).done;){var hr=gr.value;ur.push(hr.loadedName)}}catch(zr){rr.e(zr)}finally{rr.f()}ur.push(Ze);var sr=this._document.createElement("div");sr.style.visibility="hidden",sr.style.width=sr.style.height="10px",sr.style.position="absolute",sr.style.top=sr.style.left="0px";for(var Ar=0,Or=ur;Ar<Or.length;Ar++){var Mr=Or[Ar],Gr=this._document.createElement("span");Gr.textContent="Hi",Gr.style.fontFamily=Mr,sr.appendChild(Gr)}this._document.body.appendChild(sr),Je(Ze,function(){sr.remove(),br.complete()})}}]),Qe}(Ge);var Xe=function(){function Ke(er,Qe){var nr=Qe.isEvalSupported,ir=nr===void 0?!0:nr,cr=Qe.disableFontFace,br=cr===void 0?!1:cr,wr=Qe.ignoreErrors,xr=wr===void 0?!1:wr,Sr=Qe.onUnsupportedFeature,lr=Qe.fontRegistry,fr=lr===void 0?null:lr;ze(this,Ke),this.compiledGlyphs=Object.create(null);for(var $e in er)this[$e]=er[$e];this.isEvalSupported=ir!==!1,this.disableFontFace=br===!0,this.ignoreErrors=xr===!0,this._onUnsupportedFeature=Sr,this.fontRegistry=fr}return We(Ke,[{key:"createNativeFontFace",value:function(){if(!this.data||this.disableFontFace)return null;var Qe;if(!this.cssFontInfo)Qe=new FontFace(this.loadedName,this.data,{});else{var nr={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(nr.style="oblique ".concat(this.cssFontInfo.italicAngle,"deg")),Qe=new FontFace(this.cssFontInfo.fontFamily,this.data,nr)}return this.fontRegistry&&this.fontRegistry.registerFont(this),Qe}},{key:"createFontFaceRule",value:function(){if(!this.data||this.disableFontFace)return null;var Qe=(0,Ie.bytesToString)(this.data),nr="url(data:".concat(this.mimetype,";base64,").concat(btoa(Qe),");"),ir;if(!this.cssFontInfo)ir='@font-face {font-family:"'.concat(this.loadedName,'";src:').concat(nr,"}");else{var cr="font-weight: ".concat(this.cssFontInfo.fontWeight,";");this.cssFontInfo.italicAngle&&(cr+="font-style: oblique ".concat(this.cssFontInfo.italicAngle,"deg;")),ir='@font-face {font-family:"'.concat(this.cssFontInfo.fontFamily,'";').concat(cr,"src:").concat(nr,"}")}return this.fontRegistry&&this.fontRegistry.registerFont(this,nr),ir}},{key:"getPathGenerator",value:function(Qe,nr){if(this.compiledGlyphs[nr]!==void 0)return this.compiledGlyphs[nr];var ir;try{ir=Qe.get(this.loadedName+"_path_"+nr)}catch(lr){if(!this.ignoreErrors)throw lr;return this._onUnsupportedFeature({featureId:Ie.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,Ie.warn)('getPathGenerator - ignoring character: "'.concat(lr,'".')),this.compiledGlyphs[nr]=function(fr,$e){}}if(this.isEvalSupported&&Ie.IsEvalSupportedCached.value){var cr=[],br=Ae(ir),wr;try{for(br.s();!(wr=br.n()).done;){var xr=wr.value,Sr=xr.args!==void 0?xr.args.join(","):"";cr.push("c.",xr.cmd,"(",Sr,`);
`)}}catch(lr){br.e(lr)}finally{br.f()}return this.compiledGlyphs[nr]=new Function("c","size",cr.join(""))}return this.compiledGlyphs[nr]=function(lr,fr){var $e=Ae(ir),Ve;try{for($e.s();!(Ve=$e.n()).done;){var Je=Ve.value;Je.cmd==="scale"&&(Je.args=[fr,-fr]),lr[Je.cmd].apply(lr,Je.args)}}catch(Ze){$e.e(Ze)}finally{$e.f()}}}}]),Ke}();e.FontFaceObject=Xe},(Re,e,t)=>{function Pe(We){return Pe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ge){return typeof Ge}:function(Ge){return Ge&&typeof Symbol=="function"&&Ge.constructor===Symbol&&Ge!==Symbol.prototype?"symbol":typeof Ge},Pe(We)}Object.defineProperty(e,"__esModule",{value:!0}),e.NodeStandardFontDataFactory=e.NodeCanvasFactory=e.NodeCMapReaderFactory=void 0;var Me=t(148),Ie=t(3),Be=t(1);function ke(We,Ge){if(typeof Ge!="function"&&Ge!==null)throw new TypeError("Super expression must either be null or a function");We.prototype=Object.create(Ge&&Ge.prototype,{constructor:{value:We,writable:!0,configurable:!0}}),Object.defineProperty(We,"prototype",{writable:!1}),Ge&&_e(We,Ge)}function _e(We,Ge){return _e=Object.setPrototypeOf||function(Xe,Ke){return Xe.__proto__=Ke,Xe},_e(We,Ge)}function Ce(We){var Ge=xe();return function(){var Xe=r(We),Ke;if(Ge){var er=r(this).constructor;Ke=Reflect.construct(Xe,arguments,er)}else Ke=Xe.apply(this,arguments);return Te(this,Ke)}}function Te(We,Ge){if(Ge&&(Pe(Ge)==="object"||typeof Ge=="function"))return Ge;if(Ge!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Se(We)}function Se(We){if(We===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return We}function xe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function r(We){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(Ye){return Ye.__proto__||Object.getPrototypeOf(Ye)},r(We)}function Oe(We,Ge){for(var Ye=0;Ye<Ge.length;Ye++){var Xe=Ge[Ye];Xe.enumerable=Xe.enumerable||!1,Xe.configurable=!0,"value"in Xe&&(Xe.writable=!0),Object.defineProperty(We,Xe.key,Xe)}}function Ee(We,Ge,Ye){return Ge&&Oe(We.prototype,Ge),Ye&&Oe(We,Ye),Object.defineProperty(We,"prototype",{writable:!1}),We}function Ae(We,Ge){if(!(We instanceof Ge))throw new TypeError("Cannot call a class as a function")}var Fe=Ee(function We(){Ae(this,We),(0,Be.unreachable)("Not implemented: NodeCanvasFactory")});e.NodeCanvasFactory=Fe;var De=Ee(function We(){Ae(this,We),(0,Be.unreachable)("Not implemented: NodeCMapReaderFactory")});e.NodeCMapReaderFactory=De;var ze=Ee(function We(){Ae(this,We),(0,Be.unreachable)("Not implemented: NodeStandardFontDataFactory")});if(e.NodeStandardFontDataFactory=ze,Ie.isNodeJS){var je=function(Ge){return new Promise(function(Ye,Xe){var Ke=require$$5;Ke.readFile(Ge,function(er,Qe){if(er||!Qe){Xe(new Error(er));return}Ye(new Uint8Array(Qe))})})};e.NodeCanvasFactory=Fe=function(We){ke(Ye,We);var Ge=Ce(Ye);function Ye(){return Ae(this,Ye),Ge.apply(this,arguments)}return Ee(Ye,[{key:"_createCanvas",value:function(Ke,er){var Qe=require$$5;return Qe.createCanvas(Ke,er)}}]),Ye}(Me.BaseCanvasFactory),e.NodeCMapReaderFactory=De=function(We){ke(Ye,We);var Ge=Ce(Ye);function Ye(){return Ae(this,Ye),Ge.apply(this,arguments)}return Ee(Ye,[{key:"_fetchData",value:function(Ke,er){return je(Ke).then(function(Qe){return{cMapData:Qe,compressionType:er}})}}]),Ye}(Me.BaseCMapReaderFactory),e.NodeStandardFontDataFactory=ze=function(We){ke(Ye,We);var Ge=Ce(Ye);function Ye(){return Ae(this,Ye),Ge.apply(this,arguments)}return Ee(Ye,[{key:"_fetchData",value:function(Ke){return je(Ke)}}]),Ye}(Me.BaseStandardFontDataFactory)}},(Re,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationStorage=void 0;var Pe=t(1);function Me(Oe,Ee){return Ce(Oe)||_e(Oe,Ee)||Be(Oe,Ee)||Ie()}function Ie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Be(Oe,Ee){if(!!Oe){if(typeof Oe=="string")return ke(Oe,Ee);var Ae=Object.prototype.toString.call(Oe).slice(8,-1);if(Ae==="Object"&&Oe.constructor&&(Ae=Oe.constructor.name),Ae==="Map"||Ae==="Set")return Array.from(Oe);if(Ae==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ae))return ke(Oe,Ee)}}function ke(Oe,Ee){(Ee==null||Ee>Oe.length)&&(Ee=Oe.length);for(var Ae=0,Fe=new Array(Ee);Ae<Ee;Ae++)Fe[Ae]=Oe[Ae];return Fe}function _e(Oe,Ee){var Ae=Oe==null?null:typeof Symbol!="undefined"&&Oe[Symbol.iterator]||Oe["@@iterator"];if(Ae!=null){var Fe=[],De=!0,ze=!1,je,We;try{for(Ae=Ae.call(Oe);!(De=(je=Ae.next()).done)&&(Fe.push(je.value),!(Ee&&Fe.length===Ee));De=!0);}catch(Ge){ze=!0,We=Ge}finally{try{!De&&Ae.return!=null&&Ae.return()}finally{if(ze)throw We}}return Fe}}function Ce(Oe){if(Array.isArray(Oe))return Oe}function Te(Oe,Ee){if(!(Oe instanceof Ee))throw new TypeError("Cannot call a class as a function")}function Se(Oe,Ee){for(var Ae=0;Ae<Ee.length;Ae++){var Fe=Ee[Ae];Fe.enumerable=Fe.enumerable||!1,Fe.configurable=!0,"value"in Fe&&(Fe.writable=!0),Object.defineProperty(Oe,Fe.key,Fe)}}function xe(Oe,Ee,Ae){return Ee&&Se(Oe.prototype,Ee),Ae&&Se(Oe,Ae),Object.defineProperty(Oe,"prototype",{writable:!1}),Oe}var r=function(){function Oe(){Te(this,Oe),this._storage=new Map,this._timeStamp=Date.now(),this._modified=!1,this.onSetModified=null,this.onResetModified=null}return xe(Oe,[{key:"getValue",value:function(Ae,Fe){var De=this._storage.get(Ae);return De===void 0?Fe:Object.assign(Fe,De)}},{key:"setValue",value:function(Ae,Fe){var De=this._storage.get(Ae),ze=!1;if(De!==void 0)for(var je=0,We=Object.entries(Fe);je<We.length;je++){var Ge=Me(We[je],2),Ye=Ge[0],Xe=Ge[1];De[Ye]!==Xe&&(ze=!0,De[Ye]=Xe)}else ze=!0,this._storage.set(Ae,Fe);ze&&(this._timeStamp=Date.now(),this._setModified())}},{key:"getAll",value:function(){return this._storage.size>0?(0,Pe.objectFromMap)(this._storage):null}},{key:"size",get:function(){return this._storage.size}},{key:"_setModified",value:function(){this._modified||(this._modified=!0,typeof this.onSetModified=="function"&&this.onSetModified())}},{key:"resetModified",value:function(){this._modified&&(this._modified=!1,typeof this.onResetModified=="function"&&this.onResetModified())}},{key:"serializable",get:function(){return this._storage.size>0?this._storage:null}},{key:"lastModified",get:function(){return this._timeStamp.toString()}}]),Oe}();e.AnnotationStorage=r},(Re,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var Pe=t(1),Me=t(153),Ie=t(147);function Be(pr){return Be=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(dr){return typeof dr}:function(dr){return dr&&typeof Symbol=="function"&&dr.constructor===Symbol&&dr!==Symbol.prototype?"symbol":typeof dr},Be(pr)}function ke(pr,dr){var ur=typeof Symbol!="undefined"&&pr[Symbol.iterator]||pr["@@iterator"];if(!ur){if(Array.isArray(pr)||(ur=r(pr))||dr&&pr&&typeof pr.length=="number"){ur&&(pr=ur);var rr=0,gr=function(){};return{s:gr,n:function(){return rr>=pr.length?{done:!0}:{done:!1,value:pr[rr++]}},e:function(Mr){throw Mr},f:gr}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var hr=!0,sr=!1,Ar;return{s:function(){ur=ur.call(pr)},n:function(){var Mr=ur.next();return hr=Mr.done,Mr},e:function(Mr){sr=!0,Ar=Mr},f:function(){try{!hr&&ur.return!=null&&ur.return()}finally{if(sr)throw Ar}}}}function _e(pr,dr){if(!(pr instanceof dr))throw new TypeError("Cannot call a class as a function")}function Ce(pr,dr){for(var ur=0;ur<dr.length;ur++){var rr=dr[ur];rr.enumerable=rr.enumerable||!1,rr.configurable=!0,"value"in rr&&(rr.writable=!0),Object.defineProperty(pr,rr.key,rr)}}function Te(pr,dr,ur){return dr&&Ce(pr.prototype,dr),ur&&Ce(pr,ur),Object.defineProperty(pr,"prototype",{writable:!1}),pr}function Se(pr,dr){return Ae(pr)||Ee(pr,dr)||r(pr,dr)||xe()}function xe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r(pr,dr){if(!!pr){if(typeof pr=="string")return Oe(pr,dr);var ur=Object.prototype.toString.call(pr).slice(8,-1);if(ur==="Object"&&pr.constructor&&(ur=pr.constructor.name),ur==="Map"||ur==="Set")return Array.from(pr);if(ur==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ur))return Oe(pr,dr)}}function Oe(pr,dr){(dr==null||dr>pr.length)&&(dr=pr.length);for(var ur=0,rr=new Array(dr);ur<dr;ur++)rr[ur]=pr[ur];return rr}function Ee(pr,dr){var ur=pr==null?null:typeof Symbol!="undefined"&&pr[Symbol.iterator]||pr["@@iterator"];if(ur!=null){var rr=[],gr=!0,hr=!1,sr,Ar;try{for(ur=ur.call(pr);!(gr=(sr=ur.next()).done)&&(rr.push(sr.value),!(dr&&rr.length===dr));gr=!0);}catch(Or){hr=!0,Ar=Or}finally{try{!gr&&ur.return!=null&&ur.return()}finally{if(hr)throw Ar}}return rr}}function Ae(pr){if(Array.isArray(pr))return pr}var Fe=16,De=100,ze=4096,je=15,We=10,Ge=1e3,Ye=16,Xe=1.000001;function Ke(pr,dr){if(pr._removeMirroring)throw new Error("Context is already forwarding operations.");pr.__originalSave=pr.save,pr.__originalRestore=pr.restore,pr.__originalRotate=pr.rotate,pr.__originalScale=pr.scale,pr.__originalTranslate=pr.translate,pr.__originalTransform=pr.transform,pr.__originalSetTransform=pr.setTransform,pr.__originalResetTransform=pr.resetTransform,pr.__originalClip=pr.clip,pr.__originalMoveTo=pr.moveTo,pr.__originalLineTo=pr.lineTo,pr.__originalBezierCurveTo=pr.bezierCurveTo,pr.__originalRect=pr.rect,pr.__originalClosePath=pr.closePath,pr.__originalBeginPath=pr.beginPath,pr._removeMirroring=function(){pr.save=pr.__originalSave,pr.restore=pr.__originalRestore,pr.rotate=pr.__originalRotate,pr.scale=pr.__originalScale,pr.translate=pr.__originalTranslate,pr.transform=pr.__originalTransform,pr.setTransform=pr.__originalSetTransform,pr.resetTransform=pr.__originalResetTransform,pr.clip=pr.__originalClip,pr.moveTo=pr.__originalMoveTo,pr.lineTo=pr.__originalLineTo,pr.bezierCurveTo=pr.__originalBezierCurveTo,pr.rect=pr.__originalRect,pr.closePath=pr.__originalClosePath,pr.beginPath=pr.__originalBeginPath,delete pr._removeMirroring},pr.save=function(){dr.save(),this.__originalSave()},pr.restore=function(){dr.restore(),this.__originalRestore()},pr.translate=function(rr,gr){dr.translate(rr,gr),this.__originalTranslate(rr,gr)},pr.scale=function(rr,gr){dr.scale(rr,gr),this.__originalScale(rr,gr)},pr.transform=function(rr,gr,hr,sr,Ar,Or){dr.transform(rr,gr,hr,sr,Ar,Or),this.__originalTransform(rr,gr,hr,sr,Ar,Or)},pr.setTransform=function(rr,gr,hr,sr,Ar,Or){dr.setTransform(rr,gr,hr,sr,Ar,Or),this.__originalSetTransform(rr,gr,hr,sr,Ar,Or)},pr.resetTransform=function(){dr.resetTransform(),this.__originalResetTransform()},pr.rotate=function(rr){dr.rotate(rr),this.__originalRotate(rr)},pr.clip=function(rr){dr.clip(rr),this.__originalClip(rr)},pr.moveTo=function(ur,rr){dr.moveTo(ur,rr),this.__originalMoveTo(ur,rr)},pr.lineTo=function(ur,rr){dr.lineTo(ur,rr),this.__originalLineTo(ur,rr)},pr.bezierCurveTo=function(ur,rr,gr,hr,sr,Ar){dr.bezierCurveTo(ur,rr,gr,hr,sr,Ar),this.__originalBezierCurveTo(ur,rr,gr,hr,sr,Ar)},pr.rect=function(ur,rr,gr,hr){dr.rect(ur,rr,gr,hr),this.__originalRect(ur,rr,gr,hr)},pr.closePath=function(){dr.closePath(),this.__originalClosePath()},pr.beginPath=function(){dr.beginPath(),this.__originalBeginPath()}}function er(pr){if(pr._transformStack&&(pr._transformStack=[]),!pr.mozCurrentTransform){pr._originalSave=pr.save,pr._originalRestore=pr.restore,pr._originalRotate=pr.rotate,pr._originalScale=pr.scale,pr._originalTranslate=pr.translate,pr._originalTransform=pr.transform,pr._originalSetTransform=pr.setTransform,pr._originalResetTransform=pr.resetTransform,pr._transformMatrix=pr._transformMatrix||[1,0,0,1,0,0],pr._transformStack=[];try{var dr=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(pr),"lineWidth");pr._setLineWidth=dr.set,pr._getLineWidth=dr.get,Object.defineProperty(pr,"lineWidth",{set:function(rr){this._setLineWidth(rr*Xe)},get:function(){return this._getLineWidth()}})}catch{}Object.defineProperty(pr,"mozCurrentTransform",{get:function(){return this._transformMatrix}}),Object.defineProperty(pr,"mozCurrentTransformInverse",{get:function(){var rr=Se(this._transformMatrix,6),gr=rr[0],hr=rr[1],sr=rr[2],Ar=rr[3],Or=rr[4],Mr=rr[5],Gr=gr*Ar-hr*sr,zr=hr*sr-gr*Ar;return[Ar/Gr,hr/zr,sr/zr,gr/Gr,(Ar*Or-sr*Mr)/zr,(hr*Or-gr*Mr)/Gr]}}),pr.save=function(){var rr=this._transformMatrix;this._transformStack.push(rr),this._transformMatrix=rr.slice(0,6),this._originalSave()},pr.restore=function(){this._transformStack.length===0&&(0,Pe.warn)("Tried to restore a ctx when the stack was already empty.");var rr=this._transformStack.pop();rr&&(this._transformMatrix=rr,this._originalRestore())},pr.translate=function(rr,gr){var hr=this._transformMatrix;hr[4]=hr[0]*rr+hr[2]*gr+hr[4],hr[5]=hr[1]*rr+hr[3]*gr+hr[5],this._originalTranslate(rr,gr)},pr.scale=function(rr,gr){var hr=this._transformMatrix;hr[0]*=rr,hr[1]*=rr,hr[2]*=gr,hr[3]*=gr,this._originalScale(rr,gr)},pr.transform=function(rr,gr,hr,sr,Ar,Or){var Mr=this._transformMatrix;this._transformMatrix=[Mr[0]*rr+Mr[2]*gr,Mr[1]*rr+Mr[3]*gr,Mr[0]*hr+Mr[2]*sr,Mr[1]*hr+Mr[3]*sr,Mr[0]*Ar+Mr[2]*Or+Mr[4],Mr[1]*Ar+Mr[3]*Or+Mr[5]],pr._originalTransform(rr,gr,hr,sr,Ar,Or)},pr.setTransform=function(rr,gr,hr,sr,Ar,Or){this._transformMatrix=[rr,gr,hr,sr,Ar,Or],pr._originalSetTransform(rr,gr,hr,sr,Ar,Or)},pr.resetTransform=function(){this._transformMatrix=[1,0,0,1,0,0],pr._originalResetTransform()},pr.rotate=function(rr){var gr=Math.cos(rr),hr=Math.sin(rr),sr=this._transformMatrix;this._transformMatrix=[sr[0]*gr+sr[2]*hr,sr[1]*gr+sr[3]*hr,sr[0]*-hr+sr[2]*gr,sr[1]*-hr+sr[3]*gr,sr[4],sr[5]],this._originalRotate(rr)}}}var Qe=function(){function pr(dr){_e(this,pr),this.canvasFactory=dr,this.cache=Object.create(null)}return Te(pr,[{key:"getCanvas",value:function(ur,rr,gr,hr){var sr;return this.cache[ur]!==void 0?(sr=this.cache[ur],this.canvasFactory.reset(sr,rr,gr),sr.context.setTransform(1,0,0,1,0,0)):(sr=this.canvasFactory.create(rr,gr),this.cache[ur]=sr),hr&&er(sr.context),sr}},{key:"clear",value:function(){for(var ur in this.cache){var rr=this.cache[ur];this.canvasFactory.destroy(rr),delete this.cache[ur]}}}]),pr}();function nr(pr){var dr=1e3,ur=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),rr=pr.width,gr=pr.height,hr=rr+1,sr,Ar,Or,Mr,Gr=new Uint8Array(hr*(gr+1)),zr=rr+7&~7,Ir=pr.data,Qr=new Uint8Array(zr*gr),rn=0;for(sr=0,Ar=Ir.length;sr<Ar;sr++)for(var sn=Ir[sr],pn=128;pn>0;)Qr[rn++]=sn&pn?0:255,pn>>=1;var mn=0;for(rn=0,Qr[rn]!==0&&(Gr[0]=1,++mn),Or=1;Or<rr;Or++)Qr[rn]!==Qr[rn+1]&&(Gr[Or]=Qr[rn]?2:1,++mn),rn++;for(Qr[rn]!==0&&(Gr[Or]=2,++mn),sr=1;sr<gr;sr++){rn=sr*zr,Mr=sr*hr,Qr[rn-zr]!==Qr[rn]&&(Gr[Mr]=Qr[rn]?1:8,++mn);var Sn=(Qr[rn]?4:0)+(Qr[rn-zr]?8:0);for(Or=1;Or<rr;Or++)Sn=(Sn>>2)+(Qr[rn+1]?4:0)+(Qr[rn-zr+1]?8:0),ur[Sn]&&(Gr[Mr+Or]=ur[Sn],++mn),rn++;if(Qr[rn-zr]!==Qr[rn]&&(Gr[Mr+Or]=Qr[rn]?2:4,++mn),mn>dr)return null}for(rn=zr*(gr-1),Mr=sr*hr,Qr[rn]!==0&&(Gr[Mr]=8,++mn),Or=1;Or<rr;Or++)Qr[rn]!==Qr[rn+1]&&(Gr[Mr+Or]=Qr[rn]?4:8,++mn),rn++;if(Qr[rn]!==0&&(Gr[Mr+Or]=4,++mn),mn>dr)return null;var Cn=new Int32Array([0,hr,-1,0,-hr,0,0,0,1]),Xr=[];for(sr=0;mn&&sr<=gr;sr++){for(var Er=sr*hr,Rr=Er+rr;Er<Rr&&!Gr[Er];)Er++;if(Er!==Rr){var Dr=[Er%hr,sr],Br=Er,Wr=Gr[Er];do{var Ur=Cn[Wr];do Er+=Ur;while(!Gr[Er]);var Hr=Gr[Er];Hr!==5&&Hr!==10?(Wr=Hr,Gr[Er]=0):(Wr=Hr&51*Wr>>4,Gr[Er]&=Wr>>2|Wr<<2),Dr.push(Er%hr,Er/hr|0),Gr[Er]||--mn}while(Br!==Er);Xr.push(Dr),--sr}}var $r=function(tn){tn.save(),tn.scale(1/rr,-1/gr),tn.translate(0,-gr),tn.beginPath();for(var yn=0,Pn=Xr.length;yn<Pn;yn++){var bn=Xr[yn];tn.moveTo(bn[0],bn[1]);for(var dn=2,Tn=bn.length;dn<Tn;dn+=2)tn.lineTo(bn[dn],bn[dn+1])}tn.fill(),tn.beginPath(),tn.restore()};return $r}var ir=function(){function pr(dr,ur){_e(this,pr),this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=Pe.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=Pe.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=Pe.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,dr,ur])}return Te(pr,[{key:"clone",value:function(){var ur=Object.create(this);return ur.clipBox=this.clipBox.slice(),ur}},{key:"setCurrentPoint",value:function(ur,rr){this.x=ur,this.y=rr}},{key:"updatePathMinMax",value:function(ur,rr,gr){var hr=Pe.Util.applyTransform([rr,gr],ur),sr=Se(hr,2);rr=sr[0],gr=sr[1],this.minX=Math.min(this.minX,rr),this.minY=Math.min(this.minY,gr),this.maxX=Math.max(this.maxX,rr),this.maxY=Math.max(this.maxY,gr)}},{key:"updateCurvePathMinMax",value:function(ur,rr,gr,hr,sr,Ar,Or,Mr,Gr){var zr=Pe.Util.bezierBoundingBox(rr,gr,hr,sr,Ar,Or,Mr,Gr);this.updatePathMinMax(ur,zr[0],zr[1]),this.updatePathMinMax(ur,zr[2],zr[3])}},{key:"getPathBoundingBox",value:function(){var ur=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Me.PathType.FILL,rr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,gr=[this.minX,this.minY,this.maxX,this.maxY];if(ur===Me.PathType.STROKE){rr||(0,Pe.unreachable)("Stroke bounding box must include transform.");var hr=Pe.Util.singularValueDecompose2dScale(rr),sr=hr[0]*this.lineWidth/2,Ar=hr[1]*this.lineWidth/2;gr[0]-=sr,gr[1]-=Ar,gr[2]+=sr,gr[3]+=Ar}return gr}},{key:"updateClipFromPath",value:function(){var ur=Pe.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(ur||[0,0,0,0])}},{key:"startNewPathAndClipBox",value:function(ur){this.clipBox=ur,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}},{key:"getClippedPathBoundingBox",value:function(){var ur=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Me.PathType.FILL,rr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return Pe.Util.intersect(this.clipBox,this.getPathBoundingBox(ur,rr))}}]),pr}();function cr(pr,dr){var ur=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(typeof ImageData!="undefined"&&dr instanceof ImageData){pr.putImageData(dr,0,0);return}var rr=dr.height,gr=dr.width,hr=rr%Ye,sr=(rr-hr)/Ye,Ar=hr===0?sr:sr+1,Or=pr.createImageData(gr,Ye),Mr=0,Gr,zr=dr.data,Ir=Or.data,Qr,rn,sn,pn,mn,Sn,Cn,Xr;if(ur)switch(ur.length){case 1:mn=ur[0],Sn=ur[0],Cn=ur[0],Xr=ur[0];break;case 4:mn=ur[0],Sn=ur[1],Cn=ur[2],Xr=ur[3];break}if(dr.kind===Pe.ImageKind.GRAYSCALE_1BPP){var Er=zr.byteLength,Rr=new Uint32Array(Ir.buffer,0,Ir.byteLength>>2),Dr=Rr.length,Br=gr+7>>3,Wr=4294967295,Ur=Pe.IsLittleEndianCached.value?4278190080:255;if(Xr&&Xr[0]===255&&Xr[255]===0){var Hr=[Ur,Wr];Wr=Hr[0],Ur=Hr[1]}for(Qr=0;Qr<Ar;Qr++){for(sn=Qr<sr?Ye:hr,Gr=0,rn=0;rn<sn;rn++){for(var $r=Er-Mr,Kr=0,tn=$r>Br?gr:$r*8-7,yn=tn&~7,Pn=0,bn=0;Kr<yn;Kr+=8)bn=zr[Mr++],Rr[Gr++]=bn&128?Wr:Ur,Rr[Gr++]=bn&64?Wr:Ur,Rr[Gr++]=bn&32?Wr:Ur,Rr[Gr++]=bn&16?Wr:Ur,Rr[Gr++]=bn&8?Wr:Ur,Rr[Gr++]=bn&4?Wr:Ur,Rr[Gr++]=bn&2?Wr:Ur,Rr[Gr++]=bn&1?Wr:Ur;for(;Kr<tn;Kr++)Pn===0&&(bn=zr[Mr++],Pn=128),Rr[Gr++]=bn&Pn?Wr:Ur,Pn>>=1}for(;Gr<Dr;)Rr[Gr++]=0;pr.putImageData(Or,0,Qr*Ye)}}else if(dr.kind===Pe.ImageKind.RGBA_32BPP){var dn=!!(mn||Sn||Cn);for(rn=0,pn=gr*Ye*4,Qr=0;Qr<sr;Qr++){if(Ir.set(zr.subarray(Mr,Mr+pn)),Mr+=pn,dn)for(var Tn=0;Tn<pn;Tn+=4)mn&&(Ir[Tn+0]=mn[Ir[Tn+0]]),Sn&&(Ir[Tn+1]=Sn[Ir[Tn+1]]),Cn&&(Ir[Tn+2]=Cn[Ir[Tn+2]]);pr.putImageData(Or,0,rn),rn+=Ye}if(Qr<Ar){if(pn=gr*hr*4,Ir.set(zr.subarray(Mr,Mr+pn)),dn)for(var xn=0;xn<pn;xn+=4)mn&&(Ir[xn+0]=mn[Ir[xn+0]]),Sn&&(Ir[xn+1]=Sn[Ir[xn+1]]),Cn&&(Ir[xn+2]=Cn[Ir[xn+2]]);pr.putImageData(Or,0,rn)}}else if(dr.kind===Pe.ImageKind.RGB_24BPP){var Nn=!!(mn||Sn||Cn);for(sn=Ye,pn=gr*sn,Qr=0;Qr<Ar;Qr++){for(Qr>=sr&&(sn=hr,pn=gr*sn),Gr=0,rn=pn;rn--;)Ir[Gr++]=zr[Mr++],Ir[Gr++]=zr[Mr++],Ir[Gr++]=zr[Mr++],Ir[Gr++]=255;if(Nn)for(var In=0;In<Gr;In+=4)mn&&(Ir[In+0]=mn[Ir[In+0]]),Sn&&(Ir[In+1]=Sn[Ir[In+1]]),Cn&&(Ir[In+2]=Cn[Ir[In+2]]);pr.putImageData(Or,0,Qr*Ye)}}else throw new Error("bad image kind: ".concat(dr.kind))}function br(pr,dr){for(var ur=dr.height,rr=dr.width,gr=ur%Ye,hr=(ur-gr)/Ye,sr=gr===0?hr:hr+1,Ar=pr.createImageData(rr,Ye),Or=0,Mr=dr.data,Gr=Ar.data,zr=0;zr<sr;zr++){for(var Ir=zr<hr?Ye:gr,Qr=3,rn=0;rn<Ir;rn++)for(var sn=void 0,pn=0,mn=0;mn<rr;mn++)pn||(sn=Mr[Or++],pn=128),Gr[Qr]=sn&pn?0:255,Qr+=4,pn>>=1;pr.putImageData(Ar,0,zr*Ye)}}function wr(pr,dr){for(var ur=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"],rr=0,gr=ur.length;rr<gr;rr++){var hr=ur[rr];pr[hr]!==void 0&&(dr[hr]=pr[hr])}pr.setLineDash!==void 0&&(dr.setLineDash(pr.getLineDash()),dr.lineDashOffset=pr.lineDashOffset)}function xr(pr){pr.strokeStyle="#000000",pr.fillStyle="#000000",pr.fillRule="nonzero",pr.globalAlpha=1,pr.lineWidth=1,pr.lineCap="butt",pr.lineJoin="miter",pr.miterLimit=10,pr.globalCompositeOperation="source-over",pr.font="10px sans-serif",pr.setLineDash!==void 0&&(pr.setLineDash([]),pr.lineDashOffset=0)}function Sr(pr,dr,ur,rr){for(var gr=pr.length,hr=3;hr<gr;hr+=4){var sr=pr[hr];if(sr===0)pr[hr-3]=dr,pr[hr-2]=ur,pr[hr-1]=rr;else if(sr<255){var Ar=255-sr;pr[hr-3]=pr[hr-3]*sr+dr*Ar>>8,pr[hr-2]=pr[hr-2]*sr+ur*Ar>>8,pr[hr-1]=pr[hr-1]*sr+rr*Ar>>8}}}function lr(pr,dr,ur){for(var rr=pr.length,gr=1/255,hr=3;hr<rr;hr+=4){var sr=ur?ur[pr[hr]]:pr[hr];dr[hr]=dr[hr]*sr*gr|0}}function fr(pr,dr,ur){for(var rr=pr.length,gr=3;gr<rr;gr+=4){var hr=pr[gr-3]*77+pr[gr-2]*152+pr[gr-1]*28;dr[gr]=ur?dr[gr]*ur[hr>>8]>>8:dr[gr]*hr>>16}}function $e(pr,dr,ur,rr,gr,hr,sr,Ar,Or,Mr,Gr){var zr=!!hr,Ir=zr?hr[0]:0,Qr=zr?hr[1]:0,rn=zr?hr[2]:0,sn;gr==="Luminosity"?sn=fr:sn=lr;for(var pn=1048576,mn=Math.min(rr,Math.ceil(pn/ur)),Sn=0;Sn<rr;Sn+=mn){var Cn=Math.min(mn,rr-Sn),Xr=pr.getImageData(Ar-Mr,Sn+(Or-Gr),ur,Cn),Er=dr.getImageData(Ar,Sn+Or,ur,Cn);zr&&Sr(Xr.data,Ir,Qr,rn),sn(Xr.data,Er.data,sr),dr.putImageData(Er,Ar,Sn+Or)}}function Ve(pr,dr,ur,rr){var gr=rr[0],hr=rr[1],sr=rr[2]-gr,Ar=rr[3]-hr;sr===0||Ar===0||($e(dr.context,ur,sr,Ar,dr.subtype,dr.backdrop,dr.transferMap,gr,hr,dr.offsetX,dr.offsetY),pr.save(),pr.globalAlpha=1,pr.globalCompositeOperation="source-over",pr.setTransform(1,0,0,1,0,0),pr.drawImage(ur.canvas,0,0),pr.restore())}function Je(pr,dr){var ur=Pe.Util.singularValueDecompose2dScale(pr);ur[0]=Math.fround(ur[0]),ur[1]=Math.fround(ur[1]);var rr=Math.fround((globalThis.devicePixelRatio||1)*Ie.PixelsPerInch.PDF_TO_CSS_UNITS);return dr!==void 0?dr:ur[0]<=rr||ur[1]<=rr}var Ze=["butt","round","square"],St=["miter","round","bevel"],vr={},mr={},Cr=function(){function pr(dr,ur,rr,gr,hr,sr,Ar){_e(this,pr),this.ctx=dr,this.current=new ir(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=ur,this.objs=rr,this.canvasFactory=gr,this.imageLayer=hr,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=sr,this.cachedCanvases=new Qe(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=Ar,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,dr&&er(dr),this._cachedGetSinglePixelWidth=null}return Te(pr,[{key:"beginDrawing",value:function(ur){var rr=ur.transform,gr=ur.viewport,hr=ur.transparency,sr=hr===void 0?!1:hr,Ar=ur.background,Or=Ar===void 0?null:Ar,Mr=this.ctx.canvas.width,Gr=this.ctx.canvas.height;if(this.ctx.save(),this.ctx.fillStyle=Or||"rgb(255, 255, 255)",this.ctx.fillRect(0,0,Mr,Gr),this.ctx.restore(),sr){var zr=this.cachedCanvases.getCanvas("transparent",Mr,Gr,!0);this.compositeCtx=this.ctx,this.transparentCanvas=zr.canvas,this.ctx=zr.context,this.ctx.save(),this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)}this.ctx.save(),xr(this.ctx),rr&&(this.ctx.transform.apply(this.ctx,rr),this.outputScaleX=rr[0],this.outputScaleY=rr[0]),this.ctx.transform.apply(this.ctx,gr.transform),this.viewportScale=gr.scale,this.baseTransform=this.ctx.mozCurrentTransform.slice(),this._combinedScaleFactor=Math.hypot(this.baseTransform[0],this.baseTransform[2]),this.imageLayer&&this.imageLayer.beginLayout()}},{key:"executeOperatorList",value:function(ur,rr,gr,hr){var sr=ur.argsArray,Ar=ur.fnArray,Or=rr||0,Mr=sr.length;if(Mr===Or)return Or;for(var Gr=Mr-Or>We&&typeof gr=="function",zr=Gr?Date.now()+je:0,Ir=0,Qr=this.commonObjs,rn=this.objs,sn;;){if(hr!==void 0&&Or===hr.nextBreakPoint)return hr.breakIt(Or,gr),Or;if(sn=Ar[Or],sn!==Pe.OPS.dependency)this[sn].apply(this,sr[Or]);else{var pn=ke(sr[Or]),mn;try{for(pn.s();!(mn=pn.n()).done;){var Sn=mn.value,Cn=Sn.startsWith("g_")?Qr:rn;if(!Cn.has(Sn))return Cn.get(Sn,gr),Or}}catch(Xr){pn.e(Xr)}finally{pn.f()}}if(Or++,Or===Mr)return Or;if(Gr&&++Ir>We){if(Date.now()>zr)return gr(),Or;Ir=0}}}},{key:"endDrawing",value:function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null),this.cachedCanvases.clear(),this.cachedPatterns.clear(),this.imageLayer&&this.imageLayer.endLayout()}},{key:"_scaleImage",value:function(ur,rr){for(var gr=ur.width,hr=ur.height,sr=Math.max(Math.hypot(rr[0],rr[1]),1),Ar=Math.max(Math.hypot(rr[2],rr[3]),1),Or=gr,Mr=hr,Gr="prescale1",zr,Ir;sr>2&&Or>1||Ar>2&&Mr>1;){var Qr=Or,rn=Mr;sr>2&&Or>1&&(Qr=Math.ceil(Or/2),sr/=Or/Qr),Ar>2&&Mr>1&&(rn=Math.ceil(Mr/2),Ar/=Mr/rn),zr=this.cachedCanvases.getCanvas(Gr,Qr,rn),Ir=zr.context,Ir.clearRect(0,0,Qr,rn),Ir.drawImage(ur,0,0,Or,Mr,0,0,Qr,rn),ur=zr.canvas,Or=Qr,Mr=rn,Gr=Gr==="prescale1"?"prescale2":"prescale1"}return{img:ur,paintWidth:Or,paintHeight:Mr}}},{key:"_createMaskCanvas",value:function(ur){var rr=this.ctx,gr=ur.width,hr=ur.height,sr=this.current.fillColor,Ar=this.current.patternFill,Or=this.cachedCanvases.getCanvas("maskCanvas",gr,hr),Mr=Or.context;br(Mr,ur);var Gr=rr.mozCurrentTransform,zr=Pe.Util.transform(Gr,[1/gr,0,0,-1/hr,0,0]);zr=Pe.Util.transform(zr,[1,0,0,1,0,-hr]);var Ir=Pe.Util.applyTransform([0,0],zr),Qr=Pe.Util.applyTransform([gr,hr],zr),rn=Pe.Util.normalizeRect([Ir[0],Ir[1],Qr[0],Qr[1]]),sn=Math.ceil(rn[2]-rn[0]),pn=Math.ceil(rn[3]-rn[1]),mn=this.cachedCanvases.getCanvas("fillCanvas",sn,pn,!0),Sn=mn.context,Cn=Math.min(Ir[0],Qr[0]),Xr=Math.min(Ir[1],Qr[1]);Sn.translate(-Cn,-Xr),Sn.transform.apply(Sn,zr);var Er=this._scaleImage(Or.canvas,Sn.mozCurrentTransformInverse);Sn.imageSmoothingEnabled=Je(Sn.mozCurrentTransform,ur.interpolate),Sn.drawImage(Er.img,0,0,Er.img.width,Er.img.height,0,0,gr,hr),Sn.globalCompositeOperation="source-in";var Rr=Pe.Util.transform(Sn.mozCurrentTransformInverse,[1,0,0,1,-Cn,-Xr]);return Sn.fillStyle=Ar?sr.getPattern(rr,this,Rr,Me.PathType.FILL):sr,Sn.fillRect(0,0,gr,hr),{canvas:mn.canvas,offsetX:Math.round(Cn),offsetY:Math.round(Xr)}}},{key:"setLineWidth",value:function(ur){this.current.lineWidth=ur,this.ctx.lineWidth=ur}},{key:"setLineCap",value:function(ur){this.ctx.lineCap=Ze[ur]}},{key:"setLineJoin",value:function(ur){this.ctx.lineJoin=St[ur]}},{key:"setMiterLimit",value:function(ur){this.ctx.miterLimit=ur}},{key:"setDash",value:function(ur,rr){var gr=this.ctx;gr.setLineDash!==void 0&&(gr.setLineDash(ur),gr.lineDashOffset=rr)}},{key:"setRenderingIntent",value:function(ur){}},{key:"setFlatness",value:function(ur){}},{key:"setGState",value:function(ur){for(var rr=0,gr=ur.length;rr<gr;rr++){var hr=ur[rr],sr=hr[0],Ar=hr[1];switch(sr){case"LW":this.setLineWidth(Ar);break;case"LC":this.setLineCap(Ar);break;case"LJ":this.setLineJoin(Ar);break;case"ML":this.setMiterLimit(Ar);break;case"D":this.setDash(Ar[0],Ar[1]);break;case"RI":this.setRenderingIntent(Ar);break;case"FL":this.setFlatness(Ar);break;case"Font":this.setFont(Ar[0],Ar[1]);break;case"CA":this.current.strokeAlpha=hr[1];break;case"ca":this.current.fillAlpha=hr[1],this.ctx.globalAlpha=hr[1];break;case"BM":this.ctx.globalCompositeOperation=Ar;break;case"SMask":this.current.activeSMask=Ar?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=Ar}}}},{key:"inSMaskMode",get:function(){return!!this.suspendedCtx}},{key:"checkSMaskState",value:function(){var ur=this.inSMaskMode;this.current.activeSMask&&!ur?this.beginSMaskMode():!this.current.activeSMask&&ur&&this.endSMaskMode()}},{key:"beginSMaskMode",value:function(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");var ur=this.ctx.canvas.width,rr=this.ctx.canvas.height,gr="smaskGroupAt"+this.groupLevel,hr=this.cachedCanvases.getCanvas(gr,ur,rr,!0);this.suspendedCtx=this.ctx,this.ctx=hr.context;var sr=this.ctx;sr.setTransform.apply(sr,this.suspendedCtx.mozCurrentTransform),wr(this.suspendedCtx,sr),Ke(sr,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}},{key:"endSMaskMode",value:function(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),wr(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}},{key:"compose",value:function(ur){if(!!this.current.activeSMask){ur?(ur[0]=Math.floor(ur[0]),ur[1]=Math.floor(ur[1]),ur[2]=Math.ceil(ur[2]),ur[3]=Math.ceil(ur[3])):ur=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];var rr=this.current.activeSMask,gr=this.suspendedCtx;Ve(gr,rr,this.ctx,ur),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}}},{key:"save",value:function(){this.inSMaskMode?(wr(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();var ur=this.current;this.stateStack.push(ur),this.current=ur.clone()}},{key:"restore",value:function(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),wr(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedGetSinglePixelWidth=null)}},{key:"transform",value:function(ur,rr,gr,hr,sr,Ar){this.ctx.transform(ur,rr,gr,hr,sr,Ar),this._cachedGetSinglePixelWidth=null}},{key:"constructPath",value:function(ur,rr){for(var gr=this.ctx,hr=this.current,sr=hr.x,Ar=hr.y,Or,Mr,Gr=0,zr=0,Ir=ur.length;Gr<Ir;Gr++)switch(ur[Gr]|0){case Pe.OPS.rectangle:sr=rr[zr++],Ar=rr[zr++];var Qr=rr[zr++],rn=rr[zr++],sn=sr+Qr,pn=Ar+rn;gr.moveTo(sr,Ar),Qr===0||rn===0?gr.lineTo(sn,pn):(gr.lineTo(sn,Ar),gr.lineTo(sn,pn),gr.lineTo(sr,pn)),hr.updatePathMinMax(gr.mozCurrentTransform,sr,Ar),hr.updatePathMinMax(gr.mozCurrentTransform,sn,pn),gr.closePath();break;case Pe.OPS.moveTo:sr=rr[zr++],Ar=rr[zr++],gr.moveTo(sr,Ar),hr.updatePathMinMax(gr.mozCurrentTransform,sr,Ar);break;case Pe.OPS.lineTo:sr=rr[zr++],Ar=rr[zr++],gr.lineTo(sr,Ar),hr.updatePathMinMax(gr.mozCurrentTransform,sr,Ar);break;case Pe.OPS.curveTo:Or=sr,Mr=Ar,sr=rr[zr+4],Ar=rr[zr+5],gr.bezierCurveTo(rr[zr],rr[zr+1],rr[zr+2],rr[zr+3],sr,Ar),hr.updateCurvePathMinMax(gr.mozCurrentTransform,Or,Mr,rr[zr],rr[zr+1],rr[zr+2],rr[zr+3],sr,Ar),zr+=6;break;case Pe.OPS.curveTo2:Or=sr,Mr=Ar,gr.bezierCurveTo(sr,Ar,rr[zr],rr[zr+1],rr[zr+2],rr[zr+3]),hr.updateCurvePathMinMax(gr.mozCurrentTransform,Or,Mr,sr,Ar,rr[zr],rr[zr+1],rr[zr+2],rr[zr+3]),sr=rr[zr+2],Ar=rr[zr+3],zr+=4;break;case Pe.OPS.curveTo3:Or=sr,Mr=Ar,sr=rr[zr+2],Ar=rr[zr+3],gr.bezierCurveTo(rr[zr],rr[zr+1],sr,Ar,sr,Ar),hr.updateCurvePathMinMax(gr.mozCurrentTransform,Or,Mr,rr[zr],rr[zr+1],sr,Ar,sr,Ar),zr+=4;break;case Pe.OPS.closePath:gr.closePath();break}hr.setCurrentPoint(sr,Ar)}},{key:"closePath",value:function(){this.ctx.closePath()}},{key:"stroke",value:function(ur){ur=typeof ur!="undefined"?ur:!0;var rr=this.ctx,gr=this.current.strokeColor;if(rr.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(Be(gr)==="object"&&gr!==null&&gr!==void 0&&gr.getPattern){var hr=this.getSinglePixelWidth();rr.save(),rr.strokeStyle=gr.getPattern(rr,this,rr.mozCurrentTransformInverse,Me.PathType.STROKE),rr.lineWidth=Math.max(hr,this.current.lineWidth),rr.stroke(),rr.restore()}else{var sr=this.getSinglePixelWidth();sr<0&&-sr>=this.current.lineWidth?(rr.save(),rr.resetTransform(),rr.lineWidth=Math.floor(this._combinedScaleFactor),rr.stroke(),rr.restore()):(rr.lineWidth=Math.max(sr,this.current.lineWidth),rr.stroke())}ur&&this.consumePath(this.current.getClippedPathBoundingBox()),rr.globalAlpha=this.current.fillAlpha}},{key:"closeStroke",value:function(){this.closePath(),this.stroke()}},{key:"fill",value:function(ur){ur=typeof ur!="undefined"?ur:!0;var rr=this.ctx,gr=this.current.fillColor,hr=this.current.patternFill,sr=!1;hr&&(rr.save(),rr.fillStyle=gr.getPattern(rr,this,rr.mozCurrentTransformInverse,Me.PathType.FILL),sr=!0);var Ar=this.current.getClippedPathBoundingBox();this.contentVisible&&Ar!==null&&(this.pendingEOFill?(rr.fill("evenodd"),this.pendingEOFill=!1):rr.fill()),sr&&rr.restore(),ur&&this.consumePath(Ar)}},{key:"eoFill",value:function(){this.pendingEOFill=!0,this.fill()}},{key:"fillStroke",value:function(){this.fill(!1),this.stroke(!1),this.consumePath()}},{key:"eoFillStroke",value:function(){this.pendingEOFill=!0,this.fillStroke()}},{key:"closeFillStroke",value:function(){this.closePath(),this.fillStroke()}},{key:"closeEOFillStroke",value:function(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}},{key:"endPath",value:function(){this.consumePath()}},{key:"clip",value:function(){this.pendingClip=vr}},{key:"eoClip",value:function(){this.pendingClip=mr}},{key:"beginText",value:function(){this.current.textMatrix=Pe.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}},{key:"endText",value:function(){var ur=this.pendingTextPaths,rr=this.ctx;if(ur===void 0){rr.beginPath();return}rr.save(),rr.beginPath();for(var gr=0;gr<ur.length;gr++){var hr=ur[gr];rr.setTransform.apply(rr,hr.transform),rr.translate(hr.x,hr.y),hr.addToPath(rr,hr.fontSize)}rr.restore(),rr.clip(),rr.beginPath(),delete this.pendingTextPaths}},{key:"setCharSpacing",value:function(ur){this.current.charSpacing=ur}},{key:"setWordSpacing",value:function(ur){this.current.wordSpacing=ur}},{key:"setHScale",value:function(ur){this.current.textHScale=ur/100}},{key:"setLeading",value:function(ur){this.current.leading=-ur}},{key:"setFont",value:function(ur,rr){var gr=this.commonObjs.get(ur),hr=this.current;if(!gr)throw new Error("Can't find font for ".concat(ur));if(hr.fontMatrix=gr.fontMatrix||Pe.FONT_IDENTITY_MATRIX,(hr.fontMatrix[0]===0||hr.fontMatrix[3]===0)&&(0,Pe.warn)("Invalid font matrix for font "+ur),rr<0?(rr=-rr,hr.fontDirection=-1):hr.fontDirection=1,this.current.font=gr,this.current.fontSize=rr,!gr.isType3Font){var sr=gr.loadedName||"sans-serif",Ar="normal";gr.black?Ar="900":gr.bold&&(Ar="bold");var Or=gr.italic?"italic":"normal",Mr='"'.concat(sr,'", ').concat(gr.fallbackName),Gr=rr;rr<Fe?Gr=Fe:rr>De&&(Gr=De),this.current.fontSizeScale=rr/Gr,this.ctx.font="".concat(Or," ").concat(Ar," ").concat(Gr,"px ").concat(Mr)}}},{key:"setTextRenderingMode",value:function(ur){this.current.textRenderingMode=ur}},{key:"setTextRise",value:function(ur){this.current.textRise=ur}},{key:"moveText",value:function(ur,rr){this.current.x=this.current.lineX+=ur,this.current.y=this.current.lineY+=rr}},{key:"setLeadingMoveText",value:function(ur,rr){this.setLeading(-rr),this.moveText(ur,rr)}},{key:"setTextMatrix",value:function(ur,rr,gr,hr,sr,Ar){this.current.textMatrix=[ur,rr,gr,hr,sr,Ar],this.current.textMatrixScale=Math.hypot(ur,rr),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}},{key:"nextLine",value:function(){this.moveText(0,this.current.leading)}},{key:"paintChar",value:function(ur,rr,gr,hr,sr){var Ar=this.ctx,Or=this.current,Mr=Or.font,Gr=Or.textRenderingMode,zr=Or.fontSize/Or.fontSizeScale,Ir=Gr&Pe.TextRenderingMode.FILL_STROKE_MASK,Qr=!!(Gr&Pe.TextRenderingMode.ADD_TO_PATH_FLAG),rn=Or.patternFill&&!Mr.missingFile,sn;if((Mr.disableFontFace||Qr||rn)&&(sn=Mr.getPathGenerator(this.commonObjs,ur)),Mr.disableFontFace||rn?(Ar.save(),Ar.translate(rr,gr),Ar.beginPath(),sn(Ar,zr),hr&&Ar.setTransform.apply(Ar,hr),(Ir===Pe.TextRenderingMode.FILL||Ir===Pe.TextRenderingMode.FILL_STROKE)&&Ar.fill(),(Ir===Pe.TextRenderingMode.STROKE||Ir===Pe.TextRenderingMode.FILL_STROKE)&&(sr&&(Ar.resetTransform(),Ar.lineWidth=Math.floor(this._combinedScaleFactor)),Ar.stroke()),Ar.restore()):((Ir===Pe.TextRenderingMode.FILL||Ir===Pe.TextRenderingMode.FILL_STROKE)&&Ar.fillText(ur,rr,gr),(Ir===Pe.TextRenderingMode.STROKE||Ir===Pe.TextRenderingMode.FILL_STROKE)&&(sr?(Ar.save(),Ar.moveTo(rr,gr),Ar.resetTransform(),Ar.lineWidth=Math.floor(this._combinedScaleFactor),Ar.strokeText(ur,0,0),Ar.restore()):Ar.strokeText(ur,rr,gr))),Qr){var pn=this.pendingTextPaths||(this.pendingTextPaths=[]);pn.push({transform:Ar.mozCurrentTransform,x:rr,y:gr,fontSize:zr,addToPath:sn})}}},{key:"isFontSubpixelAAEnabled",get:function(){var ur=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10),rr=ur.context;rr.scale(1.5,1),rr.fillText("I",0,10);for(var gr=rr.getImageData(0,0,10,10).data,hr=!1,sr=3;sr<gr.length;sr+=4)if(gr[sr]>0&&gr[sr]<255){hr=!0;break}return(0,Pe.shadow)(this,"isFontSubpixelAAEnabled",hr)}},{key:"showText",value:function(ur){var rr=this.current,gr=rr.font;if(gr.isType3Font)return this.showType3Text(ur);var hr=rr.fontSize;if(hr!==0){var sr=this.ctx,Ar=rr.fontSizeScale,Or=rr.charSpacing,Mr=rr.wordSpacing,Gr=rr.fontDirection,zr=rr.textHScale*Gr,Ir=ur.length,Qr=gr.vertical,rn=Qr?1:-1,sn=gr.defaultVMetrics,pn=hr*rr.fontMatrix[0],mn=rr.textRenderingMode===Pe.TextRenderingMode.FILL&&!gr.disableFontFace&&!rr.patternFill;sr.save(),sr.transform.apply(sr,rr.textMatrix),sr.translate(rr.x,rr.y+rr.textRise),Gr>0?sr.scale(zr,-1):sr.scale(zr,1);var Sn;if(rr.patternFill){sr.save();var Cn=rr.fillColor.getPattern(sr,this,sr.mozCurrentTransformInverse,Me.PathType.FILL);Sn=sr.mozCurrentTransform,sr.restore(),sr.fillStyle=Cn}var Xr=rr.lineWidth,Er=!1,Rr=rr.textMatrixScale;if(Rr===0||Xr===0){var Dr=rr.textRenderingMode&Pe.TextRenderingMode.FILL_STROKE_MASK;(Dr===Pe.TextRenderingMode.STROKE||Dr===Pe.TextRenderingMode.FILL_STROKE)&&(this._cachedGetSinglePixelWidth=null,Xr=this.getSinglePixelWidth(),Er=Xr<0)}else Xr/=Rr;Ar!==1&&(sr.scale(Ar,Ar),Xr/=Ar),sr.lineWidth=Xr;var Br=0,Wr;for(Wr=0;Wr<Ir;++Wr){var Ur=ur[Wr];if(typeof Ur=="number"){Br+=rn*Ur*hr/1e3;continue}var Hr=!1,$r=(Ur.isSpace?Mr:0)+Or,Kr=Ur.fontChar,tn=Ur.accent,yn=void 0,Pn=void 0,bn=Ur.width;if(Qr){var dn=Ur.vmetric||sn,Tn=-(Ur.vmetric?dn[1]:bn*.5)*pn,xn=dn[2]*pn;bn=dn?-dn[0]:bn,yn=Tn/Ar,Pn=(Br+xn)/Ar}else yn=Br/Ar,Pn=0;if(gr.remeasure&&bn>0){var Nn=sr.measureText(Kr).width*1e3/hr*Ar;if(bn<Nn&&this.isFontSubpixelAAEnabled){var In=bn/Nn;Hr=!0,sr.save(),sr.scale(In,1),yn/=In}else bn!==Nn&&(yn+=(bn-Nn)/2e3*hr/Ar)}if(this.contentVisible&&(Ur.isInFont||gr.missingFile)){if(mn&&!tn)sr.fillText(Kr,yn,Pn);else if(this.paintChar(Kr,yn,Pn,Sn,Er),tn){var Bn=yn+hr*tn.offset.x/Ar,Fn=Pn-hr*tn.offset.y/Ar;this.paintChar(tn.fontChar,Bn,Fn,Sn,Er)}}var qn=void 0;Qr?qn=bn*pn-$r*Gr:qn=bn*pn+$r*Gr,Br+=qn,Hr&&sr.restore()}Qr?rr.y-=Br:rr.x+=Br*zr,sr.restore(),this.compose()}}},{key:"showType3Text",value:function(ur){var rr=this.ctx,gr=this.current,hr=gr.font,sr=gr.fontSize,Ar=gr.fontDirection,Or=hr.vertical?1:-1,Mr=gr.charSpacing,Gr=gr.wordSpacing,zr=gr.textHScale*Ar,Ir=gr.fontMatrix||Pe.FONT_IDENTITY_MATRIX,Qr=ur.length,rn=gr.textRenderingMode===Pe.TextRenderingMode.INVISIBLE,sn,pn,mn,Sn;if(!(rn||sr===0)){for(this._cachedGetSinglePixelWidth=null,rr.save(),rr.transform.apply(rr,gr.textMatrix),rr.translate(gr.x,gr.y),rr.scale(zr,Ar),sn=0;sn<Qr;++sn){if(pn=ur[sn],typeof pn=="number"){Sn=Or*pn*sr/1e3,this.ctx.translate(Sn,0),gr.x+=Sn*zr;continue}var Cn=(pn.isSpace?Gr:0)+Mr,Xr=hr.charProcOperatorList[pn.operatorListId];if(!Xr){(0,Pe.warn)('Type3 character "'.concat(pn.operatorListId,'" is not available.'));continue}this.contentVisible&&(this.processingType3=pn,this.save(),rr.scale(sr,sr),rr.transform.apply(rr,Ir),this.executeOperatorList(Xr),this.restore());var Er=Pe.Util.applyTransform([pn.width,0],Ir);mn=Er[0]*sr+Cn,rr.translate(mn,0),gr.x+=mn*zr}rr.restore(),this.processingType3=null}}},{key:"setCharWidth",value:function(ur,rr){}},{key:"setCharWidthAndBounds",value:function(ur,rr,gr,hr,sr,Ar){this.ctx.rect(gr,hr,sr-gr,Ar-hr),this.clip(),this.endPath()}},{key:"getColorN_Pattern",value:function(ur){var rr=this,gr;if(ur[0]==="TilingPattern"){var hr=ur[1],sr=this.baseTransform||this.ctx.mozCurrentTransform.slice(),Ar={createCanvasGraphics:function(Mr){return new pr(Mr,rr.commonObjs,rr.objs,rr.canvasFactory)}};gr=new Me.TilingPattern(ur,hr,this.ctx,Ar,sr)}else gr=this._getPattern(ur[1],ur[2]);return gr}},{key:"setStrokeColorN",value:function(){this.current.strokeColor=this.getColorN_Pattern(arguments)}},{key:"setFillColorN",value:function(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}},{key:"setStrokeRGBColor",value:function(ur,rr,gr){var hr=Pe.Util.makeHexColor(ur,rr,gr);this.ctx.strokeStyle=hr,this.current.strokeColor=hr}},{key:"setFillRGBColor",value:function(ur,rr,gr){var hr=Pe.Util.makeHexColor(ur,rr,gr);this.ctx.fillStyle=hr,this.current.fillColor=hr,this.current.patternFill=!1}},{key:"_getPattern",value:function(ur){var rr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,gr;return this.cachedPatterns.has(ur)?gr=this.cachedPatterns.get(ur):(gr=(0,Me.getShadingPattern)(this.objs.get(ur)),this.cachedPatterns.set(ur,gr)),rr&&(gr.matrix=rr),gr}},{key:"shadingFill",value:function(ur){if(!!this.contentVisible){var rr=this.ctx;this.save();var gr=this._getPattern(ur);rr.fillStyle=gr.getPattern(rr,this,rr.mozCurrentTransformInverse,Me.PathType.SHADING);var hr=rr.mozCurrentTransformInverse;if(hr){var sr=rr.canvas,Ar=sr.width,Or=sr.height,Mr=Pe.Util.applyTransform([0,0],hr),Gr=Pe.Util.applyTransform([0,Or],hr),zr=Pe.Util.applyTransform([Ar,0],hr),Ir=Pe.Util.applyTransform([Ar,Or],hr),Qr=Math.min(Mr[0],Gr[0],zr[0],Ir[0]),rn=Math.min(Mr[1],Gr[1],zr[1],Ir[1]),sn=Math.max(Mr[0],Gr[0],zr[0],Ir[0]),pn=Math.max(Mr[1],Gr[1],zr[1],Ir[1]);this.ctx.fillRect(Qr,rn,sn-Qr,pn-rn)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}}},{key:"beginInlineImage",value:function(){(0,Pe.unreachable)("Should not call beginInlineImage")}},{key:"beginImageData",value:function(){(0,Pe.unreachable)("Should not call beginImageData")}},{key:"paintFormXObjectBegin",value:function(ur,rr){if(!!this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(ur)&&ur.length===6&&this.transform.apply(this,ur),this.baseTransform=this.ctx.mozCurrentTransform,rr)){var gr=rr[2]-rr[0],hr=rr[3]-rr[1];this.ctx.rect(rr[0],rr[1],gr,hr),this.current.updatePathMinMax(this.ctx.mozCurrentTransform,rr[0],rr[1]),this.current.updatePathMinMax(this.ctx.mozCurrentTransform,rr[2],rr[3]),this.clip(),this.endPath()}}},{key:"paintFormXObjectEnd",value:function(){!this.contentVisible||(this.restore(),this.baseTransform=this.baseTransformStack.pop())}},{key:"beginGroup",value:function(ur){if(!!this.contentVisible){this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);var rr=this.ctx;ur.isolated||(0,Pe.info)("TODO: Support non-isolated groups."),ur.knockout&&(0,Pe.warn)("Knockout groups not supported.");var gr=rr.mozCurrentTransform;if(ur.matrix&&rr.transform.apply(rr,ur.matrix),!ur.bbox)throw new Error("Bounding box is required.");var hr=Pe.Util.getAxialAlignedBoundingBox(ur.bbox,rr.mozCurrentTransform),sr=[0,0,rr.canvas.width,rr.canvas.height];hr=Pe.Util.intersect(hr,sr)||[0,0,0,0];var Ar=Math.floor(hr[0]),Or=Math.floor(hr[1]),Mr=Math.max(Math.ceil(hr[2])-Ar,1),Gr=Math.max(Math.ceil(hr[3])-Or,1),zr=1,Ir=1;Mr>ze&&(zr=Mr/ze,Mr=ze),Gr>ze&&(Ir=Gr/ze,Gr=ze),this.current.startNewPathAndClipBox([0,0,Mr,Gr]);var Qr="groupAt"+this.groupLevel;ur.smask&&(Qr+="_smask_"+this.smaskCounter++%2);var rn=this.cachedCanvases.getCanvas(Qr,Mr,Gr,!0),sn=rn.context;sn.scale(1/zr,1/Ir),sn.translate(-Ar,-Or),sn.transform.apply(sn,gr),ur.smask?this.smaskStack.push({canvas:rn.canvas,context:sn,offsetX:Ar,offsetY:Or,scaleX:zr,scaleY:Ir,subtype:ur.smask.subtype,backdrop:ur.smask.backdrop,transferMap:ur.smask.transferMap||null,startTransformInverse:null}):(rr.setTransform(1,0,0,1,0,0),rr.translate(Ar,Or),rr.scale(zr,Ir),rr.save()),wr(rr,sn),this.ctx=sn,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(rr),this.groupLevel++}}},{key:"endGroup",value:function(ur){if(!!this.contentVisible){this.groupLevel--;var rr=this.ctx,gr=this.groupStack.pop();if(this.ctx=gr,this.ctx.imageSmoothingEnabled=!1,ur.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();var hr=this.ctx.mozCurrentTransform;this.restore(),this.ctx.save(),this.ctx.setTransform.apply(this.ctx,hr);var sr=Pe.Util.getAxialAlignedBoundingBox([0,0,rr.canvas.width,rr.canvas.height],hr);this.ctx.drawImage(rr.canvas,0,0),this.ctx.restore(),this.compose(sr)}}}},{key:"beginAnnotations",value:function(){this.save(),this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform)}},{key:"endAnnotations",value:function(){this.restore()}},{key:"beginAnnotation",value:function(ur,rr,gr,hr,sr){if(this.save(),Array.isArray(rr)&&rr.length===4){var Ar=rr[2]-rr[0],Or=rr[3]-rr[1];if(sr&&this.annotationCanvasMap){gr=gr.slice(),gr[4]-=rr[0],gr[5]-=rr[1],rr=rr.slice(),rr[0]=rr[1]=0,rr[2]=Ar,rr[3]=Or;var Mr=Pe.Util.singularValueDecompose2dScale(this.ctx.mozCurrentTransform),Gr=Se(Mr,2),zr=Gr[0],Ir=Gr[1],Qr=this.viewportScale,rn=Math.ceil(Ar*this.outputScaleX*Qr),sn=Math.ceil(Or*this.outputScaleY*Qr);this.annotationCanvas=this.canvasFactory.create(rn,sn);var pn=this.annotationCanvas,mn=pn.canvas,Sn=pn.context;mn.style.width="calc(".concat(Ar,"px * var(--viewport-scale-factor))"),mn.style.height="calc(".concat(Or,"px * var(--viewport-scale-factor))"),this.annotationCanvasMap.set(ur,mn),this.annotationCanvas.savedCtx=this.ctx,this.ctx=Sn,this.ctx.setTransform(zr,0,0,-Ir,0,Or*Ir),er(this.ctx),xr(this.ctx)}else xr(this.ctx),this.ctx.rect(rr[0],rr[1],Ar,Or),this.clip(),this.endPath()}this.current=new ir(this.ctx.canvas.width,this.ctx.canvas.height),this.transform.apply(this,gr),this.transform.apply(this,hr)}},{key:"endAnnotation",value:function(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas),this.restore()}},{key:"paintImageMaskXObject",value:function(ur){if(!!this.contentVisible){var rr=this.ctx,gr=ur.width,hr=ur.height,sr=this.processingType3;if(sr&&sr.compiled===void 0&&(gr<=Ge&&hr<=Ge?sr.compiled=nr({data:ur.data,width:gr,height:hr}):sr.compiled=null),sr!=null&&sr.compiled){sr.compiled(rr);return}var Ar=this._createMaskCanvas(ur),Or=Ar.canvas;rr.save(),rr.setTransform(1,0,0,1,0,0),rr.drawImage(Or,Ar.offsetX,Ar.offsetY),rr.restore(),this.compose()}}},{key:"paintImageMaskXObjectRepeat",value:function(ur,rr){var gr=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,hr=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,sr=arguments.length>4?arguments[4]:void 0,Ar=arguments.length>5?arguments[5]:void 0;if(!!this.contentVisible){var Or=this.ctx;Or.save();var Mr=Or.mozCurrentTransform;Or.transform(rr,gr,hr,sr,0,0);var Gr=this._createMaskCanvas(ur);Or.setTransform(1,0,0,1,0,0);for(var zr=0,Ir=Ar.length;zr<Ir;zr+=2){var Qr=Pe.Util.transform(Mr,[rr,gr,hr,sr,Ar[zr],Ar[zr+1]]),rn=Pe.Util.applyTransform([0,0],Qr),sn=Se(rn,2),pn=sn[0],mn=sn[1];Or.drawImage(Gr.canvas,pn,mn)}Or.restore(),this.compose()}}},{key:"paintImageMaskXObjectGroup",value:function(ur){if(!!this.contentVisible){for(var rr=this.ctx,gr=this.current.fillColor,hr=this.current.patternFill,sr=0,Ar=ur.length;sr<Ar;sr++){var Or=ur[sr],Mr=Or.width,Gr=Or.height,zr=this.cachedCanvases.getCanvas("maskCanvas",Mr,Gr),Ir=zr.context;Ir.save(),br(Ir,Or),Ir.globalCompositeOperation="source-in",Ir.fillStyle=hr?gr.getPattern(Ir,this,rr.mozCurrentTransformInverse,Me.PathType.FILL):gr,Ir.fillRect(0,0,Mr,Gr),Ir.restore(),rr.save(),rr.transform.apply(rr,Or.transform),rr.scale(1,-1),rr.drawImage(zr.canvas,0,0,Mr,Gr,0,-1,1,1),rr.restore()}this.compose()}}},{key:"paintImageXObject",value:function(ur){if(!!this.contentVisible){var rr=ur.startsWith("g_")?this.commonObjs.get(ur):this.objs.get(ur);if(!rr){(0,Pe.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(rr)}}},{key:"paintImageXObjectRepeat",value:function(ur,rr,gr,hr){if(!!this.contentVisible){var sr=ur.startsWith("g_")?this.commonObjs.get(ur):this.objs.get(ur);if(!sr){(0,Pe.warn)("Dependent image isn't ready yet");return}for(var Ar=sr.width,Or=sr.height,Mr=[],Gr=0,zr=hr.length;Gr<zr;Gr+=2)Mr.push({transform:[rr,0,0,gr,hr[Gr],hr[Gr+1]],x:0,y:0,w:Ar,h:Or});this.paintInlineImageXObjectGroup(sr,Mr)}}},{key:"paintInlineImageXObject",value:function(ur){if(!!this.contentVisible){var rr=ur.width,gr=ur.height,hr=this.ctx;this.save(),hr.scale(1/rr,-1/gr);var sr;if(typeof HTMLElement=="function"&&ur instanceof HTMLElement||!ur.data)sr=ur;else{var Ar=this.cachedCanvases.getCanvas("inlineImage",rr,gr),Or=Ar.context;cr(Or,ur,this.current.transferMaps),sr=Ar.canvas}var Mr=this._scaleImage(sr,hr.mozCurrentTransformInverse);if(hr.imageSmoothingEnabled=Je(hr.mozCurrentTransform,ur.interpolate),hr.drawImage(Mr.img,0,0,Mr.paintWidth,Mr.paintHeight,0,-gr,rr,gr),this.imageLayer){var Gr=this.getCanvasPosition(0,-gr);this.imageLayer.appendImage({imgData:ur,left:Gr[0],top:Gr[1],width:rr/hr.mozCurrentTransformInverse[0],height:gr/hr.mozCurrentTransformInverse[3]})}this.compose(),this.restore()}}},{key:"paintInlineImageXObjectGroup",value:function(ur,rr){if(!!this.contentVisible){var gr=this.ctx,hr=ur.width,sr=ur.height,Ar=this.cachedCanvases.getCanvas("inlineImage",hr,sr),Or=Ar.context;cr(Or,ur,this.current.transferMaps);for(var Mr=0,Gr=rr.length;Mr<Gr;Mr++){var zr=rr[Mr];if(gr.save(),gr.transform.apply(gr,zr.transform),gr.scale(1,-1),gr.drawImage(Ar.canvas,zr.x,zr.y,zr.w,zr.h,0,-1,1,1),this.imageLayer){var Ir=this.getCanvasPosition(zr.x,zr.y);this.imageLayer.appendImage({imgData:ur,left:Ir[0],top:Ir[1],width:hr,height:sr})}gr.restore()}this.compose()}}},{key:"paintSolidColorImageMask",value:function(){!this.contentVisible||(this.ctx.fillRect(0,0,1,1),this.compose())}},{key:"markPoint",value:function(ur){}},{key:"markPointProps",value:function(ur,rr){}},{key:"beginMarkedContent",value:function(ur){this.markedContentStack.push({visible:!0})}},{key:"beginMarkedContentProps",value:function(ur,rr){ur==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(rr)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}},{key:"endMarkedContent",value:function(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}},{key:"beginCompat",value:function(){}},{key:"endCompat",value:function(){}},{key:"consumePath",value:function(ur){this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(ur);var rr=this.ctx;this.pendingClip&&(this.pendingClip===mr?rr.clip("evenodd"):rr.clip(),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),rr.beginPath()}},{key:"getSinglePixelWidth",value:function(){if(this._cachedGetSinglePixelWidth===null){var ur=this.ctx.mozCurrentTransform,rr=Math.abs(ur[0]*ur[3]-ur[2]*ur[1]),gr=Math.pow(ur[0],2)+Math.pow(ur[2],2),hr=Math.pow(ur[1],2)+Math.pow(ur[3],2),sr=Math.sqrt(Math.max(gr,hr))/rr;gr!==hr&&this._combinedScaleFactor*sr>1?this._cachedGetSinglePixelWidth=-(this._combinedScaleFactor*sr):rr>Number.EPSILON?this._cachedGetSinglePixelWidth=sr:this._cachedGetSinglePixelWidth=1}return this._cachedGetSinglePixelWidth}},{key:"getCanvasPosition",value:function(ur,rr){var gr=this.ctx.mozCurrentTransform;return[gr[0]*ur+gr[2]*rr+gr[4],gr[1]*ur+gr[3]*rr+gr[5]]}},{key:"isContentVisible",value:function(){for(var ur=this.markedContentStack.length-1;ur>=0;ur--)if(!this.markedContentStack[ur].visible)return!1;return!0}}]),pr}();e.CanvasGraphics=Cr;for(var _r in Pe.OPS)Cr.prototype[_r]!==void 0&&(Cr.prototype[Pe.OPS[_r]]=Cr.prototype[_r])},(Re,e,t)=>{function Pe(ir){return Pe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(cr){return typeof cr}:function(cr){return cr&&typeof Symbol=="function"&&cr.constructor===Symbol&&cr!==Symbol.prototype?"symbol":typeof cr},Pe(ir)}Object.defineProperty(e,"__esModule",{value:!0}),e.TilingPattern=e.PathType=void 0,e.getShadingPattern=er;var Me=t(1);function Ie(ir,cr){var br=typeof Symbol!="undefined"&&ir[Symbol.iterator]||ir["@@iterator"];if(!br){if(Array.isArray(ir)||(br=Be(ir))||cr&&ir&&typeof ir.length=="number"){br&&(ir=br);var wr=0,xr=function(){};return{s:xr,n:function(){return wr>=ir.length?{done:!0}:{done:!1,value:ir[wr++]}},e:function(Ve){throw Ve},f:xr}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Sr=!0,lr=!1,fr;return{s:function(){br=br.call(ir)},n:function(){var Ve=br.next();return Sr=Ve.done,Ve},e:function(Ve){lr=!0,fr=Ve},f:function(){try{!Sr&&br.return!=null&&br.return()}finally{if(lr)throw fr}}}}function Be(ir,cr){if(!!ir){if(typeof ir=="string")return ke(ir,cr);var br=Object.prototype.toString.call(ir).slice(8,-1);if(br==="Object"&&ir.constructor&&(br=ir.constructor.name),br==="Map"||br==="Set")return Array.from(ir);if(br==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(br))return ke(ir,cr)}}function ke(ir,cr){(cr==null||cr>ir.length)&&(cr=ir.length);for(var br=0,wr=new Array(cr);br<cr;br++)wr[br]=ir[br];return wr}function _e(ir,cr){if(typeof cr!="function"&&cr!==null)throw new TypeError("Super expression must either be null or a function");ir.prototype=Object.create(cr&&cr.prototype,{constructor:{value:ir,writable:!0,configurable:!0}}),Object.defineProperty(ir,"prototype",{writable:!1}),cr&&Ce(ir,cr)}function Ce(ir,cr){return Ce=Object.setPrototypeOf||function(wr,xr){return wr.__proto__=xr,wr},Ce(ir,cr)}function Te(ir){var cr=r();return function(){var wr=Oe(ir),xr;if(cr){var Sr=Oe(this).constructor;xr=Reflect.construct(wr,arguments,Sr)}else xr=wr.apply(this,arguments);return Se(this,xr)}}function Se(ir,cr){if(cr&&(Pe(cr)==="object"||typeof cr=="function"))return cr;if(cr!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xe(ir)}function xe(ir){if(ir===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ir}function r(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Oe(ir){return Oe=Object.setPrototypeOf?Object.getPrototypeOf:function(br){return br.__proto__||Object.getPrototypeOf(br)},Oe(ir)}function Ee(ir,cr){if(!(ir instanceof cr))throw new TypeError("Cannot call a class as a function")}function Ae(ir,cr){for(var br=0;br<cr.length;br++){var wr=cr[br];wr.enumerable=wr.enumerable||!1,wr.configurable=!0,"value"in wr&&(wr.writable=!0),Object.defineProperty(ir,wr.key,wr)}}function Fe(ir,cr,br){return cr&&Ae(ir.prototype,cr),br&&Ae(ir,br),Object.defineProperty(ir,"prototype",{writable:!1}),ir}var De={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};e.PathType=De;function ze(ir,cr){if(!(!cr||typeof Path2D=="undefined")){var br=cr[2]-cr[0],wr=cr[3]-cr[1],xr=new Path2D;xr.rect(cr[0],cr[1],br,wr),ir.clip(xr)}}var je=function(){function ir(){Ee(this,ir),this.constructor===ir&&(0,Me.unreachable)("Cannot initialize BaseShadingPattern.")}return Fe(ir,[{key:"getPattern",value:function(){(0,Me.unreachable)("Abstract method `getPattern` called.")}}]),ir}(),We=function(ir){_e(br,ir);var cr=Te(br);function br(wr){var xr;return Ee(this,br),xr=cr.call(this),xr._type=wr[1],xr._bbox=wr[2],xr._colorStops=wr[3],xr._p0=wr[4],xr._p1=wr[5],xr._r0=wr[6],xr._r1=wr[7],xr.matrix=null,xr}return Fe(br,[{key:"_createGradient",value:function(xr){var Sr;this._type==="axial"?Sr=xr.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(Sr=xr.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));var lr=Ie(this._colorStops),fr;try{for(lr.s();!(fr=lr.n()).done;){var $e=fr.value;Sr.addColorStop($e[0],$e[1])}}catch(Ve){lr.e(Ve)}finally{lr.f()}return Sr}},{key:"getPattern",value:function(xr,Sr,lr,fr){var $e;if(fr===De.STROKE||fr===De.FILL){var Ve=Sr.current.getClippedPathBoundingBox(fr,xr.mozCurrentTransform)||[0,0,0,0],Je=Math.ceil(Ve[2]-Ve[0])||1,Ze=Math.ceil(Ve[3]-Ve[1])||1,St=Sr.cachedCanvases.getCanvas("pattern",Je,Ze,!0),vr=St.context;vr.clearRect(0,0,vr.canvas.width,vr.canvas.height),vr.beginPath(),vr.rect(0,0,vr.canvas.width,vr.canvas.height),vr.translate(-Ve[0],-Ve[1]),lr=Me.Util.transform(lr,[1,0,0,1,Ve[0],Ve[1]]),vr.transform.apply(vr,Sr.baseTransform),this.matrix&&vr.transform.apply(vr,this.matrix),ze(vr,this._bbox),vr.fillStyle=this._createGradient(vr),vr.fill(),$e=xr.createPattern(St.canvas,"no-repeat");var mr=new DOMMatrix(lr);try{$e.setTransform(mr)}catch(Cr){(0,Me.warn)('RadialAxialShadingPattern.getPattern: "'.concat(Cr==null?void 0:Cr.message,'".'))}}else ze(xr,this._bbox),$e=this._createGradient(xr);return $e}}]),br}(je);function Ge(ir,cr,br,wr,xr,Sr,lr,fr){var $e=cr.coords,Ve=cr.colors,Je=ir.data,Ze=ir.width*4,St;$e[br+1]>$e[wr+1]&&(St=br,br=wr,wr=St,St=Sr,Sr=lr,lr=St),$e[wr+1]>$e[xr+1]&&(St=wr,wr=xr,xr=St,St=lr,lr=fr,fr=St),$e[br+1]>$e[wr+1]&&(St=br,br=wr,wr=St,St=Sr,Sr=lr,lr=St);var vr=($e[br]+cr.offsetX)*cr.scaleX,mr=($e[br+1]+cr.offsetY)*cr.scaleY,Cr=($e[wr]+cr.offsetX)*cr.scaleX,_r=($e[wr+1]+cr.offsetY)*cr.scaleY,pr=($e[xr]+cr.offsetX)*cr.scaleX,dr=($e[xr+1]+cr.offsetY)*cr.scaleY;if(!(mr>=dr))for(var ur=Ve[Sr],rr=Ve[Sr+1],gr=Ve[Sr+2],hr=Ve[lr],sr=Ve[lr+1],Ar=Ve[lr+2],Or=Ve[fr],Mr=Ve[fr+1],Gr=Ve[fr+2],zr=Math.round(mr),Ir=Math.round(dr),Qr,rn,sn,pn,mn,Sn,Cn,Xr,Er=zr;Er<=Ir;Er++){if(Er<_r){var Rr=void 0;Er<mr?Rr=0:Rr=(mr-Er)/(mr-_r),Qr=vr-(vr-Cr)*Rr,rn=ur-(ur-hr)*Rr,sn=rr-(rr-sr)*Rr,pn=gr-(gr-Ar)*Rr}else{var Dr=void 0;Er>dr?Dr=1:_r===dr?Dr=0:Dr=(_r-Er)/(_r-dr),Qr=Cr-(Cr-pr)*Dr,rn=hr-(hr-Or)*Dr,sn=sr-(sr-Mr)*Dr,pn=Ar-(Ar-Gr)*Dr}var Br=void 0;Er<mr?Br=0:Er>dr?Br=1:Br=(mr-Er)/(mr-dr),mn=vr-(vr-pr)*Br,Sn=ur-(ur-Or)*Br,Cn=rr-(rr-Mr)*Br,Xr=gr-(gr-Gr)*Br;for(var Wr=Math.round(Math.min(Qr,mn)),Ur=Math.round(Math.max(Qr,mn)),Hr=Ze*Er+Wr*4,$r=Wr;$r<=Ur;$r++)Br=(Qr-$r)/(Qr-mn),Br<0?Br=0:Br>1&&(Br=1),Je[Hr++]=rn-(rn-Sn)*Br|0,Je[Hr++]=sn-(sn-Cn)*Br|0,Je[Hr++]=pn-(pn-Xr)*Br|0,Je[Hr++]=255}}function Ye(ir,cr,br){var wr=cr.coords,xr=cr.colors,Sr,lr;switch(cr.type){case"lattice":var fr=cr.verticesPerRow,$e=Math.floor(wr.length/fr)-1,Ve=fr-1;for(Sr=0;Sr<$e;Sr++)for(var Je=Sr*fr,Ze=0;Ze<Ve;Ze++,Je++)Ge(ir,br,wr[Je],wr[Je+1],wr[Je+fr],xr[Je],xr[Je+1],xr[Je+fr]),Ge(ir,br,wr[Je+fr+1],wr[Je+1],wr[Je+fr],xr[Je+fr+1],xr[Je+1],xr[Je+fr]);break;case"triangles":for(Sr=0,lr=wr.length;Sr<lr;Sr+=3)Ge(ir,br,wr[Sr],wr[Sr+1],wr[Sr+2],xr[Sr],xr[Sr+1],xr[Sr+2]);break;default:throw new Error("illegal figure")}}var Xe=function(ir){_e(br,ir);var cr=Te(br);function br(wr){var xr;return Ee(this,br),xr=cr.call(this),xr._coords=wr[2],xr._colors=wr[3],xr._figures=wr[4],xr._bounds=wr[5],xr._bbox=wr[7],xr._background=wr[8],xr.matrix=null,xr}return Fe(br,[{key:"_createMeshCanvas",value:function(xr,Sr,lr){var fr=1.1,$e=3e3,Ve=2,Je=Math.floor(this._bounds[0]),Ze=Math.floor(this._bounds[1]),St=Math.ceil(this._bounds[2])-Je,vr=Math.ceil(this._bounds[3])-Ze,mr=Math.min(Math.ceil(Math.abs(St*xr[0]*fr)),$e),Cr=Math.min(Math.ceil(Math.abs(vr*xr[1]*fr)),$e),_r=St/mr,pr=vr/Cr,dr={coords:this._coords,colors:this._colors,offsetX:-Je,offsetY:-Ze,scaleX:1/_r,scaleY:1/pr},ur=mr+Ve*2,rr=Cr+Ve*2,gr=lr.getCanvas("mesh",ur,rr,!1),hr=gr.context,sr=hr.createImageData(mr,Cr);if(Sr)for(var Ar=sr.data,Or=0,Mr=Ar.length;Or<Mr;Or+=4)Ar[Or]=Sr[0],Ar[Or+1]=Sr[1],Ar[Or+2]=Sr[2],Ar[Or+3]=255;var Gr=Ie(this._figures),zr;try{for(Gr.s();!(zr=Gr.n()).done;){var Ir=zr.value;Ye(sr,Ir,dr)}}catch(rn){Gr.e(rn)}finally{Gr.f()}hr.putImageData(sr,Ve,Ve);var Qr=gr.canvas;return{canvas:Qr,offsetX:Je-Ve*_r,offsetY:Ze-Ve*pr,scaleX:_r,scaleY:pr}}},{key:"getPattern",value:function(xr,Sr,lr,fr){ze(xr,this._bbox);var $e;if(fr===De.SHADING)$e=Me.Util.singularValueDecompose2dScale(xr.mozCurrentTransform);else if($e=Me.Util.singularValueDecompose2dScale(Sr.baseTransform),this.matrix){var Ve=Me.Util.singularValueDecompose2dScale(this.matrix);$e=[$e[0]*Ve[0],$e[1]*Ve[1]]}var Je=this._createMeshCanvas($e,fr===De.SHADING?null:this._background,Sr.cachedCanvases);return fr!==De.SHADING&&(xr.setTransform.apply(xr,Sr.baseTransform),this.matrix&&xr.transform.apply(xr,this.matrix)),xr.translate(Je.offsetX,Je.offsetY),xr.scale(Je.scaleX,Je.scaleY),xr.createPattern(Je.canvas,"no-repeat")}}]),br}(je),Ke=function(ir){_e(br,ir);var cr=Te(br);function br(){return Ee(this,br),cr.apply(this,arguments)}return Fe(br,[{key:"getPattern",value:function(){return"hotpink"}}]),br}(je);function er(ir){switch(ir[0]){case"RadialAxial":return new We(ir);case"Mesh":return new Xe(ir);case"Dummy":return new Ke}throw new Error("Unknown IR type: ".concat(ir[0]))}var Qe={COLORED:1,UNCOLORED:2},nr=function(){function ir(cr,br,wr,xr,Sr){Ee(this,ir),this.operatorList=cr[2],this.matrix=cr[3]||[1,0,0,1,0,0],this.bbox=cr[4],this.xstep=cr[5],this.ystep=cr[6],this.paintType=cr[7],this.tilingType=cr[8],this.color=br,this.ctx=wr,this.canvasGraphicsFactory=xr,this.baseTransform=Sr}return Fe(ir,[{key:"createPatternCanvas",value:function(br){var wr=this.operatorList,xr=this.bbox,Sr=this.xstep,lr=this.ystep,fr=this.paintType,$e=this.tilingType,Ve=this.color,Je=this.canvasGraphicsFactory;(0,Me.info)("TilingType: "+$e);var Ze=xr[0],St=xr[1],vr=xr[2],mr=xr[3],Cr=Me.Util.singularValueDecompose2dScale(this.matrix),_r=Me.Util.singularValueDecompose2dScale(this.baseTransform),pr=[Cr[0]*_r[0],Cr[1]*_r[1]],dr=this.getSizeAndScale(Sr,this.ctx.canvas.width,pr[0]),ur=this.getSizeAndScale(lr,this.ctx.canvas.height,pr[1]),rr=br.cachedCanvases.getCanvas("pattern",dr.size,ur.size,!0),gr=rr.context,hr=Je.createCanvasGraphics(gr);hr.groupLevel=br.groupLevel,this.setFillAndStrokeStyleToContext(hr,fr,Ve);var sr=Ze,Ar=St,Or=vr,Mr=mr;return Ze<0&&(sr=0,Or+=Math.abs(Ze)),St<0&&(Ar=0,Mr+=Math.abs(St)),gr.translate(-(dr.scale*sr),-(ur.scale*Ar)),hr.transform(dr.scale,0,0,ur.scale,0,0),gr.save(),this.clipBbox(hr,sr,Ar,Or,Mr),hr.baseTransform=hr.ctx.mozCurrentTransform.slice(),hr.executeOperatorList(wr),hr.endDrawing(),{canvas:rr.canvas,scaleX:dr.scale,scaleY:ur.scale,offsetX:sr,offsetY:Ar}}},{key:"getSizeAndScale",value:function(br,wr,xr){br=Math.abs(br);var Sr=Math.max(ir.MAX_PATTERN_SIZE,wr),lr=Math.ceil(br*xr);return lr>=Sr?lr=Sr:xr=lr/br,{scale:xr,size:lr}}},{key:"clipBbox",value:function(br,wr,xr,Sr,lr){var fr=Sr-wr,$e=lr-xr;br.ctx.rect(wr,xr,fr,$e),br.clip(),br.endPath()}},{key:"setFillAndStrokeStyleToContext",value:function(br,wr,xr){var Sr=br.ctx,lr=br.current;switch(wr){case Qe.COLORED:var fr=this.ctx;Sr.fillStyle=fr.fillStyle,Sr.strokeStyle=fr.strokeStyle,lr.fillColor=fr.fillStyle,lr.strokeColor=fr.strokeStyle;break;case Qe.UNCOLORED:var $e=Me.Util.makeHexColor(xr[0],xr[1],xr[2]);Sr.fillStyle=$e,Sr.strokeStyle=$e,lr.fillColor=$e,lr.strokeColor=$e;break;default:throw new Me.FormatError("Unsupported paint type: ".concat(wr))}}},{key:"getPattern",value:function(br,wr,xr,Sr){var lr=xr;Sr!==De.SHADING&&(lr=Me.Util.transform(lr,wr.baseTransform),this.matrix&&(lr=Me.Util.transform(lr,this.matrix)));var fr=this.createPatternCanvas(wr),$e=new DOMMatrix(lr);$e=$e.translate(fr.offsetX,fr.offsetY),$e=$e.scale(1/fr.scaleX,1/fr.scaleY);var Ve=br.createPattern(fr.canvas,"repeat");try{Ve.setTransform($e)}catch(Je){(0,Me.warn)('TilingPattern.getPattern: "'.concat(Je==null?void 0:Je.message,'".'))}return Ve}}],[{key:"MAX_PATTERN_SIZE",get:function(){return(0,Me.shadow)(this,"MAX_PATTERN_SIZE",3e3)}}]),ir}();e.TilingPattern=nr},(Re,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalWorkerOptions=void 0;var t=Object.create(null);e.GlobalWorkerOptions=t,t.workerPort=t.workerPort===void 0?null:t.workerPort,t.workerSrc=t.workerSrc===void 0?"":t.workerSrc},(Re,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0;var Pe=Ie(t(145)),Me=t(1);function Ie(Ae){return Ae&&Ae.__esModule?Ae:{default:Ae}}function Be(Ae,Fe,De,ze,je,We,Ge){try{var Ye=Ae[We](Ge),Xe=Ye.value}catch(Ke){De(Ke);return}Ye.done?Fe(Xe):Promise.resolve(Xe).then(ze,je)}function ke(Ae){return function(){var Fe=this,De=arguments;return new Promise(function(ze,je){var We=Ae.apply(Fe,De);function Ge(Xe){Be(We,ze,je,Ge,Ye,"next",Xe)}function Ye(Xe){Be(We,ze,je,Ge,Ye,"throw",Xe)}Ge(void 0)})}}function _e(Ae,Fe){if(!(Ae instanceof Fe))throw new TypeError("Cannot call a class as a function")}function Ce(Ae,Fe){for(var De=0;De<Fe.length;De++){var ze=Fe[De];ze.enumerable=ze.enumerable||!1,ze.configurable=!0,"value"in ze&&(ze.writable=!0),Object.defineProperty(Ae,ze.key,ze)}}function Te(Ae,Fe,De){return Fe&&Ce(Ae.prototype,Fe),De&&Ce(Ae,De),Object.defineProperty(Ae,"prototype",{writable:!1}),Ae}function Se(Ae){return Se=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Fe){return typeof Fe}:function(Fe){return Fe&&typeof Symbol=="function"&&Fe.constructor===Symbol&&Fe!==Symbol.prototype?"symbol":typeof Fe},Se(Ae)}var xe={UNKNOWN:0,DATA:1,ERROR:2},r={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Oe(Ae){switch(Ae instanceof Error||Se(Ae)==="object"&&Ae!==null||(0,Me.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),Ae.name){case"AbortException":return new Me.AbortException(Ae.message);case"MissingPDFException":return new Me.MissingPDFException(Ae.message);case"PasswordException":return new Me.PasswordException(Ae.message,Ae.code);case"UnexpectedResponseException":return new Me.UnexpectedResponseException(Ae.message,Ae.status);case"UnknownErrorException":return new Me.UnknownErrorException(Ae.message,Ae.details);default:return new Me.UnknownErrorException(Ae.message,Ae.toString())}}var Ee=function(){function Ae(Fe,De,ze){var je=this;_e(this,Ae),this.sourceName=Fe,this.targetName=De,this.comObj=ze,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=function(We){var Ge=We.data;if(Ge.targetName===je.sourceName){if(Ge.stream){je._processStreamMessage(Ge);return}if(Ge.callback){var Ye=Ge.callbackId,Xe=je.callbackCapabilities[Ye];if(!Xe)throw new Error("Cannot resolve callback ".concat(Ye));if(delete je.callbackCapabilities[Ye],Ge.callback===xe.DATA)Xe.resolve(Ge.data);else if(Ge.callback===xe.ERROR)Xe.reject(Oe(Ge.reason));else throw new Error("Unexpected callback case");return}var Ke=je.actionHandler[Ge.action];if(!Ke)throw new Error("Unknown action from worker: ".concat(Ge.action));if(Ge.callbackId){var er=je.sourceName,Qe=Ge.sourceName;new Promise(function(nr){nr(Ke(Ge.data))}).then(function(nr){ze.postMessage({sourceName:er,targetName:Qe,callback:xe.DATA,callbackId:Ge.callbackId,data:nr})},function(nr){ze.postMessage({sourceName:er,targetName:Qe,callback:xe.ERROR,callbackId:Ge.callbackId,reason:Oe(nr)})});return}if(Ge.streamId){je._createStreamSink(Ge);return}Ke(Ge.data)}},ze.addEventListener("message",this._onComObjOnMessage)}return Te(Ae,[{key:"on",value:function(De,ze){var je=this.actionHandler;if(je[De])throw new Error('There is already an actionName called "'.concat(De,'"'));je[De]=ze}},{key:"send",value:function(De,ze,je){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:De,data:ze},je)}},{key:"sendWithPromise",value:function(De,ze,je){var We=this.callbackId++,Ge=(0,Me.createPromiseCapability)();this.callbackCapabilities[We]=Ge;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:De,callbackId:We,data:ze},je)}catch(Ye){Ge.reject(Ye)}return Ge.promise}},{key:"sendWithStream",value:function(De,ze,je,We){var Ge=this,Ye=this.streamId++,Xe=this.sourceName,Ke=this.targetName,er=this.comObj;return new ReadableStream({start:function(nr){var ir=(0,Me.createPromiseCapability)();return Ge.streamControllers[Ye]={controller:nr,startCall:ir,pullCall:null,cancelCall:null,isClosed:!1},er.postMessage({sourceName:Xe,targetName:Ke,action:De,streamId:Ye,data:ze,desiredSize:nr.desiredSize},We),ir.promise},pull:function(nr){var ir=(0,Me.createPromiseCapability)();return Ge.streamControllers[Ye].pullCall=ir,er.postMessage({sourceName:Xe,targetName:Ke,stream:r.PULL,streamId:Ye,desiredSize:nr.desiredSize}),ir.promise},cancel:function(nr){(0,Me.assert)(nr instanceof Error,"cancel must have a valid reason");var ir=(0,Me.createPromiseCapability)();return Ge.streamControllers[Ye].cancelCall=ir,Ge.streamControllers[Ye].isClosed=!0,er.postMessage({sourceName:Xe,targetName:Ke,stream:r.CANCEL,streamId:Ye,reason:Oe(nr)}),ir.promise}},je)}},{key:"_createStreamSink",value:function(De){var ze=De.streamId,je=this.sourceName,We=De.sourceName,Ge=this.comObj,Ye=this,Xe=this.actionHandler[De.action],Ke={enqueue:function(Qe){var nr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,ir=arguments.length>2?arguments[2]:void 0;if(!this.isCancelled){var cr=this.desiredSize;this.desiredSize-=nr,cr>0&&this.desiredSize<=0&&(this.sinkCapability=(0,Me.createPromiseCapability)(),this.ready=this.sinkCapability.promise),Ge.postMessage({sourceName:je,targetName:We,stream:r.ENQUEUE,streamId:ze,chunk:Qe},ir)}},close:function(){this.isCancelled||(this.isCancelled=!0,Ge.postMessage({sourceName:je,targetName:We,stream:r.CLOSE,streamId:ze}),delete Ye.streamSinks[ze])},error:function(Qe){(0,Me.assert)(Qe instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,Ge.postMessage({sourceName:je,targetName:We,stream:r.ERROR,streamId:ze,reason:Oe(Qe)}))},sinkCapability:(0,Me.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:De.desiredSize,ready:null};Ke.sinkCapability.resolve(),Ke.ready=Ke.sinkCapability.promise,this.streamSinks[ze]=Ke,new Promise(function(er){er(Xe(De.data,Ke))}).then(function(){Ge.postMessage({sourceName:je,targetName:We,stream:r.START_COMPLETE,streamId:ze,success:!0})},function(er){Ge.postMessage({sourceName:je,targetName:We,stream:r.START_COMPLETE,streamId:ze,reason:Oe(er)})})}},{key:"_processStreamMessage",value:function(De){var ze=De.streamId,je=this.sourceName,We=De.sourceName,Ge=this.comObj,Ye=this.streamControllers[ze],Xe=this.streamSinks[ze];switch(De.stream){case r.START_COMPLETE:De.success?Ye.startCall.resolve():Ye.startCall.reject(Oe(De.reason));break;case r.PULL_COMPLETE:De.success?Ye.pullCall.resolve():Ye.pullCall.reject(Oe(De.reason));break;case r.PULL:if(!Xe){Ge.postMessage({sourceName:je,targetName:We,stream:r.PULL_COMPLETE,streamId:ze,success:!0});break}Xe.desiredSize<=0&&De.desiredSize>0&&Xe.sinkCapability.resolve(),Xe.desiredSize=De.desiredSize,new Promise(function(Ke){Ke(Xe.onPull&&Xe.onPull())}).then(function(){Ge.postMessage({sourceName:je,targetName:We,stream:r.PULL_COMPLETE,streamId:ze,success:!0})},function(Ke){Ge.postMessage({sourceName:je,targetName:We,stream:r.PULL_COMPLETE,streamId:ze,reason:Oe(Ke)})});break;case r.ENQUEUE:if((0,Me.assert)(Ye,"enqueue should have stream controller"),Ye.isClosed)break;Ye.controller.enqueue(De.chunk);break;case r.CLOSE:if((0,Me.assert)(Ye,"close should have stream controller"),Ye.isClosed)break;Ye.isClosed=!0,Ye.controller.close(),this._deleteStreamController(Ye,ze);break;case r.ERROR:(0,Me.assert)(Ye,"error should have stream controller"),Ye.controller.error(Oe(De.reason)),this._deleteStreamController(Ye,ze);break;case r.CANCEL_COMPLETE:De.success?Ye.cancelCall.resolve():Ye.cancelCall.reject(Oe(De.reason)),this._deleteStreamController(Ye,ze);break;case r.CANCEL:if(!Xe)break;new Promise(function(Ke){Ke(Xe.onCancel&&Xe.onCancel(Oe(De.reason)))}).then(function(){Ge.postMessage({sourceName:je,targetName:We,stream:r.CANCEL_COMPLETE,streamId:ze,success:!0})},function(Ke){Ge.postMessage({sourceName:je,targetName:We,stream:r.CANCEL_COMPLETE,streamId:ze,reason:Oe(Ke)})}),Xe.sinkCapability.reject(Oe(De.reason)),Xe.isCancelled=!0,delete this.streamSinks[ze];break;default:throw new Error("Unexpected stream case")}}},{key:"_deleteStreamController",value:function(){var Fe=ke(Pe.default.mark(function ze(je,We){return Pe.default.wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:return Ye.next=2,Promise.allSettled([je.startCall&&je.startCall.promise,je.pullCall&&je.pullCall.promise,je.cancelCall&&je.cancelCall.promise]);case 2:delete this.streamControllers[We];case 3:case"end":return Ye.stop()}},ze,this)}));function De(ze,je){return Fe.apply(this,arguments)}return De}()},{key:"destroy",value:function(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}]),Ae}();e.MessageHandler=Ee},(Re,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var Pe=t(1);function Me(Fe,De){if(!(Fe instanceof De))throw new TypeError("Cannot call a class as a function")}function Ie(Fe,De){for(var ze=0;ze<De.length;ze++){var je=De[ze];je.enumerable=je.enumerable||!1,je.configurable=!0,"value"in je&&(je.writable=!0),Object.defineProperty(Fe,je.key,je)}}function Be(Fe,De,ze){return De&&Ie(Fe.prototype,De),ze&&Ie(Fe,ze),Object.defineProperty(Fe,"prototype",{writable:!1}),Fe}function ke(Fe,De,ze){_e(Fe,De),De.set(Fe,ze)}function _e(Fe,De){if(De.has(Fe))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ce(Fe,De){var ze=xe(Fe,De,"get");return Te(Fe,ze)}function Te(Fe,De){return De.get?De.get.call(Fe):De.value}function Se(Fe,De,ze){var je=xe(Fe,De,"set");return r(Fe,je,ze),ze}function xe(Fe,De,ze){if(!De.has(Fe))throw new TypeError("attempted to "+ze+" private field on non-instance");return De.get(Fe)}function r(Fe,De,ze){if(De.set)De.set.call(Fe,ze);else{if(!De.writable)throw new TypeError("attempted to set read only private field");De.value=ze}}var Oe=new WeakMap,Ee=new WeakMap,Ae=function(){function Fe(De){var ze=De.parsedData,je=De.rawData;Me(this,Fe),ke(this,Oe,{writable:!0,value:void 0}),ke(this,Ee,{writable:!0,value:void 0}),Se(this,Oe,ze),Se(this,Ee,je)}return Be(Fe,[{key:"getRaw",value:function(){return Ce(this,Ee)}},{key:"get",value:function(ze){var je;return(je=Ce(this,Oe).get(ze))!==null&&je!==void 0?je:null}},{key:"getAll",value:function(){return(0,Pe.objectFromMap)(Ce(this,Oe))}},{key:"has",value:function(ze){return Ce(this,Oe).has(ze)}}]),Fe}();e.Metadata=Ae},(Re,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OptionalContentConfig=void 0;var Pe=t(1);function Me(xe,r){var Oe=typeof Symbol!="undefined"&&xe[Symbol.iterator]||xe["@@iterator"];if(!Oe){if(Array.isArray(xe)||(Oe=Ie(xe))||r&&xe&&typeof xe.length=="number"){Oe&&(xe=Oe);var Ee=0,Ae=function(){};return{s:Ae,n:function(){return Ee>=xe.length?{done:!0}:{done:!1,value:xe[Ee++]}},e:function(We){throw We},f:Ae}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Fe=!0,De=!1,ze;return{s:function(){Oe=Oe.call(xe)},n:function(){var We=Oe.next();return Fe=We.done,We},e:function(We){De=!0,ze=We},f:function(){try{!Fe&&Oe.return!=null&&Oe.return()}finally{if(De)throw ze}}}}function Ie(xe,r){if(!!xe){if(typeof xe=="string")return Be(xe,r);var Oe=Object.prototype.toString.call(xe).slice(8,-1);if(Oe==="Object"&&xe.constructor&&(Oe=xe.constructor.name),Oe==="Map"||Oe==="Set")return Array.from(xe);if(Oe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Oe))return Be(xe,r)}}function Be(xe,r){(r==null||r>xe.length)&&(r=xe.length);for(var Oe=0,Ee=new Array(r);Oe<r;Oe++)Ee[Oe]=xe[Oe];return Ee}function ke(xe,r){for(var Oe=0;Oe<r.length;Oe++){var Ee=r[Oe];Ee.enumerable=Ee.enumerable||!1,Ee.configurable=!0,"value"in Ee&&(Ee.writable=!0),Object.defineProperty(xe,Ee.key,Ee)}}function _e(xe,r,Oe){return r&&ke(xe.prototype,r),Oe&&ke(xe,Oe),Object.defineProperty(xe,"prototype",{writable:!1}),xe}function Ce(xe,r){if(!(xe instanceof r))throw new TypeError("Cannot call a class as a function")}var Te=_e(function xe(r,Oe){Ce(this,xe),this.visible=!0,this.name=r,this.intent=Oe}),Se=function(){function xe(r){if(Ce(this,xe),this.name=null,this.creator=null,this._order=null,this._groups=new Map,r!==null){this.name=r.name,this.creator=r.creator,this._order=r.order;var Oe=Me(r.groups),Ee;try{for(Oe.s();!(Ee=Oe.n()).done;){var Ae=Ee.value;this._groups.set(Ae.id,new Te(Ae.name,Ae.intent))}}catch(er){Oe.e(er)}finally{Oe.f()}if(r.baseState==="OFF"){var Fe=Me(this._groups),De;try{for(Fe.s();!(De=Fe.n()).done;){var ze=De.value;ze.visible=!1}}catch(er){Fe.e(er)}finally{Fe.f()}}var je=Me(r.on),We;try{for(je.s();!(We=je.n()).done;){var Ge=We.value;this._groups.get(Ge).visible=!0}}catch(er){je.e(er)}finally{je.f()}var Ye=Me(r.off),Xe;try{for(Ye.s();!(Xe=Ye.n()).done;){var Ke=Xe.value;this._groups.get(Ke).visible=!1}}catch(er){Ye.e(er)}finally{Ye.f()}}}return _e(xe,[{key:"_evaluateVisibilityExpression",value:function(Oe){var Ee=Oe.length;if(Ee<2)return!0;for(var Ae=Oe[0],Fe=1;Fe<Ee;Fe++){var De=Oe[Fe],ze=void 0;if(Array.isArray(De))ze=this._evaluateVisibilityExpression(De);else if(this._groups.has(De))ze=this._groups.get(De).visible;else return(0,Pe.warn)("Optional content group not found: ".concat(De)),!0;switch(Ae){case"And":if(!ze)return!1;break;case"Or":if(ze)return!0;break;case"Not":return!ze;default:return!0}}return Ae==="And"}},{key:"isVisible",value:function(Oe){if(this._groups.size===0)return!0;if(!Oe)return(0,Pe.warn)("Optional content group not defined."),!0;if(Oe.type==="OCG")return this._groups.has(Oe.id)?this._groups.get(Oe.id).visible:((0,Pe.warn)("Optional content group not found: ".concat(Oe.id)),!0);if(Oe.type==="OCMD"){if(Oe.expression)return this._evaluateVisibilityExpression(Oe.expression);if(!Oe.policy||Oe.policy==="AnyOn"){var Ee=Me(Oe.ids),Ae;try{for(Ee.s();!(Ae=Ee.n()).done;){var Fe=Ae.value;if(!this._groups.has(Fe))return(0,Pe.warn)("Optional content group not found: ".concat(Fe)),!0;if(this._groups.get(Fe).visible)return!0}}catch(Qe){Ee.e(Qe)}finally{Ee.f()}return!1}else if(Oe.policy==="AllOn"){var De=Me(Oe.ids),ze;try{for(De.s();!(ze=De.n()).done;){var je=ze.value;if(!this._groups.has(je))return(0,Pe.warn)("Optional content group not found: ".concat(je)),!0;if(!this._groups.get(je).visible)return!1}}catch(Qe){De.e(Qe)}finally{De.f()}return!0}else if(Oe.policy==="AnyOff"){var We=Me(Oe.ids),Ge;try{for(We.s();!(Ge=We.n()).done;){var Ye=Ge.value;if(!this._groups.has(Ye))return(0,Pe.warn)("Optional content group not found: ".concat(Ye)),!0;if(!this._groups.get(Ye).visible)return!0}}catch(Qe){We.e(Qe)}finally{We.f()}return!1}else if(Oe.policy==="AllOff"){var Xe=Me(Oe.ids),Ke;try{for(Xe.s();!(Ke=Xe.n()).done;){var er=Ke.value;if(!this._groups.has(er))return(0,Pe.warn)("Optional content group not found: ".concat(er)),!0;if(this._groups.get(er).visible)return!1}}catch(Qe){Xe.e(Qe)}finally{Xe.f()}return!0}return(0,Pe.warn)("Unknown optional content policy ".concat(Oe.policy,".")),!0}return(0,Pe.warn)("Unknown group type ".concat(Oe.type,".")),!0}},{key:"setVisibility",value:function(Oe){var Ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!this._groups.has(Oe)){(0,Pe.warn)("Optional content group not found: ".concat(Oe));return}this._groups.get(Oe).visible=!!Ee}},{key:"getOrder",value:function(){return this._groups.size?this._order?this._order.slice():Array.from(this._groups.keys()):null}},{key:"getGroups",value:function(){return this._groups.size>0?(0,Pe.objectFromMap)(this._groups):null}},{key:"getGroup",value:function(Oe){return this._groups.get(Oe)||null}}]),xe}();e.OptionalContentConfig=Se},(Re,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0;var Pe=Be(t(145)),Me=t(1),Ie=t(147);function Be(De){return De&&De.__esModule?De:{default:De}}function ke(De,ze,je,We,Ge,Ye,Xe){try{var Ke=De[Ye](Xe),er=Ke.value}catch(Qe){je(Qe);return}Ke.done?ze(er):Promise.resolve(er).then(We,Ge)}function _e(De){return function(){var ze=this,je=arguments;return new Promise(function(We,Ge){var Ye=De.apply(ze,je);function Xe(er){ke(Ye,We,Ge,Xe,Ke,"next",er)}function Ke(er){ke(Ye,We,Ge,Xe,Ke,"throw",er)}Xe(void 0)})}}function Ce(De,ze){var je=typeof Symbol!="undefined"&&De[Symbol.iterator]||De["@@iterator"];if(!je){if(Array.isArray(De)||(je=Te(De))||ze&&De&&typeof De.length=="number"){je&&(De=je);var We=0,Ge=function(){};return{s:Ge,n:function(){return We>=De.length?{done:!0}:{done:!1,value:De[We++]}},e:function(Qe){throw Qe},f:Ge}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ye=!0,Xe=!1,Ke;return{s:function(){je=je.call(De)},n:function(){var Qe=je.next();return Ye=Qe.done,Qe},e:function(Qe){Xe=!0,Ke=Qe},f:function(){try{!Ye&&je.return!=null&&je.return()}finally{if(Xe)throw Ke}}}}function Te(De,ze){if(!!De){if(typeof De=="string")return Se(De,ze);var je=Object.prototype.toString.call(De).slice(8,-1);if(je==="Object"&&De.constructor&&(je=De.constructor.name),je==="Map"||je==="Set")return Array.from(De);if(je==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(je))return Se(De,ze)}}function Se(De,ze){(ze==null||ze>De.length)&&(ze=De.length);for(var je=0,We=new Array(ze);je<ze;je++)We[je]=De[je];return We}function xe(De,ze){if(!(De instanceof ze))throw new TypeError("Cannot call a class as a function")}function r(De,ze){for(var je=0;je<ze.length;je++){var We=ze[je];We.enumerable=We.enumerable||!1,We.configurable=!0,"value"in We&&(We.writable=!0),Object.defineProperty(De,We.key,We)}}function Oe(De,ze,je){return ze&&r(De.prototype,ze),je&&r(De,je),Object.defineProperty(De,"prototype",{writable:!1}),De}var Ee=function(){function De(ze,je){var We=this;xe(this,De),(0,Me.assert)(je,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=ze.progressiveDone||!1,this._contentDispositionFilename=ze.contentDispositionFilename||null;var Ge=ze.initialData;if((Ge==null?void 0:Ge.length)>0){var Ye=new Uint8Array(Ge).buffer;this._queuedChunks.push(Ye)}this._pdfDataRangeTransport=je,this._isStreamingSupported=!ze.disableStream,this._isRangeSupported=!ze.disableRange,this._contentLength=ze.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener(function(Xe,Ke){We._onReceiveData({begin:Xe,chunk:Ke})}),this._pdfDataRangeTransport.addProgressListener(function(Xe,Ke){We._onProgress({loaded:Xe,total:Ke})}),this._pdfDataRangeTransport.addProgressiveReadListener(function(Xe){We._onReceiveData({chunk:Xe})}),this._pdfDataRangeTransport.addProgressiveDoneListener(function(){We._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}return Oe(De,[{key:"_onReceiveData",value:function(je){var We=new Uint8Array(je.chunk).buffer;if(je.begin===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(We):this._queuedChunks.push(We);else{var Ge=this._rangeReaders.some(function(Ye){return Ye._begin!==je.begin?!1:(Ye._enqueue(We),!0)});(0,Me.assert)(Ge,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}},{key:"_progressiveDataLength",get:function(){var je,We;return(je=(We=this._fullRequestReader)===null||We===void 0?void 0:We._loaded)!==null&&je!==void 0?je:0}},{key:"_onProgress",value:function(je){if(je.total===void 0){var We=this._rangeReaders[0];We!=null&&We.onProgress&&We.onProgress({loaded:je.loaded})}else{var Ge=this._fullRequestReader;Ge!=null&&Ge.onProgress&&Ge.onProgress({loaded:je.loaded,total:je.total})}}},{key:"_onProgressiveDone",value:function(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}},{key:"_removeRangeReader",value:function(je){var We=this._rangeReaders.indexOf(je);We>=0&&this._rangeReaders.splice(We,1)}},{key:"getFullReader",value:function(){(0,Me.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");var je=this._queuedChunks;return this._queuedChunks=null,new Ae(this,je,this._progressiveDone,this._contentDispositionFilename)}},{key:"getRangeReader",value:function(je,We){if(We<=this._progressiveDataLength)return null;var Ge=new Fe(this,je,We);return this._pdfDataRangeTransport.requestDataRange(je,We),this._rangeReaders.push(Ge),Ge}},{key:"cancelAllRequests",value:function(je){this._fullRequestReader&&this._fullRequestReader.cancel(je);var We=Ce(this._rangeReaders.slice(0)),Ge;try{for(We.s();!(Ge=We.n()).done;){var Ye=Ge.value;Ye.cancel(je)}}catch(Xe){We.e(Xe)}finally{We.f()}this._pdfDataRangeTransport.abort()}}]),De}();e.PDFDataTransportStream=Ee;var Ae=function(){function De(ze,je){var We=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,Ge=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;xe(this,De),this._stream=ze,this._done=We||!1,this._filename=(0,Ie.isPdfFile)(Ge)?Ge:null,this._queuedChunks=je||[],this._loaded=0;var Ye=Ce(this._queuedChunks),Xe;try{for(Ye.s();!(Xe=Ye.n()).done;){var Ke=Xe.value;this._loaded+=Ke.byteLength}}catch(er){Ye.e(er)}finally{Ye.f()}this._requests=[],this._headersReady=Promise.resolve(),ze._fullRequestReader=this,this.onProgress=null}return Oe(De,[{key:"_enqueue",value:function(je){if(!this._done){if(this._requests.length>0){var We=this._requests.shift();We.resolve({value:je,done:!1})}else this._queuedChunks.push(je);this._loaded+=je.byteLength}}},{key:"headersReady",get:function(){return this._headersReady}},{key:"filename",get:function(){return this._filename}},{key:"isRangeSupported",get:function(){return this._stream._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._stream._isStreamingSupported}},{key:"contentLength",get:function(){return this._stream._contentLength}},{key:"read",value:function(){var ze=_e(Pe.default.mark(function We(){var Ge,Ye;return Pe.default.wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:if(!(this._queuedChunks.length>0)){Ke.next=3;break}return Ge=this._queuedChunks.shift(),Ke.abrupt("return",{value:Ge,done:!1});case 3:if(!this._done){Ke.next=5;break}return Ke.abrupt("return",{value:void 0,done:!0});case 5:return Ye=(0,Me.createPromiseCapability)(),this._requests.push(Ye),Ke.abrupt("return",Ye.promise);case 8:case"end":return Ke.stop()}},We,this)}));function je(){return ze.apply(this,arguments)}return je}()},{key:"cancel",value:function(je){this._done=!0;var We=Ce(this._requests),Ge;try{for(We.s();!(Ge=We.n()).done;){var Ye=Ge.value;Ye.resolve({value:void 0,done:!0})}}catch(Xe){We.e(Xe)}finally{We.f()}this._requests.length=0}},{key:"progressiveDone",value:function(){this._done||(this._done=!0)}}]),De}(),Fe=function(){function De(ze,je,We){xe(this,De),this._stream=ze,this._begin=je,this._end=We,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}return Oe(De,[{key:"_enqueue",value:function(je){if(!this._done){if(this._requests.length===0)this._queuedChunk=je;else{var We=this._requests.shift();We.resolve({value:je,done:!1});var Ge=Ce(this._requests),Ye;try{for(Ge.s();!(Ye=Ge.n()).done;){var Xe=Ye.value;Xe.resolve({value:void 0,done:!0})}}catch(Ke){Ge.e(Ke)}finally{Ge.f()}this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}},{key:"isStreamingSupported",get:function(){return!1}},{key:"read",value:function(){var ze=_e(Pe.default.mark(function We(){var Ge,Ye;return Pe.default.wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:if(!this._queuedChunk){Ke.next=4;break}return Ge=this._queuedChunk,this._queuedChunk=null,Ke.abrupt("return",{value:Ge,done:!1});case 4:if(!this._done){Ke.next=6;break}return Ke.abrupt("return",{value:void 0,done:!0});case 6:return Ye=(0,Me.createPromiseCapability)(),this._requests.push(Ye),Ke.abrupt("return",Ye.promise);case 9:case"end":return Ke.stop()}},We,this)}));function je(){return ze.apply(this,arguments)}return je}()},{key:"cancel",value:function(je){this._done=!0;var We=Ce(this._requests),Ge;try{for(We.s();!(Ge=We.n()).done;){var Ye=Ge.value;Ye.resolve({value:void 0,done:!0})}}catch(Xe){We.e(Xe)}finally{We.f()}this._requests.length=0,this._stream._removeRangeReader(this)}}]),De}()},(Re,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaText=void 0;function t(Ce,Te){var Se=typeof Symbol!="undefined"&&Ce[Symbol.iterator]||Ce["@@iterator"];if(!Se){if(Array.isArray(Ce)||(Se=Pe(Ce))||Te&&Ce&&typeof Ce.length=="number"){Se&&(Ce=Se);var xe=0,r=function(){};return{s:r,n:function(){return xe>=Ce.length?{done:!0}:{done:!1,value:Ce[xe++]}},e:function(De){throw De},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Oe=!0,Ee=!1,Ae;return{s:function(){Se=Se.call(Ce)},n:function(){var De=Se.next();return Oe=De.done,De},e:function(De){Ee=!0,Ae=De},f:function(){try{!Oe&&Se.return!=null&&Se.return()}finally{if(Ee)throw Ae}}}}function Pe(Ce,Te){if(!!Ce){if(typeof Ce=="string")return Me(Ce,Te);var Se=Object.prototype.toString.call(Ce).slice(8,-1);if(Se==="Object"&&Ce.constructor&&(Se=Ce.constructor.name),Se==="Map"||Se==="Set")return Array.from(Ce);if(Se==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Se))return Me(Ce,Te)}}function Me(Ce,Te){(Te==null||Te>Ce.length)&&(Te=Ce.length);for(var Se=0,xe=new Array(Te);Se<Te;Se++)xe[Se]=Ce[Se];return xe}function Ie(Ce,Te){if(!(Ce instanceof Te))throw new TypeError("Cannot call a class as a function")}function Be(Ce,Te){for(var Se=0;Se<Te.length;Se++){var xe=Te[Se];xe.enumerable=xe.enumerable||!1,xe.configurable=!0,"value"in xe&&(xe.writable=!0),Object.defineProperty(Ce,xe.key,xe)}}function ke(Ce,Te,Se){return Te&&Be(Ce.prototype,Te),Se&&Be(Ce,Se),Object.defineProperty(Ce,"prototype",{writable:!1}),Ce}var _e=function(){function Ce(){Ie(this,Ce)}return ke(Ce,null,[{key:"textContent",value:function(Se){var xe=[],r={items:xe,styles:Object.create(null)};function Oe(Ee){var Ae;if(!!Ee){var Fe=null,De=Ee.name;if(De==="#text")Fe=Ee.value;else if(Ce.shouldBuildText(De))Ee!=null&&(Ae=Ee.attributes)!==null&&Ae!==void 0&&Ae.textContent?Fe=Ee.attributes.textContent:Ee.value&&(Fe=Ee.value);else return;if(Fe!==null&&xe.push({str:Fe}),!!Ee.children){var ze=t(Ee.children),je;try{for(ze.s();!(je=ze.n()).done;){var We=je.value;Oe(We)}}catch(Ge){ze.e(Ge)}finally{ze.f()}}}}return Oe(Se),r}},{key:"shouldBuildText",value:function(Se){return!(Se==="textarea"||Se==="input"||Se==="option"||Se==="select")}}]),Ce}();e.XfaText=_e},(Re,e,t)=>{function Pe(Xr){return Pe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Er){return typeof Er}:function(Er){return Er&&typeof Symbol=="function"&&Er.constructor===Symbol&&Er!==Symbol.prototype?"symbol":typeof Er},Pe(Xr)}Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationLayer=void 0;var Me=t(1),Ie=t(147),Be=t(151),ke=t(161),_e=t(162);function Ce(Xr,Er,Rr){return Te(Xr,Er),Rr}function Te(Xr,Er){if(Xr!==Er)throw new TypeError("Private static access of wrong provenance")}function Se(){return typeof Reflect!="undefined"&&Reflect.get?Se=Reflect.get:Se=function(Er,Rr,Dr){var Br=xe(Er,Rr);if(!!Br){var Wr=Object.getOwnPropertyDescriptor(Br,Rr);return Wr.get?Wr.get.call(arguments.length<3?Er:Dr):Wr.value}},Se.apply(this,arguments)}function xe(Xr,Er){for(;!Object.prototype.hasOwnProperty.call(Xr,Er)&&(Xr=Xe(Xr),Xr!==null););return Xr}function r(Xr,Er,Rr){return Er in Xr?Object.defineProperty(Xr,Er,{value:Rr,enumerable:!0,configurable:!0,writable:!0}):Xr[Er]=Rr,Xr}function Oe(Xr){return Fe(Xr)||Ae(Xr)||nr(Xr)||Ee()}function Ee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ae(Xr){if(typeof Symbol!="undefined"&&Xr[Symbol.iterator]!=null||Xr["@@iterator"]!=null)return Array.from(Xr)}function Fe(Xr){if(Array.isArray(Xr))return ir(Xr)}function De(Xr,Er){if(typeof Er!="function"&&Er!==null)throw new TypeError("Super expression must either be null or a function");Xr.prototype=Object.create(Er&&Er.prototype,{constructor:{value:Xr,writable:!0,configurable:!0}}),Object.defineProperty(Xr,"prototype",{writable:!1}),Er&&ze(Xr,Er)}function ze(Xr,Er){return ze=Object.setPrototypeOf||function(Dr,Br){return Dr.__proto__=Br,Dr},ze(Xr,Er)}function je(Xr){var Er=Ye();return function(){var Dr=Xe(Xr),Br;if(Er){var Wr=Xe(this).constructor;Br=Reflect.construct(Dr,arguments,Wr)}else Br=Dr.apply(this,arguments);return We(this,Br)}}function We(Xr,Er){if(Er&&(Pe(Er)==="object"||typeof Er=="function"))return Er;if(Er!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ge(Xr)}function Ge(Xr){if(Xr===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Xr}function Ye(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Xe(Xr){return Xe=Object.setPrototypeOf?Object.getPrototypeOf:function(Rr){return Rr.__proto__||Object.getPrototypeOf(Rr)},Xe(Xr)}function Ke(Xr,Er){var Rr=typeof Symbol!="undefined"&&Xr[Symbol.iterator]||Xr["@@iterator"];if(!Rr){if(Array.isArray(Xr)||(Rr=nr(Xr))||Er&&Xr&&typeof Xr.length=="number"){Rr&&(Xr=Rr);var Dr=0,Br=function(){};return{s:Br,n:function(){return Dr>=Xr.length?{done:!0}:{done:!1,value:Xr[Dr++]}},e:function(Kr){throw Kr},f:Br}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Wr=!0,Ur=!1,Hr;return{s:function(){Rr=Rr.call(Xr)},n:function(){var Kr=Rr.next();return Wr=Kr.done,Kr},e:function(Kr){Ur=!0,Hr=Kr},f:function(){try{!Wr&&Rr.return!=null&&Rr.return()}finally{if(Ur)throw Hr}}}}function er(Xr,Er){return br(Xr)||cr(Xr,Er)||nr(Xr,Er)||Qe()}function Qe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nr(Xr,Er){if(!!Xr){if(typeof Xr=="string")return ir(Xr,Er);var Rr=Object.prototype.toString.call(Xr).slice(8,-1);if(Rr==="Object"&&Xr.constructor&&(Rr=Xr.constructor.name),Rr==="Map"||Rr==="Set")return Array.from(Xr);if(Rr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Rr))return ir(Xr,Er)}}function ir(Xr,Er){(Er==null||Er>Xr.length)&&(Er=Xr.length);for(var Rr=0,Dr=new Array(Er);Rr<Er;Rr++)Dr[Rr]=Xr[Rr];return Dr}function cr(Xr,Er){var Rr=Xr==null?null:typeof Symbol!="undefined"&&Xr[Symbol.iterator]||Xr["@@iterator"];if(Rr!=null){var Dr=[],Br=!0,Wr=!1,Ur,Hr;try{for(Rr=Rr.call(Xr);!(Br=(Ur=Rr.next()).done)&&(Dr.push(Ur.value),!(Er&&Dr.length===Er));Br=!0);}catch($r){Wr=!0,Hr=$r}finally{try{!Br&&Rr.return!=null&&Rr.return()}finally{if(Wr)throw Hr}}return Dr}}function br(Xr){if(Array.isArray(Xr))return Xr}function wr(Xr,Er){if(!(Xr instanceof Er))throw new TypeError("Cannot call a class as a function")}function xr(Xr,Er){for(var Rr=0;Rr<Er.length;Rr++){var Dr=Er[Rr];Dr.enumerable=Dr.enumerable||!1,Dr.configurable=!0,"value"in Dr&&(Dr.writable=!0),Object.defineProperty(Xr,Dr.key,Dr)}}function Sr(Xr,Er,Rr){return Er&&xr(Xr.prototype,Er),Rr&&xr(Xr,Rr),Object.defineProperty(Xr,"prototype",{writable:!1}),Xr}var lr=1e3,fr=new WeakSet;function $e(Xr){return{width:Xr[2]-Xr[0],height:Xr[3]-Xr[1]}}var Ve=function(){function Xr(){wr(this,Xr)}return Sr(Xr,null,[{key:"create",value:function(Rr){var Dr=Rr.data.annotationType;switch(Dr){case Me.AnnotationType.LINK:return new Ze(Rr);case Me.AnnotationType.TEXT:return new St(Rr);case Me.AnnotationType.WIDGET:var Br=Rr.data.fieldType;switch(Br){case"Tx":return new mr(Rr);case"Btn":return Rr.data.radioButton?new _r(Rr):Rr.data.checkBox?new Cr(Rr):new pr(Rr);case"Ch":return new dr(Rr)}return new vr(Rr);case Me.AnnotationType.POPUP:return new ur(Rr);case Me.AnnotationType.FREETEXT:return new gr(Rr);case Me.AnnotationType.LINE:return new hr(Rr);case Me.AnnotationType.SQUARE:return new sr(Rr);case Me.AnnotationType.CIRCLE:return new Ar(Rr);case Me.AnnotationType.POLYLINE:return new Or(Rr);case Me.AnnotationType.CARET:return new Gr(Rr);case Me.AnnotationType.INK:return new zr(Rr);case Me.AnnotationType.POLYGON:return new Mr(Rr);case Me.AnnotationType.HIGHLIGHT:return new Ir(Rr);case Me.AnnotationType.UNDERLINE:return new Qr(Rr);case Me.AnnotationType.SQUIGGLY:return new rn(Rr);case Me.AnnotationType.STRIKEOUT:return new sn(Rr);case Me.AnnotationType.STAMP:return new pn(Rr);case Me.AnnotationType.FILEATTACHMENT:return new mn(Rr);default:return new Je(Rr)}}}]),Xr}(),Je=function(){function Xr(Er){var Rr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Dr=Rr.isRenderable,Br=Dr===void 0?!1:Dr,Wr=Rr.ignoreBorder,Ur=Wr===void 0?!1:Wr,Hr=Rr.createQuadrilaterals,$r=Hr===void 0?!1:Hr;wr(this,Xr),this.isRenderable=Br,this.data=Er.data,this.layer=Er.layer,this.page=Er.page,this.viewport=Er.viewport,this.linkService=Er.linkService,this.downloadManager=Er.downloadManager,this.imageResourcesPath=Er.imageResourcesPath,this.renderForms=Er.renderForms,this.svgFactory=Er.svgFactory,this.annotationStorage=Er.annotationStorage,this.enableScripting=Er.enableScripting,this.hasJSActions=Er.hasJSActions,this._fieldObjects=Er.fieldObjects,this._mouseState=Er.mouseState,Br&&(this.container=this._createContainer(Ur)),$r&&(this.quadrilaterals=this._createQuadrilaterals(Ur))}return Sr(Xr,[{key:"_createContainer",value:function(){var Rr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,Dr=this.data,Br=this.page,Wr=this.viewport,Ur=document.createElement("section"),Hr=$e(Dr.rect),$r=Hr.width,Kr=Hr.height;Ur.setAttribute("data-annotation-id",Dr.id);var tn=Me.Util.normalizeRect([Dr.rect[0],Br.view[3]-Dr.rect[1]+Br.view[1],Dr.rect[2],Br.view[3]-Dr.rect[3]+Br.view[1]]);if(Dr.hasOwnCanvas){var yn=Wr.transform.slice(),Pn=Me.Util.singularValueDecompose2dScale(yn),bn=er(Pn,2),dn=bn[0],Tn=bn[1];$r=Math.ceil($r*dn),Kr=Math.ceil(Kr*Tn),tn[0]*=dn,tn[1]*=Tn;for(var xn=0;xn<4;xn++)yn[xn]=Math.sign(yn[xn]);Ur.style.transform="matrix(".concat(yn.join(","),")")}else Ur.style.transform="matrix(".concat(Wr.transform.join(","),")");if(Ur.style.transformOrigin="".concat(-tn[0],"px ").concat(-tn[1],"px"),!Rr&&Dr.borderStyle.width>0){Ur.style.borderWidth="".concat(Dr.borderStyle.width,"px"),Dr.borderStyle.style!==Me.AnnotationBorderStyleType.UNDERLINE&&($r-=2*Dr.borderStyle.width,Kr-=2*Dr.borderStyle.width);var Nn=Dr.borderStyle.horizontalCornerRadius,In=Dr.borderStyle.verticalCornerRadius;if(Nn>0||In>0){var Bn="".concat(Nn,"px / ").concat(In,"px");Ur.style.borderRadius=Bn}switch(Dr.borderStyle.style){case Me.AnnotationBorderStyleType.SOLID:Ur.style.borderStyle="solid";break;case Me.AnnotationBorderStyleType.DASHED:Ur.style.borderStyle="dashed";break;case Me.AnnotationBorderStyleType.BEVELED:(0,Me.warn)("Unimplemented border style: beveled");break;case Me.AnnotationBorderStyleType.INSET:(0,Me.warn)("Unimplemented border style: inset");break;case Me.AnnotationBorderStyleType.UNDERLINE:Ur.style.borderBottomStyle="solid";break}var Fn=Dr.borderColor||Dr.color||null;Fn?Ur.style.borderColor=Me.Util.makeHexColor(Dr.color[0]|0,Dr.color[1]|0,Dr.color[2]|0):Ur.style.borderWidth=0}return Ur.style.left="".concat(tn[0],"px"),Ur.style.top="".concat(tn[1],"px"),Dr.hasOwnCanvas?Ur.style.width=Ur.style.height="auto":(Ur.style.width="".concat($r,"px"),Ur.style.height="".concat(Kr,"px")),Ur}},{key:"_createQuadrilaterals",value:function(){var Rr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!this.data.quadPoints)return null;var Dr=[],Br=this.data.rect,Wr=Ke(this.data.quadPoints),Ur;try{for(Wr.s();!(Ur=Wr.n()).done;){var Hr=Ur.value;this.data.rect=[Hr[2].x,Hr[2].y,Hr[1].x,Hr[1].y],Dr.push(this._createContainer(Rr))}}catch($r){Wr.e($r)}finally{Wr.f()}return this.data.rect=Br,Dr}},{key:"_createPopup",value:function(Rr,Dr){var Br=this.container;this.quadrilaterals&&(Rr=Rr||this.quadrilaterals,Br=this.quadrilaterals[0]),Rr||(Rr=document.createElement("div"),Rr.style.height=Br.style.height,Rr.style.width=Br.style.width,Br.appendChild(Rr));var Wr=new rr({container:Br,trigger:Rr,color:Dr.color,titleObj:Dr.titleObj,modificationDate:Dr.modificationDate,contentsObj:Dr.contentsObj,richText:Dr.richText,hideWrapper:!0}),Ur=Wr.render();Ur.style.left=Br.style.width,Br.appendChild(Ur)}},{key:"_renderQuadrilaterals",value:function(Rr){var Dr=Ke(this.quadrilaterals),Br;try{for(Dr.s();!(Br=Dr.n()).done;){var Wr=Br.value;Wr.className=Rr}}catch(Ur){Dr.e(Ur)}finally{Dr.f()}return this.quadrilaterals}},{key:"render",value:function(){(0,Me.unreachable)("Abstract method `AnnotationElement.render` called")}},{key:"_getElementsByName",value:function(Rr){var Dr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,Br=[];if(this._fieldObjects){var Wr=this._fieldObjects[Rr];if(Wr){var Ur=Ke(Wr),Hr;try{for(Ur.s();!(Hr=Ur.n()).done;){var $r=Hr.value,Kr=$r.page,tn=$r.id,yn=$r.exportValues;if(Kr!==-1&&tn!==Dr){var Pn=typeof yn=="string"?yn:null,bn=document.getElementById(tn);if(bn&&!fr.has(bn)){(0,Me.warn)("_getElementsByName - element not allowed: ".concat(tn));continue}Br.push({id:tn,exportValue:Pn,domElement:bn})}}}catch(Bn){Ur.e(Bn)}finally{Ur.f()}}return Br}var dn=Ke(document.getElementsByName(Rr)),Tn;try{for(dn.s();!(Tn=dn.n()).done;){var xn=Tn.value,Nn=xn.id,In=xn.exportValue;Nn!==Dr&&(!fr.has(xn)||Br.push({id:Nn,exportValue:In,domElement:xn}))}}catch(Bn){dn.e(Bn)}finally{dn.f()}return Br}}],[{key:"platform",get:function(){var Rr=typeof navigator!="undefined"?navigator.platform:"";return(0,Me.shadow)(this,"platform",{isWin:Rr.includes("Win"),isMac:Rr.includes("Mac")})}}]),Xr}(),Ze=function(Xr){De(Rr,Xr);var Er=je(Rr);function Rr(Dr){var Br=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;wr(this,Rr);var Wr=!!(Dr.data.url||Dr.data.dest||Dr.data.action||Dr.data.isTooltipOnly||Dr.data.resetForm||Dr.data.actions&&(Dr.data.actions.Action||Dr.data.actions["Mouse Up"]||Dr.data.actions["Mouse Down"]));return Er.call(this,Dr,{isRenderable:Wr,ignoreBorder:!!(Br!=null&&Br.ignoreBorder),createQuadrilaterals:!0})}return Sr(Rr,[{key:"render",value:function(){var Br=this.data,Wr=this.linkService,Ur=document.createElement("a");if(Br.url){var Hr;Wr.addLinkAttributes||(0,Me.warn)("LinkAnnotationElement.render - missing `addLinkAttributes`-method on the `linkService`-instance."),(Hr=Wr.addLinkAttributes)===null||Hr===void 0||Hr.call(Wr,Ur,Br.url,Br.newWindow)}else if(Br.action)this._bindNamedAction(Ur,Br.action);else if(Br.dest)this._bindLink(Ur,Br.dest);else{var $r=!1;Br.actions&&(Br.actions.Action||Br.actions["Mouse Up"]||Br.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&($r=!0,this._bindJSAction(Ur,Br)),Br.resetForm?this._bindResetFormAction(Ur,Br.resetForm):$r||this._bindLink(Ur,"")}return this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map(function(Kr,tn){var yn=tn===0?Ur:Ur.cloneNode();return Kr.appendChild(yn),Kr}):(this.container.className="linkAnnotation",this.container.appendChild(Ur),this.container)}},{key:"_bindLink",value:function(Br,Wr){var Ur=this;Br.href=this.linkService.getDestinationHash(Wr),Br.onclick=function(){return Wr&&Ur.linkService.goToDestination(Wr),!1},(Wr||Wr==="")&&(Br.className="internalLink")}},{key:"_bindNamedAction",value:function(Br,Wr){var Ur=this;Br.href=this.linkService.getAnchorUrl(""),Br.onclick=function(){return Ur.linkService.executeNamedAction(Wr),!1},Br.className="internalLink"}},{key:"_bindJSAction",value:function(Br,Wr){var Ur=this;Br.href=this.linkService.getAnchorUrl("");for(var Hr=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]),$r=function(){var bn=tn[Kr],dn=Hr.get(bn);if(!dn)return"continue";Br[dn]=function(){var Tn;return(Tn=Ur.linkService.eventBus)===null||Tn===void 0||Tn.dispatch("dispatcheventinsandbox",{source:Ur,detail:{id:Wr.id,name:bn}}),!1}},Kr=0,tn=Object.keys(Wr.actions);Kr<tn.length;Kr++)var yn=$r();Br.onclick||(Br.onclick=function(){return!1}),Br.className="internalLink"}},{key:"_bindResetFormAction",value:function(Br,Wr){var Ur=this,Hr=Br.onclick;if(Hr||(Br.href=this.linkService.getAnchorUrl("")),Br.className="internalLink",!this._fieldObjects){(0,Me.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),Hr||(Br.onclick=function(){return!1});return}Br.onclick=function(){Hr&&Hr();var $r=Wr.fields,Kr=Wr.refs,tn=Wr.include,yn=[];if($r.length!==0||Kr.length!==0){var Pn=new Set(Kr),bn=Ke($r),dn;try{for(bn.s();!(dn=bn.n()).done;){var Tn=dn.value,xn=Ur._fieldObjects[Tn]||[],Nn=Ke(xn),In;try{for(Nn.s();!(In=Nn.n()).done;){var Bn=In.value.id;Pn.add(Bn)}}catch(mi){Nn.e(mi)}finally{Nn.f()}}}catch(mi){bn.e(mi)}finally{bn.f()}for(var Fn=0,qn=Object.values(Ur._fieldObjects);Fn<qn.length;Fn++){var ni=qn[Fn],si=Ke(ni),ii;try{for(si.s();!(ii=si.n()).done;){var fi=ii.value;Pn.has(fi.id)===tn&&yn.push(fi)}}catch(mi){si.e(mi)}finally{si.f()}}}else for(var ki=0,Zr=Object.values(Ur._fieldObjects);ki<Zr.length;ki++){var _n=Zr[ki];yn.push.apply(yn,Oe(_n))}for(var Jr=Ur.annotationStorage,cn=[],jn=0,Vn=yn;jn<Vn.length;jn++){var Yn=Vn[jn],Xn=Yn.id;switch(cn.push(Xn),Yn.type){case"text":{var li=Yn.defaultValue||"";Jr.setValue(Xn,{value:li,valueAsString:li});break}case"checkbox":case"radiobutton":{var Pi=Yn.defaultValue===Yn.exportValues;Jr.setValue(Xn,{value:Pi});break}case"combobox":case"listbox":{var Gi=Yn.defaultValue||"";Jr.setValue(Xn,{value:Gi});break}default:continue}var gi=document.getElementById(Xn);!gi||!fr.has(gi)||gi.dispatchEvent(new Event("resetform"))}if(Ur.enableScripting){var ji;(ji=Ur.linkService.eventBus)===null||ji===void 0||ji.dispatch("dispatcheventinsandbox",{source:Ur,detail:{id:"app",ids:cn,name:"ResetForm"}})}return!1}}}]),Rr}(Je),St=function(Xr){De(Rr,Xr);var Er=je(Rr);function Rr(Dr){var Br,Wr,Ur;wr(this,Rr);var Hr=!!(Dr.data.hasPopup||(Br=Dr.data.titleObj)!==null&&Br!==void 0&&Br.str||(Wr=Dr.data.contentsObj)!==null&&Wr!==void 0&&Wr.str||(Ur=Dr.data.richText)!==null&&Ur!==void 0&&Ur.str);return Er.call(this,Dr,{isRenderable:Hr})}return Sr(Rr,[{key:"render",value:function(){this.container.className="textAnnotation";var Br=document.createElement("img");return Br.style.height=this.container.style.height,Br.style.width=this.container.style.width,Br.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",Br.alt="[{{type}} Annotation]",Br.dataset.l10nId="text_annotation_type",Br.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(Br,this.data),this.container.appendChild(Br),this.container}}]),Rr}(Je),vr=function(Xr){De(Rr,Xr);var Er=je(Rr);function Rr(){return wr(this,Rr),Er.apply(this,arguments)}return Sr(Rr,[{key:"render",value:function(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}},{key:"_getKeyModifier",value:function(Br){var Wr=Je.platform,Ur=Wr.isWin,Hr=Wr.isMac;return Ur&&Br.ctrlKey||Hr&&Br.metaKey}},{key:"_setEventListener",value:function(Br,Wr,Ur,Hr){var $r=this;Wr.includes("mouse")?Br.addEventListener(Wr,function(Kr){var tn;(tn=$r.linkService.eventBus)===null||tn===void 0||tn.dispatch("dispatcheventinsandbox",{source:$r,detail:{id:$r.data.id,name:Ur,value:Hr(Kr),shift:Kr.shiftKey,modifier:$r._getKeyModifier(Kr)}})}):Br.addEventListener(Wr,function(Kr){var tn;(tn=$r.linkService.eventBus)===null||tn===void 0||tn.dispatch("dispatcheventinsandbox",{source:$r,detail:{id:$r.data.id,name:Ur,value:Hr(Kr)}})})}},{key:"_setEventListeners",value:function(Br,Wr,Ur){var Hr=Ke(Wr),$r;try{for(Hr.s();!($r=Hr.n()).done;){var Kr,tn=er($r.value,2),yn=tn[0],Pn=tn[1];(Pn==="Action"||(Kr=this.data.actions)!==null&&Kr!==void 0&&Kr[Pn])&&this._setEventListener(Br,yn,Pn,Ur)}}catch(bn){Hr.e(bn)}finally{Hr.f()}}},{key:"_setBackgroundColor",value:function(Br){var Wr=this.data.backgroundColor||null;Br.style.backgroundColor=Wr===null?"transparent":Me.Util.makeHexColor(Wr[0],Wr[1],Wr[2])}},{key:"_dispatchEventFromSandbox",value:function(Br,Wr){for(var Ur=this,Hr=function(dn,Tn,xn){var Nn=xn.detail[dn];xn.target.style[Tn]=ke.ColorConverters["".concat(Nn[0],"_HTML")](Nn.slice(1))},$r={display:function(dn){var Tn=dn.detail.display%2==1;dn.target.style.visibility=Tn?"hidden":"visible",Ur.annotationStorage.setValue(Ur.data.id,{hidden:Tn,print:dn.detail.display===0||dn.detail.display===3})},print:function(dn){Ur.annotationStorage.setValue(Ur.data.id,{print:dn.detail.print})},hidden:function(dn){dn.target.style.visibility=dn.detail.hidden?"hidden":"visible",Ur.annotationStorage.setValue(Ur.data.id,{hidden:dn.detail.hidden})},focus:function(dn){setTimeout(function(){return dn.target.focus({preventScroll:!1})},0)},userName:function(dn){dn.target.title=dn.detail.userName},readonly:function(dn){dn.detail.readonly?dn.target.setAttribute("readonly",""):dn.target.removeAttribute("readonly")},required:function(dn){dn.detail.required?dn.target.setAttribute("required",""):dn.target.removeAttribute("required")},bgColor:function(dn){Hr("bgColor","backgroundColor",dn)},fillColor:function(dn){Hr("fillColor","backgroundColor",dn)},fgColor:function(dn){Hr("fgColor","color",dn)},textColor:function(dn){Hr("textColor","color",dn)},borderColor:function(dn){Hr("borderColor","borderColor",dn)},strokeColor:function(dn){Hr("strokeColor","borderColor",dn)}},Kr=0,tn=Object.keys(Wr.detail);Kr<tn.length;Kr++){var yn=tn[Kr],Pn=Br[yn]||$r[yn];Pn&&Pn(Wr)}}}]),Rr}(Je),mr=function(Xr){De(Rr,Xr);var Er=je(Rr);function Rr(Dr){wr(this,Rr);var Br=Dr.renderForms||!Dr.data.hasAppearance&&!!Dr.data.fieldValue;return Er.call(this,Dr,{isRenderable:Br})}return Sr(Rr,[{key:"setPropertyOnSiblings",value:function(Br,Wr,Ur,Hr){var $r=this.annotationStorage,Kr=Ke(this._getElementsByName(Br.name,Br.id)),tn;try{for(Kr.s();!(tn=Kr.n()).done;){var yn=tn.value;yn.domElement&&(yn.domElement[Wr]=Ur),$r.setValue(yn.id,r({},Hr,Ur))}}catch(Pn){Kr.e(Pn)}finally{Kr.f()}}},{key:"render",value:function(){var Br=this,Wr=this.annotationStorage,Ur=this.data.id;this.container.className="textWidgetAnnotation";var Hr=null;if(this.renderForms){var $r=Wr.getValue(Ur,{value:this.data.fieldValue,valueAsString:this.data.fieldValue}),Kr=$r.valueAsString||$r.value||"",tn={userValue:null,formattedValue:null};this.data.multiLine?(Hr=document.createElement("textarea"),Hr.textContent=Kr):(Hr=document.createElement("input"),Hr.type="text",Hr.setAttribute("value",Kr)),fr.add(Hr),Hr.disabled=this.data.readOnly,Hr.name=this.data.fieldName,Hr.tabIndex=lr,tn.userValue=Kr,Hr.setAttribute("id",Ur),Hr.addEventListener("input",function(xn){Wr.setValue(Ur,{value:xn.target.value}),Br.setPropertyOnSiblings(Hr,"value",xn.target.value,"value")}),Hr.addEventListener("resetform",function(xn){var Nn=Br.data.defaultFieldValue||"";Hr.value=tn.userValue=Nn,delete tn.formattedValue});var yn=function(Nn){tn.formattedValue&&(Nn.target.value=tn.formattedValue),Nn.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){var Pn;Hr.addEventListener("focus",function(xn){tn.userValue&&(xn.target.value=tn.userValue)}),Hr.addEventListener("updatefromsandbox",function(xn){var Nn={value:function(Bn){tn.userValue=Bn.detail.value||"",Wr.setValue(Ur,{value:tn.userValue.toString()}),tn.formattedValue||(Bn.target.value=tn.userValue)},valueAsString:function(Bn){tn.formattedValue=Bn.detail.valueAsString||"",Bn.target!==document.activeElement&&(Bn.target.value=tn.formattedValue),Wr.setValue(Ur,{formattedValue:tn.formattedValue})},selRange:function(Bn){var Fn=er(Bn.detail.selRange,2),qn=Fn[0],ni=Fn[1];qn>=0&&ni<Bn.target.value.length&&Bn.target.setSelectionRange(qn,ni)}};Br._dispatchEventFromSandbox(Nn,xn)}),Hr.addEventListener("keydown",function(xn){var Nn,In=-1;xn.key==="Escape"?In=0:xn.key==="Enter"?In=2:xn.key==="Tab"&&(In=3),In!==-1&&(tn.userValue=xn.target.value,(Nn=Br.linkService.eventBus)===null||Nn===void 0||Nn.dispatch("dispatcheventinsandbox",{source:Br,detail:{id:Ur,name:"Keystroke",value:xn.target.value,willCommit:!0,commitKey:In,selStart:xn.target.selectionStart,selEnd:xn.target.selectionEnd}}))});var bn=yn;yn=null,Hr.addEventListener("blur",function(xn){if(tn.userValue=xn.target.value,Br._mouseState.isDown){var Nn;(Nn=Br.linkService.eventBus)===null||Nn===void 0||Nn.dispatch("dispatcheventinsandbox",{source:Br,detail:{id:Ur,name:"Keystroke",value:xn.target.value,willCommit:!0,commitKey:1,selStart:xn.target.selectionStart,selEnd:xn.target.selectionEnd}})}bn(xn)}),(Pn=this.data.actions)!==null&&Pn!==void 0&&Pn.Keystroke&&Hr.addEventListener("beforeinput",function(xn){var Nn;tn.formattedValue="";var In=xn.data,Bn=xn.target,Fn=Bn.value,qn=Bn.selectionStart,ni=Bn.selectionEnd;(Nn=Br.linkService.eventBus)===null||Nn===void 0||Nn.dispatch("dispatcheventinsandbox",{source:Br,detail:{id:Ur,name:"Keystroke",value:Fn,change:In,willCommit:!1,selStart:qn,selEnd:ni}})}),this._setEventListeners(Hr,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],function(xn){return xn.target.value})}if(yn&&Hr.addEventListener("blur",yn),this.data.maxLen!==null&&(Hr.maxLength=this.data.maxLen),this.data.comb){var dn=this.data.rect[2]-this.data.rect[0],Tn=dn/this.data.maxLen;Hr.classList.add("comb"),Hr.style.letterSpacing="calc(".concat(Tn,"px - 1ch)")}}else Hr=document.createElement("div"),Hr.textContent=this.data.fieldValue,Hr.style.verticalAlign="middle",Hr.style.display="table-cell";return this._setTextStyle(Hr),this._setBackgroundColor(Hr),this.container.appendChild(Hr),this.container}},{key:"_setTextStyle",value:function(Br){var Wr=["left","center","right"],Ur=this.data.defaultAppearanceData,Hr=Ur.fontSize,$r=Ur.fontColor,Kr=Br.style;Hr&&(Kr.fontSize="".concat(Hr,"px")),Kr.color=Me.Util.makeHexColor($r[0],$r[1],$r[2]),this.data.textAlignment!==null&&(Kr.textAlign=Wr[this.data.textAlignment])}}]),Rr}(vr),Cr=function(Xr){De(Rr,Xr);var Er=je(Rr);function Rr(Dr){return wr(this,Rr),Er.call(this,Dr,{isRenderable:Dr.renderForms})}return Sr(Rr,[{key:"render",value:function(){var Br=this,Wr=this.annotationStorage,Ur=this.data,Hr=Ur.id,$r=Wr.getValue(Hr,{value:Ur.exportValue===Ur.fieldValue}).value;typeof $r=="string"&&($r=$r!=="Off",Wr.setValue(Hr,{value:$r})),this.container.className="buttonWidgetAnnotation checkBox";var Kr=document.createElement("input");return fr.add(Kr),Kr.disabled=Ur.readOnly,Kr.type="checkbox",Kr.name=Ur.fieldName,$r&&Kr.setAttribute("checked",!0),Kr.setAttribute("id",Hr),Kr.setAttribute("exportValue",Ur.exportValue),Kr.tabIndex=lr,Kr.addEventListener("change",function(tn){var yn=tn.target,Pn=yn.name,bn=yn.checked,dn=Ke(Br._getElementsByName(Pn,Hr)),Tn;try{for(dn.s();!(Tn=dn.n()).done;){var xn=Tn.value,Nn=bn&&xn.exportValue===Ur.exportValue;xn.domElement&&(xn.domElement.checked=Nn),Wr.setValue(xn.id,{value:Nn})}}catch(In){dn.e(In)}finally{dn.f()}Wr.setValue(Hr,{value:bn})}),Kr.addEventListener("resetform",function(tn){var yn=Ur.defaultFieldValue||"Off";tn.target.checked=yn===Ur.exportValue}),this.enableScripting&&this.hasJSActions&&(Kr.addEventListener("updatefromsandbox",function(tn){var yn={value:function(bn){bn.target.checked=bn.detail.value!=="Off",Wr.setValue(Hr,{value:bn.target.checked})}};Br._dispatchEventFromSandbox(yn,tn)}),this._setEventListeners(Kr,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],function(tn){return tn.target.checked})),this._setBackgroundColor(Kr),this.container.appendChild(Kr),this.container}}]),Rr}(vr),_r=function(Xr){De(Rr,Xr);var Er=je(Rr);function Rr(Dr){return wr(this,Rr),Er.call(this,Dr,{isRenderable:Dr.renderForms})}return Sr(Rr,[{key:"render",value:function(){var Br=this;this.container.className="buttonWidgetAnnotation radioButton";var Wr=this.annotationStorage,Ur=this.data,Hr=Ur.id,$r=Wr.getValue(Hr,{value:Ur.fieldValue===Ur.buttonValue}).value;typeof $r=="string"&&($r=$r!==Ur.buttonValue,Wr.setValue(Hr,{value:$r}));var Kr=document.createElement("input");if(fr.add(Kr),Kr.disabled=Ur.readOnly,Kr.type="radio",Kr.name=Ur.fieldName,$r&&Kr.setAttribute("checked",!0),Kr.setAttribute("id",Hr),Kr.tabIndex=lr,Kr.addEventListener("change",function(yn){var Pn=yn.target,bn=Pn.name,dn=Pn.checked,Tn=Ke(Br._getElementsByName(bn,Hr)),xn;try{for(Tn.s();!(xn=Tn.n()).done;){var Nn=xn.value;Wr.setValue(Nn.id,{value:!1})}}catch(In){Tn.e(In)}finally{Tn.f()}Wr.setValue(Hr,{value:dn})}),Kr.addEventListener("resetform",function(yn){var Pn=Ur.defaultFieldValue;yn.target.checked=Pn!=null&&Pn===Ur.buttonValue}),this.enableScripting&&this.hasJSActions){var tn=Ur.buttonValue;Kr.addEventListener("updatefromsandbox",function(yn){var Pn={value:function(dn){var Tn=tn===dn.detail.value,xn=Ke(Br._getElementsByName(dn.target.name)),Nn;try{for(xn.s();!(Nn=xn.n()).done;){var In=Nn.value,Bn=Tn&&In.id===Hr;In.domElement&&(In.domElement.checked=Bn),Wr.setValue(In.id,{value:Bn})}}catch(Fn){xn.e(Fn)}finally{xn.f()}}};Br._dispatchEventFromSandbox(Pn,yn)}),this._setEventListeners(Kr,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],function(yn){return yn.target.checked})}return this._setBackgroundColor(Kr),this.container.appendChild(Kr),this.container}}]),Rr}(vr),pr=function(Xr){De(Rr,Xr);var Er=je(Rr);function Rr(Dr){return wr(this,Rr),Er.call(this,Dr,{ignoreBorder:Dr.data.hasAppearance})}return Sr(Rr,[{key:"render",value:function(){var Br=Se(Xe(Rr.prototype),"render",this).call(this);return Br.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(Br.title=this.data.alternativeText),Br}}]),Rr}(Ze),dr=function(Xr){De(Rr,Xr);var Er=je(Rr);function Rr(Dr){return wr(this,Rr),Er.call(this,Dr,{isRenderable:Dr.renderForms})}return Sr(Rr,[{key:"render",value:function(){var Br=this;this.container.className="choiceWidgetAnnotation";var Wr=this.annotationStorage,Ur=this.data.id;Wr.getValue(Ur,{value:this.data.fieldValue.length>0?this.data.fieldValue[0]:void 0});var Hr=this.data.defaultAppearanceData.fontSize;Hr||(Hr=9);var $r="calc(".concat(Hr,"px * var(--zoom-factor))"),Kr=document.createElement("select");fr.add(Kr),Kr.disabled=this.data.readOnly,Kr.name=this.data.fieldName,Kr.setAttribute("id",Ur),Kr.tabIndex=lr,Kr.style.fontSize="".concat(Hr,"px"),this.data.combo||(Kr.size=this.data.options.length,this.data.multiSelect&&(Kr.multiple=!0)),Kr.addEventListener("resetform",function(xn){var Nn=Br.data.defaultFieldValue,In=Ke(Kr.options),Bn;try{for(In.s();!(Bn=In.n()).done;){var Fn=Bn.value;Fn.selected=Fn.value===Nn}}catch(qn){In.e(qn)}finally{In.f()}});var tn=Ke(this.data.options),yn;try{for(tn.s();!(yn=tn.n()).done;){var Pn=yn.value,bn=document.createElement("option");bn.textContent=Pn.displayValue,bn.value=Pn.exportValue,this.data.combo&&(bn.style.fontSize=$r),this.data.fieldValue.includes(Pn.exportValue)&&bn.setAttribute("selected",!0),Kr.appendChild(bn)}}catch(xn){tn.e(xn)}finally{tn.f()}var dn=function(Nn,In){var Bn=In?"value":"textContent",Fn=Nn.target.options;return Nn.target.multiple?Array.prototype.filter.call(Fn,function(qn){return qn.selected}).map(function(qn){return qn[Bn]}):Fn.selectedIndex===-1?null:Fn[Fn.selectedIndex][Bn]},Tn=function(Nn){var In=Nn.target.options;return Array.prototype.map.call(In,function(Bn){return{displayValue:Bn.textContent,exportValue:Bn.value}})};return this.enableScripting&&this.hasJSActions?(Kr.addEventListener("updatefromsandbox",function(xn){var Nn={value:function(Bn){var Fn=Bn.detail.value,qn=new Set(Array.isArray(Fn)?Fn:[Fn]),ni=Ke(Kr.options),si;try{for(ni.s();!(si=ni.n()).done;){var ii=si.value;ii.selected=qn.has(ii.value)}}catch(fi){ni.e(fi)}finally{ni.f()}Wr.setValue(Ur,{value:dn(Bn,!0)})},multipleSelection:function(Bn){Kr.multiple=!0},remove:function(Bn){var Fn=Kr.options,qn=Bn.detail.remove;if(Fn[qn].selected=!1,Kr.remove(qn),Fn.length>0){var ni=Array.prototype.findIndex.call(Fn,function(si){return si.selected});ni===-1&&(Fn[0].selected=!0)}Wr.setValue(Ur,{value:dn(Bn,!0),items:Tn(Bn)})},clear:function(Bn){for(;Kr.length!==0;)Kr.remove(0);Wr.setValue(Ur,{value:null,items:[]})},insert:function(Bn){var Fn=Bn.detail.insert,qn=Fn.index,ni=Fn.displayValue,si=Fn.exportValue,ii=document.createElement("option");ii.textContent=ni,ii.value=si,Kr.insertBefore(ii,Kr.children[qn]),Wr.setValue(Ur,{value:dn(Bn,!0),items:Tn(Bn)})},items:function(Bn){for(var Fn=Bn.detail.items;Kr.length!==0;)Kr.remove(0);var qn=Ke(Fn),ni;try{for(qn.s();!(ni=qn.n()).done;){var si=ni.value,ii=si.displayValue,fi=si.exportValue,ki=document.createElement("option");ki.textContent=ii,ki.value=fi,Kr.appendChild(ki)}}catch(Zr){qn.e(Zr)}finally{qn.f()}Kr.options.length>0&&(Kr.options[0].selected=!0),Wr.setValue(Ur,{value:dn(Bn,!0),items:Tn(Bn)})},indices:function(Bn){var Fn=new Set(Bn.detail.indices),qn=Ke(Bn.target.options),ni;try{for(qn.s();!(ni=qn.n()).done;){var si=ni.value;si.selected=Fn.has(si.index)}}catch(ii){qn.e(ii)}finally{qn.f()}Wr.setValue(Ur,{value:dn(Bn,!0)})},editable:function(Bn){Bn.target.disabled=!Bn.detail.editable}};Br._dispatchEventFromSandbox(Nn,xn)}),Kr.addEventListener("input",function(xn){var Nn,In=dn(xn,!0),Bn=dn(xn,!1);Wr.setValue(Ur,{value:In}),(Nn=Br.linkService.eventBus)===null||Nn===void 0||Nn.dispatch("dispatcheventinsandbox",{source:Br,detail:{id:Ur,name:"Keystroke",value:Bn,changeEx:In,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(Kr,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],function(xn){return xn.target.checked})):Kr.addEventListener("input",function(xn){Wr.setValue(Ur,{value:dn(xn)})}),this._setBackgroundColor(Kr),this.container.appendChild(Kr),this.container}}]),Rr}(vr),ur=function(Xr){De(Rr,Xr);var Er=je(Rr);function Rr(Dr){var Br,Wr,Ur;wr(this,Rr);var Hr=!!((Br=Dr.data.titleObj)!==null&&Br!==void 0&&Br.str||(Wr=Dr.data.contentsObj)!==null&&Wr!==void 0&&Wr.str||(Ur=Dr.data.richText)!==null&&Ur!==void 0&&Ur.str);return Er.call(this,Dr,{isRenderable:Hr})}return Sr(Rr,[{key:"render",value:function(){var Br=["Line","Square","Circle","PolyLine","Polygon","Ink"];if(this.container.className="popupAnnotation",Br.includes(this.data.parentType))return this.container;var Wr='[data-annotation-id="'.concat(this.data.parentId,'"]'),Ur=this.layer.querySelectorAll(Wr);if(Ur.length===0)return this.container;var Hr=new rr({container:this.container,trigger:Array.from(Ur),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),$r=this.page,Kr=Me.Util.normalizeRect([this.data.parentRect[0],$r.view[3]-this.data.parentRect[1]+$r.view[1],this.data.parentRect[2],$r.view[3]-this.data.parentRect[3]+$r.view[1]]),tn=Kr[0]+this.data.parentRect[2]-this.data.parentRect[0],yn=Kr[1];return this.container.style.transformOrigin="".concat(-tn,"px ").concat(-yn,"px"),this.container.style.left="".concat(tn,"px"),this.container.style.top="".concat(yn,"px"),this.container.appendChild(Hr.render()),this.container}}]),Rr}(Je),rr=function(){function Xr(Er){wr(this,Xr),this.container=Er.container,this.trigger=Er.trigger,this.color=Er.color,this.titleObj=Er.titleObj,this.modificationDate=Er.modificationDate,this.contentsObj=Er.contentsObj,this.richText=Er.richText,this.hideWrapper=Er.hideWrapper||!1,this.pinned=!1}return Sr(Xr,[{key:"render",value:function(){var Rr,Dr,Br=.7,Wr=document.createElement("div");Wr.className="popupWrapper",this.hideElement=this.hideWrapper?Wr:this.container,this.hideElement.hidden=!0;var Ur=document.createElement("div");Ur.className="popup";var Hr=this.color;if(Hr){var $r=Br*(255-Hr[0])+Hr[0],Kr=Br*(255-Hr[1])+Hr[1],tn=Br*(255-Hr[2])+Hr[2];Ur.style.backgroundColor=Me.Util.makeHexColor($r|0,Kr|0,tn|0)}var yn=document.createElement("h1");yn.dir=this.titleObj.dir,yn.textContent=this.titleObj.str,Ur.appendChild(yn);var Pn=Ie.PDFDateString.toDateObject(this.modificationDate);if(Pn){var bn=document.createElement("span");bn.className="popupDate",bn.textContent="{{date}}, {{time}}",bn.dataset.l10nId="annotation_date_string",bn.dataset.l10nArgs=JSON.stringify({date:Pn.toLocaleDateString(),time:Pn.toLocaleTimeString()}),Ur.appendChild(bn)}if((Rr=this.richText)!==null&&Rr!==void 0&&Rr.str&&(!((Dr=this.contentsObj)!==null&&Dr!==void 0&&Dr.str)||this.contentsObj.str===this.richText.str))_e.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:Ur}),Ur.lastChild.className="richText popupContent";else{var dn=this._formatContents(this.contentsObj);Ur.appendChild(dn)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);var Tn=Ke(this.trigger),xn;try{for(Tn.s();!(xn=Tn.n()).done;){var Nn=xn.value;Nn.addEventListener("click",this._toggle.bind(this)),Nn.addEventListener("mouseover",this._show.bind(this,!1)),Nn.addEventListener("mouseout",this._hide.bind(this,!1))}}catch(In){Tn.e(In)}finally{Tn.f()}return Ur.addEventListener("click",this._hide.bind(this,!0)),Wr.appendChild(Ur),Wr}},{key:"_formatContents",value:function(Rr){var Dr=Rr.str,Br=Rr.dir,Wr=document.createElement("p");Wr.className="popupContent",Wr.dir=Br;for(var Ur=Dr.split(/(?:\r\n?|\n)/),Hr=0,$r=Ur.length;Hr<$r;++Hr){var Kr=Ur[Hr];Wr.appendChild(document.createTextNode(Kr)),Hr<$r-1&&Wr.appendChild(document.createElement("br"))}return Wr}},{key:"_toggle",value:function(){this.pinned?this._hide(!0):this._show(!0)}},{key:"_show",value:function(){var Rr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;Rr&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex+=1)}},{key:"_hide",value:function(){var Rr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;Rr&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex-=1)}}]),Xr}(),gr=function(Xr){De(Rr,Xr);var Er=je(Rr);function Rr(Dr){var Br,Wr,Ur;wr(this,Rr);var Hr=!!(Dr.data.hasPopup||(Br=Dr.data.titleObj)!==null&&Br!==void 0&&Br.str||(Wr=Dr.data.contentsObj)!==null&&Wr!==void 0&&Wr.str||(Ur=Dr.data.richText)!==null&&Ur!==void 0&&Ur.str);return Er.call(this,Dr,{isRenderable:Hr,ignoreBorder:!0})}return Sr(Rr,[{key:"render",value:function(){return this.container.className="freeTextAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}]),Rr}(Je),hr=function(Xr){De(Rr,Xr);var Er=je(Rr);function Rr(Dr){var Br,Wr,Ur;wr(this,Rr);var Hr=!!(Dr.data.hasPopup||(Br=Dr.data.titleObj)!==null&&Br!==void 0&&Br.str||(Wr=Dr.data.contentsObj)!==null&&Wr!==void 0&&Wr.str||(Ur=Dr.data.richText)!==null&&Ur!==void 0&&Ur.str);return Er.call(this,Dr,{isRenderable:Hr,ignoreBorder:!0})}return Sr(Rr,[{key:"render",value:function(){this.container.className="lineAnnotation";var Br=this.data,Wr=$e(Br.rect),Ur=Wr.width,Hr=Wr.height,$r=this.svgFactory.create(Ur,Hr),Kr=this.svgFactory.createElement("svg:line");return Kr.setAttribute("x1",Br.rect[2]-Br.lineCoordinates[0]),Kr.setAttribute("y1",Br.rect[3]-Br.lineCoordinates[1]),Kr.setAttribute("x2",Br.rect[2]-Br.lineCoordinates[2]),Kr.setAttribute("y2",Br.rect[3]-Br.lineCoordinates[3]),Kr.setAttribute("stroke-width",Br.borderStyle.width||1),Kr.setAttribute("stroke","transparent"),Kr.setAttribute("fill","transparent"),$r.appendChild(Kr),this.container.append($r),this._createPopup(Kr,Br),this.container}}]),Rr}(Je),sr=function(Xr){De(Rr,Xr);var Er=je(Rr);function Rr(Dr){var Br,Wr,Ur;wr(this,Rr);var Hr=!!(Dr.data.hasPopup||(Br=Dr.data.titleObj)!==null&&Br!==void 0&&Br.str||(Wr=Dr.data.contentsObj)!==null&&Wr!==void 0&&Wr.str||(Ur=Dr.data.richText)!==null&&Ur!==void 0&&Ur.str);return Er.call(this,Dr,{isRenderable:Hr,ignoreBorder:!0})}return Sr(Rr,[{key:"render",value:function(){this.container.className="squareAnnotation";var Br=this.data,Wr=$e(Br.rect),Ur=Wr.width,Hr=Wr.height,$r=this.svgFactory.create(Ur,Hr),Kr=Br.borderStyle.width,tn=this.svgFactory.createElement("svg:rect");return tn.setAttribute("x",Kr/2),tn.setAttribute("y",Kr/2),tn.setAttribute("width",Ur-Kr),tn.setAttribute("height",Hr-Kr),tn.setAttribute("stroke-width",Kr||1),tn.setAttribute("stroke","transparent"),tn.setAttribute("fill","transparent"),$r.appendChild(tn),this.container.append($r),this._createPopup(tn,Br),this.container}}]),Rr}(Je),Ar=function(Xr){De(Rr,Xr);var Er=je(Rr);function Rr(Dr){var Br,Wr,Ur;wr(this,Rr);var Hr=!!(Dr.data.hasPopup||(Br=Dr.data.titleObj)!==null&&Br!==void 0&&Br.str||(Wr=Dr.data.contentsObj)!==null&&Wr!==void 0&&Wr.str||(Ur=Dr.data.richText)!==null&&Ur!==void 0&&Ur.str);return Er.call(this,Dr,{isRenderable:Hr,ignoreBorder:!0})}return Sr(Rr,[{key:"render",value:function(){this.container.className="circleAnnotation";var Br=this.data,Wr=$e(Br.rect),Ur=Wr.width,Hr=Wr.height,$r=this.svgFactory.create(Ur,Hr),Kr=Br.borderStyle.width,tn=this.svgFactory.createElement("svg:ellipse");return tn.setAttribute("cx",Ur/2),tn.setAttribute("cy",Hr/2),tn.setAttribute("rx",Ur/2-Kr/2),tn.setAttribute("ry",Hr/2-Kr/2),tn.setAttribute("stroke-width",Kr||1),tn.setAttribute("stroke","transparent"),tn.setAttribute("fill","transparent"),$r.appendChild(tn),this.container.append($r),this._createPopup(tn,Br),this.container}}]),Rr}(Je),Or=function(Xr){De(Rr,Xr);var Er=je(Rr);function Rr(Dr){var Br,Wr,Ur,Hr;wr(this,Rr);var $r=!!(Dr.data.hasPopup||(Br=Dr.data.titleObj)!==null&&Br!==void 0&&Br.str||(Wr=Dr.data.contentsObj)!==null&&Wr!==void 0&&Wr.str||(Ur=Dr.data.richText)!==null&&Ur!==void 0&&Ur.str);return Hr=Er.call(this,Dr,{isRenderable:$r,ignoreBorder:!0}),Hr.containerClassName="polylineAnnotation",Hr.svgElementName="svg:polyline",Hr}return Sr(Rr,[{key:"render",value:function(){this.container.className=this.containerClassName;var Br=this.data,Wr=$e(Br.rect),Ur=Wr.width,Hr=Wr.height,$r=this.svgFactory.create(Ur,Hr),Kr=[],tn=Ke(Br.vertices),yn;try{for(tn.s();!(yn=tn.n()).done;){var Pn=yn.value,bn=Pn.x-Br.rect[0],dn=Br.rect[3]-Pn.y;Kr.push(bn+","+dn)}}catch(xn){tn.e(xn)}finally{tn.f()}Kr=Kr.join(" ");var Tn=this.svgFactory.createElement(this.svgElementName);return Tn.setAttribute("points",Kr),Tn.setAttribute("stroke-width",Br.borderStyle.width||1),Tn.setAttribute("stroke","transparent"),Tn.setAttribute("fill","transparent"),$r.appendChild(Tn),this.container.append($r),this._createPopup(Tn,Br),this.container}}]),Rr}(Je),Mr=function(Xr){De(Rr,Xr);var Er=je(Rr);function Rr(Dr){var Br;return wr(this,Rr),Br=Er.call(this,Dr),Br.containerClassName="polygonAnnotation",Br.svgElementName="svg:polygon",Br}return Sr(Rr)}(Or),Gr=function(Xr){De(Rr,Xr);var Er=je(Rr);function Rr(Dr){var Br,Wr,Ur;wr(this,Rr);var Hr=!!(Dr.data.hasPopup||(Br=Dr.data.titleObj)!==null&&Br!==void 0&&Br.str||(Wr=Dr.data.contentsObj)!==null&&Wr!==void 0&&Wr.str||(Ur=Dr.data.richText)!==null&&Ur!==void 0&&Ur.str);return Er.call(this,Dr,{isRenderable:Hr,ignoreBorder:!0})}return Sr(Rr,[{key:"render",value:function(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}]),Rr}(Je),zr=function(Xr){De(Rr,Xr);var Er=je(Rr);function Rr(Dr){var Br,Wr,Ur,Hr;wr(this,Rr);var $r=!!(Dr.data.hasPopup||(Br=Dr.data.titleObj)!==null&&Br!==void 0&&Br.str||(Wr=Dr.data.contentsObj)!==null&&Wr!==void 0&&Wr.str||(Ur=Dr.data.richText)!==null&&Ur!==void 0&&Ur.str);return Hr=Er.call(this,Dr,{isRenderable:$r,ignoreBorder:!0}),Hr.containerClassName="inkAnnotation",Hr.svgElementName="svg:polyline",Hr}return Sr(Rr,[{key:"render",value:function(){this.container.className=this.containerClassName;var Br=this.data,Wr=$e(Br.rect),Ur=Wr.width,Hr=Wr.height,$r=this.svgFactory.create(Ur,Hr),Kr=Ke(Br.inkLists),tn;try{for(Kr.s();!(tn=Kr.n()).done;){var yn=tn.value,Pn=[],bn=Ke(yn),dn;try{for(bn.s();!(dn=bn.n()).done;){var Tn=dn.value,xn=Tn.x-Br.rect[0],Nn=Br.rect[3]-Tn.y;Pn.push("".concat(xn,",").concat(Nn))}}catch(Bn){bn.e(Bn)}finally{bn.f()}Pn=Pn.join(" ");var In=this.svgFactory.createElement(this.svgElementName);In.setAttribute("points",Pn),In.setAttribute("stroke-width",Br.borderStyle.width||1),In.setAttribute("stroke","transparent"),In.setAttribute("fill","transparent"),this._createPopup(In,Br),$r.appendChild(In)}}catch(Bn){Kr.e(Bn)}finally{Kr.f()}return this.container.append($r),this.container}}]),Rr}(Je),Ir=function(Xr){De(Rr,Xr);var Er=je(Rr);function Rr(Dr){var Br,Wr,Ur;wr(this,Rr);var Hr=!!(Dr.data.hasPopup||(Br=Dr.data.titleObj)!==null&&Br!==void 0&&Br.str||(Wr=Dr.data.contentsObj)!==null&&Wr!==void 0&&Wr.str||(Ur=Dr.data.richText)!==null&&Ur!==void 0&&Ur.str);return Er.call(this,Dr,{isRenderable:Hr,ignoreBorder:!0,createQuadrilaterals:!0})}return Sr(Rr,[{key:"render",value:function(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}]),Rr}(Je),Qr=function(Xr){De(Rr,Xr);var Er=je(Rr);function Rr(Dr){var Br,Wr,Ur;wr(this,Rr);var Hr=!!(Dr.data.hasPopup||(Br=Dr.data.titleObj)!==null&&Br!==void 0&&Br.str||(Wr=Dr.data.contentsObj)!==null&&Wr!==void 0&&Wr.str||(Ur=Dr.data.richText)!==null&&Ur!==void 0&&Ur.str);return Er.call(this,Dr,{isRenderable:Hr,ignoreBorder:!0,createQuadrilaterals:!0})}return Sr(Rr,[{key:"render",value:function(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}]),Rr}(Je),rn=function(Xr){De(Rr,Xr);var Er=je(Rr);function Rr(Dr){var Br,Wr,Ur;wr(this,Rr);var Hr=!!(Dr.data.hasPopup||(Br=Dr.data.titleObj)!==null&&Br!==void 0&&Br.str||(Wr=Dr.data.contentsObj)!==null&&Wr!==void 0&&Wr.str||(Ur=Dr.data.richText)!==null&&Ur!==void 0&&Ur.str);return Er.call(this,Dr,{isRenderable:Hr,ignoreBorder:!0,createQuadrilaterals:!0})}return Sr(Rr,[{key:"render",value:function(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}]),Rr}(Je),sn=function(Xr){De(Rr,Xr);var Er=je(Rr);function Rr(Dr){var Br,Wr,Ur;wr(this,Rr);var Hr=!!(Dr.data.hasPopup||(Br=Dr.data.titleObj)!==null&&Br!==void 0&&Br.str||(Wr=Dr.data.contentsObj)!==null&&Wr!==void 0&&Wr.str||(Ur=Dr.data.richText)!==null&&Ur!==void 0&&Ur.str);return Er.call(this,Dr,{isRenderable:Hr,ignoreBorder:!0,createQuadrilaterals:!0})}return Sr(Rr,[{key:"render",value:function(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}]),Rr}(Je),pn=function(Xr){De(Rr,Xr);var Er=je(Rr);function Rr(Dr){var Br,Wr,Ur;wr(this,Rr);var Hr=!!(Dr.data.hasPopup||(Br=Dr.data.titleObj)!==null&&Br!==void 0&&Br.str||(Wr=Dr.data.contentsObj)!==null&&Wr!==void 0&&Wr.str||(Ur=Dr.data.richText)!==null&&Ur!==void 0&&Ur.str);return Er.call(this,Dr,{isRenderable:Hr,ignoreBorder:!0})}return Sr(Rr,[{key:"render",value:function(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}]),Rr}(Je),mn=function(Xr){De(Rr,Xr);var Er=je(Rr);function Rr(Dr){var Br,Wr;wr(this,Rr),Wr=Er.call(this,Dr,{isRenderable:!0});var Ur=Wr.data.file,Hr=Ur.filename,$r=Ur.content;return Wr.filename=(0,Ie.getFilenameFromUrl)(Hr),Wr.content=$r,(Br=Wr.linkService.eventBus)===null||Br===void 0||Br.dispatch("fileattachmentannotation",{source:Ge(Wr),id:(0,Me.stringToPDFString)(Hr),filename:Hr,content:$r}),Wr}return Sr(Rr,[{key:"render",value:function(){var Br,Wr;this.container.className="fileAttachmentAnnotation";var Ur=document.createElement("div");return Ur.style.height=this.container.style.height,Ur.style.width=this.container.style.width,Ur.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&((Br=this.data.titleObj)!==null&&Br!==void 0&&Br.str||(Wr=this.data.contentsObj)!==null&&Wr!==void 0&&Wr.str||this.data.richText)&&this._createPopup(Ur,this.data),this.container.appendChild(Ur),this.container}},{key:"_download",value:function(){var Br;(Br=this.downloadManager)===null||Br===void 0||Br.openOrDownloadData(this.container,this.content,this.filename)}}]),Rr}(Je),Sn=function(){function Xr(){wr(this,Xr)}return Sr(Xr,null,[{key:"render",value:function(Rr){var Dr=[],Br=[],Wr=Ke(Rr.annotations),Ur;try{for(Wr.s();!(Ur=Wr.n()).done;){var Hr=Ur.value;if(!!Hr){var $r=$e(Hr.rect),Kr=$r.width,tn=$r.height;if(!(Kr<=0||tn<=0)){if(Hr.annotationType===Me.AnnotationType.POPUP){Br.push(Hr);continue}Dr.push(Hr)}}}}catch(Fn){Wr.e(Fn)}finally{Wr.f()}Br.length&&Dr.push.apply(Dr,Br);for(var yn=Rr.div,Pn=0,bn=Dr;Pn<bn.length;Pn++){var dn=bn[Pn],Tn=Ve.create({data:dn,layer:yn,page:Rr.page,viewport:Rr.viewport,linkService:Rr.linkService,downloadManager:Rr.downloadManager,imageResourcesPath:Rr.imageResourcesPath||"",renderForms:Rr.renderForms!==!1,svgFactory:new Ie.DOMSVGFactory,annotationStorage:Rr.annotationStorage||new Be.AnnotationStorage,enableScripting:Rr.enableScripting,hasJSActions:Rr.hasJSActions,fieldObjects:Rr.fieldObjects,mouseState:Rr.mouseState||{isDown:!1}});if(Tn.isRenderable){var xn=Tn.render();if(dn.hidden&&(xn.style.visibility="hidden"),Array.isArray(xn)){var Nn=Ke(xn),In;try{for(Nn.s();!(In=Nn.n()).done;){var Bn=In.value;yn.appendChild(Bn)}}catch(Fn){Nn.e(Fn)}finally{Nn.f()}}else Tn instanceof ur?yn.prepend(xn):yn.appendChild(xn)}}Ce(this,Xr,Cn).call(this,yn,Rr.annotationCanvasMap)}},{key:"update",value:function(Rr){var Dr=Rr.page,Br=Rr.viewport,Wr=Rr.annotations,Ur=Rr.annotationCanvasMap,Hr=Rr.div,$r=Br.transform,Kr="matrix(".concat($r.join(","),")"),tn,yn,Pn=Ke(Wr),bn;try{for(Pn.s();!(bn=Pn.n()).done;){var dn=bn.value,Tn=Hr.querySelectorAll('[data-annotation-id="'.concat(dn.id,'"]'));if(Tn){var xn=Ke(Tn),Nn;try{for(xn.s();!(Nn=xn.n()).done;){var In=Nn.value;if(dn.hasOwnCanvas){var Bn=Me.Util.normalizeRect([dn.rect[0],Dr.view[3]-dn.rect[1]+Dr.view[1],dn.rect[2],Dr.view[3]-dn.rect[3]+Dr.view[1]]);if(!yn){tn=Math.abs($r[0]||$r[1]);for(var Fn=$r.slice(),qn=0;qn<4;qn++)Fn[qn]=Math.sign(Fn[qn]);yn="matrix(".concat(Fn.join(","),")")}var ni=Bn[0]*tn,si=Bn[1]*tn;In.style.left="".concat(ni,"px"),In.style.top="".concat(si,"px"),In.style.transformOrigin="".concat(-ni,"px ").concat(-si,"px"),In.style.transform=yn}else In.style.transform=Kr}}catch(ii){xn.e(ii)}finally{xn.f()}}}}catch(ii){Pn.e(ii)}finally{Pn.f()}Ce(this,Xr,Cn).call(this,Hr,Ur),Hr.hidden=!1}}]),Xr}();e.AnnotationLayer=Sn;function Cn(Xr,Er){if(!!Er){var Rr=Ke(Er),Dr;try{for(Rr.s();!(Dr=Rr.n()).done;){var Br=er(Dr.value,2),Wr=Br[0],Ur=Br[1],Hr=Xr.querySelector('[data-annotation-id="'.concat(Wr,'"]'));if(!!Hr){var $r=Hr.firstChild;$r.nodeName==="CANVAS"?Hr.replaceChild(Ur,$r):Hr.insertBefore(Ur,$r)}}}catch(Kr){Rr.e(Kr)}finally{Rr.f()}Er.clear()}}},(Re,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColorConverters=void 0;function t(r,Oe){return ke(r)||Be(r,Oe)||Me(r,Oe)||Pe()}function Pe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Me(r,Oe){if(!!r){if(typeof r=="string")return Ie(r,Oe);var Ee=Object.prototype.toString.call(r).slice(8,-1);if(Ee==="Object"&&r.constructor&&(Ee=r.constructor.name),Ee==="Map"||Ee==="Set")return Array.from(r);if(Ee==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ee))return Ie(r,Oe)}}function Ie(r,Oe){(Oe==null||Oe>r.length)&&(Oe=r.length);for(var Ee=0,Ae=new Array(Oe);Ee<Oe;Ee++)Ae[Ee]=r[Ee];return Ae}function Be(r,Oe){var Ee=r==null?null:typeof Symbol!="undefined"&&r[Symbol.iterator]||r["@@iterator"];if(Ee!=null){var Ae=[],Fe=!0,De=!1,ze,je;try{for(Ee=Ee.call(r);!(Fe=(ze=Ee.next()).done)&&(Ae.push(ze.value),!(Oe&&Ae.length===Oe));Fe=!0);}catch(We){De=!0,je=We}finally{try{!Fe&&Ee.return!=null&&Ee.return()}finally{if(De)throw je}}return Ae}}function ke(r){if(Array.isArray(r))return r}function _e(r,Oe){if(!(r instanceof Oe))throw new TypeError("Cannot call a class as a function")}function Ce(r,Oe){for(var Ee=0;Ee<Oe.length;Ee++){var Ae=Oe[Ee];Ae.enumerable=Ae.enumerable||!1,Ae.configurable=!0,"value"in Ae&&(Ae.writable=!0),Object.defineProperty(r,Ae.key,Ae)}}function Te(r,Oe,Ee){return Oe&&Ce(r.prototype,Oe),Ee&&Ce(r,Ee),Object.defineProperty(r,"prototype",{writable:!1}),r}function Se(r){return Math.floor(Math.max(0,Math.min(1,r))*255).toString(16).padStart(2,"0")}var xe=function(){function r(){_e(this,r)}return Te(r,null,[{key:"CMYK_G",value:function(Ee){var Ae=t(Ee,4),Fe=Ae[0],De=Ae[1],ze=Ae[2],je=Ae[3];return["G",1-Math.min(1,.3*Fe+.59*ze+.11*De+je)]}},{key:"G_CMYK",value:function(Ee){var Ae=t(Ee,1),Fe=Ae[0];return["CMYK",0,0,0,1-Fe]}},{key:"G_RGB",value:function(Ee){var Ae=t(Ee,1),Fe=Ae[0];return["RGB",Fe,Fe,Fe]}},{key:"G_HTML",value:function(Ee){var Ae=t(Ee,1),Fe=Ae[0],De=Se(Fe);return"#".concat(De).concat(De).concat(De)}},{key:"RGB_G",value:function(Ee){var Ae=t(Ee,3),Fe=Ae[0],De=Ae[1],ze=Ae[2];return["G",.3*Fe+.59*De+.11*ze]}},{key:"RGB_HTML",value:function(Ee){var Ae=t(Ee,3),Fe=Ae[0],De=Ae[1],ze=Ae[2],je=Se(Fe),We=Se(De),Ge=Se(ze);return"#".concat(je).concat(We).concat(Ge)}},{key:"T_HTML",value:function(){return"#00000000"}},{key:"CMYK_RGB",value:function(Ee){var Ae=t(Ee,4),Fe=Ae[0],De=Ae[1],ze=Ae[2],je=Ae[3];return["RGB",1-Math.min(1,Fe+je),1-Math.min(1,ze+je),1-Math.min(1,De+je)]}},{key:"CMYK_HTML",value:function(Ee){return this.RGB_HTML(this.CMYK_RGB(Ee))}},{key:"RGB_CMYK",value:function(Ee){var Ae=t(Ee,3),Fe=Ae[0],De=Ae[1],ze=Ae[2],je=1-Fe,We=1-De,Ge=1-ze,Ye=Math.min(je,We,Ge);return["CMYK",je,We,Ge,Ye]}}]),r}();e.ColorConverters=xe},(Re,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaLayer=void 0;var Pe=t(1),Me=t(159);function Ie(Ae,Fe){return _e(Ae)||ke(Ae,Fe)||Te(Ae,Fe)||Be()}function Be(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ke(Ae,Fe){var De=Ae==null?null:typeof Symbol!="undefined"&&Ae[Symbol.iterator]||Ae["@@iterator"];if(De!=null){var ze=[],je=!0,We=!1,Ge,Ye;try{for(De=De.call(Ae);!(je=(Ge=De.next()).done)&&(ze.push(Ge.value),!(Fe&&ze.length===Fe));je=!0);}catch(Xe){We=!0,Ye=Xe}finally{try{!je&&De.return!=null&&De.return()}finally{if(We)throw Ye}}return ze}}function _e(Ae){if(Array.isArray(Ae))return Ae}function Ce(Ae,Fe){var De=typeof Symbol!="undefined"&&Ae[Symbol.iterator]||Ae["@@iterator"];if(!De){if(Array.isArray(Ae)||(De=Te(Ae))||Fe&&Ae&&typeof Ae.length=="number"){De&&(Ae=De);var ze=0,je=function(){};return{s:je,n:function(){return ze>=Ae.length?{done:!0}:{done:!1,value:Ae[ze++]}},e:function(Ke){throw Ke},f:je}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var We=!0,Ge=!1,Ye;return{s:function(){De=De.call(Ae)},n:function(){var Ke=De.next();return We=Ke.done,Ke},e:function(Ke){Ge=!0,Ye=Ke},f:function(){try{!We&&De.return!=null&&De.return()}finally{if(Ge)throw Ye}}}}function Te(Ae,Fe){if(!!Ae){if(typeof Ae=="string")return Se(Ae,Fe);var De=Object.prototype.toString.call(Ae).slice(8,-1);if(De==="Object"&&Ae.constructor&&(De=Ae.constructor.name),De==="Map"||De==="Set")return Array.from(Ae);if(De==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(De))return Se(Ae,Fe)}}function Se(Ae,Fe){(Fe==null||Fe>Ae.length)&&(Fe=Ae.length);for(var De=0,ze=new Array(Fe);De<Fe;De++)ze[De]=Ae[De];return ze}function xe(Ae,Fe){if(!(Ae instanceof Fe))throw new TypeError("Cannot call a class as a function")}function r(Ae,Fe){for(var De=0;De<Fe.length;De++){var ze=Fe[De];ze.enumerable=ze.enumerable||!1,ze.configurable=!0,"value"in ze&&(ze.writable=!0),Object.defineProperty(Ae,ze.key,ze)}}function Oe(Ae,Fe,De){return Fe&&r(Ae.prototype,Fe),De&&r(Ae,De),Object.defineProperty(Ae,"prototype",{writable:!1}),Ae}var Ee=function(){function Ae(){xe(this,Ae)}return Oe(Ae,null,[{key:"setupStorage",value:function(De,ze,je,We,Ge){var Ye=We.getValue(ze,{value:null});switch(je.name){case"textarea":if(Ye.value!==null&&(De.textContent=Ye.value),Ge==="print")break;De.addEventListener("input",function(Qe){We.setValue(ze,{value:Qe.target.value})});break;case"input":if(je.attributes.type==="radio"||je.attributes.type==="checkbox"){if(Ye.value===je.attributes.xfaOn?De.setAttribute("checked",!0):Ye.value===je.attributes.xfaOff&&De.removeAttribute("checked"),Ge==="print")break;De.addEventListener("change",function(Qe){We.setValue(ze,{value:Qe.target.checked?Qe.target.getAttribute("xfaOn"):Qe.target.getAttribute("xfaOff")})})}else{if(Ye.value!==null&&De.setAttribute("value",Ye.value),Ge==="print")break;De.addEventListener("input",function(Qe){We.setValue(ze,{value:Qe.target.value})})}break;case"select":if(Ye.value!==null){var Xe=Ce(je.children),Ke;try{for(Xe.s();!(Ke=Xe.n()).done;){var er=Ke.value;er.attributes.value===Ye.value&&(er.attributes.selected=!0)}}catch(Qe){Xe.e(Qe)}finally{Xe.f()}}De.addEventListener("input",function(Qe){var nr=Qe.target.options,ir=nr.selectedIndex===-1?"":nr[nr.selectedIndex].value;We.setValue(ze,{value:ir})});break}}},{key:"setAttributes",value:function(De){var ze=De.html,je=De.element,We=De.storage,Ge=We===void 0?null:We,Ye=De.intent,Xe=De.linkService,Ke=je.attributes,er=ze instanceof HTMLAnchorElement;Ke.type==="radio"&&(Ke.name="".concat(Ke.name,"-").concat(Ye));for(var Qe=0,nr=Object.entries(Ke);Qe<nr.length;Qe++){var ir=Ie(nr[Qe],2),cr=ir[0],br=ir[1];if(!(br==null||cr==="dataId"))if(cr!=="style")if(cr==="textContent")ze.textContent=br;else if(cr==="class")br.length&&ze.setAttribute(cr,br.join(" "));else{if(er&&(cr==="href"||cr==="newWindow"))continue;ze.setAttribute(cr,br)}else Object.assign(ze.style,br)}if(er){var wr;Xe.addLinkAttributes||(0,Pe.warn)("XfaLayer.setAttribute - missing `addLinkAttributes`-method on the `linkService`-instance."),(wr=Xe.addLinkAttributes)===null||wr===void 0||wr.call(Xe,ze,Ke.href,Ke.newWindow)}Ge&&Ke.dataId&&this.setupStorage(ze,Ke.dataId,je,Ge)}},{key:"render",value:function(De){var ze=De.annotationStorage,je=De.linkService,We=De.xfaHtml,Ge=De.intent||"display",Ye=document.createElement(We.name);We.attributes&&this.setAttributes({html:Ye,element:We,intent:Ge,linkService:je});var Xe=[[We,-1,Ye]],Ke=De.div;if(Ke.appendChild(Ye),De.viewport){var er="matrix(".concat(De.viewport.transform.join(","),")");Ke.style.transform=er}Ge!=="richText"&&Ke.setAttribute("class","xfaLayer xfaFont");for(var Qe=[];Xe.length>0;){var nr,ir=Ie(Xe[Xe.length-1],3),cr=ir[0],br=ir[1],wr=ir[2];if(br+1===cr.children.length){Xe.pop();continue}var xr=cr.children[++Xe[Xe.length-1][1]];if(xr!==null){var Sr=xr.name;if(Sr==="#text"){var lr=document.createTextNode(xr.value);Qe.push(lr),wr.appendChild(lr);continue}var fr=void 0;if(xr!=null&&(nr=xr.attributes)!==null&&nr!==void 0&&nr.xmlns?fr=document.createElementNS(xr.attributes.xmlns,Sr):fr=document.createElement(Sr),wr.appendChild(fr),xr.attributes&&this.setAttributes({html:fr,element:xr,storage:ze,intent:Ge,linkService:je}),xr.children&&xr.children.length>0)Xe.push([xr,-1,fr]);else if(xr.value){var $e=document.createTextNode(xr.value);Me.XfaText.shouldBuildText(Sr)&&Qe.push($e),fr.appendChild($e)}}}var Ve=Ce(Ke.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea")),Je;try{for(Ve.s();!(Je=Ve.n()).done;){var Ze=Je.value;Ze.setAttribute("readOnly",!0)}}catch(St){Ve.e(St)}finally{Ve.f()}return{textDivs:Qe}}},{key:"update",value:function(De){var ze="matrix(".concat(De.viewport.transform.join(","),")");De.div.style.transform=ze,De.div.hidden=!1}}]),Ae}();e.XfaLayer=Ee},(Re,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.renderTextLayer=Ye;var Pe=t(1);function Me(Xe,Ke){if(!(Xe instanceof Ke))throw new TypeError("Cannot call a class as a function")}function Ie(Xe,Ke){for(var er=0;er<Ke.length;er++){var Qe=Ke[er];Qe.enumerable=Qe.enumerable||!1,Qe.configurable=!0,"value"in Qe&&(Qe.writable=!0),Object.defineProperty(Xe,Qe.key,Qe)}}function Be(Xe,Ke,er){return Ke&&Ie(Xe.prototype,Ke),er&&Ie(Xe,er),Object.defineProperty(Xe,"prototype",{writable:!1}),Xe}function ke(Xe,Ke){var er=typeof Symbol!="undefined"&&Xe[Symbol.iterator]||Xe["@@iterator"];if(!er){if(Array.isArray(Xe)||(er=_e(Xe))||Ke&&Xe&&typeof Xe.length=="number"){er&&(Xe=er);var Qe=0,nr=function(){};return{s:nr,n:function(){return Qe>=Xe.length?{done:!0}:{done:!1,value:Xe[Qe++]}},e:function(xr){throw xr},f:nr}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ir=!0,cr=!1,br;return{s:function(){er=er.call(Xe)},n:function(){var xr=er.next();return ir=xr.done,xr},e:function(xr){cr=!0,br=xr},f:function(){try{!ir&&er.return!=null&&er.return()}finally{if(cr)throw br}}}}function _e(Xe,Ke){if(!!Xe){if(typeof Xe=="string")return Ce(Xe,Ke);var er=Object.prototype.toString.call(Xe).slice(8,-1);if(er==="Object"&&Xe.constructor&&(er=Xe.constructor.name),er==="Map"||er==="Set")return Array.from(Xe);if(er==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(er))return Ce(Xe,Ke)}}function Ce(Xe,Ke){(Ke==null||Ke>Xe.length)&&(Ke=Xe.length);for(var er=0,Qe=new Array(Ke);er<Ke;er++)Qe[er]=Xe[er];return Qe}var Te=1e5,Se=30,xe=.8,r=new Map,Oe=/^\s+$/g;function Ee(Xe,Ke){var er=r.get(Xe);if(er)return er;Ke.save(),Ke.font="".concat(Se,"px ").concat(Xe);var Qe=Ke.measureText(""),nr=Qe.fontBoundingBoxAscent,ir=Math.abs(Qe.fontBoundingBoxDescent);if(nr){Ke.restore();var cr=nr/(nr+ir);return r.set(Xe,cr),cr}Ke.strokeStyle="red",Ke.clearRect(0,0,Se,Se),Ke.strokeText("g",0,0);var br=Ke.getImageData(0,0,Se,Se).data;ir=0;for(var wr=br.length-1-3;wr>=0;wr-=4)if(br[wr]>0){ir=Math.ceil(wr/4/Se);break}Ke.clearRect(0,0,Se,Se),Ke.strokeText("A",0,Se),br=Ke.getImageData(0,0,Se,Se).data,nr=0;for(var xr=0,Sr=br.length;xr<Sr;xr+=4)if(br[xr]>0){nr=Se-Math.floor(xr/4/Se);break}if(Ke.restore(),nr){var lr=nr/(nr+ir);return r.set(Xe,lr),lr}return r.set(Xe,xe),xe}function Ae(Xe,Ke,er,Qe){var nr=document.createElement("span"),ir=Xe._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:Ke.str!=="",hasEOL:Ke.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1}:{angle:0,canvasWidth:0,hasText:Ke.str!=="",hasEOL:Ke.hasEOL};Xe._textDivs.push(nr);var cr=Pe.Util.transform(Xe._viewport.transform,Ke.transform),br=Math.atan2(cr[1],cr[0]),wr=er[Ke.fontName];wr.vertical&&(br+=Math.PI/2);var xr=Math.hypot(cr[2],cr[3]),Sr=xr*Ee(wr.fontFamily,Qe),lr,fr;br===0?(lr=cr[4],fr=cr[5]-Sr):(lr=cr[4]+Sr*Math.sin(br),fr=cr[5]-Sr*Math.cos(br)),nr.style.left="".concat(lr,"px"),nr.style.top="".concat(fr,"px"),nr.style.fontSize="".concat(xr,"px"),nr.style.fontFamily=wr.fontFamily,nr.setAttribute("role","presentation"),nr.textContent=Ke.str,nr.dir=Ke.dir,Xe._fontInspectorEnabled&&(nr.dataset.fontName=Ke.fontName),br!==0&&(ir.angle=br*(180/Math.PI));var $e=!1;if(Ke.str.length>1||Xe._enhanceTextSelection&&Oe.test(Ke.str))$e=!0;else if(Ke.str!==" "&&Ke.transform[0]!==Ke.transform[3]){var Ve=Math.abs(Ke.transform[0]),Je=Math.abs(Ke.transform[3]);Ve!==Je&&Math.max(Ve,Je)/Math.min(Ve,Je)>1.5&&($e=!0)}if($e&&(wr.vertical?ir.canvasWidth=Ke.height*Xe._viewport.scale:ir.canvasWidth=Ke.width*Xe._viewport.scale),Xe._textDivProperties.set(nr,ir),Xe._textContentStream&&Xe._layoutText(nr),Xe._enhanceTextSelection&&ir.hasText){var Ze=1,St=0;br!==0&&(Ze=Math.cos(br),St=Math.sin(br));var vr=(wr.vertical?Ke.height:Ke.width)*Xe._viewport.scale,mr=xr,Cr,_r;br!==0?(Cr=[Ze,St,-St,Ze,lr,fr],_r=Pe.Util.getAxialAlignedBoundingBox([0,0,vr,mr],Cr)):_r=[lr,fr,lr+vr,fr+mr],Xe._bounds.push({left:_r[0],top:_r[1],right:_r[2],bottom:_r[3],div:nr,size:[vr,mr],m:Cr})}}function Fe(Xe){if(!Xe._canceled){var Ke=Xe._textDivs,er=Xe._capability,Qe=Ke.length;if(Qe>Te){Xe._renderingDone=!0,er.resolve();return}if(!Xe._textContentStream)for(var nr=0;nr<Qe;nr++)Xe._layoutText(Ke[nr]);Xe._renderingDone=!0,er.resolve()}}function De(Xe,Ke,er){for(var Qe=0,nr=0;nr<er;nr++){var ir=Xe[Ke++];ir>0&&(Qe=Qe?Math.min(ir,Qe):ir)}return Qe}function ze(Xe){for(var Ke=Xe._bounds,er=Xe._viewport,Qe=je(er.width,er.height,Ke),nr=0;nr<Qe.length;nr++){var ir=Ke[nr].div,cr=Xe._textDivProperties.get(ir);if(cr.angle===0){cr.paddingLeft=Ke[nr].left-Qe[nr].left,cr.paddingTop=Ke[nr].top-Qe[nr].top,cr.paddingRight=Qe[nr].right-Ke[nr].right,cr.paddingBottom=Qe[nr].bottom-Ke[nr].bottom,Xe._textDivProperties.set(ir,cr);continue}for(var br=Qe[nr],wr=Ke[nr],xr=wr.m,Sr=xr[0],lr=xr[1],fr=[[0,0],[0,wr.size[1]],[wr.size[0],0],wr.size],$e=new Float64Array(64),Ve=0,Je=fr.length;Ve<Je;Ve++){var Ze=Pe.Util.applyTransform(fr[Ve],xr);$e[Ve+0]=Sr&&(br.left-Ze[0])/Sr,$e[Ve+4]=lr&&(br.top-Ze[1])/lr,$e[Ve+8]=Sr&&(br.right-Ze[0])/Sr,$e[Ve+12]=lr&&(br.bottom-Ze[1])/lr,$e[Ve+16]=lr&&(br.left-Ze[0])/-lr,$e[Ve+20]=Sr&&(br.top-Ze[1])/Sr,$e[Ve+24]=lr&&(br.right-Ze[0])/-lr,$e[Ve+28]=Sr&&(br.bottom-Ze[1])/Sr,$e[Ve+32]=Sr&&(br.left-Ze[0])/-Sr,$e[Ve+36]=lr&&(br.top-Ze[1])/-lr,$e[Ve+40]=Sr&&(br.right-Ze[0])/-Sr,$e[Ve+44]=lr&&(br.bottom-Ze[1])/-lr,$e[Ve+48]=lr&&(br.left-Ze[0])/lr,$e[Ve+52]=Sr&&(br.top-Ze[1])/-Sr,$e[Ve+56]=lr&&(br.right-Ze[0])/lr,$e[Ve+60]=Sr&&(br.bottom-Ze[1])/-Sr}var St=1+Math.min(Math.abs(Sr),Math.abs(lr));cr.paddingLeft=De($e,32,16)/St,cr.paddingTop=De($e,48,16)/St,cr.paddingRight=De($e,0,16)/St,cr.paddingBottom=De($e,16,16)/St,Xe._textDivProperties.set(ir,cr)}}function je(Xe,Ke,er){var Qe=er.map(function($e,Ve){return{x1:$e.left,y1:$e.top,x2:$e.right,y2:$e.bottom,index:Ve,x1New:void 0,x2New:void 0}});We(Xe,Qe);var nr=new Array(er.length),ir=ke(Qe),cr;try{for(ir.s();!(cr=ir.n()).done;){var br=cr.value,wr=br.index;nr[wr]={left:br.x1New,top:0,right:br.x2New,bottom:0}}}catch($e){ir.e($e)}finally{ir.f()}er.map(function($e,Ve){var Je=nr[Ve],Ze=Qe[Ve];Ze.x1=$e.top,Ze.y1=Xe-Je.right,Ze.x2=$e.bottom,Ze.y2=Xe-Je.left,Ze.index=Ve,Ze.x1New=void 0,Ze.x2New=void 0}),We(Ke,Qe);var xr=ke(Qe),Sr;try{for(xr.s();!(Sr=xr.n()).done;){var lr=Sr.value,fr=lr.index;nr[fr].top=lr.x1New,nr[fr].bottom=lr.x2New}}catch($e){xr.e($e)}finally{xr.f()}return nr}function We(Xe,Ke){Ke.sort(function(dr,ur){return dr.x1-ur.x1||dr.index-ur.index});var er={x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0},Qe=[{start:-1/0,end:1/0,boundary:er}],nr=ke(Ke),ir;try{for(nr.s();!(ir=nr.n()).done;){for(var cr=ir.value,br=0;br<Qe.length&&Qe[br].end<=cr.y1;)br++;for(var wr=Qe.length-1;wr>=0&&Qe[wr].start>=cr.y2;)wr--;var xr=void 0,Sr=void 0,lr=void 0,fr=void 0,$e=-1/0;for(lr=br;lr<=wr;lr++){xr=Qe[lr],Sr=xr.boundary;var Ve=void 0;Sr.x2>cr.x1?Ve=Sr.index>cr.index?Sr.x1New:cr.x1:Sr.x2New===void 0?Ve=(Sr.x2+cr.x1)/2:Ve=Sr.x2New,Ve>$e&&($e=Ve)}for(cr.x1New=$e,lr=br;lr<=wr;lr++)xr=Qe[lr],Sr=xr.boundary,Sr.x2New===void 0?Sr.x2>cr.x1?Sr.index>cr.index&&(Sr.x2New=Sr.x2):Sr.x2New=$e:Sr.x2New>$e&&(Sr.x2New=Math.max($e,Sr.x2));var Je=[],Ze=null;for(lr=br;lr<=wr;lr++){xr=Qe[lr],Sr=xr.boundary;var St=Sr.x2>cr.x2?Sr:cr;Ze===St?Je[Je.length-1].end=xr.end:(Je.push({start:xr.start,end:xr.end,boundary:St}),Ze=St)}for(Qe[br].start<cr.y1&&(Je[0].start=cr.y1,Je.unshift({start:Qe[br].start,end:cr.y1,boundary:Qe[br].boundary})),cr.y2<Qe[wr].end&&(Je[Je.length-1].end=cr.y2,Je.push({start:cr.y2,end:Qe[wr].end,boundary:Qe[wr].boundary})),lr=br;lr<=wr;lr++)if(xr=Qe[lr],Sr=xr.boundary,Sr.x2New===void 0){var vr=!1;for(fr=br-1;!vr&&fr>=0&&Qe[fr].start>=Sr.y1;fr--)vr=Qe[fr].boundary===Sr;for(fr=wr+1;!vr&&fr<Qe.length&&Qe[fr].end<=Sr.y2;fr++)vr=Qe[fr].boundary===Sr;for(fr=0;!vr&&fr<Je.length;fr++)vr=Je[fr].boundary===Sr;vr||(Sr.x2New=$e)}Array.prototype.splice.apply(Qe,[br,wr-br+1].concat(Je))}}catch(dr){nr.e(dr)}finally{nr.f()}for(var mr=0,Cr=Qe;mr<Cr.length;mr++){var _r=Cr[mr],pr=_r.boundary;pr.x2New===void 0&&(pr.x2New=Math.max(Xe,pr.x2))}}var Ge=function(){function Xe(Ke){var er,Qe=this,nr=Ke.textContent,ir=Ke.textContentStream,cr=Ke.container,br=Ke.viewport,wr=Ke.textDivs,xr=Ke.textContentItemsStr,Sr=Ke.enhanceTextSelection;Me(this,Xe),this._textContent=nr,this._textContentStream=ir,this._container=cr,this._document=cr.ownerDocument,this._viewport=br,this._textDivs=wr||[],this._textContentItemsStr=xr||[],this._enhanceTextSelection=!!Sr,this._fontInspectorEnabled=!!((er=globalThis.FontInspector)!==null&&er!==void 0&&er.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,Pe.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._capability.promise.finally(function(){Qe._enhanceTextSelection||(Qe._textDivProperties=null),Qe._layoutTextCtx&&(Qe._layoutTextCtx.canvas.width=0,Qe._layoutTextCtx.canvas.height=0,Qe._layoutTextCtx=null)}).catch(function(){})}return Be(Xe,[{key:"promise",get:function(){return this._capability.promise}},{key:"cancel",value:function(){this._canceled=!0,this._reader&&(this._reader.cancel(new Pe.AbortException("TextLayer task cancelled.")).catch(function(){}),this._reader=null),this._renderTimer!==null&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}},{key:"_processItems",value:function(er,Qe){for(var nr=0,ir=er.length;nr<ir;nr++){if(er[nr].str===void 0){if(er[nr].type==="beginMarkedContentProps"||er[nr].type==="beginMarkedContent"){var cr=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),er[nr].id!==null&&this._container.setAttribute("id","".concat(er[nr].id)),cr.appendChild(this._container)}else er[nr].type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(er[nr].str),Ae(this,er[nr],Qe,this._layoutTextCtx)}}},{key:"_layoutText",value:function(er){var Qe=this._textDivProperties.get(er),nr="";if(Qe.canvasWidth!==0&&Qe.hasText){var ir=er.style,cr=ir.fontSize,br=ir.fontFamily;(cr!==this._layoutTextLastFontSize||br!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font="".concat(cr," ").concat(br),this._layoutTextLastFontSize=cr,this._layoutTextLastFontFamily=br);var wr=this._layoutTextCtx.measureText(er.textContent),xr=wr.width;if(xr>0){var Sr=Qe.canvasWidth/xr;this._enhanceTextSelection&&(Qe.scale=Sr),nr="scaleX(".concat(Sr,")")}}if(Qe.angle!==0&&(nr="rotate(".concat(Qe.angle,"deg) ").concat(nr)),nr.length>0&&(this._enhanceTextSelection&&(Qe.originalTransform=nr),er.style.transform=nr),Qe.hasText&&this._container.appendChild(er),Qe.hasEOL){var lr=document.createElement("br");lr.setAttribute("role","presentation"),this._container.appendChild(lr)}}},{key:"_render",value:function(){var er=this,Qe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,nr=(0,Pe.createPromiseCapability)(),ir=Object.create(null),cr=this._document.createElement("canvas");if(cr.height=cr.width=Se,cr.mozOpaque=!0,this._layoutTextCtx=cr.getContext("2d",{alpha:!1}),this._textContent){var br=this._textContent.items,wr=this._textContent.styles;this._processItems(br,wr),nr.resolve()}else if(this._textContentStream){var xr=function Sr(){er._reader.read().then(function(lr){var fr=lr.value,$e=lr.done;if($e){nr.resolve();return}Object.assign(ir,fr.styles),er._processItems(fr.items,ir),Sr()},nr.reject)};this._reader=this._textContentStream.getReader(),xr()}else throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');nr.promise.then(function(){ir=null,Qe?er._renderTimer=setTimeout(function(){Fe(er),er._renderTimer=null},Qe):Fe(er)},this._capability.reject)}},{key:"expandTextDivs",value:function(){var er=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!(!this._enhanceTextSelection||!this._renderingDone)){this._bounds!==null&&(ze(this),this._bounds=null);for(var Qe=[],nr=[],ir=0,cr=this._textDivs.length;ir<cr;ir++){var br=this._textDivs[ir],wr=this._textDivProperties.get(br);!wr.hasText||(er?(Qe.length=0,nr.length=0,wr.originalTransform&&Qe.push(wr.originalTransform),wr.paddingTop>0?(nr.push("".concat(wr.paddingTop,"px")),Qe.push("translateY(".concat(-wr.paddingTop,"px)"))):nr.push(0),wr.paddingRight>0?nr.push("".concat(wr.paddingRight/wr.scale,"px")):nr.push(0),wr.paddingBottom>0?nr.push("".concat(wr.paddingBottom,"px")):nr.push(0),wr.paddingLeft>0?(nr.push("".concat(wr.paddingLeft/wr.scale,"px")),Qe.push("translateX(".concat(-wr.paddingLeft/wr.scale,"px)"))):nr.push(0),br.style.padding=nr.join(" "),Qe.length&&(br.style.transform=Qe.join(" "))):(br.style.padding=null,br.style.transform=wr.originalTransform))}}}}]),Xe}();function Ye(Xe){var Ke=new Ge({textContent:Xe.textContent,textContentStream:Xe.textContentStream,container:Xe.container,viewport:Xe.viewport,textDivs:Xe.textDivs,textContentItemsStr:Xe.textContentItemsStr,enhanceTextSelection:Xe.enhanceTextSelection});return Ke._render(Xe.timeout),Ke}},(Re,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SVGGraphics=void 0;var Pe=t(1),Me=t(147),Ie=t(3);function Be(lr){return Ce(lr)||_e(lr)||Ee(lr)||ke()}function ke(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _e(lr){if(typeof Symbol!="undefined"&&lr[Symbol.iterator]!=null||lr["@@iterator"]!=null)return Array.from(lr)}function Ce(lr){if(Array.isArray(lr))return Ae(lr)}function Te(lr,fr){return r(lr)||xe(lr,fr)||Ee(lr,fr)||Se()}function Se(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xe(lr,fr){var $e=lr==null?null:typeof Symbol!="undefined"&&lr[Symbol.iterator]||lr["@@iterator"];if($e!=null){var Ve=[],Je=!0,Ze=!1,St,vr;try{for($e=$e.call(lr);!(Je=(St=$e.next()).done)&&(Ve.push(St.value),!(fr&&Ve.length===fr));Je=!0);}catch(mr){Ze=!0,vr=mr}finally{try{!Je&&$e.return!=null&&$e.return()}finally{if(Ze)throw vr}}return Ve}}function r(lr){if(Array.isArray(lr))return lr}function Oe(lr,fr){var $e=typeof Symbol!="undefined"&&lr[Symbol.iterator]||lr["@@iterator"];if(!$e){if(Array.isArray(lr)||($e=Ee(lr))||fr&&lr&&typeof lr.length=="number"){$e&&(lr=$e);var Ve=0,Je=function(){};return{s:Je,n:function(){return Ve>=lr.length?{done:!0}:{done:!1,value:lr[Ve++]}},e:function(Cr){throw Cr},f:Je}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ze=!0,St=!1,vr;return{s:function(){$e=$e.call(lr)},n:function(){var Cr=$e.next();return Ze=Cr.done,Cr},e:function(Cr){St=!0,vr=Cr},f:function(){try{!Ze&&$e.return!=null&&$e.return()}finally{if(St)throw vr}}}}function Ee(lr,fr){if(!!lr){if(typeof lr=="string")return Ae(lr,fr);var $e=Object.prototype.toString.call(lr).slice(8,-1);if($e==="Object"&&lr.constructor&&($e=lr.constructor.name),$e==="Map"||$e==="Set")return Array.from(lr);if($e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test($e))return Ae(lr,fr)}}function Ae(lr,fr){(fr==null||fr>lr.length)&&(fr=lr.length);for(var $e=0,Ve=new Array(fr);$e<fr;$e++)Ve[$e]=lr[$e];return Ve}function Fe(lr,fr){for(var $e=0;$e<fr.length;$e++){var Ve=fr[$e];Ve.enumerable=Ve.enumerable||!1,Ve.configurable=!0,"value"in Ve&&(Ve.writable=!0),Object.defineProperty(lr,Ve.key,Ve)}}function De(lr,fr,$e){return fr&&Fe(lr.prototype,fr),$e&&Fe(lr,$e),Object.defineProperty(lr,"prototype",{writable:!1}),lr}function ze(lr,fr){if(!(lr instanceof fr))throw new TypeError("Cannot call a class as a function")}var je=De(function lr(){ze(this,lr),(0,Pe.unreachable)("Not implemented: SVGGraphics")});e.SVGGraphics=je;{var We=function(fr){var $e=[],Ve=[],Je=Oe(fr),Ze;try{for(Je.s();!(Ze=Je.n()).done;){var St=Ze.value;if(St.fn==="save"){$e.push({fnId:92,fn:"group",items:[]}),Ve.push($e),$e=$e[$e.length-1].items;continue}St.fn==="restore"?$e=Ve.pop():$e.push(St)}}catch(vr){Je.e(vr)}finally{Je.f()}return $e},Ge=function(fr){if(Number.isInteger(fr))return fr.toString();var $e=fr.toFixed(10),Ve=$e.length-1;if($e[Ve]!=="0")return $e;do Ve--;while($e[Ve]==="0");return $e.substring(0,$e[Ve]==="."?Ve:Ve+1)},Ye=function(fr){if(fr[4]===0&&fr[5]===0){if(fr[1]===0&&fr[2]===0)return fr[0]===1&&fr[3]===1?"":"scale(".concat(Ge(fr[0])," ").concat(Ge(fr[3]),")");if(fr[0]===fr[3]&&fr[1]===-fr[2]){var $e=Math.acos(fr[0])*180/Math.PI;return"rotate(".concat(Ge($e),")")}}else if(fr[0]===1&&fr[1]===0&&fr[2]===0&&fr[3]===1)return"translate(".concat(Ge(fr[4])," ").concat(Ge(fr[5]),")");return"matrix(".concat(Ge(fr[0])," ").concat(Ge(fr[1])," ").concat(Ge(fr[2])," ").concat(Ge(fr[3])," ").concat(Ge(fr[4])," ")+"".concat(Ge(fr[5]),")")},Xe={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},Ke="http://www.w3.org/XML/1998/namespace",er="http://www.w3.org/1999/xlink",Qe=["butt","round","square"],nr=["miter","round","bevel"],ir=function(fr){var $e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",Ve=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(URL.createObjectURL&&typeof Blob!="undefined"&&!Ve)return URL.createObjectURL(new Blob([fr],{type:$e}));for(var Je="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Ze="data:".concat($e,";base64,"),St=0,vr=fr.length;St<vr;St+=3){var mr=fr[St]&255,Cr=fr[St+1]&255,_r=fr[St+2]&255,pr=mr>>2,dr=(mr&3)<<4|Cr>>4,ur=St+1<vr?(Cr&15)<<2|_r>>6:64,rr=St+2<vr?_r&63:64;Ze+=Je[pr]+Je[dr]+Je[ur]+Je[rr]}return Ze},cr=function(){for(var lr=new Uint8Array([137,80,78,71,13,10,26,10]),fr=12,$e=new Int32Array(256),Ve=0;Ve<256;Ve++){for(var Je=Ve,Ze=0;Ze<8;Ze++)Je&1?Je=3988292384^Je>>1&2147483647:Je=Je>>1&2147483647;$e[Ve]=Je}function St(dr,ur,rr){for(var gr=-1,hr=ur;hr<rr;hr++){var sr=(gr^dr[hr])&255,Ar=$e[sr];gr=gr>>>8^Ar}return gr^-1}function vr(dr,ur,rr,gr){var hr=gr,sr=ur.length;rr[hr]=sr>>24&255,rr[hr+1]=sr>>16&255,rr[hr+2]=sr>>8&255,rr[hr+3]=sr&255,hr+=4,rr[hr]=dr.charCodeAt(0)&255,rr[hr+1]=dr.charCodeAt(1)&255,rr[hr+2]=dr.charCodeAt(2)&255,rr[hr+3]=dr.charCodeAt(3)&255,hr+=4,rr.set(ur,hr),hr+=ur.length;var Ar=St(rr,gr+4,hr);rr[hr]=Ar>>24&255,rr[hr+1]=Ar>>16&255,rr[hr+2]=Ar>>8&255,rr[hr+3]=Ar&255}function mr(dr,ur,rr){for(var gr=1,hr=0,sr=ur;sr<rr;++sr)gr=(gr+(dr[sr]&255))%65521,hr=(hr+gr)%65521;return hr<<16|gr}function Cr(dr){if(!Ie.isNodeJS)return _r(dr);try{var ur;parseInt(process.versions.node)>=8?ur=dr:ur=Buffer.from(dr);var rr=require("zlib").deflateSync(ur,{level:9});return rr instanceof Uint8Array?rr:new Uint8Array(rr)}catch(gr){(0,Pe.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+gr)}return _r(dr)}function _r(dr){var ur=dr.length,rr=65535,gr=Math.ceil(ur/rr),hr=new Uint8Array(2+ur+gr*5+4),sr=0;hr[sr++]=120,hr[sr++]=156;for(var Ar=0;ur>rr;)hr[sr++]=0,hr[sr++]=255,hr[sr++]=255,hr[sr++]=0,hr[sr++]=0,hr.set(dr.subarray(Ar,Ar+rr),sr),sr+=rr,Ar+=rr,ur-=rr;hr[sr++]=1,hr[sr++]=ur&255,hr[sr++]=ur>>8&255,hr[sr++]=~ur&65535&255,hr[sr++]=(~ur&65535)>>8&255,hr.set(dr.subarray(Ar),sr),sr+=dr.length-Ar;var Or=mr(dr,0,dr.length);return hr[sr++]=Or>>24&255,hr[sr++]=Or>>16&255,hr[sr++]=Or>>8&255,hr[sr++]=Or&255,hr}function pr(dr,ur,rr,gr){var hr=dr.width,sr=dr.height,Ar,Or,Mr,Gr=dr.data;switch(ur){case Pe.ImageKind.GRAYSCALE_1BPP:Or=0,Ar=1,Mr=hr+7>>3;break;case Pe.ImageKind.RGB_24BPP:Or=2,Ar=8,Mr=hr*3;break;case Pe.ImageKind.RGBA_32BPP:Or=6,Ar=8,Mr=hr*4;break;default:throw new Error("invalid format")}for(var zr=new Uint8Array((1+Mr)*sr),Ir=0,Qr=0,rn=0;rn<sr;++rn)zr[Ir++]=0,zr.set(Gr.subarray(Qr,Qr+Mr),Ir),Qr+=Mr,Ir+=Mr;if(ur===Pe.ImageKind.GRAYSCALE_1BPP&&gr){Ir=0;for(var sn=0;sn<sr;sn++){Ir++;for(var pn=0;pn<Mr;pn++)zr[Ir++]^=255}}var mn=new Uint8Array([hr>>24&255,hr>>16&255,hr>>8&255,hr&255,sr>>24&255,sr>>16&255,sr>>8&255,sr&255,Ar,Or,0,0,0]),Sn=Cr(zr),Cn=lr.length+fr*3+mn.length+Sn.length,Xr=new Uint8Array(Cn),Er=0;return Xr.set(lr,Er),Er+=lr.length,vr("IHDR",mn,Xr,Er),Er+=fr+mn.length,vr("IDATA",Sn,Xr,Er),Er+=fr+Sn.length,vr("IEND",new Uint8Array(0),Xr,Er),ir(Xr,"image/png",rr)}return function(ur,rr,gr){var hr=ur.kind===void 0?Pe.ImageKind.GRAYSCALE_1BPP:ur.kind;return pr(ur,hr,rr,gr)}}(),br=function(){function lr(){ze(this,lr),this.fontSizeScale=1,this.fontWeight=Xe.fontWeight,this.fontSize=0,this.textMatrix=Pe.IDENTITY_MATRIX,this.fontMatrix=Pe.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=Pe.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=Xe.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}return De(lr,[{key:"clone",value:function(){return Object.create(this)}},{key:"setCurrentPoint",value:function($e,Ve){this.x=$e,this.y=Ve}}]),lr}(),wr=0,xr=0,Sr=0;e.SVGGraphics=je=function(){function lr(fr,$e){var Ve=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;ze(this,lr),this.svgFactory=new Me.DOMSVGFactory,this.current=new br,this.transformMatrix=Pe.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=fr,this.objs=$e,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!Ve,this._operatorIdMapping=[];for(var Je in Pe.OPS)this._operatorIdMapping[Pe.OPS[Je]]=Je}return De(lr,[{key:"save",value:function(){this.transformStack.push(this.transformMatrix);var $e=this.current;this.extraStack.push($e),this.current=$e.clone()}},{key:"restore",value:function(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}},{key:"group",value:function($e){this.save(),this.executeOpTree($e),this.restore()}},{key:"loadDependencies",value:function($e){for(var Ve=this,Je=$e.fnArray,Ze=$e.argsArray,St=0,vr=Je.length;St<vr;St++)if(Je[St]===Pe.OPS.dependency){var mr=Oe(Ze[St]),Cr;try{var _r=function(){var dr=Cr.value,ur=dr.startsWith("g_")?Ve.commonObjs:Ve.objs,rr=new Promise(function(gr){ur.get(dr,gr)});Ve.current.dependencies.push(rr)};for(mr.s();!(Cr=mr.n()).done;)_r()}catch(pr){mr.e(pr)}finally{mr.f()}}return Promise.all(this.current.dependencies)}},{key:"transform",value:function($e,Ve,Je,Ze,St,vr){var mr=[$e,Ve,Je,Ze,St,vr];this.transformMatrix=Pe.Util.transform(this.transformMatrix,mr),this.tgrp=null}},{key:"getSVG",value:function($e,Ve){var Je=this;this.viewport=Ve;var Ze=this._initialize(Ve);return this.loadDependencies($e).then(function(){return Je.transformMatrix=Pe.IDENTITY_MATRIX,Je.executeOpTree(Je.convertOpList($e)),Ze})}},{key:"convertOpList",value:function($e){for(var Ve=this._operatorIdMapping,Je=$e.argsArray,Ze=$e.fnArray,St=[],vr=0,mr=Ze.length;vr<mr;vr++){var Cr=Ze[vr];St.push({fnId:Cr,fn:Ve[Cr],args:Je[vr]})}return We(St)}},{key:"executeOpTree",value:function($e){var Ve=Oe($e),Je;try{for(Ve.s();!(Je=Ve.n()).done;){var Ze=Je.value,St=Ze.fn,vr=Ze.fnId,mr=Ze.args;switch(vr|0){case Pe.OPS.beginText:this.beginText();break;case Pe.OPS.dependency:break;case Pe.OPS.setLeading:this.setLeading(mr);break;case Pe.OPS.setLeadingMoveText:this.setLeadingMoveText(mr[0],mr[1]);break;case Pe.OPS.setFont:this.setFont(mr);break;case Pe.OPS.showText:this.showText(mr[0]);break;case Pe.OPS.showSpacedText:this.showText(mr[0]);break;case Pe.OPS.endText:this.endText();break;case Pe.OPS.moveText:this.moveText(mr[0],mr[1]);break;case Pe.OPS.setCharSpacing:this.setCharSpacing(mr[0]);break;case Pe.OPS.setWordSpacing:this.setWordSpacing(mr[0]);break;case Pe.OPS.setHScale:this.setHScale(mr[0]);break;case Pe.OPS.setTextMatrix:this.setTextMatrix(mr[0],mr[1],mr[2],mr[3],mr[4],mr[5]);break;case Pe.OPS.setTextRise:this.setTextRise(mr[0]);break;case Pe.OPS.setTextRenderingMode:this.setTextRenderingMode(mr[0]);break;case Pe.OPS.setLineWidth:this.setLineWidth(mr[0]);break;case Pe.OPS.setLineJoin:this.setLineJoin(mr[0]);break;case Pe.OPS.setLineCap:this.setLineCap(mr[0]);break;case Pe.OPS.setMiterLimit:this.setMiterLimit(mr[0]);break;case Pe.OPS.setFillRGBColor:this.setFillRGBColor(mr[0],mr[1],mr[2]);break;case Pe.OPS.setStrokeRGBColor:this.setStrokeRGBColor(mr[0],mr[1],mr[2]);break;case Pe.OPS.setStrokeColorN:this.setStrokeColorN(mr);break;case Pe.OPS.setFillColorN:this.setFillColorN(mr);break;case Pe.OPS.shadingFill:this.shadingFill(mr[0]);break;case Pe.OPS.setDash:this.setDash(mr[0],mr[1]);break;case Pe.OPS.setRenderingIntent:this.setRenderingIntent(mr[0]);break;case Pe.OPS.setFlatness:this.setFlatness(mr[0]);break;case Pe.OPS.setGState:this.setGState(mr[0]);break;case Pe.OPS.fill:this.fill();break;case Pe.OPS.eoFill:this.eoFill();break;case Pe.OPS.stroke:this.stroke();break;case Pe.OPS.fillStroke:this.fillStroke();break;case Pe.OPS.eoFillStroke:this.eoFillStroke();break;case Pe.OPS.clip:this.clip("nonzero");break;case Pe.OPS.eoClip:this.clip("evenodd");break;case Pe.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case Pe.OPS.paintImageXObject:this.paintImageXObject(mr[0]);break;case Pe.OPS.paintInlineImageXObject:this.paintInlineImageXObject(mr[0]);break;case Pe.OPS.paintImageMaskXObject:this.paintImageMaskXObject(mr[0]);break;case Pe.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(mr[0],mr[1]);break;case Pe.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case Pe.OPS.closePath:this.closePath();break;case Pe.OPS.closeStroke:this.closeStroke();break;case Pe.OPS.closeFillStroke:this.closeFillStroke();break;case Pe.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case Pe.OPS.nextLine:this.nextLine();break;case Pe.OPS.transform:this.transform(mr[0],mr[1],mr[2],mr[3],mr[4],mr[5]);break;case Pe.OPS.constructPath:this.constructPath(mr[0],mr[1]);break;case Pe.OPS.endPath:this.endPath();break;case 92:this.group(Ze.items);break;default:(0,Pe.warn)("Unimplemented operator ".concat(St));break}}}catch(Cr){Ve.e(Cr)}finally{Ve.f()}}},{key:"setWordSpacing",value:function($e){this.current.wordSpacing=$e}},{key:"setCharSpacing",value:function($e){this.current.charSpacing=$e}},{key:"nextLine",value:function(){this.moveText(0,this.current.leading)}},{key:"setTextMatrix",value:function($e,Ve,Je,Ze,St,vr){var mr=this.current;mr.textMatrix=mr.lineMatrix=[$e,Ve,Je,Ze,St,vr],mr.textMatrixScale=Math.hypot($e,Ve),mr.x=mr.lineX=0,mr.y=mr.lineY=0,mr.xcoords=[],mr.ycoords=[],mr.tspan=this.svgFactory.createElement("svg:tspan"),mr.tspan.setAttributeNS(null,"font-family",mr.fontFamily),mr.tspan.setAttributeNS(null,"font-size","".concat(Ge(mr.fontSize),"px")),mr.tspan.setAttributeNS(null,"y",Ge(-mr.y)),mr.txtElement=this.svgFactory.createElement("svg:text"),mr.txtElement.appendChild(mr.tspan)}},{key:"beginText",value:function(){var $e=this.current;$e.x=$e.lineX=0,$e.y=$e.lineY=0,$e.textMatrix=Pe.IDENTITY_MATRIX,$e.lineMatrix=Pe.IDENTITY_MATRIX,$e.textMatrixScale=1,$e.tspan=this.svgFactory.createElement("svg:tspan"),$e.txtElement=this.svgFactory.createElement("svg:text"),$e.txtgrp=this.svgFactory.createElement("svg:g"),$e.xcoords=[],$e.ycoords=[]}},{key:"moveText",value:function($e,Ve){var Je=this.current;Je.x=Je.lineX+=$e,Je.y=Je.lineY+=Ve,Je.xcoords=[],Je.ycoords=[],Je.tspan=this.svgFactory.createElement("svg:tspan"),Je.tspan.setAttributeNS(null,"font-family",Je.fontFamily),Je.tspan.setAttributeNS(null,"font-size","".concat(Ge(Je.fontSize),"px")),Je.tspan.setAttributeNS(null,"y",Ge(-Je.y))}},{key:"showText",value:function($e){var Ve=this.current,Je=Ve.font,Ze=Ve.fontSize;if(Ze!==0){var St=Ve.fontSizeScale,vr=Ve.charSpacing,mr=Ve.wordSpacing,Cr=Ve.fontDirection,_r=Ve.textHScale*Cr,pr=Je.vertical,dr=pr?1:-1,ur=Je.defaultVMetrics,rr=Ze*Ve.fontMatrix[0],gr=0,hr=Oe($e),sr;try{for(hr.s();!(sr=hr.n()).done;){var Ar=sr.value;if(Ar===null){gr+=Cr*mr;continue}else if(typeof Ar=="number"){gr+=dr*Ar*Ze/1e3;continue}var Or=(Ar.isSpace?mr:0)+vr,Mr=Ar.fontChar,Gr=void 0,zr=void 0,Ir=Ar.width;if(pr){var Qr=void 0,rn=Ar.vmetric||ur;Qr=Ar.vmetric?rn[1]:Ir*.5,Qr=-Qr*rr;var sn=rn[2]*rr;Ir=rn?-rn[0]:Ir,Gr=Qr/St,zr=(gr+sn)/St}else Gr=gr/St,zr=0;(Ar.isInFont||Je.missingFile)&&(Ve.xcoords.push(Ve.x+Gr),pr&&Ve.ycoords.push(-Ve.y+zr),Ve.tspan.textContent+=Mr);var pn=void 0;pr?pn=Ir*rr-Or*Cr:pn=Ir*rr+Or*Cr,gr+=pn}}catch(Xr){hr.e(Xr)}finally{hr.f()}Ve.tspan.setAttributeNS(null,"x",Ve.xcoords.map(Ge).join(" ")),pr?Ve.tspan.setAttributeNS(null,"y",Ve.ycoords.map(Ge).join(" ")):Ve.tspan.setAttributeNS(null,"y",Ge(-Ve.y)),pr?Ve.y-=gr:Ve.x+=gr*_r,Ve.tspan.setAttributeNS(null,"font-family",Ve.fontFamily),Ve.tspan.setAttributeNS(null,"font-size","".concat(Ge(Ve.fontSize),"px")),Ve.fontStyle!==Xe.fontStyle&&Ve.tspan.setAttributeNS(null,"font-style",Ve.fontStyle),Ve.fontWeight!==Xe.fontWeight&&Ve.tspan.setAttributeNS(null,"font-weight",Ve.fontWeight);var mn=Ve.textRenderingMode&Pe.TextRenderingMode.FILL_STROKE_MASK;if(mn===Pe.TextRenderingMode.FILL||mn===Pe.TextRenderingMode.FILL_STROKE?(Ve.fillColor!==Xe.fillColor&&Ve.tspan.setAttributeNS(null,"fill",Ve.fillColor),Ve.fillAlpha<1&&Ve.tspan.setAttributeNS(null,"fill-opacity",Ve.fillAlpha)):Ve.textRenderingMode===Pe.TextRenderingMode.ADD_TO_PATH?Ve.tspan.setAttributeNS(null,"fill","transparent"):Ve.tspan.setAttributeNS(null,"fill","none"),mn===Pe.TextRenderingMode.STROKE||mn===Pe.TextRenderingMode.FILL_STROKE){var Sn=1/(Ve.textMatrixScale||1);this._setStrokeAttributes(Ve.tspan,Sn)}var Cn=Ve.textMatrix;Ve.textRise!==0&&(Cn=Cn.slice(),Cn[5]+=Ve.textRise),Ve.txtElement.setAttributeNS(null,"transform","".concat(Ye(Cn)," scale(").concat(Ge(_r),", -1)")),Ve.txtElement.setAttributeNS(Ke,"xml:space","preserve"),Ve.txtElement.appendChild(Ve.tspan),Ve.txtgrp.appendChild(Ve.txtElement),this._ensureTransformGroup().appendChild(Ve.txtElement)}}},{key:"setLeadingMoveText",value:function($e,Ve){this.setLeading(-Ve),this.moveText($e,Ve)}},{key:"addFontStyle",value:function($e){if(!$e.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.appendChild(this.cssStyle));var Ve=ir($e.data,$e.mimetype,this.forceDataSchema);this.cssStyle.textContent+='@font-face { font-family: "'.concat($e.loadedName,'";')+" src: url(".concat(Ve,`); }
`)}},{key:"setFont",value:function($e){var Ve=this.current,Je=this.commonObjs.get($e[0]),Ze=$e[1];Ve.font=Je,this.embedFonts&&!Je.missingFile&&!this.embeddedFonts[Je.loadedName]&&(this.addFontStyle(Je),this.embeddedFonts[Je.loadedName]=Je),Ve.fontMatrix=Je.fontMatrix||Pe.FONT_IDENTITY_MATRIX;var St="normal";Je.black?St="900":Je.bold&&(St="bold");var vr=Je.italic?"italic":"normal";Ze<0?(Ze=-Ze,Ve.fontDirection=-1):Ve.fontDirection=1,Ve.fontSize=Ze,Ve.fontFamily=Je.loadedName,Ve.fontWeight=St,Ve.fontStyle=vr,Ve.tspan=this.svgFactory.createElement("svg:tspan"),Ve.tspan.setAttributeNS(null,"y",Ge(-Ve.y)),Ve.xcoords=[],Ve.ycoords=[]}},{key:"endText",value:function(){var $e,Ve=this.current;Ve.textRenderingMode&Pe.TextRenderingMode.ADD_TO_PATH_FLAG&&($e=Ve.txtElement)!==null&&$e!==void 0&&$e.hasChildNodes()&&(Ve.element=Ve.txtElement,this.clip("nonzero"),this.endPath())}},{key:"setLineWidth",value:function($e){$e>0&&(this.current.lineWidth=$e)}},{key:"setLineCap",value:function($e){this.current.lineCap=Qe[$e]}},{key:"setLineJoin",value:function($e){this.current.lineJoin=nr[$e]}},{key:"setMiterLimit",value:function($e){this.current.miterLimit=$e}},{key:"setStrokeAlpha",value:function($e){this.current.strokeAlpha=$e}},{key:"setStrokeRGBColor",value:function($e,Ve,Je){this.current.strokeColor=Pe.Util.makeHexColor($e,Ve,Je)}},{key:"setFillAlpha",value:function($e){this.current.fillAlpha=$e}},{key:"setFillRGBColor",value:function($e,Ve,Je){this.current.fillColor=Pe.Util.makeHexColor($e,Ve,Je),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}},{key:"setStrokeColorN",value:function($e){this.current.strokeColor=this._makeColorN_Pattern($e)}},{key:"setFillColorN",value:function($e){this.current.fillColor=this._makeColorN_Pattern($e)}},{key:"shadingFill",value:function($e){var Ve=this.viewport.width,Je=this.viewport.height,Ze=Pe.Util.inverseTransform(this.transformMatrix),St=Pe.Util.applyTransform([0,0],Ze),vr=Pe.Util.applyTransform([0,Je],Ze),mr=Pe.Util.applyTransform([Ve,0],Ze),Cr=Pe.Util.applyTransform([Ve,Je],Ze),_r=Math.min(St[0],vr[0],mr[0],Cr[0]),pr=Math.min(St[1],vr[1],mr[1],Cr[1]),dr=Math.max(St[0],vr[0],mr[0],Cr[0]),ur=Math.max(St[1],vr[1],mr[1],Cr[1]),rr=this.svgFactory.createElement("svg:rect");rr.setAttributeNS(null,"x",_r),rr.setAttributeNS(null,"y",pr),rr.setAttributeNS(null,"width",dr-_r),rr.setAttributeNS(null,"height",ur-pr),rr.setAttributeNS(null,"fill",this._makeShadingPattern($e)),this.current.fillAlpha<1&&rr.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().appendChild(rr)}},{key:"_makeColorN_Pattern",value:function($e){return $e[0]==="TilingPattern"?this._makeTilingPattern($e):this._makeShadingPattern($e)}},{key:"_makeTilingPattern",value:function($e){var Ve=$e[1],Je=$e[2],Ze=$e[3]||Pe.IDENTITY_MATRIX,St=Te($e[4],4),vr=St[0],mr=St[1],Cr=St[2],_r=St[3],pr=$e[5],dr=$e[6],ur=$e[7],rr="shading".concat(Sr++),gr=Pe.Util.normalizeRect([].concat(Be(Pe.Util.applyTransform([vr,mr],Ze)),Be(Pe.Util.applyTransform([Cr,_r],Ze)))),hr=Te(gr,4),sr=hr[0],Ar=hr[1],Or=hr[2],Mr=hr[3],Gr=Pe.Util.singularValueDecompose2dScale(Ze),zr=Te(Gr,2),Ir=zr[0],Qr=zr[1],rn=pr*Ir,sn=dr*Qr,pn=this.svgFactory.createElement("svg:pattern");pn.setAttributeNS(null,"id",rr),pn.setAttributeNS(null,"patternUnits","userSpaceOnUse"),pn.setAttributeNS(null,"width",rn),pn.setAttributeNS(null,"height",sn),pn.setAttributeNS(null,"x","".concat(sr)),pn.setAttributeNS(null,"y","".concat(Ar));var mn=this.svg,Sn=this.transformMatrix,Cn=this.current.fillColor,Xr=this.current.strokeColor,Er=this.svgFactory.create(Or-sr,Mr-Ar);if(this.svg=Er,this.transformMatrix=Ze,ur===2){var Rr=Pe.Util.makeHexColor.apply(Pe.Util,Be(Ve));this.current.fillColor=Rr,this.current.strokeColor=Rr}return this.executeOpTree(this.convertOpList(Je)),this.svg=mn,this.transformMatrix=Sn,this.current.fillColor=Cn,this.current.strokeColor=Xr,pn.appendChild(Er.childNodes[0]),this.defs.appendChild(pn),"url(#".concat(rr,")")}},{key:"_makeShadingPattern",value:function($e){switch(typeof $e=="string"&&($e=this.objs.get($e)),$e[0]){case"RadialAxial":var Ve="shading".concat(Sr++),Je=$e[3],Ze;switch($e[1]){case"axial":var St=$e[4],vr=$e[5];Ze=this.svgFactory.createElement("svg:linearGradient"),Ze.setAttributeNS(null,"id",Ve),Ze.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),Ze.setAttributeNS(null,"x1",St[0]),Ze.setAttributeNS(null,"y1",St[1]),Ze.setAttributeNS(null,"x2",vr[0]),Ze.setAttributeNS(null,"y2",vr[1]);break;case"radial":var mr=$e[4],Cr=$e[5],_r=$e[6],pr=$e[7];Ze=this.svgFactory.createElement("svg:radialGradient"),Ze.setAttributeNS(null,"id",Ve),Ze.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),Ze.setAttributeNS(null,"cx",Cr[0]),Ze.setAttributeNS(null,"cy",Cr[1]),Ze.setAttributeNS(null,"r",pr),Ze.setAttributeNS(null,"fx",mr[0]),Ze.setAttributeNS(null,"fy",mr[1]),Ze.setAttributeNS(null,"fr",_r);break;default:throw new Error("Unknown RadialAxial type: ".concat($e[1]))}var dr=Oe(Je),ur;try{for(dr.s();!(ur=dr.n()).done;){var rr=ur.value,gr=this.svgFactory.createElement("svg:stop");gr.setAttributeNS(null,"offset",rr[0]),gr.setAttributeNS(null,"stop-color",rr[1]),Ze.appendChild(gr)}}catch(hr){dr.e(hr)}finally{dr.f()}return this.defs.appendChild(Ze),"url(#".concat(Ve,")");case"Mesh":return(0,Pe.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error("Unknown IR type: ".concat($e[0]))}}},{key:"setDash",value:function($e,Ve){this.current.dashArray=$e,this.current.dashPhase=Ve}},{key:"constructPath",value:function($e,Ve){var Je=this.current,Ze=Je.x,St=Je.y,vr=[],mr=0,Cr=Oe($e),_r;try{for(Cr.s();!(_r=Cr.n()).done;){var pr=_r.value;switch(pr|0){case Pe.OPS.rectangle:Ze=Ve[mr++],St=Ve[mr++];var dr=Ve[mr++],ur=Ve[mr++],rr=Ze+dr,gr=St+ur;vr.push("M",Ge(Ze),Ge(St),"L",Ge(rr),Ge(St),"L",Ge(rr),Ge(gr),"L",Ge(Ze),Ge(gr),"Z");break;case Pe.OPS.moveTo:Ze=Ve[mr++],St=Ve[mr++],vr.push("M",Ge(Ze),Ge(St));break;case Pe.OPS.lineTo:Ze=Ve[mr++],St=Ve[mr++],vr.push("L",Ge(Ze),Ge(St));break;case Pe.OPS.curveTo:Ze=Ve[mr+4],St=Ve[mr+5],vr.push("C",Ge(Ve[mr]),Ge(Ve[mr+1]),Ge(Ve[mr+2]),Ge(Ve[mr+3]),Ge(Ze),Ge(St)),mr+=6;break;case Pe.OPS.curveTo2:vr.push("C",Ge(Ze),Ge(St),Ge(Ve[mr]),Ge(Ve[mr+1]),Ge(Ve[mr+2]),Ge(Ve[mr+3])),Ze=Ve[mr+2],St=Ve[mr+3],mr+=4;break;case Pe.OPS.curveTo3:Ze=Ve[mr+2],St=Ve[mr+3],vr.push("C",Ge(Ve[mr]),Ge(Ve[mr+1]),Ge(Ze),Ge(St),Ge(Ze),Ge(St)),mr+=4;break;case Pe.OPS.closePath:vr.push("Z");break}}}catch(hr){Cr.e(hr)}finally{Cr.f()}vr=vr.join(" "),Je.path&&$e.length>0&&$e[0]!==Pe.OPS.rectangle&&$e[0]!==Pe.OPS.moveTo?vr=Je.path.getAttributeNS(null,"d")+vr:(Je.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().appendChild(Je.path)),Je.path.setAttributeNS(null,"d",vr),Je.path.setAttributeNS(null,"fill","none"),Je.element=Je.path,Je.setCurrentPoint(Ze,St)}},{key:"endPath",value:function(){var $e=this.current;if($e.path=null,!!this.pendingClip){if(!$e.element){this.pendingClip=null;return}var Ve="clippath".concat(wr++),Je=this.svgFactory.createElement("svg:clipPath");Je.setAttributeNS(null,"id",Ve),Je.setAttributeNS(null,"transform",Ye(this.transformMatrix));var Ze=$e.element.cloneNode(!0);if(this.pendingClip==="evenodd"?Ze.setAttributeNS(null,"clip-rule","evenodd"):Ze.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,Je.appendChild(Ze),this.defs.appendChild(Je),$e.activeClipUrl){$e.clipGroup=null;var St=Oe(this.extraStack),vr;try{for(St.s();!(vr=St.n()).done;){var mr=vr.value;mr.clipGroup=null}}catch(Cr){St.e(Cr)}finally{St.f()}Je.setAttributeNS(null,"clip-path",$e.activeClipUrl)}$e.activeClipUrl="url(#".concat(Ve,")"),this.tgrp=null}}},{key:"clip",value:function($e){this.pendingClip=$e}},{key:"closePath",value:function(){var $e=this.current;if($e.path){var Ve="".concat($e.path.getAttributeNS(null,"d"),"Z");$e.path.setAttributeNS(null,"d",Ve)}}},{key:"setLeading",value:function($e){this.current.leading=-$e}},{key:"setTextRise",value:function($e){this.current.textRise=$e}},{key:"setTextRenderingMode",value:function($e){this.current.textRenderingMode=$e}},{key:"setHScale",value:function($e){this.current.textHScale=$e/100}},{key:"setRenderingIntent",value:function($e){}},{key:"setFlatness",value:function($e){}},{key:"setGState",value:function($e){var Ve=Oe($e),Je;try{for(Ve.s();!(Je=Ve.n()).done;){var Ze=Te(Je.value,2),St=Ze[0],vr=Ze[1];switch(St){case"LW":this.setLineWidth(vr);break;case"LC":this.setLineCap(vr);break;case"LJ":this.setLineJoin(vr);break;case"ML":this.setMiterLimit(vr);break;case"D":this.setDash(vr[0],vr[1]);break;case"RI":this.setRenderingIntent(vr);break;case"FL":this.setFlatness(vr);break;case"Font":this.setFont(vr);break;case"CA":this.setStrokeAlpha(vr);break;case"ca":this.setFillAlpha(vr);break;default:(0,Pe.warn)("Unimplemented graphic state operator ".concat(St));break}}}catch(mr){Ve.e(mr)}finally{Ve.f()}}},{key:"fill",value:function(){var $e=this.current;$e.element&&($e.element.setAttributeNS(null,"fill",$e.fillColor),$e.element.setAttributeNS(null,"fill-opacity",$e.fillAlpha),this.endPath())}},{key:"stroke",value:function(){var $e=this.current;$e.element&&(this._setStrokeAttributes($e.element),$e.element.setAttributeNS(null,"fill","none"),this.endPath())}},{key:"_setStrokeAttributes",value:function($e){var Ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,Je=this.current,Ze=Je.dashArray;Ve!==1&&Ze.length>0&&(Ze=Ze.map(function(St){return Ve*St})),$e.setAttributeNS(null,"stroke",Je.strokeColor),$e.setAttributeNS(null,"stroke-opacity",Je.strokeAlpha),$e.setAttributeNS(null,"stroke-miterlimit",Ge(Je.miterLimit)),$e.setAttributeNS(null,"stroke-linecap",Je.lineCap),$e.setAttributeNS(null,"stroke-linejoin",Je.lineJoin),$e.setAttributeNS(null,"stroke-width",Ge(Ve*Je.lineWidth)+"px"),$e.setAttributeNS(null,"stroke-dasharray",Ze.map(Ge).join(" ")),$e.setAttributeNS(null,"stroke-dashoffset",Ge(Ve*Je.dashPhase)+"px")}},{key:"eoFill",value:function(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}},{key:"fillStroke",value:function(){this.stroke(),this.fill()}},{key:"eoFillStroke",value:function(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}},{key:"closeStroke",value:function(){this.closePath(),this.stroke()}},{key:"closeFillStroke",value:function(){this.closePath(),this.fillStroke()}},{key:"closeEOFillStroke",value:function(){this.closePath(),this.eoFillStroke()}},{key:"paintSolidColorImageMask",value:function(){var $e=this.svgFactory.createElement("svg:rect");$e.setAttributeNS(null,"x","0"),$e.setAttributeNS(null,"y","0"),$e.setAttributeNS(null,"width","1px"),$e.setAttributeNS(null,"height","1px"),$e.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().appendChild($e)}},{key:"paintImageXObject",value:function($e){var Ve=$e.startsWith("g_")?this.commonObjs.get($e):this.objs.get($e);if(!Ve){(0,Pe.warn)("Dependent image with object ID ".concat($e," is not ready yet"));return}this.paintInlineImageXObject(Ve)}},{key:"paintInlineImageXObject",value:function($e,Ve){var Je=$e.width,Ze=$e.height,St=cr($e,this.forceDataSchema,!!Ve),vr=this.svgFactory.createElement("svg:rect");vr.setAttributeNS(null,"x","0"),vr.setAttributeNS(null,"y","0"),vr.setAttributeNS(null,"width",Ge(Je)),vr.setAttributeNS(null,"height",Ge(Ze)),this.current.element=vr,this.clip("nonzero");var mr=this.svgFactory.createElement("svg:image");mr.setAttributeNS(er,"xlink:href",St),mr.setAttributeNS(null,"x","0"),mr.setAttributeNS(null,"y",Ge(-Ze)),mr.setAttributeNS(null,"width",Ge(Je)+"px"),mr.setAttributeNS(null,"height",Ge(Ze)+"px"),mr.setAttributeNS(null,"transform","scale(".concat(Ge(1/Je)," ").concat(Ge(-1/Ze),")")),Ve?Ve.appendChild(mr):this._ensureTransformGroup().appendChild(mr)}},{key:"paintImageMaskXObject",value:function($e){var Ve=this.current,Je=$e.width,Ze=$e.height,St=Ve.fillColor;Ve.maskId="mask".concat(xr++);var vr=this.svgFactory.createElement("svg:mask");vr.setAttributeNS(null,"id",Ve.maskId);var mr=this.svgFactory.createElement("svg:rect");mr.setAttributeNS(null,"x","0"),mr.setAttributeNS(null,"y","0"),mr.setAttributeNS(null,"width",Ge(Je)),mr.setAttributeNS(null,"height",Ge(Ze)),mr.setAttributeNS(null,"fill",St),mr.setAttributeNS(null,"mask","url(#".concat(Ve.maskId,")")),this.defs.appendChild(vr),this._ensureTransformGroup().appendChild(mr),this.paintInlineImageXObject($e,vr)}},{key:"paintFormXObjectBegin",value:function($e,Ve){if(Array.isArray($e)&&$e.length===6&&this.transform($e[0],$e[1],$e[2],$e[3],$e[4],$e[5]),Ve){var Je=Ve[2]-Ve[0],Ze=Ve[3]-Ve[1],St=this.svgFactory.createElement("svg:rect");St.setAttributeNS(null,"x",Ve[0]),St.setAttributeNS(null,"y",Ve[1]),St.setAttributeNS(null,"width",Ge(Je)),St.setAttributeNS(null,"height",Ge(Ze)),this.current.element=St,this.clip("nonzero"),this.endPath()}}},{key:"paintFormXObjectEnd",value:function(){}},{key:"_initialize",value:function($e){var Ve=this.svgFactory.create($e.width,$e.height),Je=this.svgFactory.createElement("svg:defs");Ve.appendChild(Je),this.defs=Je;var Ze=this.svgFactory.createElement("svg:g");return Ze.setAttributeNS(null,"transform",Ye($e.transform)),Ve.appendChild(Ze),this.svg=Ze,Ve}},{key:"_ensureClipGroup",value:function(){if(!this.current.clipGroup){var $e=this.svgFactory.createElement("svg:g");$e.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.appendChild($e),this.current.clipGroup=$e}return this.current.clipGroup}},{key:"_ensureTransformGroup",value:function(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",Ye(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().appendChild(this.tgrp):this.svg.appendChild(this.tgrp)),this.tgrp}}]),lr}()}},(Re,e,t)=>{function Pe($e){return Pe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ve){return typeof Ve}:function(Ve){return Ve&&typeof Symbol=="function"&&Ve.constructor===Symbol&&Ve!==Symbol.prototype?"symbol":typeof Ve},Pe($e)}Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNodeStream=void 0;var Me=ke(t(145)),Ie=t(1),Be=t(166);function ke($e){return $e&&$e.__esModule?$e:{default:$e}}function _e($e,Ve){if(typeof Ve!="function"&&Ve!==null)throw new TypeError("Super expression must either be null or a function");$e.prototype=Object.create(Ve&&Ve.prototype,{constructor:{value:$e,writable:!0,configurable:!0}}),Object.defineProperty($e,"prototype",{writable:!1}),Ve&&Ce($e,Ve)}function Ce($e,Ve){return Ce=Object.setPrototypeOf||function(Ze,St){return Ze.__proto__=St,Ze},Ce($e,Ve)}function Te($e){var Ve=r();return function(){var Ze=Oe($e),St;if(Ve){var vr=Oe(this).constructor;St=Reflect.construct(Ze,arguments,vr)}else St=Ze.apply(this,arguments);return Se(this,St)}}function Se($e,Ve){if(Ve&&(Pe(Ve)==="object"||typeof Ve=="function"))return Ve;if(Ve!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xe($e)}function xe($e){if($e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $e}function r(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Oe($e){return Oe=Object.setPrototypeOf?Object.getPrototypeOf:function(Je){return Je.__proto__||Object.getPrototypeOf(Je)},Oe($e)}function Ee($e,Ve,Je,Ze,St,vr,mr){try{var Cr=$e[vr](mr),_r=Cr.value}catch(pr){Je(pr);return}Cr.done?Ve(_r):Promise.resolve(_r).then(Ze,St)}function Ae($e){return function(){var Ve=this,Je=arguments;return new Promise(function(Ze,St){var vr=$e.apply(Ve,Je);function mr(_r){Ee(vr,Ze,St,mr,Cr,"next",_r)}function Cr(_r){Ee(vr,Ze,St,mr,Cr,"throw",_r)}mr(void 0)})}}function Fe($e,Ve){var Je=typeof Symbol!="undefined"&&$e[Symbol.iterator]||$e["@@iterator"];if(!Je){if(Array.isArray($e)||(Je=De($e))||Ve&&$e&&typeof $e.length=="number"){Je&&($e=Je);var Ze=0,St=function(){};return{s:St,n:function(){return Ze>=$e.length?{done:!0}:{done:!1,value:$e[Ze++]}},e:function(pr){throw pr},f:St}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var vr=!0,mr=!1,Cr;return{s:function(){Je=Je.call($e)},n:function(){var pr=Je.next();return vr=pr.done,pr},e:function(pr){mr=!0,Cr=pr},f:function(){try{!vr&&Je.return!=null&&Je.return()}finally{if(mr)throw Cr}}}}function De($e,Ve){if(!!$e){if(typeof $e=="string")return ze($e,Ve);var Je=Object.prototype.toString.call($e).slice(8,-1);if(Je==="Object"&&$e.constructor&&(Je=$e.constructor.name),Je==="Map"||Je==="Set")return Array.from($e);if(Je==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Je))return ze($e,Ve)}}function ze($e,Ve){(Ve==null||Ve>$e.length)&&(Ve=$e.length);for(var Je=0,Ze=new Array(Ve);Je<Ve;Je++)Ze[Je]=$e[Je];return Ze}function je($e,Ve){if(!($e instanceof Ve))throw new TypeError("Cannot call a class as a function")}function We($e,Ve){for(var Je=0;Je<Ve.length;Je++){var Ze=Ve[Je];Ze.enumerable=Ze.enumerable||!1,Ze.configurable=!0,"value"in Ze&&(Ze.writable=!0),Object.defineProperty($e,Ze.key,Ze)}}function Ge($e,Ve,Je){return Ve&&We($e.prototype,Ve),Je&&We($e,Je),Object.defineProperty($e,"prototype",{writable:!1}),$e}var Ye=require$$5,Xe=require$$5,Ke=require$$5,er=require$$5,Qe=/^file:\/\/\/[a-zA-Z]:\//;function nr($e){var Ve=er.parse($e);return Ve.protocol==="file:"||Ve.host?Ve:/^[a-z]:[/\\]/i.test($e)?er.parse("file:///".concat($e)):(Ve.host||(Ve.protocol="file:"),Ve)}var ir=function(){function $e(Ve){je(this,$e),this.source=Ve,this.url=nr(Ve.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&Ve.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}return Ge($e,[{key:"_progressiveDataLength",get:function(){var Je,Ze;return(Je=(Ze=this._fullRequestReader)===null||Ze===void 0?void 0:Ze._loaded)!==null&&Je!==void 0?Je:0}},{key:"getFullReader",value:function(){return(0,Ie.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new lr(this):new xr(this),this._fullRequestReader}},{key:"getRangeReader",value:function(Je,Ze){if(Ze<=this._progressiveDataLength)return null;var St=this.isFsUrl?new fr(this,Je,Ze):new Sr(this,Je,Ze);return this._rangeRequestReaders.push(St),St}},{key:"cancelAllRequests",value:function(Je){this._fullRequestReader&&this._fullRequestReader.cancel(Je);var Ze=Fe(this._rangeRequestReaders.slice(0)),St;try{for(Ze.s();!(St=Ze.n()).done;){var vr=St.value;vr.cancel(Je)}}catch(mr){Ze.e(mr)}finally{Ze.f()}}}]),$e}();e.PDFNodeStream=ir;var cr=function(){function $e(Ve){je(this,$e),this._url=Ve.url,this._done=!1,this._storedError=null,this.onProgress=null;var Je=Ve.source;this._contentLength=Je.length,this._loaded=0,this._filename=null,this._disableRange=Je.disableRange||!1,this._rangeChunkSize=Je.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!Je.disableStream,this._isRangeSupported=!Je.disableRange,this._readableStream=null,this._readCapability=(0,Ie.createPromiseCapability)(),this._headersCapability=(0,Ie.createPromiseCapability)()}return Ge($e,[{key:"headersReady",get:function(){return this._headersCapability.promise}},{key:"filename",get:function(){return this._filename}},{key:"contentLength",get:function(){return this._contentLength}},{key:"isRangeSupported",get:function(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"read",value:function(){var Ve=Ae(Me.default.mark(function Ze(){var St,vr;return Me.default.wrap(function(Cr){for(;;)switch(Cr.prev=Cr.next){case 0:return Cr.next=2,this._readCapability.promise;case 2:if(!this._done){Cr.next=4;break}return Cr.abrupt("return",{value:void 0,done:!0});case 4:if(!this._storedError){Cr.next=6;break}throw this._storedError;case 6:if(St=this._readableStream.read(),St!==null){Cr.next=10;break}return this._readCapability=(0,Ie.createPromiseCapability)(),Cr.abrupt("return",this.read());case 10:return this._loaded+=St.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),vr=new Uint8Array(St).buffer,Cr.abrupt("return",{value:vr,done:!1});case 14:case"end":return Cr.stop()}},Ze,this)}));function Je(){return Ve.apply(this,arguments)}return Je}()},{key:"cancel",value:function(Je){if(!this._readableStream){this._error(Je);return}this._readableStream.destroy(Je)}},{key:"_error",value:function(Je){this._storedError=Je,this._readCapability.resolve()}},{key:"_setReadableStream",value:function(Je){var Ze=this;this._readableStream=Je,Je.on("readable",function(){Ze._readCapability.resolve()}),Je.on("end",function(){Je.destroy(),Ze._done=!0,Ze._readCapability.resolve()}),Je.on("error",function(St){Ze._error(St)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Ie.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}]),$e}(),br=function(){function $e(Ve){je(this,$e),this._url=Ve.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,Ie.createPromiseCapability)();var Je=Ve.source;this._isStreamingSupported=!Je.disableStream}return Ge($e,[{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"read",value:function(){var Ve=Ae(Me.default.mark(function Ze(){var St,vr;return Me.default.wrap(function(Cr){for(;;)switch(Cr.prev=Cr.next){case 0:return Cr.next=2,this._readCapability.promise;case 2:if(!this._done){Cr.next=4;break}return Cr.abrupt("return",{value:void 0,done:!0});case 4:if(!this._storedError){Cr.next=6;break}throw this._storedError;case 6:if(St=this._readableStream.read(),St!==null){Cr.next=10;break}return this._readCapability=(0,Ie.createPromiseCapability)(),Cr.abrupt("return",this.read());case 10:return this._loaded+=St.length,this.onProgress&&this.onProgress({loaded:this._loaded}),vr=new Uint8Array(St).buffer,Cr.abrupt("return",{value:vr,done:!1});case 14:case"end":return Cr.stop()}},Ze,this)}));function Je(){return Ve.apply(this,arguments)}return Je}()},{key:"cancel",value:function(Je){if(!this._readableStream){this._error(Je);return}this._readableStream.destroy(Je)}},{key:"_error",value:function(Je){this._storedError=Je,this._readCapability.resolve()}},{key:"_setReadableStream",value:function(Je){var Ze=this;this._readableStream=Je,Je.on("readable",function(){Ze._readCapability.resolve()}),Je.on("end",function(){Je.destroy(),Ze._done=!0,Ze._readCapability.resolve()}),Je.on("error",function(St){Ze._error(St)}),this._storedError&&this._readableStream.destroy(this._storedError)}}]),$e}();function wr($e,Ve){return{protocol:$e.protocol,auth:$e.auth,host:$e.hostname,port:$e.port,path:$e.path,method:"GET",headers:Ve}}var xr=function($e){_e(Je,$e);var Ve=Te(Je);function Je(Ze){var St;je(this,Je),St=Ve.call(this,Ze);var vr=function(Cr){if(Cr.statusCode===404){var _r=new Ie.MissingPDFException('Missing PDF "'.concat(St._url,'".'));St._storedError=_r,St._headersCapability.reject(_r);return}St._headersCapability.resolve(),St._setReadableStream(Cr);var pr=function(hr){return St._readableStream.headers[hr.toLowerCase()]},dr=(0,Be.validateRangeRequestCapabilities)({getResponseHeader:pr,isHttp:Ze.isHttp,rangeChunkSize:St._rangeChunkSize,disableRange:St._disableRange}),ur=dr.allowRangeRequests,rr=dr.suggestedLength;St._isRangeSupported=ur,St._contentLength=rr||St._contentLength,St._filename=(0,Be.extractFilenameFromHeader)(pr)};return St._request=null,St._url.protocol==="http:"?St._request=Xe.request(wr(St._url,Ze.httpHeaders),vr):St._request=Ke.request(wr(St._url,Ze.httpHeaders),vr),St._request.on("error",function(mr){St._storedError=mr,St._headersCapability.reject(mr)}),St._request.end(),St}return Ge(Je)}(cr),Sr=function($e){_e(Je,$e);var Ve=Te(Je);function Je(Ze,St,vr){var mr;je(this,Je),mr=Ve.call(this,Ze),mr._httpHeaders={};for(var Cr in Ze.httpHeaders){var _r=Ze.httpHeaders[Cr];typeof _r!="undefined"&&(mr._httpHeaders[Cr]=_r)}mr._httpHeaders.Range="bytes=".concat(St,"-").concat(vr-1);var pr=function(ur){if(ur.statusCode===404){var rr=new Ie.MissingPDFException('Missing PDF "'.concat(mr._url,'".'));mr._storedError=rr;return}mr._setReadableStream(ur)};return mr._request=null,mr._url.protocol==="http:"?mr._request=Xe.request(wr(mr._url,mr._httpHeaders),pr):mr._request=Ke.request(wr(mr._url,mr._httpHeaders),pr),mr._request.on("error",function(dr){mr._storedError=dr}),mr._request.end(),mr}return Ge(Je)}(br),lr=function($e){_e(Je,$e);var Ve=Te(Je);function Je(Ze){var St;je(this,Je),St=Ve.call(this,Ze);var vr=decodeURIComponent(St._url.path);return Qe.test(St._url.href)&&(vr=vr.replace(/^\//,"")),Ye.lstat(vr,function(mr,Cr){if(mr){mr.code==="ENOENT"&&(mr=new Ie.MissingPDFException('Missing PDF "'.concat(vr,'".'))),St._storedError=mr,St._headersCapability.reject(mr);return}St._contentLength=Cr.size,St._setReadableStream(Ye.createReadStream(vr)),St._headersCapability.resolve()}),St}return Ge(Je)}(cr),fr=function($e){_e(Je,$e);var Ve=Te(Je);function Je(Ze,St,vr){var mr;je(this,Je),mr=Ve.call(this,Ze);var Cr=decodeURIComponent(mr._url.path);return Qe.test(mr._url.href)&&(Cr=Cr.replace(/^\//,"")),mr._setReadableStream(Ye.createReadStream(Cr,{start:St,end:vr-1})),mr}return Ge(Je)}(br)},(Re,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createResponseStatusError=_e,e.extractFilenameFromHeader=ke,e.validateRangeRequestCapabilities=Be,e.validateResponseStatus=Ce;var Pe=t(1),Me=t(167),Ie=t(147);function Be(Te){var Se=Te.getResponseHeader,xe=Te.isHttp,r=Te.rangeChunkSize,Oe=Te.disableRange;(0,Pe.assert)(r>0,"Range chunk size must be larger than zero");var Ee={allowRangeRequests:!1,suggestedLength:void 0},Ae=parseInt(Se("Content-Length"),10);if(!Number.isInteger(Ae)||(Ee.suggestedLength=Ae,Ae<=2*r)||Oe||!xe||Se("Accept-Ranges")!=="bytes")return Ee;var Fe=Se("Content-Encoding")||"identity";return Fe!=="identity"||(Ee.allowRangeRequests=!0),Ee}function ke(Te){var Se=Te("Content-Disposition");if(Se){var xe=(0,Me.getFilenameFromContentDispositionHeader)(Se);if(xe.includes("%"))try{xe=decodeURIComponent(xe)}catch{}if((0,Ie.isPdfFile)(xe))return xe}return null}function _e(Te,Se){return Te===404||Te===0&&Se.startsWith("file:")?new Pe.MissingPDFException('Missing PDF "'+Se+'".'):new Pe.UnexpectedResponseException("Unexpected server response (".concat(Te,') while retrieving PDF "').concat(Se,'".'),Te)}function Ce(Te){return Te===200||Te===206}},(Re,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getFilenameFromContentDispositionHeader=Te;var Pe=t(1);function Me(Se,xe){return Ce(Se)||_e(Se,xe)||Be(Se,xe)||Ie()}function Ie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Be(Se,xe){if(!!Se){if(typeof Se=="string")return ke(Se,xe);var r=Object.prototype.toString.call(Se).slice(8,-1);if(r==="Object"&&Se.constructor&&(r=Se.constructor.name),r==="Map"||r==="Set")return Array.from(Se);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ke(Se,xe)}}function ke(Se,xe){(xe==null||xe>Se.length)&&(xe=Se.length);for(var r=0,Oe=new Array(xe);r<xe;r++)Oe[r]=Se[r];return Oe}function _e(Se,xe){var r=Se==null?null:typeof Symbol!="undefined"&&Se[Symbol.iterator]||Se["@@iterator"];if(r!=null){var Oe=[],Ee=!0,Ae=!1,Fe,De;try{for(r=r.call(Se);!(Ee=(Fe=r.next()).done)&&(Oe.push(Fe.value),!(xe&&Oe.length===xe));Ee=!0);}catch(ze){Ae=!0,De=ze}finally{try{!Ee&&r.return!=null&&r.return()}finally{if(Ae)throw De}}return Oe}}function Ce(Se){if(Array.isArray(Se))return Se}function Te(Se){var xe=!0,r=Fe("filename\\*","i").exec(Se);if(r){r=r[1];var Oe=We(r);return Oe=unescape(Oe),Oe=Ge(Oe),Oe=Ye(Oe),ze(Oe)}if(r=je(Se),r){var Ee=Ye(r);return ze(Ee)}if(r=Fe("filename","i").exec(Se),r){r=r[1];var Ae=We(r);return Ae=Ye(Ae),ze(Ae)}function Fe(Xe,Ke){return new RegExp("(?:^|;)\\s*"+Xe+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',Ke)}function De(Xe,Ke){if(Xe){if(!/^[\x00-\xFF]+$/.test(Ke))return Ke;try{var er=new TextDecoder(Xe,{fatal:!0}),Qe=(0,Pe.stringToBytes)(Ke);Ke=er.decode(Qe),xe=!1}catch{}}return Ke}function ze(Xe){return xe&&/[\x80-\xff]/.test(Xe)&&(Xe=De("utf-8",Xe),xe&&(Xe=De("iso-8859-1",Xe))),Xe}function je(Xe){for(var Ke=[],er,Qe=Fe("filename\\*((?!0\\d)\\d+)(\\*?)","ig");(er=Qe.exec(Xe))!==null;){var nr=er,ir=Me(nr,4),cr=ir[1],br=ir[2],wr=ir[3];if(cr=parseInt(cr,10),cr in Ke){if(cr===0)break;continue}Ke[cr]=[br,wr]}for(var xr=[],Sr=0;Sr<Ke.length&&Sr in Ke;++Sr){var lr=Me(Ke[Sr],2),fr=lr[0],$e=lr[1];$e=We($e),fr&&($e=unescape($e),Sr===0&&($e=Ge($e))),xr.push($e)}return xr.join("")}function We(Xe){if(Xe.startsWith('"')){for(var Ke=Xe.slice(1).split('\\"'),er=0;er<Ke.length;++er){var Qe=Ke[er].indexOf('"');Qe!==-1&&(Ke[er]=Ke[er].slice(0,Qe),Ke.length=er+1),Ke[er]=Ke[er].replace(/\\(.)/g,"$1")}Xe=Ke.join('"')}return Xe}function Ge(Xe){var Ke=Xe.indexOf("'");if(Ke===-1)return Xe;var er=Xe.slice(0,Ke),Qe=Xe.slice(Ke+1),nr=Qe.replace(/^[^']*'/,"");return De(er,nr)}function Ye(Xe){return!Xe.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(Xe)?Xe:Xe.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(Ke,er,Qe,nr){if(Qe==="q"||Qe==="Q")return nr=nr.replace(/_/g," "),nr=nr.replace(/=([0-9a-fA-F]{2})/g,function(ir,cr){return String.fromCharCode(parseInt(cr,16))}),De(er,nr);try{nr=atob(nr)}catch{}return De(er,nr)})}return""}},(Re,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNetworkStream=void 0;var Pe=Be(t(145)),Me=t(1),Ie=t(166);function Be(Ge){return Ge&&Ge.__esModule?Ge:{default:Ge}}function ke(Ge,Ye,Xe,Ke,er,Qe,nr){try{var ir=Ge[Qe](nr),cr=ir.value}catch(br){Xe(br);return}ir.done?Ye(cr):Promise.resolve(cr).then(Ke,er)}function _e(Ge){return function(){var Ye=this,Xe=arguments;return new Promise(function(Ke,er){var Qe=Ge.apply(Ye,Xe);function nr(cr){ke(Qe,Ke,er,nr,ir,"next",cr)}function ir(cr){ke(Qe,Ke,er,nr,ir,"throw",cr)}nr(void 0)})}}function Ce(Ge,Ye){var Xe=typeof Symbol!="undefined"&&Ge[Symbol.iterator]||Ge["@@iterator"];if(!Xe){if(Array.isArray(Ge)||(Xe=Te(Ge))||Ye&&Ge&&typeof Ge.length=="number"){Xe&&(Ge=Xe);var Ke=0,er=function(){};return{s:er,n:function(){return Ke>=Ge.length?{done:!0}:{done:!1,value:Ge[Ke++]}},e:function(br){throw br},f:er}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Qe=!0,nr=!1,ir;return{s:function(){Xe=Xe.call(Ge)},n:function(){var br=Xe.next();return Qe=br.done,br},e:function(br){nr=!0,ir=br},f:function(){try{!Qe&&Xe.return!=null&&Xe.return()}finally{if(nr)throw ir}}}}function Te(Ge,Ye){if(!!Ge){if(typeof Ge=="string")return Se(Ge,Ye);var Xe=Object.prototype.toString.call(Ge).slice(8,-1);if(Xe==="Object"&&Ge.constructor&&(Xe=Ge.constructor.name),Xe==="Map"||Xe==="Set")return Array.from(Ge);if(Xe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Xe))return Se(Ge,Ye)}}function Se(Ge,Ye){(Ye==null||Ye>Ge.length)&&(Ye=Ge.length);for(var Xe=0,Ke=new Array(Ye);Xe<Ye;Xe++)Ke[Xe]=Ge[Xe];return Ke}function xe(Ge,Ye){if(!(Ge instanceof Ye))throw new TypeError("Cannot call a class as a function")}function r(Ge,Ye){for(var Xe=0;Xe<Ye.length;Xe++){var Ke=Ye[Xe];Ke.enumerable=Ke.enumerable||!1,Ke.configurable=!0,"value"in Ke&&(Ke.writable=!0),Object.defineProperty(Ge,Ke.key,Ke)}}function Oe(Ge,Ye,Xe){return Ye&&r(Ge.prototype,Ye),Xe&&r(Ge,Xe),Object.defineProperty(Ge,"prototype",{writable:!1}),Ge}var Ee=200,Ae=206;function Fe(Ge){var Ye=Ge.response;if(typeof Ye!="string")return Ye;var Xe=(0,Me.stringToBytes)(Ye);return Xe.buffer}var De=function(){function Ge(Ye){var Xe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};xe(this,Ge),this.url=Ye,this.isHttp=/^https?:/i.test(Ye),this.httpHeaders=this.isHttp&&Xe.httpHeaders||Object.create(null),this.withCredentials=Xe.withCredentials||!1,this.getXhr=Xe.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}return Oe(Ge,[{key:"requestRange",value:function(Xe,Ke,er){var Qe={begin:Xe,end:Ke};for(var nr in er)Qe[nr]=er[nr];return this.request(Qe)}},{key:"requestFull",value:function(Xe){return this.request(Xe)}},{key:"request",value:function(Xe){var Ke=this.getXhr(),er=this.currXhrId++,Qe=this.pendingRequests[er]={xhr:Ke};Ke.open("GET",this.url),Ke.withCredentials=this.withCredentials;for(var nr in this.httpHeaders){var ir=this.httpHeaders[nr];typeof ir!="undefined"&&Ke.setRequestHeader(nr,ir)}return this.isHttp&&"begin"in Xe&&"end"in Xe?(Ke.setRequestHeader("Range","bytes=".concat(Xe.begin,"-").concat(Xe.end-1)),Qe.expectedStatus=Ae):Qe.expectedStatus=Ee,Ke.responseType="arraybuffer",Xe.onError&&(Ke.onerror=function(cr){Xe.onError(Ke.status)}),Ke.onreadystatechange=this.onStateChange.bind(this,er),Ke.onprogress=this.onProgress.bind(this,er),Qe.onHeadersReceived=Xe.onHeadersReceived,Qe.onDone=Xe.onDone,Qe.onError=Xe.onError,Qe.onProgress=Xe.onProgress,Ke.send(null),er}},{key:"onProgress",value:function(Xe,Ke){var er,Qe=this.pendingRequests[Xe];!Qe||(er=Qe.onProgress)===null||er===void 0||er.call(Qe,Ke)}},{key:"onStateChange",value:function(Xe,Ke){var er=this.pendingRequests[Xe];if(!!er){var Qe=er.xhr;if(Qe.readyState>=2&&er.onHeadersReceived&&(er.onHeadersReceived(),delete er.onHeadersReceived),Qe.readyState===4&&Xe in this.pendingRequests){if(delete this.pendingRequests[Xe],Qe.status===0&&this.isHttp){var nr;(nr=er.onError)===null||nr===void 0||nr.call(er,Qe.status);return}var ir=Qe.status||Ee,cr=ir===Ee&&er.expectedStatus===Ae;if(!cr&&ir!==er.expectedStatus){var br;(br=er.onError)===null||br===void 0||br.call(er,Qe.status);return}var wr=Fe(Qe);if(ir===Ae){var xr=Qe.getResponseHeader("Content-Range"),Sr=/bytes (\d+)-(\d+)\/(\d+)/.exec(xr);er.onDone({begin:parseInt(Sr[1],10),chunk:wr})}else if(wr)er.onDone({begin:0,chunk:wr});else{var lr;(lr=er.onError)===null||lr===void 0||lr.call(er,Qe.status)}}}}},{key:"getRequestXhr",value:function(Xe){return this.pendingRequests[Xe].xhr}},{key:"isPendingRequest",value:function(Xe){return Xe in this.pendingRequests}},{key:"abortRequest",value:function(Xe){var Ke=this.pendingRequests[Xe].xhr;delete this.pendingRequests[Xe],Ke.abort()}}]),Ge}(),ze=function(){function Ge(Ye){xe(this,Ge),this._source=Ye,this._manager=new De(Ye.url,{httpHeaders:Ye.httpHeaders,withCredentials:Ye.withCredentials}),this._rangeChunkSize=Ye.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}return Oe(Ge,[{key:"_onRangeRequestReaderClosed",value:function(Xe){var Ke=this._rangeRequestReaders.indexOf(Xe);Ke>=0&&this._rangeRequestReaders.splice(Ke,1)}},{key:"getFullReader",value:function(){return(0,Me.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new je(this._manager,this._source),this._fullRequestReader}},{key:"getRangeReader",value:function(Xe,Ke){var er=new We(this._manager,Xe,Ke);return er.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(er),er}},{key:"cancelAllRequests",value:function(Xe){var Ke;(Ke=this._fullRequestReader)===null||Ke===void 0||Ke.cancel(Xe);var er=Ce(this._rangeRequestReaders.slice(0)),Qe;try{for(er.s();!(Qe=er.n()).done;){var nr=Qe.value;nr.cancel(Xe)}}catch(ir){er.e(ir)}finally{er.f()}}}]),Ge}();e.PDFNetworkStream=ze;var je=function(){function Ge(Ye,Xe){xe(this,Ge),this._manager=Ye;var Ke={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=Xe.url,this._fullRequestId=Ye.requestFull(Ke),this._headersReceivedCapability=(0,Me.createPromiseCapability)(),this._disableRange=Xe.disableRange||!1,this._contentLength=Xe.length,this._rangeChunkSize=Xe.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}return Oe(Ge,[{key:"_onHeadersReceived",value:function(){var Xe=this._fullRequestId,Ke=this._manager.getRequestXhr(Xe),er=function(br){return Ke.getResponseHeader(br)},Qe=(0,Ie.validateRangeRequestCapabilities)({getResponseHeader:er,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange}),nr=Qe.allowRangeRequests,ir=Qe.suggestedLength;nr&&(this._isRangeSupported=!0),this._contentLength=ir||this._contentLength,this._filename=(0,Ie.extractFilenameFromHeader)(er),this._isRangeSupported&&this._manager.abortRequest(Xe),this._headersReceivedCapability.resolve()}},{key:"_onDone",value:function(Xe){if(Xe)if(this._requests.length>0){var Ke=this._requests.shift();Ke.resolve({value:Xe.chunk,done:!1})}else this._cachedChunks.push(Xe.chunk);if(this._done=!0,!(this._cachedChunks.length>0)){var er=Ce(this._requests),Qe;try{for(er.s();!(Qe=er.n()).done;){var nr=Qe.value;nr.resolve({value:void 0,done:!0})}}catch(ir){er.e(ir)}finally{er.f()}this._requests.length=0}}},{key:"_onError",value:function(Xe){this._storedError=(0,Ie.createResponseStatusError)(Xe,this._url),this._headersReceivedCapability.reject(this._storedError);var Ke=Ce(this._requests),er;try{for(Ke.s();!(er=Ke.n()).done;){var Qe=er.value;Qe.reject(this._storedError)}}catch(nr){Ke.e(nr)}finally{Ke.f()}this._requests.length=0,this._cachedChunks.length=0}},{key:"_onProgress",value:function(Xe){var Ke;(Ke=this.onProgress)===null||Ke===void 0||Ke.call(this,{loaded:Xe.loaded,total:Xe.lengthComputable?Xe.total:this._contentLength})}},{key:"filename",get:function(){return this._filename}},{key:"isRangeSupported",get:function(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"contentLength",get:function(){return this._contentLength}},{key:"headersReady",get:function(){return this._headersReceivedCapability.promise}},{key:"read",value:function(){var Ye=_e(Pe.default.mark(function Ke(){var er,Qe;return Pe.default.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:if(!this._storedError){ir.next=2;break}throw this._storedError;case 2:if(!(this._cachedChunks.length>0)){ir.next=5;break}return er=this._cachedChunks.shift(),ir.abrupt("return",{value:er,done:!1});case 5:if(!this._done){ir.next=7;break}return ir.abrupt("return",{value:void 0,done:!0});case 7:return Qe=(0,Me.createPromiseCapability)(),this._requests.push(Qe),ir.abrupt("return",Qe.promise);case 10:case"end":return ir.stop()}},Ke,this)}));function Xe(){return Ye.apply(this,arguments)}return Xe}()},{key:"cancel",value:function(Xe){this._done=!0,this._headersReceivedCapability.reject(Xe);var Ke=Ce(this._requests),er;try{for(Ke.s();!(er=Ke.n()).done;){var Qe=er.value;Qe.resolve({value:void 0,done:!0})}}catch(nr){Ke.e(nr)}finally{Ke.f()}this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}]),Ge}(),We=function(){function Ge(Ye,Xe,Ke){xe(this,Ge),this._manager=Ye;var er={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=Ye.url,this._requestId=Ye.requestRange(Xe,Ke,er),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}return Oe(Ge,[{key:"_close",value:function(){var Xe;(Xe=this.onClosed)===null||Xe===void 0||Xe.call(this,this)}},{key:"_onDone",value:function(Xe){var Ke=Xe.chunk;if(this._requests.length>0){var er=this._requests.shift();er.resolve({value:Ke,done:!1})}else this._queuedChunk=Ke;this._done=!0;var Qe=Ce(this._requests),nr;try{for(Qe.s();!(nr=Qe.n()).done;){var ir=nr.value;ir.resolve({value:void 0,done:!0})}}catch(cr){Qe.e(cr)}finally{Qe.f()}this._requests.length=0,this._close()}},{key:"_onError",value:function(Xe){this._storedError=(0,Ie.createResponseStatusError)(Xe,this._url);var Ke=Ce(this._requests),er;try{for(Ke.s();!(er=Ke.n()).done;){var Qe=er.value;Qe.reject(this._storedError)}}catch(nr){Ke.e(nr)}finally{Ke.f()}this._requests.length=0,this._queuedChunk=null}},{key:"_onProgress",value:function(Xe){if(!this.isStreamingSupported){var Ke;(Ke=this.onProgress)===null||Ke===void 0||Ke.call(this,{loaded:Xe.loaded})}}},{key:"isStreamingSupported",get:function(){return!1}},{key:"read",value:function(){var Ye=_e(Pe.default.mark(function Ke(){var er,Qe;return Pe.default.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:if(!this._storedError){ir.next=2;break}throw this._storedError;case 2:if(this._queuedChunk===null){ir.next=6;break}return er=this._queuedChunk,this._queuedChunk=null,ir.abrupt("return",{value:er,done:!1});case 6:if(!this._done){ir.next=8;break}return ir.abrupt("return",{value:void 0,done:!0});case 8:return Qe=(0,Me.createPromiseCapability)(),this._requests.push(Qe),ir.abrupt("return",Qe.promise);case 11:case"end":return ir.stop()}},Ke,this)}));function Xe(){return Ye.apply(this,arguments)}return Xe}()},{key:"cancel",value:function(Xe){this._done=!0;var Ke=Ce(this._requests),er;try{for(Ke.s();!(er=Ke.n()).done;){var Qe=er.value;Qe.resolve({value:void 0,done:!0})}}catch(nr){Ke.e(nr)}finally{Ke.f()}this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}]),Ge}()},(Re,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFetchStream=void 0;var Pe=Be(t(145)),Me=t(1),Ie=t(166);function Be(je){return je&&je.__esModule?je:{default:je}}function ke(je,We,Ge,Ye,Xe,Ke,er){try{var Qe=je[Ke](er),nr=Qe.value}catch(ir){Ge(ir);return}Qe.done?We(nr):Promise.resolve(nr).then(Ye,Xe)}function _e(je){return function(){var We=this,Ge=arguments;return new Promise(function(Ye,Xe){var Ke=je.apply(We,Ge);function er(nr){ke(Ke,Ye,Xe,er,Qe,"next",nr)}function Qe(nr){ke(Ke,Ye,Xe,er,Qe,"throw",nr)}er(void 0)})}}function Ce(je,We){var Ge=typeof Symbol!="undefined"&&je[Symbol.iterator]||je["@@iterator"];if(!Ge){if(Array.isArray(je)||(Ge=Te(je))||We&&je&&typeof je.length=="number"){Ge&&(je=Ge);var Ye=0,Xe=function(){};return{s:Xe,n:function(){return Ye>=je.length?{done:!0}:{done:!1,value:je[Ye++]}},e:function(ir){throw ir},f:Xe}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ke=!0,er=!1,Qe;return{s:function(){Ge=Ge.call(je)},n:function(){var ir=Ge.next();return Ke=ir.done,ir},e:function(ir){er=!0,Qe=ir},f:function(){try{!Ke&&Ge.return!=null&&Ge.return()}finally{if(er)throw Qe}}}}function Te(je,We){if(!!je){if(typeof je=="string")return Se(je,We);var Ge=Object.prototype.toString.call(je).slice(8,-1);if(Ge==="Object"&&je.constructor&&(Ge=je.constructor.name),Ge==="Map"||Ge==="Set")return Array.from(je);if(Ge==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ge))return Se(je,We)}}function Se(je,We){(We==null||We>je.length)&&(We=je.length);for(var Ge=0,Ye=new Array(We);Ge<We;Ge++)Ye[Ge]=je[Ge];return Ye}function xe(je,We){if(!(je instanceof We))throw new TypeError("Cannot call a class as a function")}function r(je,We){for(var Ge=0;Ge<We.length;Ge++){var Ye=We[Ge];Ye.enumerable=Ye.enumerable||!1,Ye.configurable=!0,"value"in Ye&&(Ye.writable=!0),Object.defineProperty(je,Ye.key,Ye)}}function Oe(je,We,Ge){return We&&r(je.prototype,We),Ge&&r(je,Ge),Object.defineProperty(je,"prototype",{writable:!1}),je}function Ee(je,We,Ge){return{method:"GET",headers:je,signal:Ge==null?void 0:Ge.signal,mode:"cors",credentials:We?"include":"same-origin",redirect:"follow"}}function Ae(je){var We=new Headers;for(var Ge in je){var Ye=je[Ge];typeof Ye!="undefined"&&We.append(Ge,Ye)}return We}var Fe=function(){function je(We){xe(this,je),this.source=We,this.isHttp=/^https?:/i.test(We.url),this.httpHeaders=this.isHttp&&We.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}return Oe(je,[{key:"_progressiveDataLength",get:function(){var Ge,Ye;return(Ge=(Ye=this._fullRequestReader)===null||Ye===void 0?void 0:Ye._loaded)!==null&&Ge!==void 0?Ge:0}},{key:"getFullReader",value:function(){return(0,Me.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new De(this),this._fullRequestReader}},{key:"getRangeReader",value:function(Ge,Ye){if(Ye<=this._progressiveDataLength)return null;var Xe=new ze(this,Ge,Ye);return this._rangeRequestReaders.push(Xe),Xe}},{key:"cancelAllRequests",value:function(Ge){this._fullRequestReader&&this._fullRequestReader.cancel(Ge);var Ye=Ce(this._rangeRequestReaders.slice(0)),Xe;try{for(Ye.s();!(Xe=Ye.n()).done;){var Ke=Xe.value;Ke.cancel(Ge)}}catch(er){Ye.e(er)}finally{Ye.f()}}}]),je}();e.PDFFetchStream=Fe;var De=function(){function je(We){var Ge=this;xe(this,je),this._stream=We,this._reader=null,this._loaded=0,this._filename=null;var Ye=We.source;this._withCredentials=Ye.withCredentials||!1,this._contentLength=Ye.length,this._headersCapability=(0,Me.createPromiseCapability)(),this._disableRange=Ye.disableRange||!1,this._rangeChunkSize=Ye.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),typeof AbortController!="undefined"&&(this._abortController=new AbortController),this._isStreamingSupported=!Ye.disableStream,this._isRangeSupported=!Ye.disableRange,this._headers=Ae(this._stream.httpHeaders);var Xe=Ye.url;fetch(Xe,Ee(this._headers,this._withCredentials,this._abortController)).then(function(Ke){if(!(0,Ie.validateResponseStatus)(Ke.status))throw(0,Ie.createResponseStatusError)(Ke.status,Xe);Ge._reader=Ke.body.getReader(),Ge._headersCapability.resolve();var er=function(br){return Ke.headers.get(br)},Qe=(0,Ie.validateRangeRequestCapabilities)({getResponseHeader:er,isHttp:Ge._stream.isHttp,rangeChunkSize:Ge._rangeChunkSize,disableRange:Ge._disableRange}),nr=Qe.allowRangeRequests,ir=Qe.suggestedLength;Ge._isRangeSupported=nr,Ge._contentLength=ir||Ge._contentLength,Ge._filename=(0,Ie.extractFilenameFromHeader)(er),!Ge._isStreamingSupported&&Ge._isRangeSupported&&Ge.cancel(new Me.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}return Oe(je,[{key:"headersReady",get:function(){return this._headersCapability.promise}},{key:"filename",get:function(){return this._filename}},{key:"contentLength",get:function(){return this._contentLength}},{key:"isRangeSupported",get:function(){return this._isRangeSupported}},{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"read",value:function(){var We=_e(Pe.default.mark(function Ye(){var Xe,Ke,er,Qe;return Pe.default.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return ir.next=2,this._headersCapability.promise;case 2:return ir.next=4,this._reader.read();case 4:if(Xe=ir.sent,Ke=Xe.value,er=Xe.done,!er){ir.next=9;break}return ir.abrupt("return",{value:Ke,done:er});case 9:return this._loaded+=Ke.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),Qe=new Uint8Array(Ke).buffer,ir.abrupt("return",{value:Qe,done:!1});case 13:case"end":return ir.stop()}},Ye,this)}));function Ge(){return We.apply(this,arguments)}return Ge}()},{key:"cancel",value:function(Ge){this._reader&&this._reader.cancel(Ge),this._abortController&&this._abortController.abort()}}]),je}(),ze=function(){function je(We,Ge,Ye){var Xe=this;xe(this,je),this._stream=We,this._reader=null,this._loaded=0;var Ke=We.source;this._withCredentials=Ke.withCredentials||!1,this._readCapability=(0,Me.createPromiseCapability)(),this._isStreamingSupported=!Ke.disableStream,typeof AbortController!="undefined"&&(this._abortController=new AbortController),this._headers=Ae(this._stream.httpHeaders),this._headers.append("Range","bytes=".concat(Ge,"-").concat(Ye-1));var er=Ke.url;fetch(er,Ee(this._headers,this._withCredentials,this._abortController)).then(function(Qe){if(!(0,Ie.validateResponseStatus)(Qe.status))throw(0,Ie.createResponseStatusError)(Qe.status,er);Xe._readCapability.resolve(),Xe._reader=Qe.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}return Oe(je,[{key:"isStreamingSupported",get:function(){return this._isStreamingSupported}},{key:"read",value:function(){var We=_e(Pe.default.mark(function Ye(){var Xe,Ke,er,Qe;return Pe.default.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return ir.next=2,this._readCapability.promise;case 2:return ir.next=4,this._reader.read();case 4:if(Xe=ir.sent,Ke=Xe.value,er=Xe.done,!er){ir.next=9;break}return ir.abrupt("return",{value:Ke,done:er});case 9:return this._loaded+=Ke.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded}),Qe=new Uint8Array(Ke).buffer,ir.abrupt("return",{value:Qe,done:!1});case 13:case"end":return ir.stop()}},Ye,this)}));function Ge(){return We.apply(this,arguments)}return Ge}()},{key:"cancel",value:function(Ge){this._reader&&this._reader.cancel(Ge),this._abortController&&this._abortController.abort()}}]),je}()}],__webpack_module_cache__={};function __w_pdfjs_require__(Re){var e=__webpack_module_cache__[Re];if(e!==void 0)return e.exports;var t=__webpack_module_cache__[Re]={id:Re,loaded:!1,exports:{}};return __webpack_modules__[Re](t,t.exports,__w_pdfjs_require__),t.loaded=!0,t.exports}(()=>{__w_pdfjs_require__.nmd=Re=>(Re.paths=[],Re.children||(Re.children=[]),Re)})();var __webpack_exports__={};return(()=>{var Re=__webpack_exports__;Object.defineProperty(Re,"__esModule",{value:!0}),Object.defineProperty(Re,"AnnotationLayer",{enumerable:!0,get:function(){return Me.AnnotationLayer}}),Object.defineProperty(Re,"AnnotationMode",{enumerable:!0,get:function(){return e.AnnotationMode}}),Object.defineProperty(Re,"CMapCompressionType",{enumerable:!0,get:function(){return e.CMapCompressionType}}),Object.defineProperty(Re,"GlobalWorkerOptions",{enumerable:!0,get:function(){return Ie.GlobalWorkerOptions}}),Object.defineProperty(Re,"InvalidPDFException",{enumerable:!0,get:function(){return e.InvalidPDFException}}),Object.defineProperty(Re,"LoopbackPort",{enumerable:!0,get:function(){return t.LoopbackPort}}),Object.defineProperty(Re,"MissingPDFException",{enumerable:!0,get:function(){return e.MissingPDFException}}),Object.defineProperty(Re,"OPS",{enumerable:!0,get:function(){return e.OPS}}),Object.defineProperty(Re,"PDFDataRangeTransport",{enumerable:!0,get:function(){return t.PDFDataRangeTransport}}),Object.defineProperty(Re,"PDFDateString",{enumerable:!0,get:function(){return Pe.PDFDateString}}),Object.defineProperty(Re,"PDFWorker",{enumerable:!0,get:function(){return t.PDFWorker}}),Object.defineProperty(Re,"PasswordResponses",{enumerable:!0,get:function(){return e.PasswordResponses}}),Object.defineProperty(Re,"PermissionFlag",{enumerable:!0,get:function(){return e.PermissionFlag}}),Object.defineProperty(Re,"PixelsPerInch",{enumerable:!0,get:function(){return Pe.PixelsPerInch}}),Object.defineProperty(Re,"RenderingCancelledException",{enumerable:!0,get:function(){return Pe.RenderingCancelledException}}),Object.defineProperty(Re,"SVGGraphics",{enumerable:!0,get:function(){return _e.SVGGraphics}}),Object.defineProperty(Re,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return e.UNSUPPORTED_FEATURES}}),Object.defineProperty(Re,"UnexpectedResponseException",{enumerable:!0,get:function(){return e.UnexpectedResponseException}}),Object.defineProperty(Re,"Util",{enumerable:!0,get:function(){return e.Util}}),Object.defineProperty(Re,"VerbosityLevel",{enumerable:!0,get:function(){return e.VerbosityLevel}}),Object.defineProperty(Re,"XfaLayer",{enumerable:!0,get:function(){return Ce.XfaLayer}}),Object.defineProperty(Re,"build",{enumerable:!0,get:function(){return t.build}}),Object.defineProperty(Re,"createPromiseCapability",{enumerable:!0,get:function(){return e.createPromiseCapability}}),Object.defineProperty(Re,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return e.createValidAbsoluteUrl}}),Object.defineProperty(Re,"getDocument",{enumerable:!0,get:function(){return t.getDocument}}),Object.defineProperty(Re,"getFilenameFromUrl",{enumerable:!0,get:function(){return Pe.getFilenameFromUrl}}),Object.defineProperty(Re,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return Pe.getPdfFilenameFromUrl}}),Object.defineProperty(Re,"getXfaPageViewport",{enumerable:!0,get:function(){return Pe.getXfaPageViewport}}),Object.defineProperty(Re,"isPdfFile",{enumerable:!0,get:function(){return Pe.isPdfFile}}),Object.defineProperty(Re,"loadScript",{enumerable:!0,get:function(){return Pe.loadScript}}),Object.defineProperty(Re,"renderTextLayer",{enumerable:!0,get:function(){return ke.renderTextLayer}}),Object.defineProperty(Re,"shadow",{enumerable:!0,get:function(){return e.shadow}}),Object.defineProperty(Re,"version",{enumerable:!0,get:function(){return t.version}});var e=__w_pdfjs_require__(1),t=__w_pdfjs_require__(144),Pe=__w_pdfjs_require__(147),Me=__w_pdfjs_require__(160),Ie=__w_pdfjs_require__(154),Be=__w_pdfjs_require__(3),ke=__w_pdfjs_require__(163),_e=__w_pdfjs_require__(164),Ce=__w_pdfjs_require__(162);if(Be.isNodeJS){var Te=__w_pdfjs_require__(165),Se=Te.PDFNodeStream;(0,t.setPDFNetworkStreamFactory)(function(Ae){return new Se(Ae)})}else{var xe=__w_pdfjs_require__(168),r=xe.PDFNetworkStream,Oe=__w_pdfjs_require__(169),Ee=Oe.PDFFetchStream;(0,t.setPDFNetworkStreamFactory)(function(Ae){return(0,Pe.isValidFetchUrl)(Ae.url)?new Ee(Ae):new r(Ae)})}})(),__webpack_exports__})()})})(pdf$1);var PdfView_vue_vue_type_style_index_0_scoped_true_lang="";const _hoisted_1$1={class:"pdf-container"},_hoisted_2=["id"],_sfc_main$2=defineComponent({setup(Re){const{VITE_PROXY_DOMAIN:e,VITE_PROXY_DOMAIN_REAL:t}=loadEnv();let Pe=computed(()=>useOperationStoreHook().GET_CURRENT_BLUEPRINT().filename),Me="",Ie=ref(0),Be=ref(2);function ke(Te){pdf$1.exports.GlobalWorkerOptions.workerSrc="/@/lib/pdf.worker.js",pdf$1.exports.getDocument(Te).promise.then(xe=>{Me=xe,Ie.value=Me.numPages,nextTick(()=>{_e(1)})})}function _e(Te){Me.getPage(Te).then(Se=>{const xe="pdf-canvas-"+Te,r=document.getElementById(xe),Oe=r.getContext("2d"),Ee=window.devicePixelRatio||1,Ae=Oe.webkitBackingStorePixelRatio||Oe.mozBackingStorePixelRatio||Oe.msBackingStorePixelRatio||Oe.oBackingStorePixelRatio||Oe.backingStorePixelRatio||1,Fe=Ee/Ae,De=Se.getViewport({scale:Be.value});r.width=De.width*Fe,r.height=De.height*Fe,r.style.width=De.width+"px",r.style.height=De.height+"px",Oe.setTransform(Fe,0,0,Fe,0,0);const ze={canvasContext:Oe,viewport:De};Se.render(ze),Te<Ie.value&&_e(Te+1)})}function Ce(){if(Pe.value.endsWith(".dwg"))return;const Se=t+"/getPdfFile/"+Pe.value;ke(Se)}return watch(Pe,()=>{Ce()}),onMounted(Ce),(Te,Se)=>(openBlock(),createElementBlock("div",_hoisted_1$1,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(Ie),xe=>(openBlock(),createElementBlock("canvas",{id:"pdf-canvas-"+xe,key:xe,class:"pdf-canvas"},null,8,_hoisted_2))),128))]))}});var pdf=_export_sfc$1(_sfc_main$2,[["__scopeId","data-v-38919566"]]);const _hoisted_1=["src"],_sfc_main$1=defineComponent({setup(Re){let e=computed(()=>useOperationStoreHook().GET_CURRENT_BLUEPRINT().filename);const{VITE_PROXY_DOMAIN:t,VITE_PROXY_DOMAIN_REAL:Pe}=loadEnv(),Me=ref();function Ie(){if(e.value.endsWith(".dwg"))return;const Be=Pe;Me.value=Be+"/getPdfFile/"+e.value}return onMounted(Ie),(Be,ke)=>(openBlock(),createElementBlock("iframe",{height:"100%",width:"100%",src:Me.value},null,8,_hoisted_1))}});var nodeOperation_vue_vue_type_style_index_0_scoped_true_lang="";const _sfc_main=defineComponent({setup(Re){const e=useOperationStoreHook().GET_CURRENT_NODE(),t=ref([]),Pe=useRouter(),Me=Ie=>{console.log(Ie),Pe.push("/taskInfo/"+Ie.url)};return onMounted(()=>{console.log(e),!!e.properties.operations&&e.properties.operations.forEach(Ie=>{getOperationById(Ie).then(Be=>{Be.success&&t.value.push(Be.data)})})}),(Ie,Be)=>{const ke=resolveComponent("el-button"),_e=resolveComponent("el-button-group"),Ce=resolveComponent("el-divider");return openBlock(),createElementBlock(Fragment,null,[createVNode(_e,null,{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(t.value,Te=>(openBlock(),createBlock(ke,{key:Te,onClick:Se=>Me(Te),class:"operation-btn"},{default:withCtx(()=>[createTextVNode(toDisplayString(Te.name),1)]),_:2},1032,["onClick"]))),128))]),_:1}),createVNode(Ce)],64)}}});var nodeOperation=_export_sfc$1(_sfc_main,[["__scopeId","data-v-a5a1c58a"]]);const TaskCard=Object.assign(taskCard,{install(Re){Re.component(taskCard.name,taskCard)}});Object.assign(_sfc_main$3,{install(Re){Re.component(_sfc_main$3.name,_sfc_main$3)}});const PdfView=Object.assign(pdf,{install(Re){Re.component(pdf.name,pdf)}}),NodeOperation=Object.assign(nodeOperation,{install(Re){Re.component(nodeOperation.name,nodeOperation)}});Object.assign(_sfc_main$1,{install(Re){Re.component(_sfc_main$1.name,_sfc_main$1)}});export{NodeOperation as N,TaskCard as T,TaskInfo as a};
