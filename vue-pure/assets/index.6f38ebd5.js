var Q=Object.defineProperty,R=Object.defineProperties;var W=Object.getOwnPropertyDescriptors;var C=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var L=(s,n,l)=>n in s?Q(s,n,{enumerable:!0,configurable:!0,writable:!0,value:l}):s[n]=l,A=(s,n)=>{for(var l in n||(n={}))X.call(n,l)&&L(s,l,n[l]);if(C)for(var l of C(n))Y.call(n,l)&&L(s,l,n[l]);return s},S=(s,n)=>R(s,W(n));import{C as Z,N as $,a as ee,E as te,D as oe,B as le,l as g,S as ae,b as se,M as ne}from"./index.4d12d27b.js";import{_ as de,s as ue,G as re}from"./index.7e89e680.js";/* empty css                   */import{d as ie,h as r,l as ce,H as e,Q as pe,N as v,r as p,o as b,z as fe,b as F,w as u,e as d,B as y,A as I,n as me,D as h,J as _e,K as ge,be as ve}from"./element-plus.5e3a2ffc.js";import"./vform3-plus.79b63deb.js";import"./search.4904df35.js";import"./plugin-vue_export-helper.98d5223b.js";const be=s=>(_e("data-v-4abaad7c"),s=s(),ge(),s),De={class:"logic-flow-view"},we=h("\u4FDD\u5B58\u6A21\u677F"),Fe={class:"dialog-footer"},ye=h("\u53D6\u6D88"),he=h("\u63D0\u4EA4"),xe=be(()=>I("div",{id:"LF-Turbo"},null,-1)),Ee=ie({setup(s){const n={},l=r(!1),x=r(),c=ce({title:"",description:""});let a=r(null),E=r(null),f=r(!1),D=r(!1),w=r(!1),V=r(null),k=r(null),j=r({grid:!0,textEdit:!1,stopScrollGraph:!0,background:{color:"#f7f9ff"},keyboard:{enabled:!0,shortcuts:[{keys:["delete"],callback:()=>{const t=e(a).getSelectElements(!0);e(a).clearSelectElements(),t.edges.forEach(o=>{e(a).deleteEdge(o.id)}),t.nodes.forEach(o=>{e(a).deleteNode(o.id)})}}]}}),T=le;function M(){g.exports.LogicFlow.use(ae),g.exports.LogicFlow.use(se),g.exports.LogicFlow.use(ne);const t=new g.exports.LogicFlow(S(A({},e(j)),{container:document.querySelector("#LF-Turbo")}));a.value=t,e(a).setDefaultEdgeType("bpmn:sequenceFlow"),q()}function q(){a.value.render(n)}function G(){E.value=e(a).getGraphData(),f.value=!0}function J(){e(a).on("node:dbclick, edge:dbclick",t=>{t.data.type!="bpmn:sequenceFlow"?(V.value=a.value.getNodeModelById(t.data.id),D.value=!0):(k.value=a.value.getEdgeModelById(t.data.id),w.value=!0)})}const U=t=>{a.value.render(t)},z=()=>{l.value=!0},H=async t=>{!t||await t.validate(o=>{if(o){const m={title:c.title,description:c.description,creatorId:ue.getItem("info").userInfo.id,json:JSON.stringify(e(a).getGraphData()),maintain:[]};re(m).then(_=>{_.success&&(l.value=!1,t.resetFields(),ve.success("\u63D0\u4EA4\u6210\u529F"))})}})},K=t=>{l.value=!1,!!t&&t.resetFields()};return pe(()=>{M(),J()}),v("openNodeDrawer",D),v("openEdgeDrawer",w),v("selectedNode",V),v("selectedEdge",k),(t,o)=>{const m=p("el-button"),_=p("el-input"),N=p("el-form-item"),O=p("el-form"),B=p("el-dialog"),P=p("el-scrollbar");return b(),fe("div",De,[e(a)?(b(),F(e(Z),{key:0,class:"demo-control",lf:e(a),catTurboData:!1,onCatData:G},{right:u(()=>[d(m,{type:"primary",size:"small",onClick:z},{default:u(()=>[we]),_:1})]),_:1},8,["lf"])):y("",!0),d(B,{modelValue:l.value,"onUpdate:modelValue":o[3]||(o[3]=i=>l.value=i),title:"\u6D41\u7A0B\u6A21\u677F\u4FE1\u606F",width:"40%",center:""},{footer:u(()=>[I("span",Fe,[d(m,{onClick:K},{default:u(()=>[ye]),_:1}),d(m,{type:"primary",onClick:o[2]||(o[2]=i=>H(x.value))},{default:u(()=>[he]),_:1})])]),default:u(()=>[d(O,{ref_key:"formRef",ref:x,"label-position":"top","label-width":"100px",model:e(c),style:{"max-width":"460px"}},{default:u(()=>[d(N,{label:"\u6D41\u7A0B\u6A21\u677F\u540D\u79F0",required:""},{default:u(()=>[d(_,{modelValue:e(c).title,"onUpdate:modelValue":o[0]||(o[0]=i=>e(c).title=i)},null,8,["modelValue"])]),_:1}),d(N,{label:"\u6D41\u7A0B\u6A21\u677F\u63CF\u8FF0"},{default:u(()=>[d(_,{modelValue:e(c).description,"onUpdate:modelValue":o[1]||(o[1]=i=>e(c).description=i)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),d(e($),{lf:e(a),nodeList:e(T),onLoadFlowChartJson:U},null,8,["lf","nodeList"]),xe,e(D)?(b(),F(e(ee),{key:1})):y("",!0),e(w)?(b(),F(e(te),{key:2})):y("",!0),d(B,{customClass:"flow-dialog",title:"\u6570\u636E",modelValue:e(f),"onUpdate:modelValue":o[4]||(o[4]=i=>me(f)?f.value=i:f=i),width:"50%"},{default:u(()=>[d(P,null,{default:u(()=>[d(e(oe),{graphData:e(E)},null,8,["graphData"])]),_:1})]),_:1},8,["modelValue"])])}}});var Ie=de(Ee,[["__scopeId","data-v-4abaad7c"]]);export{Ie as default};
