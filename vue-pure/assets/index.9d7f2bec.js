var q=Object.defineProperty,G=Object.defineProperties;var J=Object.getOwnPropertyDescriptors;var N=Object.getOwnPropertySymbols;var O=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var F=(a,l,s)=>l in a?q(a,l,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[l]=s,C=(a,l)=>{for(var s in l||(l={}))O.call(l,s)&&F(a,s,l[s]);if(N)for(var s of N(l))R.call(l,s)&&F(a,s,l[s]);return a},L=(a,l)=>G(a,J(l));import{C as z,N as H,a as K,E as P,B as Q,l as p,S as U,b as W,M as X,D as Y}from"./index.4cc80c59.js";import{_ as Z,u as $,O as ee}from"./index.e3e59a78.js";/* empty css                   */import{d as te,h as r,Q as oe,N as f,r as E,z as ae,H as e,b,w as m,B as h,e as c,n as le,J as se,K as ne,be as re,o as _,D as de,A as ue}from"./element-plus.5e3a2ffc.js";import"./vform3-plus.79b63deb.js";import"./search.4904df35.js";import"./plugin-vue_export-helper.98d5223b.js";const ce=a=>(se("data-v-6052c8ef"),a=a(),ne(),a),ie={class:"logic-flow-view"},pe=de(" \u4E0B\u4E00\u6B65 "),fe=ce(()=>ue("div",{id:"LF-Turbo"},null,-1)),me=te({emits:["next"],setup(a,{emit:l}){const s=$();let t=r(null),w=r(null),d=r(!1),g=r(!1),v=r(!1),x=r(null),D=r(null),S=r({grid:!0,textEdit:!1,stopScrollGraph:!0,background:{color:"#f7f9ff"},keyboard:{enabled:!0,shortcuts:[{keys:["delete"],callback:()=>{const o=e(t).getSelectElements(!0);e(t).clearSelectElements(),o.edges.forEach(n=>{e(t).deleteEdge(n.id)}),o.nodes.forEach(n=>{e(t).deleteNode(n.id)})}}]}}),V=Q;function j(){p.exports.LogicFlow.use(U),p.exports.LogicFlow.use(W),p.exports.LogicFlow.use(X);const o=new p.exports.LogicFlow(L(C({},e(S)),{container:document.querySelector("#LF-Turbo")}));t.value=o,e(t).setDefaultEdgeType("bpmn:sequenceFlow"),T()}function T(){t.value.render({})}function I(){w.value=e(t).getGraphData(),d.value=!0}function M(){e(t).on("node:dbclick, edge:dbclick",o=>{let n=o.data.type;n==="bpmn:startEvent"||n==="bpmn:endEvent"||(n!="bpmn:sequenceFlow"?(x.value=t.value.getNodeModelById(o.data.id),g.value=!0):(D.value=t.value.getEdgeModelById(o.data.id),v.value=!0))})}function B(){const o=t.value.getGraphData();for(let n in o.nodes){const u=o.nodes[n],i=u.type;if(i!=="bpmn:startEvent"&&i!=="bpmn:endEvent"&&u.properties.checkers.length===0){re.error("\u8282\u70B9 "+u.text.value+" \u672A\u8BBE\u7F6E\u5BA1\u6279\u4EBA");return}}ee().setFlowChart(o),l("next",2),s.push("/newTask/permission")}const A=o=>{t.value.render(o)};return oe(()=>{j(),M()}),f("openNodeDrawer",g),f("openEdgeDrawer",v),f("selectedNode",x),f("selectedEdge",D),(o,n)=>{const u=E("el-button"),i=E("el-scrollbar"),k=E("el-dialog");return _(),ae("div",ie,[e(t)?(_(),b(e(z),{key:0,class:"demo-control",lf:e(t),catTurboData:!1,onCatData:I,onNext:B},{right:m(()=>[c(u,{type:"primary",size:"small",onClick:B},{default:m(()=>[pe]),_:1})]),_:1},8,["lf"])):h("",!0),c(e(H),{lf:e(t),nodeList:e(V),onLoadFlowChartJson:A},null,8,["lf","nodeList"]),fe,e(g)?(_(),b(e(K),{key:1})):h("",!0),e(v)?(_(),b(e(P),{key:2})):h("",!0),c(k,{customClass:"flow-dialog",title:"\u6570\u636E",modelValue:e(d),"onUpdate:modelValue":n[0]||(n[0]=y=>le(d)?d.value=y:d=y),width:"50%"},{default:m(()=>[c(i,null,{default:m(()=>[c(e(Y),{graphData:e(w)},null,8,["graphData"])]),_:1})]),_:1},8,["modelValue"])])}}});var De=Z(me,[["__scopeId","data-v-6052c8ef"]]);export{De as default};
