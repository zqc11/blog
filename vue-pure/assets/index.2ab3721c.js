var R=Object.defineProperty,W=Object.defineProperties;var X=Object.getOwnPropertyDescriptors;var C=Object.getOwnPropertySymbols;var Y=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable;var L=(s,n,a)=>n in s?R(s,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[n]=a,S=(s,n)=>{for(var a in n||(n={}))Y.call(n,a)&&L(s,a,n[a]);if(C)for(var a of C(n))Z.call(n,a)&&L(s,a,n[a]);return s},A=(s,n)=>W(s,X(n));import{C as $,N as ee,a as te,E as oe,D as le,B as ae,l as g,S as se,b as ne,M as de}from"./index.02b6cd5b.js";import{_ as ue,F as re,s as ie,G as ce}from"./index.8f675947.js";/* empty css                   */import{d as pe,h as r,l as fe,H as e,Q as me,N as v,r as p,o as b,z as _e,b as F,w as u,e as d,B as h,A as I,n as ge,D as y,J as ve,K as be,bc as we}from"./element-plus.ab042766.js";import"./vform3-plus.5c4eeb71.js";import"./search.f7aa7366.js";import"./plugin-vue_export-helper.98d5223b.js";const De=s=>(ve("data-v-e7e47b18"),s=s(),be(),s),Fe={class:"logic-flow-view"},he=y("\u4FDD\u5B58\u6A21\u677F"),ye={class:"dialog-footer"},xe=y("\u53D6\u6D88"),Ee=y("\u63D0\u4EA4"),ke=De(()=>I("div",{id:"LF-Turbo"},null,-1)),Ve=pe({setup(s){const n={},a=r(!1),x=r(),c=fe({title:"",description:""});let o=r(null),E=r(null),f=r(!1),w=r(!1),D=r(!1),k=r(null),V=r(null),T=r({grid:!0,textEdit:!1,stopScrollGraph:!0,background:{color:"#f7f9ff"},keyboard:{enabled:!0,shortcuts:[{keys:["delete"],callback:()=>{const t=e(o).getSelectElements(!0);e(o).clearSelectElements(),t.edges.forEach(l=>{e(o).deleteEdge(l.id)}),t.nodes.forEach(l=>{e(o).deleteNode(l.id)})}}]}}),j=ae;function M(){g.exports.LogicFlow.use(se),g.exports.LogicFlow.use(ne),g.exports.LogicFlow.use(de);const t=new g.exports.LogicFlow(A(S({},e(T)),{container:document.querySelector("#LF-Turbo")}));o.value=t,e(o).setDefaultEdgeType("bpmn:sequenceFlow"),G()}function G(){o.value.render(n)}function q(){E.value=e(o).getGraphData(),f.value=!0}function J(){e(o).on("node:dbclick, edge:dbclick",t=>{t.data.type!="bpmn:sequenceFlow"?(k.value=o.value.getNodeModelById(t.data.id),w.value=!0):(V.value=o.value.getEdgeModelById(t.data.id),D.value=!0)})}function U(){const t=o.value.getGraphData();re().setFlowChart(t)}const z=t=>{o.value.render(t)},H=()=>{a.value=!0},K=async t=>{!t||await t.validate(l=>{if(l){const m={title:c.title,description:c.description,creatorId:ie.getItem("info").userInfo.id,json:JSON.stringify(e(o).getGraphData()),maintain:[]};ce(m).then(_=>{_.success&&(a.value=!1,t.resetFields(),we.success("\u63D0\u4EA4\u6210\u529F"))})}})},O=t=>{a.value=!1,!!t&&t.resetFields()};return me(()=>{M(),J()}),v("openNodeDrawer",w),v("openEdgeDrawer",D),v("selectedNode",k),v("selectedEdge",V),(t,l)=>{const m=p("el-button"),_=p("el-input"),N=p("el-form-item"),P=p("el-form"),B=p("el-dialog"),Q=p("el-scrollbar");return b(),_e("div",Fe,[e(o)?(b(),F(e($),{key:0,class:"demo-control",lf:e(o),catTurboData:!1,onCatData:q,onNext:U},{right:u(()=>[d(m,{type:"primary",size:"small",onClick:H},{default:u(()=>[he]),_:1})]),_:1},8,["lf"])):h("",!0),d(B,{modelValue:a.value,"onUpdate:modelValue":l[3]||(l[3]=i=>a.value=i),title:"\u6D41\u7A0B\u6A21\u677F\u4FE1\u606F",width:"40%",center:""},{footer:u(()=>[I("span",ye,[d(m,{onClick:O},{default:u(()=>[xe]),_:1}),d(m,{type:"primary",onClick:l[2]||(l[2]=i=>K(x.value))},{default:u(()=>[Ee]),_:1})])]),default:u(()=>[d(P,{ref_key:"formRef",ref:x,"label-position":"top","label-width":"100px",model:e(c),style:{"max-width":"460px"}},{default:u(()=>[d(N,{label:"\u6D41\u7A0B\u6A21\u677F\u540D\u79F0",required:""},{default:u(()=>[d(_,{modelValue:e(c).title,"onUpdate:modelValue":l[0]||(l[0]=i=>e(c).title=i)},null,8,["modelValue"])]),_:1}),d(N,{label:"\u6D41\u7A0B\u6A21\u677F\u63CF\u8FF0"},{default:u(()=>[d(_,{modelValue:e(c).description,"onUpdate:modelValue":l[1]||(l[1]=i=>e(c).description=i)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),d(e(ee),{lf:e(o),nodeList:e(j),onLoadFlowChartJson:z},null,8,["lf","nodeList"]),ke,e(w)?(b(),F(e(te),{key:1})):h("",!0),e(D)?(b(),F(e(oe),{key:2})):h("",!0),d(B,{customClass:"flow-dialog",title:"\u6570\u636E",modelValue:e(f),"onUpdate:modelValue":l[4]||(l[4]=i=>ge(f)?f.value=i:f=i),width:"50%"},{default:u(()=>[d(Q,null,{default:u(()=>[d(e(le),{graphData:e(E)},null,8,["graphData"])]),_:1})]),_:1},8,["modelValue"])])}}});var je=ue(Ve,[["__scopeId","data-v-e7e47b18"]]);export{je as default};
