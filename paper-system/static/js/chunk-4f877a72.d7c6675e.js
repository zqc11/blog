(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-4f877a72"],{"0e0f":function(t,e,i){"use strict";i("bbf0")},bbf0:function(t,e,i){},e7e4:function(t,e,i){"use strict";i.r(e);var a={data(){return{mDirID:"",mCatType:"",dirType:0,isCatDir:0,total:0,DirFlag:!0,editDialogVisible:!1,addDialogVisible:!1,vFolderName:"",vNo:0,catType:"",vID:"",tableHeight:this.$root.gScreenHeight-182,mainHeight:this.$root.gScreenHeight-70,slbHeight:this.$root.gScreenHeight-90,folderList:[],itemList:[],cascaderProps:{value:"t_ID",label:"label",children:"Children",checkStrictly:!0,expandTrigger:"hover"}}},created(){this.$root.leveOnePathName="Map",this.$root.leveTwoPathName="目录管理",this.tableHeight=JSON.parse(window.localStorage.getItem("gHeight"))-240,this.slbHeight=JSON.parse(window.localStorage.getItem("gHeight"))-195,this.mainHeight=JSON.parse(window.localStorage.getItem("gHeight"))-185,this.mainWidth=this.$root.gScreenWidth-210,this.getFolderTree()},methods:{async openaddGroupDialog(){this.vFolderName="",this.catType=this.mCatType,this.addDialogVisible=!0},async showEditDialog(t){this.vID=t.t_ID,this.vFolderName=t.t_Name,this.catType=t.CObjDataType,this.vNo=t.t_No,this.editDialogVisible=!0},async addFolder(){var t=(await this.$http.post("addFolder",{hCatType:this.catType,hParentID:this.mDirID,hFolderName:this.vFolderName,hToken:window.sessionStorage.getItem("token")}))["data"];200!==t.status?this.$message.error("新增目录失败！-- 020"+t.Msg):(this.$message.success("新增目录成功！"),this.addDialogVisible=!1,this.getFolderTree(),this.refreshNodeBy(this.mDirID),this.getDirList(this.mDirID))},async editFolder(){var t=(await this.$http.post("editFolder",{hCatType:this.catType,hFolderID:this.vID,hFolderName:this.vFolderName,hNo:this.vNo,hToken:window.sessionStorage.getItem("token")}))["data"];200!==t.status?this.$message.error("修改目录失败！-- 020"+t.Msg):(this.$message.success("修改目录成功！"),this.editDialogVisible=!1,this.getFolderTree(),this.refreshNodeBy(this.mDirID),this.getDirList(this.mDirID))},async deleteFolder(t){return"confirm"!==await this.$confirm("此操作将删除当前目录及其全部子目录，请谨慎使用！ 是否继续?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(t=>t)?this.$message.info("已取消删除!"):(t=(await this.$http.post("deleteFolder",{hFolderID:t.t_ID,hToken:window.sessionStorage.getItem("token")}))["data"],200!==t.status?this.$message.error("删除自定义类失败！-- 030"+t.Msg):(this.$message.success("删除目录成功！"),this.getFolderTree(),this.refreshNodeBy(this.mDirID),void this.getDirList(this.mDirID)))},async getFolderTree(){var t=(await this.$http.post("getFolderTree",{hFolderID:"Root_ParentID"}))["data"];if(200!==t.status)return this.$message.error("获取目录树数据失败！");this.folderList=t.data1},handleNodeClick(t){this.mDirID=t.t_ID,this.mCatType=t.TypeID,this.isCatDir=t.IsCatDir,""===this.mCatType?this.DirFlag=!0:this.DirFlag=!1,this.dirType=t.DirTypeID,window.localStorage.setItem("currentFolderID",t.t_ID),this.getDirList()},refreshNodeBy(t){const e=this.$refs.treeList.getNode(t);e.loaded=!1,e.expand()},async getDirList(t){var e=(await this.$http.post("getDirList",{hDirID:this.mDirID}))["data"];return 202===e.status?(this.itemList=[],this.$message.error("请重新登录！")):200!==e.status?(this.itemList=[],this.$message.error("显示数据失败！"+e.Msg)):(0!==e.total?this.itemList=JSON.parse(e.data):this.itemList=[],this.total=e.total,this.tableHeight=JSON.parse(window.localStorage.getItem("gHeight"))-240,this.slbHeight=JSON.parse(window.localStorage.getItem("gHeight"))-195,this.mainHeight=JSON.parse(window.localStorage.getItem("gHeight"))-185,void this.$nextTick(()=>{0<this.itemList.length&&this.$refs.tableRef.setCurrentRow(this.itemList[0])}))}}};i("0e0f"),i=i("2877"),i=Object(i.a)(a,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"mainZone",staticClass:"datalist-container",style:{height:t.mainHeight+"px"}},[i("el-row",{attrs:{gutter:5}},[i("el-col",{attrs:{span:4}},[i("el-card",{attrs:{"body-style":{padding:"5px"}}},[i("el-scrollbar",{style:{height:t.slbHeight+"px"}},[i("el-tree",{ref:"treeList",attrs:{"current-node-key":t.mDirID,"default-expanded-keys":["Root_FolderID"],"highlight-current":"",data:t.folderList,props:t.cascaderProps,"node-key":"t_ID"},on:{"node-click":t.handleNodeClick}})],1)],1)],1),i("el-col",{attrs:{span:20}},[i("el-card",{attrs:{"body-style":{padding:"5px"}}},[i("el-row",{attrs:{gutter:10}},[i("el-col",{attrs:{span:8}},[i("el-button",{attrs:{disabled:this.DirFlag,type:"primary"},on:{click:t.openaddGroupDialog}},[t._v("增加目录")])],1)],1),i("el-table",{ref:"tableRef",attrs:{data:t.itemList,height:t.tableHeight,border:"",stripe:"","highlight-current-row":"","row-style":{height:"30px"},"cell-style":{padding:"0px"}}},[i("el-table-column",{attrs:{prop:"t_No",label:"序号"}}),t._e(),i("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"t_Name",label:"目录名"}}),i("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"CObjDataType",label:"类别"}}),i("el-table-column",{attrs:{prop:"CreatorName",label:"创建人"}}),i("el-table-column",{attrs:{prop:"CCreateTime",label:"创建时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.CCreateTime.substring(0,10)))])]}}])}),i("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"修改该条记录",enterable:!1,placement:"top"}},[i("el-button",{attrs:{type:"warning",icon:"el-icon-edit",size:"mini",circle:"",plain:""},on:{click:function(i){return t.showEditDialog(e.row)}}})],1),i("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini",circle:"",plain:""},on:{click:function(i){return t.deleteFolder(e.row)}}})]}}])})],1)],1)],1)],1),i("el-dialog",{attrs:{title:"增加目录节点",visible:t.addDialogVisible,width:"30%"},on:{"update:visible":function(e){t.addDialogVisible=e}}},[i("el-form",{staticClass:"form-1",attrs:{"label-width":"70px","label-position":"left"},nativeOn:{submit:function(t){t.preventDefault()}}},[i("el-form-item",{attrs:{label:"目录名称"}},[i("el-input",{model:{value:t.vFolderName,callback:function(e){t.vFolderName=e},expression:"vFolderName"}})],1),i("el-form-item",{attrs:{label:"类别"}},[i("el-input",{attrs:{disabled:!0},model:{value:t.catType,callback:function(e){t.catType=e},expression:"catType"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{ref:"editSubmit",attrs:{type:"primary"},on:{click:t.addFolder}},[t._v("确 定")]),i("el-button",{on:{click:function(e){t.addDialogVisible=!1}}},[t._v("取 消")])],1)],1),i("el-dialog",{attrs:{title:"修改分类信息",visible:t.editDialogVisible,width:"30%"},on:{"update:visible":function(e){t.editDialogVisible=e}}},[i("el-form",{ref:"editFieldFormRef",staticClass:"form-1",attrs:{"label-width":"70px","label-position":"left"}},[t._e(),i("el-form-item",{attrs:{label:"目录名"}},[i("el-input",{model:{value:t.vFolderName,callback:function(e){t.vFolderName=e},expression:"vFolderName"}})],1),i("el-form-item",{attrs:{label:"类别"}},[i("el-input",{attrs:{disabled:""},model:{value:t.catType,callback:function(e){t.catType=e},expression:"catType"}})],1),i("el-form-item",{attrs:{label:"序号"}},[i("el-input",{model:{value:t.vNo,callback:function(e){t.vNo=e},expression:"vNo"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{ref:"editSubmit",attrs:{type:"primary"},on:{click:t.editFolder}},[t._v("确 定")]),i("el-button",{on:{click:function(e){t.editDialogVisible=!1}}},[t._v("取 消")])],1)],1)],1)}),[],!1,null,"e5e05ea8",null);e.default=i.exports}}]);