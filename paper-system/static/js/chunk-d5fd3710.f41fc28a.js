(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-d5fd3710"],{"18ad":function(t,e,a){"use strict";a("dd32")},"2de9":function(t,e,a){"use strict";a.r(e);var i={data(){return{queryInfo:{query:"",pageNum:"1",pageSize:"30",catID:"IDATA"},vCreateFlag:!1,ACLList:[],options:[{value:"All Version",label:"所有版本"},{value:"New Version",label:"最新版本"},{value:"New Publish",label:"最新发布"},{value:"All Publish",label:"发布版本"}],mVersion:"All Version",fItemID:"",fCatID:"",mtemp:[""],checkedData:{},vdx:[""],vdd:[[]],DataName:"Item Detail",addDataForm:{},editDataForm:{},datalist:[],templist:[],linkExpressionList:[],tableHeight:this.$root.gScreenHeight-182,slbHeight:this.$root.gScreenHeight-90,mainHeight:this.$root.gScreenHeight-70,mainWidth:this.$root.gScreenWidth-210,WhereUsedItemList:[],linkItemList:[],tableBfieldlist:[],tableAfieldlist:[],linkAfieldlist:[],reviewItemList:[],reviewFieldList:[],versionItemList:[],pushToFlowDialogVisible:!1,flowlist:[],flowBfieldlist:[],total:0,editItemID:"",ItemName:"",ItemCode:"",ItemCatID:"",editLinkID:"",editTargetCatID:"",activeName:"tab-1",addDialogVisible:!1,DataDetailDialogVisible:!1,addDataFormRules:{},editDataFormRules:{},editDialogVisible:!1,parentCateList:[],cascaderProps:{value:"t_ID",label:"label",children:"Children",checkStrictly:!0,expandTrigger:"hover"},selectedKeys:[],cat_pid:0,cat_level:0,config:{id:"t_ID",pid:"ParentID",children:"children"},idArray:[],pageFlag:!0}},computed:{mScreenWidth:function(){return this.$root.gScreenWidth-74}},created(){this.$root.leveOnePathName="数据",this.$root.leveTwoPathName="航天数据包",this.tableHeight=JSON.parse(window.localStorage.getItem("gHeight"))-240,this.slbHeight=JSON.parse(window.localStorage.getItem("gHeight"))-195,this.mainHeight=JSON.parse(window.localStorage.getItem("gHeight"))-185,this.mainWidth=this.$root.gScreenWidth-210,this.getParentCateList(),null!==window.localStorage.getItem("currentDataCatID")&&(this.queryInfo.catID=window.localStorage.getItem("currentDataCatID"),this.idArray=[this.queryInfo.catID]),this.getDataList(),this.$nextTick((function(){this.$refs.treeList.setCurrentKey(this.queryInfo.catID)}));for(let t=0;t<this.tableAfieldlist.length;t++)this.addDataForm[this.tableAfieldlist[t].t_FieldName]="";for(let t=0;t<this.tableBfieldlist.length;t++)this.editDataForm[this.tableBfieldlist[t].t_FieldName]=""},watch:{selectedKeys(){this.$refs.LinkBref&&(this.$refs.LinkBref.dropDownVisible=!1)}},methods:{showDate(t){return new Date(t).toLocaleString()},selectChanged(t){this.getDataList()},handleCommand(t){"g"===t&&(this.$message("---- publishItem ----- "),this.publishItem()),this.$message("click on item "+t)},focus(t){},keyup_({e:t,i:e}){const a=this;a.$refs["input"+e]&&a.$nextTick(()=>{t.target.blur();var i="input"+(e+1);void 0!==a.$refs[i]?a.$refs[i][0].focus():a.$refs.addSubmit&&a.$refs.addSubmit.$el.focus()})},keyup_edit({e:t,i:e}){const a=this;a.$refs["m_input"+e]&&a.$nextTick(()=>{t.target.blur();var i="m_input"+(e+1);void 0!==a.$refs[i]?a.$refs[i][0].focus():a.$refs.editSubmit&&a.$refs.editSubmit.$el.focus()})},handleRadioChange:function(t,e,a){},handleChange:function(t,e,a){t?this.checkedData[a].push(e):this.delete(e,a)},delete(t,e){var a=this.checkedData[e].findIndex(e=>{if(e===t)return!0});this.checkedData[e].splice(a,1)},SetFirstAddFocus(){this.$nextTick(t=>{null!=this.$refs.input0&&this.$refs.input0[0].focus()})},SetFirstEditFocus(){this.$nextTick(t=>{this.$refs.m_input0[0].focus()})},async openaddDialog(){this.addDialogVisible=!0,this.tableBfieldlist.forEach((t,e)=>{this.$set(this.addDataForm,this.tableBfieldlist[e].t_FieldName,"")});for(let t=0;t<this.vdd.length;t++)this.vdd[t]=[];this.vdx=[];for(let t=0;t<this.tableBfieldlist.length;t++)this.vdd[t]=[0],this.mtemp[t]="",4===this.tableBfieldlist[t].t_ControlType&&(this.checkedData[this.tableBfieldlist[t].t_FieldName]=[]),30===this.tableBfieldlist[t].t_ControlType&&(this.checkedData[this.tableBfieldlist[t].t_FieldName]=[]);this.SetFirstAddFocus()},async getDataList(){var t=(await this.$http.post("getDataList",{query:this.queryInfo.query,pageNum:this.queryInfo.pageNum,pageSize:this.queryInfo.pageSize,CatID:this.queryInfo.catID,hToken:window.sessionStorage.getItem("token"),hVersion:this.mVersion}))["data"];return 202===t.status?this.$message.error("请重新登录！"):200!==t.status?this.$message.error("显示数据失败！"+t.Msg):(0!==t.total?(this.datalist=JSON.parse(t.data),this.editItemID=this.datalist[0].t_ID,this.ItemName=this.datalist[0].t_Name,this.ItemCode=this.datalist[0].t_Code,this.ItemCatID=this.queryInfo.catID):this.datalist=[],this.tableBfieldlist=JSON.parse(t.tableBfield),this.total=t.total,this.pageFlag=this.total>this.queryInfo.pageSize,void this.$nextTick(()=>{this.$refs.tableRef.setCurrentRow(this.datalist[0])}))},async checkCreateACL(t){if(t=(await this.$http.post("CheckCreateACL",{hToken:window.sessionStorage.getItem("token"),hCatID:t})).data,200!==t.status)return this.$message.error("检查角色新建权限失败！"+t.Msg);"1"===t.data?this.vCreateFlag=!1:this.vCreateFlag=!0},async publishItem(){var t;return"confirm"!==await this.$confirm("确信要发布该对象吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(t=>t)?this.$message.info("已取消发布"):(t=(await this.$http.post("publishItem",{hCatID:this.queryInfo.catID,hItemID:this.editItemID,hItemName:this.ItemName,hToken:window.sessionStorage.getItem("token")}))["data"],200!==t.status?this.$message.error("发布失败--"+t.Msg):(this.getDataList(),void this.$message.error("数据发布成功！")))},async showDatatDetailDialog(t,e,a,i){t=this.editItemID,this.getItem(t),this.getlinkExpressionList(),this.DataDetailDialogVisible=!0,this.DataName=this.ItemCode+" 详情"},async pushItemToFlow(t,e){e=(await this.$http.post("pushItemToFlow",{hCatID:this.fCatID,hItemID:this.fItemID,hFlowCatID:e,hFlowItemID:t,hToken:window.sessionStorage.getItem("token")})).data,200!==e.status?this.$message.error(e.Msg):(this.$message.success("加入流程成功！"),this.getDataList(),this.pushToFlowDialogVisible=!1)},async getlinkExpressionList(){var t=(await this.$http.post("getlinkExpressionList",{hCatID:this.queryInfo.catID}))["data"];if(200!==t.status)return this.$message.error("获取父级分类数据失败！");this.linkExpressionList=t.data_MetaLink,this.tableAfieldlist=JSON.parse(t.tableAfield),this.tableBfieldlist=JSON.parse(t.tableBfield)},handItemRowClick(t,e,a){this.linkItemList=[],this.linkExpressionList=[],this.linkExpressionList1=[],this.linkExpressionList2=[],this.linkExpressionList3=[],this.linkExpressionList4=[],this.linkExpressionList5=[],this.editItemID=t.t_ID,this.ItemName=t.t_Name,this.ItemCode=t.t_Code,this.ItemCatID=t.t_CatID,this.getDataACL(t.t_CatID,t.t_ID),this.getReviewList(this.editItemID)},async getDataACL(t,e){if(t=(await this.$http.post("CheckDataACL",{hCatID:t,hItemID:e,hToken:window.sessionStorage.getItem("token")})).data,200!==t.status)return this.$message.error("获取对象的数据权限失败！");0!==t.total?this.ACLList=JSON.parse(t.data):this.ACLList=[]},handLinkRowClick(t,e,a){this.linkItemList=[],this.getlinkItemList(t.SourceCatID,t.TargetCatID,this.editItemID,t.ExpressionID)},async getlinkItemList(t,e,a,i){if(t=(await this.$http.post("getLinkItemList",{hSourceCatID:t,hTargetCatID:e,hItemID:a,hExpressionID:i,hToken:window.sessionStorage.getItem("token"),argItemIDs:null})).data,200!==t.status)return this.$message.error("获取关联表达式对应的 LinkItem 数据失败！");0!==t.total?this.linkItemList=JSON.parse(t.data):this.linkItemList=[],this.linkAfieldlist=JSON.parse(t.tableAfield)},async getWhereUsedItemList(t,e){if(t=(await this.$http.post("getWhereUsedItemList",{hSourceCatID:t,hItemID:e,hToken:window.sessionStorage.getItem("token"),argItemIDs:null})).data,200!==t.status)return this.$message.error("获取关联表达式对应的 LinkItem 数据失败！");0!==t.total?this.WhereUsedItemList=JSON.parse(t.data):this.WhereUsedItemList=[],this.linkAfieldlist=JSON.parse(t.tableAfield)},async getReviewList(t){if(t=(await this.$http.post("getReviewList",{hItemID:t})).data,200!==t.status)return this.$message.error("评审过程数据失败！");0!==t.total?this.reviewItemList=JSON.parse(t.data):this.reviewItemList=[],this.reviewFieldList=JSON.parse(t.tableBfield)},async getVersionList(t,e){if(t=(await this.$http.post("getVersionList",{hItemID:t,hCatID:e})).data,200!==t.status)return this.$message.error("获取版本历史数据失败！");0!==t.total?this.versionItemList=JSON.parse(t.data):this.versionItemList=[]},getItem(t){this.datalist.forEach(e=>{e.t_ID===t&&(e.t_ControlType,this.editDataForm=e,this.editDataForm.t_CreateTime=this.showDate(this.editDataForm.t_CreateTime),this.editDataForm.t_CheckOutTime=this.showDate(this.editDataForm.t_CheckOutTime),this.editDataForm.t_ReleaseTime=this.showDate(this.editDataForm.t_ReleaseTime),this.editDataForm.t_LastModTime=this.showDate(this.editDataForm.t_LastModTime))})},handleSizeChange(t){this.queryInfo.pageSize=t,this.getDataList()},handleCurrentChange(t){this.queryInfo.pageNum=t,this.getDataList()},addDialogClosed(){for(let t=0;t<this.tableBfieldlist.length;t++)this.addDataForm[this.tableBfieldlist[t].t_FieldName]=""},editDialogClosed(){for(let t=0;t<this.tableBfieldlist.length;t++)this.editDataForm[this.tableBfieldlist[t].t_FieldName]=""},transArrToString(t){if(!Array.isArray(t))return!1;for(var e="",a=0,i=t.length;a<i;a++)0===a?e=t[a]:e+=","+t[a];return e},transStrToArr(t){return t.split(",")},async addData(){for(let a=0;a<this.tableBfieldlist.length;a++){var t;4===this.tableBfieldlist[a].t_ControlType&&(t="",t=this.transArrToString(this.checkedData[this.tableBfieldlist[a].t_FieldName]),this.addDataForm[this.tableBfieldlist[a].t_FieldName]=t),12===this.tableBfieldlist[a].t_ControlType&&(t=this.mtemp[a],this.addDataForm[this.tableBfieldlist[a].t_FieldName]=this.mtemp[a]),30===this.tableBfieldlist[a].t_ControlType&&(t=this.vdx[a],this.addDataForm[this.tableBfieldlist[a].t_FieldName]=this.vdx[a])}var e=(await this.$http.post("addDataBusiness",{hCatID:this.queryInfo.catID,form:JSON.stringify(this.addDataForm),hToken:window.sessionStorage.getItem("token")}))["data"];200===e.status?(this.$message.success("添加数据成功！"),this.addDialogVisible=!1,this.getDataList()):-201===e.status?this.$message.error("名称、代号不能为空！！！"):this.$message.error(e.Msg)},async addDataPushFlow(){for(let a=0;a<this.tableBfieldlist.length;a++){var t;4===this.tableBfieldlist[a].t_ControlType&&(t="",t=this.transArrToString(this.checkedData[this.tableBfieldlist[a].t_FieldName]),this.addDataForm[this.tableBfieldlist[a].t_FieldName]=t),12===this.tableBfieldlist[a].t_ControlType&&(t=this.mtemp[a],this.addDataForm[this.tableBfieldlist[a].t_FieldName]=this.mtemp[a]),30===this.tableBfieldlist[a].t_ControlType&&(t=this.vdx[a],this.addDataForm[this.tableBfieldlist[a].t_FieldName]=this.vdx[a])}var e=(await this.$http.post("addDataPushFlow",{hCatID:this.queryInfo.catID,form:JSON.stringify(this.addDataForm),hToken:window.sessionStorage.getItem("token")}))["data"];200===e.status?(this.$message.success("添加数据成功！"),this.addDialogVisible=!1,this.getDataList()):-201===e.status?this.$message.error("名称、代号不能为空！！！"):201===e.status||202===e.status?(this.$message.error(e.Msg),this.addDialogVisible=!1,this.getDataList()):this.$message.error(e.Msg)},async editData(){for(let a=0;a<this.tableBfieldlist.length;a++){var t;4===this.tableBfieldlist[a].t_ControlType&&(t="",t=this.transArrToString(this.checkedData[this.tableBfieldlist[a].t_FieldName]),this.editDataForm[this.tableBfieldlist[a].t_FieldName]=t),30===this.tableBfieldlist[a].t_ControlType&&(this.editDataForm[this.tableBfieldlist[a].t_FieldName]=this.vdx[a])}var e=(await this.$http.post("editData",{hItemID:this.editItemID,form:JSON.stringify(this.editDataForm),hToken:window.sessionStorage.getItem("token")}))["data"];200!==e.status&&this.$message.error("修改数据失败！"),this.$message.success("修改数据成功！"),this.editDialogVisible=!1,this.getDataList()},async deleteDataItem(t,e){var a;return"confirm"!==await this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(t=>t)?this.$message.info("已取消删除"):(a=(await this.$http.post("deleteData",{hItemID:this.editItemID,hCatID:this.ItemCatID,hToken:window.sessionStorage.getItem("token")}))["data"],200!==a.status?this.$message.error("删除数据失败 -- "+a.Msg):(this.getDataList(),void this.$message.success("删除数据成功！")))},async showEditDialog(t){var e,a,i=(await this.$http.post("getData",{hItemID:this.editItemID,hCatID:this.queryInfo.catID,hToken:window.sessionStorage.getItem("token")}))["data"];0===i.total?this.templist="":this.templist=JSON.parse(i.data),this.editDataForm=this.templist[0];for(let l=0;l<this.tableBfieldlist.length;l++)4===this.tableBfieldlist[l].t_ControlType?(e=this.editDataForm[this.tableBfieldlist[l].t_FieldName],this.vdd[l]=null===e?[]:this.transStrToArr(e),this.checkedData[this.tableBfieldlist[l].t_FieldName]=this.vdd[l]):30===this.tableBfieldlist[l].t_ControlType?(a=this.editDataForm[this.tableBfieldlist[l].t_FieldName],2===this.tableBfieldlist[l].t_DataType?this.vdx[l]=null===a?0:a.toString():1===this.tableBfieldlist[l].t_DataType&&(e=this.editDataForm[this.tableBfieldlist[l].t_FieldName],this.vdx[l]=e,this.checkedData[this.tableBfieldlist[l].t_FieldName]=e)):(this.checkedData[this.tableBfieldlist[l].t_FieldName]=[],this.vdd[l]=[0]);this.editDialogVisible=!0},async showPushtoFlowDialog(t,e,a){this.fItemID=t,this.fCatID=e,t=(await this.$http.post("getPushFlowList",{hItemID:t,hCatID:e,hItemState:a,hToken:window.sessionStorage.getItem("token")})).data,200!==t.status&&this.$message.error("获取流程列表失败！"),this.$message.success("获取流程列表成功！"),0===t.total?this.templist="":this.flowlist=JSON.parse(t.data),this.flowBfieldlist=JSON.parse(t.tableBfield),this.pushToFlowDialogVisible=!0},async AutoPushItemToFlow(t,e,a){if(0!==a)return this.$message.error("所选对象处于评审、发布等状态时，不能加入流程！");t=(await this.$http.post("AutoPushItemToFlow",{hItemID:t,hCatID:e,hItemState:a,hToken:window.sessionStorage.getItem("token")})).data,-200===t.status||-100===t.status?this.$message.error(t.Msg):202===t.status?this.$message.success(t.Msg):this.$message.error("Item自动匹配规则出错！")},async getParentCateList(){var t=(await this.$http.post("getCatList",{hCatID:"IDATA",hRoleID:this.$root.gRoleID}))["data"];if(200!==t.status)return this.$message.error("获取父级分类数据失败！");this.parentCateList=t.data1},parentCateChanged(){0<this.selectedKeys.length?(this.cat_pid=this.selectedKeys[this.selectedKeys.length-1],this.cat_level=this.selectedKeys.length):(this.cat_pid=0,this.cat_level=0)},handleNodeClick(t){this.queryInfo.catID=t.t_ID,this.idArray=[t.t_ID],window.localStorage.setItem("currentDataCatID",t.t_ID),this.checkCreateACL(t.t_ID),this.getDataList(),this.linkItemList=[],this.linkExpressionList=[]},handleClick(t,e){"tab-whereused"===t.paneName?this.getWhereUsedItemList(this.queryInfo.catID,this.editItemID):"second"===t.paneName?alert(2):"third"===t.paneName&&alert(3)},celledit(t,e,a,i){a.contentEditable=!0,a.focus();const l=this;(this.boolen=!0)===this.boolen&&(document.onkeydown=function(t){var e,a=document.activeElement,i=a.cellIndex,s=a.parentElement.sectionRowIndex,o=a.parentElement.parentElement.children;a.onblur=function(){l.check(a.innerText)},38===t.keyCode?s-1<0?(a.contentEditable=!1,o[o.length-1].children[i].contentEditable=!0,o[o.length-1].children[i].focus()):(a.contentEditable=!1,o[s-1].children[i].contentEditable=!0,o[s-1].children[i].focus()):37===t.keyCode?(e=o[o.length-1].children.length-1,i-1==0?s-1<0?(a.contentEditable=!1,o[o.length-1].children[e].contentEditable=!0,o[o.length-1].children[e].focus()):(a.contentEditable=!1,o[s-1].children[e].contentEditable=!0,o[s-1].children[e].focus()):(a.contentEditable=!1,a.parentElement.children[i-1].contentEditable=!0,a.parentElement.children[i-1].focus())):39===t.keyCode||9===t.keyCode?(t.preventDefault(),i+1===a.parentElement.children.length?s+1===o.length?(a.contentEditable=!1,o[0].children[1].contentEditable=!0,o[0].children[1].focus()):(a.contentEditable=!1,o[s+1].children[1].contentEditable=!0,o[s+1].children[1].focus()):(a.contentEditable=!1,a.parentElement.children[i+1].contentEditable=!0,a.parentElement.children[i+1].focus())):40!==t.keyCode&&13!==t.keyCode||(t.preventDefault(),s+1===o.length?(a.contentEditable=!1,o[0].children[i].contentEditable=!0,o[0].children[i].focus()):(a.contentEditable=!1,o[s+1].children[i].contentEditable=!0,o[s+1].children[i].focus()))})}}};a("18ad"),a=a("2877"),a=Object(a.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"mainZone",staticClass:"datalist-container",style:{height:t.mainHeight+"px"}},[a("el-row",{attrs:{gutter:5}},[a("el-col",{attrs:{span:4}},[a("el-card",{attrs:{"body-style":{padding:"5px"}}},[a("el-scrollbar",{style:{height:t.slbHeight+"px"}},[a("el-tree",{ref:"treeList",attrs:{"default-expanded-keys":t.idArray,"current-node-key":this.queryInfo.catID,"highlight-current":"",data:t.parentCateList,props:t.cascaderProps,"node-key":"t_ID"},on:{"node-click":t.handleNodeClick}})],1)],1)],1),a("el-col",{attrs:{span:20}},[a("el-card",{attrs:{"body-style":{padding:"5px"}}},[a("el-row",{attrs:{gutter:5}},[a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},on:{clear:t.getDataList},model:{value:t.queryInfo.query,callback:function(e){t.$set(t.queryInfo,"query",e)},expression:"queryInfo.query"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.getDataList},slot:"append"})],1)],1),t._e(),a("el-col",{attrs:{span:4}},[a("el-select",{attrs:{placeholder:"请选择版本"},on:{change:t.selectChanged},model:{value:t.mVersion,callback:function(e){t.mVersion=e},expression:"mVersion"}},t._l(t.options,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),t._e(),a("el-col",{attrs:{span:14}},[a("el-button-group",{staticStyle:{float:"right"}},[a("el-button",{attrs:{icon:"el-icon-circle-plus-outline",type:"primary",disabled:t.vCreateFlag},on:{click:t.openaddDialog}},[t._v("添加")]),a("el-button",{attrs:{icon:"el-icon-view",type:"primary",disabled:this.ACLList.indexOf(1)<0},on:{click:t.showDatatDetailDialog}},[t._v("浏览")]),a("el-button",{attrs:{icon:"el-icon-edit",type:"primary",disabled:this.ACLList.indexOf(2)<0},on:{click:t.showEditDialog}},[t._v("编辑")]),a("el-button",{attrs:{icon:"el-icon-delete",type:"primary",disabled:this.ACLList.indexOf(8)<0},on:{click:t.deleteDataItem}},[t._v("删除")]),a("el-button",{attrs:{icon:"el-icon-upload2",type:"primary",disabled:this.ACLList.indexOf(1)<0},on:{click:t.openaddDialog}},[t._v("提交")]),a("el-button",{attrs:{icon:"el-icon-s-promotion",type:"primary",disabled:this.ACLList.indexOf(15)<0},on:{click:t.openaddDialog}},[t._v("发布")])],1)],1)],1),a("el-table",{directives:[{name:"show",rawName:"v-show",value:0<t.datalist.length,expression:"datalist.length > 0 ? true: false"}],ref:"tableRef",attrs:{data:t.datalist,height:t.tableHeight,border:"","highlight-current-row":"","row-style":{height:"30px"},"cell-style":{padding:"0px"}},on:{"row-click":t.handItemRowClick,"cell-click":t.celledit}},[a("el-table-column",{attrs:{type:"index"}}),a("el-table-column",{attrs:{prop:"v_StateName",label:"状态"}}),a("el-table-column",{attrs:{prop:"t_Ver",label:"版本"}}),t._l(t.tableBfieldlist,(function(t){return a("li",{key:t.t_FieldID},[a("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:t.t_Name,prop:t.t_FieldName}})],1)})),a("el-table-column",{attrs:{label:"操作",width:"220"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"数据包详情",enterable:!1,placement:"top"}},[a("el-button",{attrs:{type:"warning",icon:"el-icon-setting",size:"mini",circle:"",plain:""},on:{click:function(a){return t.showDatatDetailDialog(e.row.t_ID,e.row.t_CatID,e.row.t_Code,e.row.t_Name)}}})],1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"人工选择流程",enterable:!1,placement:"top"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini",circle:"",plain:""},on:{click:function(a){return t.showPushtoFlowDialog(e.row.t_ID,e.row.t_CatID,e.row.t_State)}}})],1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"自动匹配流程",enterable:!1,placement:"top"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini",circle:"",plain:""},on:{click:function(a){return t.AutoPushItemToFlow(e.row.t_ID,e.row.t_CatID,e.row.t_State)}}})],1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"修改该条记录",enterable:!1,placement:"top"}},[a("el-button",{attrs:{type:"warning",icon:"el-icon-edit",size:"mini",circle:"",plain:""},on:{click:function(a){return t.showEditDialog(e.row.t_ID)}}})],1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除选中数据记录",enterable:!1,placement:"top"}},[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini",circle:"",plain:""},on:{click:function(a){return t.deleteDataItem(e.row.t_ID,e.row.t_CatID)}}})],1)]}}])})],2),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:t.pageFlag,expression:"pageFlag"}],attrs:{"current-page":t.queryInfo.pagenum,"page-sizes":[30,50,100,200],"page-size":t.queryInfo.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"添加数据",visible:t.addDialogVisible,width:"50%"},on:{"update:visible":function(e){t.addDialogVisible=e},close:t.addDialogClosed}},[a("el-form",{ref:"addDataFormRef",attrs:{model:t.addDataForm,rules:t.addDataFormRules,"label-width":"100px"},nativeOn:{submit:function(t){t.preventDefault()}}},t._l(t.tableBfieldlist,(function(e,i){return a("el-col",{key:e.t_FieldID,attrs:{span:12}},[a("el-form-item",{attrs:{label:e.t_Name,prop:t.addDataForm[e.t_FieldName]}},[3===e.t_ControlType?a("div",[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"下拉框，请选择"},model:{value:t.addDataForm[e.t_FieldName],callback:function(a){t.$set(t.addDataForm,e.t_FieldName,a)},expression:"addDataForm[Bfield.t_FieldName]"}},t._l(e.PropValue,(function(t){return a("el-option",{key:t.t_No,attrs:{label:t.t_Display,value:t.t_Value}})})),1)],1):1===e.t_ControlType?a("div",[1===e.t_DataType?a("div",[a("el-input",{ref:"input"+i,refInFor:!0,attrs:{placeholder:"请输入字符串-- abc"},on:{focus:function(e){return t.focus(e)}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.keyup_({e:e,i:i})}},model:{value:t.addDataForm[e.t_FieldName],callback:function(a){t.$set(t.addDataForm,e.t_FieldName,a)},expression:"addDataForm[Bfield.t_FieldName]"}})],1):2===e.t_DataType?a("div",[a("el-input",{ref:"input"+i,refInFor:!0,attrs:{placeholder:"请输入整数-- 123"},on:{focus:function(e){return t.focus(e)}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.keyup_({e:e,i:i})}},model:{value:t.addDataForm[e.t_FieldName],callback:function(a){t.$set(t.addDataForm,e.t_FieldName,a)},expression:"addDataForm[Bfield.t_FieldName]"}})],1):3===e.t_DataType?a("div",[a("el-input",{ref:"input"+i,refInFor:!0,attrs:{placeholder:"请输入数值-- 00.10"},on:{focus:function(e){return t.focus(e)}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.keyup_({e:e,i:i})}},model:{value:t.addDataForm[e.t_FieldName],callback:function(a){t.$set(t.addDataForm,e.t_FieldName,a)},expression:"addDataForm[Bfield.t_FieldName]"}})],1):t._e()]):2===e.t_ControlType?a("div",[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"多行编辑框，请输入字符串 -- abcabc123"},model:{value:t.addDataForm[e.t_FieldName],callback:function(a){t.$set(t.addDataForm,e.t_FieldName,a)},expression:"addDataForm[Bfield.t_FieldName]"}})],1):4===e.t_ControlType?a("div",[a("el-checkbox-group",{model:{value:t.vdd[i],callback:function(e){t.$set(t.vdd,i,e)},expression:"vdd[i]"}},t._l(e.PropValue,(function(i){return a("el-checkbox",{key:i.t_No,attrs:{label:i.t_Display},on:{change:function(a){return t.handleChange(a,i.t_Display,e.t_FieldName)}}},[t._v(t._s(i.t_Display)+" ")])})),1)],1):30===e.t_ControlType?a("div",[a("el-radio-group",{model:{value:t.vdx[i],callback:function(e){t.$set(t.vdx,i,e)},expression:"vdx[i]"}},t._l(e.PropValue,(function(e){return a("el-radio",{key:e.t_No,attrs:{label:e.t_Display},on:{change:function(a){return t.handleRadioChange(a,e.t_Display,i)}}},[t._v(t._s(e.t_Display)+" ")])})),1)],1):110===e.t_ControlType?a("div",[a("el-checkbox",{attrs:{placeholder:"选择日期"},model:{value:t.addDataForm[e.t_FieldName],callback:function(a){t.$set(t.addDataForm,e.t_FieldName,a)},expression:"addDataForm[Bfield.t_FieldName]"}},[t._v(" "+t._s(e.t_Name)+" ")])],1):12===e.t_ControlType?a("div",[a("el-date-picker",{attrs:{type:"date",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:t.mtemp[i],callback:function(e){t.$set(t.mtemp,i,e)},expression:"mtemp[i]"}})],1):a("div",[a("el-input",{ref:"linkName",refInFor:!0,attrs:{placeholder:"其她情况，引用等等"},model:{value:t.addDataForm[e.t_FieldName],callback:function(a){t.$set(t.addDataForm,e.t_FieldName,a)},expression:"addDataForm[Bfield.t_FieldName]"}})],1)])],1)})),1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{ref:"addSubmit",attrs:{type:"primary"},on:{click:t.addData}},[t._v("确 定")]),a("el-button",{on:{click:function(e){t.addDialogVisible=!1}}},[t._v("取 消")])],1)],1),a("el-dialog",{attrs:{title:"修改数据信息",visible:t.editDialogVisible,width:"50%"},on:{"update:visible":function(e){t.editDialogVisible=e},close:t.editDialogClosed}},[a("el-form",{ref:"editDataFormRef",attrs:{model:t.editDataForm,rules:t.editDataFormRules,"label-width":"100px","label-position":"left"},nativeOn:{submit:function(t){t.preventDefault()}}},t._l(t.tableBfieldlist,(function(e,i){return a("el-col",{key:e.t_FieldID,attrs:{span:12}},[a("el-form-item",{attrs:{label:e.t_Name}},[3===e.t_ControlType?a("div",[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"下拉框，请选择"},model:{value:t.editDataForm[e.t_FieldName],callback:function(a){t.$set(t.editDataForm,e.t_FieldName,a)},expression:"editDataForm[Bfield.t_FieldName]"}},t._l(e.PropValue,(function(t){return a("el-option",{key:t.t_No,attrs:{label:t.t_Display,value:t.t_Value}})})),1)],1):1===e.t_ControlType?a("div",[1===e.t_DataType?a("div",[a("el-input",{ref:"m_input"+i,refInFor:!0,attrs:{placeholder:"请输入字符串-- abc"},on:{focus:function(e){return t.focus(e)}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.keyup_edit({e:e,i:i})}},model:{value:t.editDataForm[e.t_FieldName],callback:function(a){t.$set(t.editDataForm,e.t_FieldName,a)},expression:"editDataForm[Bfield.t_FieldName]"}})],1):2===e.t_DataType?a("div",[a("el-input",{ref:"m_input"+i,refInFor:!0,attrs:{placeholder:"请输入整数-- 123"},on:{focus:function(e){return t.focus(e)}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.keyup_edit({e:e,i:i})}},model:{value:t.editDataForm[e.t_FieldName],callback:function(a){t.$set(t.editDataForm,e.t_FieldName,a)},expression:"editDataForm[Bfield.t_FieldName]"}})],1):3===e.t_DataType?a("div",[a("el-input",{ref:"m_input"+i,refInFor:!0,attrs:{placeholder:"请输入数值-- 00.10"},on:{focus:function(e){return t.focus(e)}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.keyup_edit({e:e,i:i})}},model:{value:t.editDataForm[e.t_FieldName],callback:function(a){t.$set(t.editDataForm,e.t_FieldName,a)},expression:"editDataForm[Bfield.t_FieldName]"}})],1):t._e()]):2===e.t_ControlType?a("div",[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"多行编辑框，请输入字符串 -- abcabc123"},model:{value:t.editDataForm[e.t_FieldName],callback:function(a){t.$set(t.editDataForm,e.t_FieldName,a)},expression:"editDataForm[Bfield.t_FieldName]"}})],1):4===e.t_ControlType?a("div",[a("el-checkbox-group",{model:{value:t.vdd[i],callback:function(e){t.$set(t.vdd,i,e)},expression:"vdd[i]"}},t._l(e.PropValue,(function(i){return a("el-checkbox",{key:i.t_No,attrs:{label:i.t_Display},on:{change:function(a){return t.handleChange(a,i.t_Display,e.t_FieldName)}}},[t._v(t._s(i.t_Display)+" ")])})),1)],1):30===e.t_ControlType?a("div",[a("el-radio-group",{model:{value:t.vdx[i],callback:function(e){t.$set(t.vdx,i,e)},expression:"vdx[i]"}},t._l(e.PropValue,(function(e){return a("el-radio",{key:e.t_No,attrs:{label:e.t_Display},on:{change:function(a){return t.handleRadioChange(a,e.t_Display,i)}}},[t._v(t._s(e.t_Display)+" ")])})),1)],1):110===e.t_ControlType?a("div",[a("el-checkbox",{attrs:{placeholder:"选择日期"},model:{value:t.editDataForm[e.t_FieldName],callback:function(a){t.$set(t.editDataForm,e.t_FieldName,a)},expression:"editDataForm[Bfield.t_FieldName]"}},[t._v(" "+t._s(e.t_Name)+" ")])],1):12===e.t_ControlType?a("div",[a("el-date-picker",{attrs:{type:"date",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:t.editDataForm[e.t_FieldName],callback:function(a){t.$set(t.editDataForm,e.t_FieldName,a)},expression:"editDataForm[Bfield.t_FieldName]"}})],1):a("div",[a("el-input",{ref:"linkName",refInFor:!0,attrs:{placeholder:"其她情况，引用等等"},model:{value:t.editDataForm[e.t_FieldName],callback:function(a){t.$set(t.editDataForm,e.t_FieldName,a)},expression:"editDataForm[Bfield.t_FieldName]"}})],1)])],1)})),1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{ref:"editSubmit",attrs:{type:"primary"},on:{click:t.editData}},[t._v("确 定")]),a("el-button",{on:{click:function(e){t.editDialogVisible=!1}}},[t._v("取 消")])],1)],1),a("el-dialog",{attrs:{title:"加入工作流",visible:t.pushToFlowDialogVisible,width:"50%"},on:{"update:visible":function(e){t.pushToFlowDialogVisible=e}}},[a("el-table",{attrs:{data:t.flowlist,height:"500px",border:"",stripe:"","highlight-current-row":"","row-style":{height:"30px"},"cell-style":{padding:"0px"}}},[a("el-table-column",{attrs:{type:"index"}}),a("el-table-column",{attrs:{prop:"t_FlowNumber",label:"编码"}}),a("el-table-column",{attrs:{prop:"t_Name",label:"名称"}}),a("el-table-column",{attrs:{prop:"t_FlowState",label:"状态"}}),a("el-table-column",{attrs:{prop:"v_LeaderName",label:"管理者"}}),a("el-table-column",{attrs:{prop:"t_ID",label:"ID"}}),a("el-table-column",{attrs:{prop:"t_CatID",label:"CatID"}}),a("el-table-column",{attrs:{label:"操作",width:"125px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"加入该流程",enterable:!1,placement:"top"}},[a("el-button",{attrs:{type:"warning",icon:"el-icon-setting",size:"mini",circle:"",plain:""},on:{click:function(a){return t.pushItemToFlow(e.row.t_ID,e.row.t_CatID)}}})],1)]}}])})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.pushToFlowDialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:t.DataName,visible:t.DataDetailDialogVisible,width:"70%"},on:{"update:visible":function(e){t.DataDetailDialogVisible=e}}},[a("el-card",{staticClass:"card-3",attrs:{"body-style":{padding:"5px"}}},[a("el-tabs",{directives:[{name:"show",rawName:"v-show",value:0<t.datalist.length,expression:"datalist.length > 0 ? true: false"}],on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"基本信息",name:"tab-1"}},[a("el-form",{ref:"editDataFormRef",staticClass:"form-1",attrs:{model:t.editDataForm,"label-width":"80px","label-position":"left",disabled:""}},[a("el-form-item",{attrs:{label:"创建者"}},[a("el-input",{model:{value:t.editDataForm.v_CreateByName,callback:function(e){t.$set(t.editDataForm,"v_CreateByName",e)},expression:"editDataForm['v_CreateByName']"}})],1),a("el-form-item",{attrs:{label:"创建时间"}},[a("el-input",{model:{value:t.editDataForm.t_CreateTime,callback:function(e){t.$set(t.editDataForm,"t_CreateTime",e)},expression:"editDataForm['t_CreateTime']"}})],1),a("el-form-item",{attrs:{label:"修改者"}},[a("el-input",{model:{value:t.editDataForm.v_ModByName,callback:function(e){t.$set(t.editDataForm,"v_ModByName",e)},expression:"editDataForm['v_ModByName']"}})],1),a("el-form-item",{attrs:{label:"修改时间"}},[a("el-input",{model:{value:t.editDataForm.t_LastModTime,callback:function(e){t.$set(t.editDataForm,"t_LastModTime",e)},expression:"editDataForm['t_LastModTime']"}})],1),a("el-form-item",{attrs:{label:"类别"}},[a("el-input",{model:{value:t.editDataForm.v_CatName,callback:function(e){t.$set(t.editDataForm,"v_CatName",e)},expression:"editDataForm['v_CatName']"}})],1),a("el-form-item",{attrs:{label:"状态"}},[a("el-input",{model:{value:t.editDataForm.v_StateName,callback:function(e){t.$set(t.editDataForm,"v_StateName",e)},expression:"editDataForm['v_StateName']"}})],1),a("el-form-item",{attrs:{label:"版本"}},[a("el-input",{model:{value:t.editDataForm.t_Ver,callback:function(e){t.$set(t.editDataForm,"t_Ver",e)},expression:"editDataForm['t_Ver']"}})],1),a("el-form-item",{attrs:{label:"安全级别"}},[a("el-input",{model:{value:t.editDataForm.v_SecurityLevelName,callback:function(e){t.$set(t.editDataForm,"v_SecurityLevelName",e)},expression:"editDataForm['v_SecurityLevelName']"}})],1)],1)],1),a("el-tab-pane",{attrs:{label:"特有属性",name:"tab-2"}},t._l(t.tableBfieldlist,(function(e){return a("el-form",{key:e.t_FieldID,ref:"editDataFormRef",refInFor:!0,staticClass:"form-1",attrs:{model:t.editDataForm,"label-width":"80px",disabled:"",size:"small","label-position":"left"}},[a("el-form-item",{attrs:{label:e.t_Name}},[3===e.t_ControlType?a("div",[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:t.editDataForm[e.t_FieldName],callback:function(a){t.$set(t.editDataForm,e.t_FieldName,a)},expression:"editDataForm[Bfield.t_FieldName]"}},t._l(e.PropValue,(function(t){return a("el-option",{key:t.t_No,attrs:{label:t.t_Display,value:t.t_Value}})})),1)],1):a("div",[a("el-input",{model:{value:t.editDataForm[e.t_FieldName],callback:function(a){t.$set(t.editDataForm,e.t_FieldName,a)},expression:"editDataForm[Bfield.t_FieldName]"}})],1)])],1)})),1),a("el-tab-pane",{attrs:{label:"Link",name:"tab-3"}},[a("el-row",{attrs:{gutter:15}},[a("el-col",{attrs:{span:6}},[a("el-table",{attrs:{data:t.linkExpressionList,height:"500px",border:"",stripe:""},on:{"row-click":t.handLinkRowClick}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),a("el-table-column",{attrs:{prop:"LinkName",label:"关联类别"}})],1)],1),a("el-col",{attrs:{span:18}},[a("el-table",{directives:[{name:"show",rawName:"v-show",value:0<t.linkItemList.length,expression:"linkItemList.length > 0 ? true: false"}],attrs:{data:t.linkItemList,height:"500px",border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"名称",prop:"t_Name"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"代号",prop:"t_Code"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"类别",prop:"v_CatName"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"创建者",prop:"v_CreateByName"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"创建时间",prop:"t_CreateTime"}})],1)],1)],1)],1),a("el-tab-pane",{attrs:{label:"Where Used",name:"tab-whereused"}},[a("el-table",{directives:[{name:"show",rawName:"v-show",value:0<t.WhereUsedItemList.length,expression:"WhereUsedItemList.length > 0 ? true: false"}],attrs:{data:t.WhereUsedItemList,height:"500px",border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"名称",prop:"t_Name"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"代号",prop:"t_Code"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"类别",prop:"v_CatName"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"创建者",prop:"v_CreateByName"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"创建时间",prop:"t_CreateTime"}})],1)],1),a("el-tab-pane",{attrs:{label:"审批过程",name:"tab-8"}},[a("el-table",{directives:[{name:"show",rawName:"v-show",value:0<t.reviewItemList.length,expression:"reviewItemList.length > 0 ? true: false"}],attrs:{data:t.reviewItemList,height:"500px",border:"",stripe:""}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"60px"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"节点任务",prop:"t_StepName",width:"120px"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"执行人",prop:"t_LoginName",width:"100px"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"状态",prop:"t_StepState",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(1===e.row.t_StepState?"执行中":"已完成"))]}}])}),t._e(),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"结论",prop:"t_IsAgree",width:"80px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(1===e.row.t_IsAgree?"同意":"否决"))]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"意见",prop:"t_Detail"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"提交时间",prop:"t_CreateTime",width:"180px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.t_CreateTime.substring(0,16).replace("T"," ")))])]}}])}),t._e(),t._e(),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"所在流程",prop:"v_FlowItemName",width:"260px"}}),t._e(),t._e()],1)],1),a("el-tab-pane",{attrs:{label:"版本历史",name:"fourth"}},[a("el-table",{directives:[{name:"show",rawName:"v-show",value:0<t.versionItemList.length,expression:"versionItemList.length > 0 ? true: false"}],attrs:{data:t.versionItemList,height:"500px",border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"类别",prop:"t_CatID"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"名称",prop:"t_Name"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"编号",prop:"t_Code"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"版本号",prop:"t_Ver"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"修改人",prop:"t_LastModBy"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"修改时间",prop:"t_LastModTime"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"创建时间",prop:"t_CreateBy"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"是否新版",prop:"t_IsNewVer"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"发行状态",prop:"t_IsReleaseVer"}})],1)],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,"763fb2f7",null);e.default=a.exports},dd32:function(t,e,a){}}]);