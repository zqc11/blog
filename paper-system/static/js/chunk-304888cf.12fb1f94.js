(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-304888cf"],{"82ad":function(e,t,a){},d0f7:function(e,t,a){"use strict";a.r(t);var r={data(){return{queryInfo:{query:"",pageNum:"1",pageSize:"30",folderID:"0"},tableHeight:this.$root.gScreenHeight-182,mainHeight:this.$root.gScreenHeight-70,slbHeight:this.$root.gScreenHeight-90,folderList:[],itemList:[],cascaderProps:{value:"t_ID",label:"label",children:"Children",checkStrictly:!0,expandTrigger:"hover"},selectedKeys:[],idArray:[],catType:"",dirType:0,isCatDir:0,total:0,pageFlag:!0}},created(){this.$root.leveOnePathName="目录",this.$root.leveTwoPathName="文件夹",this.tableHeight=JSON.parse(window.localStorage.getItem("gHeight"))-285,this.slbHeight=JSON.parse(window.localStorage.getItem("gHeight"))-195,this.mainHeight=JSON.parse(window.localStorage.getItem("gHeight"))-185,this.mainWidth=this.$root.gScreenWidth-210,this.getFolderTree(),null!==window.localStorage.getItem("currentFolderID")&&(this.queryInfo.folderID=window.localStorage.getItem("currentFolderID"),this.idArray=[this.queryInfo.folderID])},methods:{async getFolderTree(){var e=(await this.$http.post("getFolderTree",{hFolderID:"Root_FolderID"}))["data"];if(200!==e.status)return this.$message.error("获取目录树数据失败！");this.folderList=e.data1},async getFolderItem(){var e=(await this.$http.post("getFolderItem",{query:this.queryInfo.query,pageNum:this.queryInfo.pageNum,pageSize:this.queryInfo.pageSize,hFolderID:this.queryInfo.folderID,hCatType:this.catType,hIsCatDir:this.isCatDir,hToken:window.sessionStorage.getItem("token"),hVersion:this.mVersion}))["data"];return 202===e.status?(this.itemList=[],this.$message.error("请重新登录！")):203===e.status?(this.itemList=[],this.$message.error("这是工作区！请点击工作区下的目录")):(200!==e.status&&(this.itemList=[]),0!==e.total?(this.itemList=JSON.parse(e.data),this.editItemID=this.itemList[0].t_ID,this.ItemName=this.itemList[0].t_Name,this.ItemCode=this.itemList[0].t_Code,this.ItemCatID=this.queryInfo.folderID):this.itemList=[],this.tableBfieldlist=JSON.parse(e.tableBfield),this.total=e.total,this.pageFlag=this.total>this.queryInfo.pageSize,!0===this.pageFlag?this.tableHeight=JSON.parse(window.localStorage.getItem("gHeight"))-285:this.tableHeight=JSON.parse(window.localStorage.getItem("gHeight"))-240,void this.$nextTick(()=>{this.$refs.tableRef.setCurrentRow(this.itemList[0])}))},handleSizeChange(e){this.queryInfo.pageSize=e,this.getFolderItem()},handleCurrentChange(e){this.queryInfo.pageNum=e,this.getFolderItem()},handItemRowClick(e,t,a){},handleNodeClick(e){this.queryInfo.folderID=e.t_ID,this.idArray=[e.t_ID],this.catType=e.TypeID,this.isCatDir=e.IsCatDir,this.dirType=e.DirTypeID,window.localStorage.setItem("currentFolderID",e.t_ID),this.getFolderItem()}}};a("f4f2"),a=a("2877"),a=Object(a.a)(r,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"mainZone",staticClass:"datalist-container",style:{height:e.mainHeight+"px"}},[a("el-row",{attrs:{gutter:5}},[a("el-col",{attrs:{span:4}},[a("el-card",{attrs:{"body-style":{padding:"5px"}}},[a("el-scrollbar",{style:{height:e.slbHeight+"px"}},[a("el-tree",{ref:"treeList",attrs:{"default-expanded-keys":e.idArray,"current-node-key":this.queryInfo.folderID,"highlight-current":"",data:e.folderList,props:e.cascaderProps,"node-key":"t_ID"},on:{"node-click":e.handleNodeClick}})],1)],1)],1),a("el-col",{attrs:{span:20}},[a("el-card",{attrs:{"body-style":{padding:"5px"}}},[a("el-row",{attrs:{gutter:5}},[a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"请输入文件名",clearable:""},on:{clear:e.getFolderItem},model:{value:e.queryInfo.query,callback:function(t){e.$set(e.queryInfo,"query",t)},expression:"queryInfo.query"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getFolderItem},slot:"append"})],1)],1)],1),a("el-table",{directives:[{name:"show",rawName:"v-show",value:0<e.itemList.length,expression:"itemList.length > 0 ? true: false"}],ref:"tableRef",attrs:{data:e.itemList,height:e.tableHeight,border:"","highlight-current-row":"","row-style":{height:"30px"},"cell-style":{padding:"0px"}},on:{"row-click":e.handItemRowClick}},[a("el-table-column",{attrs:{type:"index"}}),a("el-table-column",{attrs:{prop:"t_Name",label:"名称","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"t_Code",label:"代号",width:"120px","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"v_CatName",label:"类别",width:"120px","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"v_CreateByName",label:"创建人",width:"100px"}}),a("el-table-column",{attrs:{prop:"v_ModByName",label:"修改人",width:"100px"}}),a("el-table-column",{attrs:{prop:"t_LastModTime",label:"修改时间",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.t_LastModTime.substring(2,16).replace("T"," ")))])]}}])}),a("el-table-column",{attrs:{prop:"t_CreateTime",label:"创建时间",width:"75px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.t_LastModTime.substring(0,7)))])]}}])}),a("el-table-column",{attrs:{prop:"t_Ver",label:"版本",width:"50px"}})],1),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:e.pageFlag,expression:"pageFlag"}],attrs:{"current-page":e.queryInfo.pagenum,"page-sizes":[30,50,100,200],"page-size":e.queryInfo.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1)],1)}),[],!1,null,"2babf036",null);t.default=a.exports},f4f2:function(e,t,a){"use strict";a("82ad")}}]);