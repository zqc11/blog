(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-cc0977fc"],{"2c79":function(t,e,l){},"68a1":function(t,e,l){"use strict";l("2c79")},c3a9:function(t,e,l){"use strict";l.r(e);var a={data(){return{treeNodeData:"",treeNode:"",contextMenuVisible:!1,contextMenuTarget:null,nodeData:{},queryInfo:{query:"",pageNum:"1",pageSize:"30",catID:"IDATA"},fItemID:"",fCatID:"",mtemp:[""],checkedData:{},vdx:[""],vdd:[[]],tableHeight:window.innerHeight-275,mainHeight:window.innerHeight-400,DataName:"Item Detail",addDataForm:{},editDataForm:{},editFieldForm:{},datalist:[],templist:[],linkExpressionList:[],linkExpressionList1:[],linkExpressionList2:[],linkExpressionList3:[],linkExpressionList4:[],linkExpressionList5:[],catFieldList:[],tableBfieldlist:[],tableAfieldlist:[],linkAfieldlist:[],reviewItemList:[],reviewFieldList:[],versionItemList:[],pushToFlowDialogVisible:!1,flowlist:[],flowBfieldlist:[],total:0,editItemID:0,editLinkID:"",editTargetCatID:"",activeName:"second",addDialogVisible:!1,editFieldDialogVisible:!1,DataDetailDialogVisible:!0,addDataFormRules:{},editDataFormRules:{},editDialogVisible:!1,parentCateList:[],cascaderProps:{value:"t_ID",label:"label",children:"Children",checkStrictly:!0,expandTrigger:"hover"},selectedKeys:[],cat_pid:0,cat_level:0,config:{id:"t_ID",pid:"ParentID",children:"children"},idArray:[],pageFlag:!0}},created(){this.getParentCateList(),null!==window.localStorage.getItem("currentDataCatID")&&(this.queryInfo.catID=window.localStorage.getItem("currentDataCatID"),this.idArray=[this.queryInfo.catID]),this.$nextTick((function(){this.$refs.treeList.setCurrentKey(this.queryInfo.catID)}));for(let t=0;t<this.tableAfieldlist.length;t++)this.addDataForm[this.tableAfieldlist[t].t_FieldName]="";for(let t=0;t<this.tableBfieldlist.length;t++)this.editDataForm[this.tableBfieldlist[t].t_FieldName]=""},mounted(){this.contextMenuTarget=document.querySelector("#el-tree"),this.$nextTick(()=>{document.querySelectorAll('#el-tree [role="treeitem"]').forEach(t=>{t.addEventListener("contextmenu",t=>{t.target.click()})})})},methods:{focus(t){},keyup_({e:t,i:e}){const l=this;l.$refs["input"+e]&&l.$nextTick(()=>{t.target.blur();var a="input"+(e+1);void 0!==l.$refs[a]?l.$refs[a][0].focus():l.$refs.addSubmit&&l.$refs.addSubmit.$el.focus()})},keyup_edit({e:t,i:e}){const l=this;l.$refs["m_input"+e]&&l.$nextTick(()=>{t.target.blur();var a="m_input"+(e+1);void 0!==l.$refs[a]?l.$refs[a][0].focus():l.$refs.editSubmit&&l.$refs.editSubmit.$el.focus()})},handleRadioChange:function(t,e,l){},handleChange:function(t,e,l){t?this.checkedData[l].push(e):this.delete(e,l)},delete(t,e){var l=this.checkedData[e].findIndex(e=>{if(e===t)return!0});this.checkedData[e].splice(l,1)},SetFirstAddFocus(){this.$nextTick(t=>{this.$refs.input0[0].focus()})},SetFirstEditFocus(){this.$nextTick(t=>{this.$refs.m_input0[0].focus()})},async openaddDialog(){this.addDialogVisible=!0,this.tableBfieldlist.forEach((t,e)=>{this.$set(this.addDataForm,this.tableBfieldlist[e].t_FieldName,"")});for(let t=0;t<this.vdd.length;t++)this.vdd[t]=[];this.vdx=[];for(let t=0;t<this.tableBfieldlist.length;t++)this.vdd[t]=[0],this.mtemp[t]="",4===this.tableBfieldlist[t].t_ControlType&&(this.checkedData[this.tableBfieldlist[t].t_FieldName]=[]),30===this.tableBfieldlist[t].t_ControlType&&(this.checkedData[this.tableBfieldlist[t].t_FieldName]=[]);this.SetFirstAddFocus()},async showEditDialog(t){"0"===(this.editFieldForm=t).t_IsActive?this.editFieldForm.t_IsActive=!1:this.editFieldForm.t_IsActive=!0,"0"===t.t_IsVisible?this.editFieldForm.t_IsVisible=!1:this.editFieldForm.t_IsVisible=!0,"0"===t.t_IsAllowNULL?this.editFieldForm.t_IsAllowNULL=!1:this.editFieldForm.t_IsAllowNULL=!0,this.editFieldDialogVisible=!0},saveField(){},editFieldDialogClosed(){this.editFieldDataForm=""},async getOneCatInfo(){var t=(await this.$http.post("getOneCatInfo",{hCatID:this.queryInfo.catID}))["data"];200===t.status?(this.datalist=JSON.parse(t.data),this.editDataForm=JSON.parse(t.data)):this.$message.error("显示数据失败！--getOneCatInfo ")},async getCatFieldList(t){var e=(await this.$http.post("getCatFieldList",{hCatID:this.queryInfo.catID}))["data"];if(200!==e.status)return this.catFieldList=[],this.$message.error(" -- getCatFieldList--失败！");this.catFieldList=JSON.parse(e.data)},async showDatatDetailDialog(t,e,l,a){this.getItem(t),this.getlinkExpressionList(),this.DataDetailDialogVisible=!0,this.DataName=l+" Data Item  Detail"},transArrToString(t){if(!Array.isArray(t))return!1;for(var e="",l=0,a=t.length;l<a;l++)0===l?e=t[l]:e+=","+t[l];return e},transStrToArr(t){return t.split(",")},async getParentCateList(){var t=(await this.$http.post("getCatTree"))["data"];if(200!==t.status)return this.$message.error("获取父级分类数据失败！");this.parentCateList=t.data1},parentCateChanged(){0<this.selectedKeys.length?(this.cat_pid=this.selectedKeys[this.selectedKeys.length-1],this.cat_level=this.selectedKeys.length):(this.cat_pid=0,this.cat_level=0)},handleNodeClick(t){this.nodeData=t,document.querySelectorAll('#el-tree [role="treeitem"]').forEach(t=>{t.addEventListener("contextmenu",t=>{t.target.click()})}),this.queryInfo.catID=t.t_ID,this.idArray=[t.t_ID],window.localStorage.setItem("currentCatID",t.t_ID)},handleMenuClick(t,e,l){this.nodeData=e,this.treeNodeData=e,this.treeNode=l,this.contextMenuVisible=!0;const a=document.querySelector("#menu-001");a.style.position="fixed",a.style.top=t.clientY+"px",a.style.left=t.clientX+10+"px"},handleClick(t,e){},createDatabaseOrTable(){this.contextMenuVisible=!1},deleteDatabaseOrTable(){this.contextMenuVisible=!1},attribute(){this.contextMenuVisible=!1},exportDatabaseOrTable(){this.contextMenuVisible=!1}},computed:{menuLabel(){return null==this.nodeData.children?"表":"数据库"}}};l("68a1"),l=l("2877"),l=Object(l.a)(a,(function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",{ref:"mainZone"},[l("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[l("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),l("el-breadcrumb-item",[t._v("数据管理")]),l("el-breadcrumb-item",[t._v("数据列表")])],1),l("el-row",{attrs:{gutter:10}},[l("el-col",{staticClass:"col-1",attrs:{span:4}},[l("el-card",{staticClass:"card-2",attrs:{"body-style":{padding:"5px"}}},[l("el-scrollbar",{staticStyle:{height:"800px"}},[l("el-tree",{ref:"treeList",attrs:{"default-expanded-keys":t.idArray,"current-node-key":this.queryInfo.catID,"highlight-current":"",id:"el-tree",data:t.parentCateList,props:t.cascaderProps,"node-key":"t_ID"},on:{"node-click":t.handleNodeClick,"node-contextmenu":t.handleMenuClick}}),l("context-menu",{ref:"contextMenu",staticClass:"right-menu",attrs:{target:t.contextMenuTarget,id:"menu-001",show:t.contextMenuVisible},on:{"update:show":function(e){return t.contextMenuVisible=e}}},[l("a",{attrs:{href:"javascript:;"},on:{click:t.createDatabaseOrTable}},[t._v("新建"+t._s(this.menuLabel))]),l("a",{attrs:{href:"javascript:;"},on:{click:t.deleteDatabaseOrTable}},[t._v("删除"+t._s(this.menuLabel))]),l("a",{attrs:{href:"javascript:;"},on:{click:t.attribute}},[t._v("属性")]),l("a",{attrs:{href:"javascript:;"},on:{click:t.exportDatabaseOrTable}},[t._v("导出"+t._s(this.menuLabel))])])],1)],1)],1),l("el-col",{staticClass:"col-1",attrs:{span:20}},[l("el-row",[l("el-card",{staticClass:"card-3",attrs:{"body-style":{padding:"5px"}}},[l("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[l("el-tab-pane",{attrs:{label:"概况",name:"tab-1"}},[l("el-form",{ref:"editDataFormRef",staticClass:"form-1",attrs:{model:t.editDataForm,"label-width":"80px","label-position":"left"}},[l("el-row",[l("el-col",[l("el-form-item",{attrs:{label:"ID"}},[l("el-input",{model:{value:t.editDataForm.t_ID,callback:function(e){t.$set(t.editDataForm,"t_ID",e)},expression:"editDataForm['t_ID']"}})],1)],1),l("el-col",[l("el-form-item",{attrs:{label:"类型"}},[l("el-input",{model:{value:t.editDataForm.TypeID,callback:function(e){t.$set(t.editDataForm,"TypeID",e)},expression:"editDataForm['TypeID']"}})],1)],1)],1),l("el-row",[l("el-col",[l("el-form-item",{attrs:{label:"类名"}},[l("el-input",{model:{value:t.editDataForm.t_Name,callback:function(e){t.$set(t.editDataForm,"t_Name",e)},expression:"editDataForm['t_Name']"}})],1)],1),l("el-col",[l("el-form-item",{attrs:{label:"启用"}},[l("el-input",{model:{value:t.editDataForm.IsActive,callback:function(e){t.$set(t.editDataForm,"IsActive",e)},expression:"editDataForm['IsActive']"}})],1)],1)],1),l("el-row",[l("el-col",[l("el-form-item",{attrs:{label:"支持版本"}},[l("el-input",{model:{value:t.editDataForm.IsVersion,callback:function(e){t.$set(t.editDataForm,"IsVersion",e)},expression:"editDataForm['IsVersion']"}})],1)],1),l("el-col",[l("el-form-item",{attrs:{label:"系统定义"}},[l("el-input",{model:{value:t.editDataForm.IsInborn,callback:function(e){t.$set(t.editDataForm,"IsInborn",e)},expression:"editDataForm['IsInborn']"}})],1)],1)],1)],1),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(e){t.editDialogVisible=!1}}},[t._v("取 消")]),l("el-button",{attrs:{type:"primary"}},[t._v("确 定")])],1)],1),l("el-tab-pane",{attrs:{label:"字段",name:"tab-2"}},[l("el-table",{attrs:{data:t.catFieldList,height:t.tableHeight,border:"",stripe:"","highlight-current-row":"","row-style":{height:"30px"},"cell-style":{padding:"0px"}}},[l("el-table-column",{attrs:{type:"index"}}),l("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"t_FieldID",label:"ID"}}),l("el-table-column",{attrs:{prop:"t_Name",label:"显示名称"}}),l("el-table-column",{attrs:{prop:"t_FieldName",label:"字段名称"}}),l("el-table-column",{attrs:{prop:"t_DataType",label:"数据类型"}}),l("el-table-column",{attrs:{prop:"t_ControlType",label:"组件类型"}}),l("el-table-column",{attrs:{prop:"t_IsCreated",label:"固化状态"}}),l("el-table-column",{attrs:{prop:"t_ColWidth",label:"显示长度"}}),l("el-table-column",{attrs:{prop:"t_Length",label:"字段长度"}}),l("el-table-column",{attrs:{prop:"t_IsActive",label:"启用"}}),l("el-table-column",{attrs:{prop:"t_IsOnlyRead",label:"只读"}}),l("el-table-column",{attrs:{prop:"t_IsVisible",label:"可见"}}),l("el-table-column",{attrs:{prop:"t_IsPublic",label:"公用"}}),l("el-table-column",{attrs:{prop:"t_IsAllowNULL",label:"Null值"}}),l("el-table-column",{attrs:{prop:"t_IsSearch",label:"搜索"}}),l("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"数据包详情",enterable:!1,placement:"top"}},[l("el-button",{attrs:{type:"warning",icon:"el-icon-setting",size:"mini",circle:"",plain:""},on:{click:function(l){return t.showDatatDetailDialog(e.row.t_ID,e.row.t_CatID,e.row.t_Code,e.row.t_Name)}}})],1),l("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"修改该条记录",enterable:!1,placement:"top"}},[l("el-button",{attrs:{type:"warning",icon:"el-icon-edit",size:"mini",circle:"",plain:""},on:{click:function(l){return t.showEditDialog(e.row)}}})],1),l("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除选中数据记录",enterable:!1,placement:"top"}},[l("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini",circle:"",plain:""},on:{click:function(l){return t.removeDataById(e.row.t_ID,e.row.t_CatID)}}})],1)]}}])})],1)],1),l("el-tab-pane",{attrs:{label:"表格",name:"tab-8"}},[l("el-table",{directives:[{name:"show",rawName:"v-show",value:0<t.reviewItemList.length,expression:"reviewItemList.length > 0 ? true: false"}],attrs:{data:t.reviewItemList,height:"500px",border:"",stripe:""}},[l("el-table-column",{attrs:{type:"index"}}),l("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"审批流程",prop:"CFLOWOBJNAME"}}),l("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"节点任务",prop:"t_StepName"}}),l("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"负责人",prop:"t_LoginName"}}),l("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"任务状态",prop:"t_StepState"}}),l("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"评审结论",prop:"t_IsAgree"}}),l("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"评审意见",prop:"t_Detail"}}),l("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"附件",prop:"CATTACHFILE"}}),l("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"签署时间",prop:"t_CreateTime"}}),l("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"开始时间",prop:"t_ActualStart"}}),l("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"结束时间",prop:"t_ActualFinish"}}),l("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"批次号",prop:"t_BatchNo"}})],1)],1),l("el-tab-pane",{attrs:{label:"布局",name:"fourth"}},[l("el-table",{directives:[{name:"show",rawName:"v-show",value:0<t.versionItemList.length,expression:"versionItemList.length > 0 ? true: false"}],attrs:{data:t.versionItemList,height:"500px",border:"",stripe:""}},[l("el-table-column",{attrs:{type:"index"}}),l("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"类别",prop:"t_CatID"}}),l("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"名称",prop:"t_Name"}}),l("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"编号",prop:"t_Code"}}),l("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"版本号",prop:"t_Ver"}}),l("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"修改人",prop:"t_LastModBy"}}),l("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"修改时间",prop:"t_LastModTime"}}),l("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"创建时间",prop:"t_CreateBy"}}),l("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"是否新版",prop:"t_IsNewVer"}}),l("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"发行状态",prop:"t_IsReleaseVer"}})],1)],1)],1)],1)],1)],1)],1),l("el-dialog",{attrs:{title:"修改字段",visible:t.editFieldDialogVisible,width:"50%"},on:{"update:visible":function(e){t.editFieldDialogVisible=e},close:t.editFieldDialogClosed}},[l("el-form",{ref:"editFieldFormRef",staticClass:"form-1",attrs:{model:t.editFieldForm,"label-width":"100px","label-position":"left"}},[l("el-form-item",{attrs:{label:"FieldID"}},[l("el-input",{model:{value:t.editFieldForm.t_FieldID,callback:function(e){t.$set(t.editFieldForm,"t_FieldID",e)},expression:"editFieldForm['t_FieldID']"}})],1),l("el-form-item",{attrs:{label:"显示名"}},[l("el-input",{model:{value:t.editFieldForm.t_Name,callback:function(e){t.$set(t.editFieldForm,"t_Name",e)},expression:"editFieldForm['t_Name']"}})],1),l("el-form-item",{attrs:{label:"字段名"}},[l("el-input",{model:{value:t.editFieldForm.t_FieldName,callback:function(e){t.$set(t.editFieldForm,"t_FieldName",e)},expression:"editFieldForm['t_FieldName']"}})],1),l("el-form-item",{attrs:{label:"数据类型"}},[l("el-input",{model:{value:t.editFieldForm.t_DataType,callback:function(e){t.$set(t.editFieldForm,"t_DataType",e)},expression:"editFieldForm['t_DataType']"}})],1),l("el-form-item",{attrs:{label:"组件类型"}},[l("el-input",{model:{value:t.editFieldForm.t_ControlType,callback:function(e){t.$set(t.editFieldForm,"t_ControlType",e)},expression:"editFieldForm['t_ControlType']"}})],1),l("el-form-item",{attrs:{label:"设置项"}},[l("el-checkbox",{model:{value:t.editFieldForm.t_IsActive,callback:function(e){t.$set(t.editFieldForm,"t_IsActive",e)},expression:"editFieldForm['t_IsActive']"}},[t._v("启用")]),l("el-checkbox",{model:{value:t.editFieldForm.t_IsVisible,callback:function(e){t.$set(t.editFieldForm,"t_IsVisible",e)},expression:"editFieldForm['t_IsVisible']"}},[t._v("可见")]),l("el-checkbox",{model:{value:t.editFieldForm.t_IsAllowNULL,callback:function(e){t.$set(t.editFieldForm,"t_IsAllowNULL",e)},expression:"editFieldForm['t_IsAllowNULL']"}},[t._v("Null值")])],1)],1),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{ref:"editSubmit",attrs:{type:"primary"},on:{click:t.saveField}},[t._v("确 定")]),l("el-button",{on:{click:function(e){t.editFieldDialogVisible=!1}}},[t._v("取 消")])],1)],1)],1)}),[],!1,null,"1d225779",null);e.default=l.exports}}]);