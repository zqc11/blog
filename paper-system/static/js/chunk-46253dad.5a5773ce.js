(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-46253dad"],{"23ee":function(e,t,i){"use strict";i("8629")},8629:function(e,t,i){},b4f4:function(e,t,i){"use strict";i.r(t);var l={name:"EditDrawer",props:["mDocItemID","mCatID"],data(){return{fItemID:"",fCatID:"",mtemp:[""],checkedData:{},vdx:[""],vdd:[[]],DataName:"Item Detail",addDocForm:{},editDocForm:{},docList:[],fileItemlist:[],templist:[],tableHeight:screen.height-110-182,mainHeight:screen.height-110-70,tableBfieldlist:[],tableAfieldlist:[],linkAfieldlist:[],ItemName:"",ItemCode:"",ItemCatID:"",editDataFormRules:{},editDialogVisible:!1}},created(){for(let e=0;e<this.tableAfieldlist.length;e++)this.addDocForm[this.tableAfieldlist[e].t_FieldName]="";for(let e=0;e<this.tableBfieldlist.length;e++)this.editDocForm[this.tableBfieldlist[e].t_FieldName]="";this.showEditDialog()},methods:{focus(e){},keyup_({e:e,i:t}){const i=this;i.$refs["input"+t]&&i.$nextTick(()=>{e.target.blur();var l="input"+(t+1);void 0!==i.$refs[l]?i.$refs[l][0].focus():i.$refs.addSubmit&&i.$refs.addSubmit.$el.focus()})},keyup_edit({e:e,i:t}){const i=this;i.$refs["m_input"+t]&&i.$nextTick(()=>{e.target.blur();var l="m_input"+(t+1);void 0!==i.$refs[l]?i.$refs[l][0].focus():i.$refs.editSubmit&&i.$refs.editSubmit.$el.focus()})},handleRadioChange:function(e,t,i){},handleChange:function(e,t,i){e?this.checkedData[i].push(t):this.delete(t,i)},delete(e,t){var i=this.checkedData[t].findIndex(t=>{if(t===e)return!0});this.checkedData[t].splice(i,1)},SetFirstAddFocus(){this.$nextTick(e=>{null!=this.$refs.input0&&this.$refs.input0[0].focus()})},SetFirstEditFocus(){this.$nextTick(e=>{this.$refs.m_input0[0].focus()})},editDialogClosed(){this.$emit("on-close");for(let e=0;e<this.tableBfieldlist.length;e++)this.editDocForm[this.tableBfieldlist[e].t_FieldName]=""},transArrToString(e){if(!Array.isArray(e))return!1;for(var t="",i=0,l=e.length;i<l;i++)0===i?t=e[i]:t+=","+e[i];return t},transStrToArr(e){return e.split(",")},async editDocItem(){for(let i=0;i<this.tableBfieldlist.length;i++){var e;4===this.tableBfieldlist[i].t_ControlType&&(e="",e=this.transArrToString(this.checkedData[this.tableBfieldlist[i].t_FieldName]),this.editDocForm[this.tableBfieldlist[i].t_FieldName]=e),30===this.tableBfieldlist[i].t_ControlType&&(this.editDocForm[this.tableBfieldlist[i].t_FieldName]=this.vdx[i])}var t=(await this.$http.post("editDocBusiness",{hItemID:this.mDocItemID,form:JSON.stringify(this.editDocForm),hToken:window.sessionStorage.getItem("token")}))["data"];200!==t.status&&this.$message.error("修改数据失败！"),this.$message.success("修改数据成功！"),this.editDialogVisible=!1},async showEditDialog(){var e,t,i=(await this.$http.post("getData",{hItemID:this.mDocItemID,hCatID:this.mCatID,hToken:window.sessionStorage.getItem("token")}))["data"];0===i.total?this.templist="":this.templist=JSON.parse(i.data),this.tableBfieldlist=JSON.parse(i.tableBfield),this.editDocForm=this.templist[0];for(let l=0;l<this.tableBfieldlist.length;l++)4===this.tableBfieldlist[l].t_ControlType?(e=this.editDocForm[this.tableBfieldlist[l].t_FieldName],this.vdd[l]=null===e?[]:this.transStrToArr(e),this.checkedData[this.tableBfieldlist[l].t_FieldName]=this.vdd[l]):30===this.tableBfieldlist[l].t_ControlType?(t=this.editDocForm[this.tableBfieldlist[l].t_FieldName],2===this.tableBfieldlist[l].t_DataType?this.vdx[l]=null===t?0:t.toString():1===this.tableBfieldlist[l].t_DataType&&(e=this.editDocForm[this.tableBfieldlist[l].t_FieldName],this.vdx[l]=e,this.checkedData[this.tableBfieldlist[l].t_FieldName]=e)):(this.checkedData[this.tableBfieldlist[l].t_FieldName]=[],this.vdd[l]=[0]);this.editDialogVisible=!0}}};i("23ee"),i=i("2877"),i=Object(i.a)(l,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-drawer",{attrs:{title:"修改文档信息",visible:e.editDialogVisible,width:"60%"},on:{"update:visible":function(t){e.editDialogVisible=t},close:e.editDialogClosed}},[i("el-form",{ref:"editDataFormRef",attrs:{model:e.editDocForm,rules:e.editDataFormRules,"label-width":"100px","label-position":"right"},nativeOn:{submit:function(e){e.preventDefault()}}},e._l(e.tableBfieldlist,(function(t,l){return i("el-col",{key:t.t_FieldID,attrs:{span:24}},[i("el-form-item",{attrs:{label:t.t_Name}},[3===t.t_ControlType?i("div",[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"下拉框，请选择"},model:{value:e.editDocForm[t.t_FieldName],callback:function(i){e.$set(e.editDocForm,t.t_FieldName,i)},expression:"editDocForm[Bfield.t_FieldName]"}},e._l(t.PropValue,(function(e){return i("el-option",{key:e.t_No,attrs:{label:e.t_Display,value:e.t_Value}})})),1)],1):1===t.t_ControlType?i("div",[1===t.t_DataType?i("div",[i("el-input",{ref:"m_input"+l,refInFor:!0,attrs:{placeholder:"请输入字符串-- abc"},on:{focus:function(t){return e.focus(t)}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.keyup_edit({e:t,i:l})}},model:{value:e.editDocForm[t.t_FieldName],callback:function(i){e.$set(e.editDocForm,t.t_FieldName,i)},expression:"editDocForm[Bfield.t_FieldName]"}})],1):2===t.t_DataType?i("div",[i("el-input",{ref:"m_input"+l,refInFor:!0,attrs:{placeholder:"请输入整数-- 123"},on:{focus:function(t){return e.focus(t)}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.keyup_edit({e:t,i:l})}},model:{value:e.editDocForm[t.t_FieldName],callback:function(i){e.$set(e.editDocForm,t.t_FieldName,i)},expression:"editDocForm[Bfield.t_FieldName]"}})],1):3===t.t_DataType?i("div",[i("el-input",{ref:"m_input"+l,refInFor:!0,attrs:{placeholder:"请输入数值-- 00.10"},on:{focus:function(t){return e.focus(t)}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.keyup_edit({e:t,i:l})}},model:{value:e.editDocForm[t.t_FieldName],callback:function(i){e.$set(e.editDocForm,t.t_FieldName,i)},expression:"editDocForm[Bfield.t_FieldName]"}})],1):e._e()]):2===t.t_ControlType?i("div",[i("el-input",{attrs:{type:"textarea",rows:3,placeholder:"多行编辑框，请输入字符串 -- abcabc123"},model:{value:e.editDocForm[t.t_FieldName],callback:function(i){e.$set(e.editDocForm,t.t_FieldName,i)},expression:"editDocForm[Bfield.t_FieldName]"}})],1):4===t.t_ControlType?i("div",[i("el-checkbox-group",{model:{value:e.vdd[l],callback:function(t){e.$set(e.vdd,l,t)},expression:"vdd[i]"}},e._l(t.PropValue,(function(l){return i("el-checkbox",{key:l.t_No,attrs:{label:l.t_Display},on:{change:function(i){return e.handleChange(i,l.t_Display,t.t_FieldName)}}},[e._v(e._s(l.t_Display)+" ")])})),1)],1):30===t.t_ControlType?i("div",[i("el-radio-group",{model:{value:e.vdx[l],callback:function(t){e.$set(e.vdx,l,t)},expression:"vdx[i]"}},e._l(t.PropValue,(function(t){return i("el-radio",{key:t.t_No,attrs:{label:t.t_Display},on:{change:function(i){return e.handleRadioChange(i,t.t_Display,l)}}},[e._v(e._s(t.t_Display)+" ")])})),1)],1):110===t.t_ControlType?i("div",[i("el-checkbox",{attrs:{placeholder:"选择日期"},model:{value:e.editDocForm[t.t_FieldName],callback:function(i){e.$set(e.editDocForm,t.t_FieldName,i)},expression:"editDocForm[Bfield.t_FieldName]"}},[e._v(" "+e._s(t.t_Name)+" ")])],1):12===t.t_ControlType?i("div",[i("el-date-picker",{attrs:{type:"date",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.editDocForm[t.t_FieldName],callback:function(i){e.$set(e.editDocForm,t.t_FieldName,i)},expression:"editDocForm[Bfield.t_FieldName]"}})],1):i("div",[i("el-input",{ref:"linkName",refInFor:!0,attrs:{placeholder:"其她情况，引用等等"},model:{value:e.editDocForm[t.t_FieldName],callback:function(i){e.$set(e.editDocForm,t.t_FieldName,i)},expression:"editDocForm[Bfield.t_FieldName]"}})],1)])],1)})),1),i("span",{staticClass:"demo-drawer__footer"},[i("el-button",{ref:"editSubmit",attrs:{type:"primary"},on:{click:e.editDocItem}},[e._v("确 定")]),i("el-button",{on:{click:function(t){e.editDialogVisible=!1}}},[e._v("取 消")])],1)],1)}),[],!1,null,"2a592dbd",null);t.default=i.exports}}]);