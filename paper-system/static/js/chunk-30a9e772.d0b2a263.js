(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-30a9e772"],{"13dd":function(t,e,a){"use strict";a.r(e);var s={data(){return{options:[{value:"1",label:"设计数据包"},{value:"2",label:"工艺数据包"},{value:"3",label:"生产数据包"},{value:"4",label:"检测数据包"},{value:"5",label:"售后数据包"}],selValue:"",queryInfo:{query:"",pageNum:"1",pageSize:"15000",catID:"3a8d0c06-1833-4cfa-bc7d-22d983eb236a"},addDataForm:{},editDataForm:{},datalist:[],templist:[],total:0,parentCateList:[],docCatList:[],cascaderProps:{value:"t_ID",label:"label",children:"Children",checkStrictly:!0,expandTrigger:"hover"},selectedKeys:[],config:{id:"t_ID",pid:"ParentID",children:"children"},idArray:[],mainHeight:1e3,pageFlag:!1}},created(){this.getParentCateList(),this.getDocCatList(),null!==window.sessionStorage.getItem("currentCatID")&&(this.queryInfo.catID=window.sessionStorage.getItem("currentCatID"),this.idArray=[this.queryInfo.catID]),this.getDataList(),this.$nextTick((function(){this.$refs.treeList.setCurrentKey(this.queryInfo.catID)}))},mounted(){this.mainHeight=window.innerHeight-this.$refs.mainZone.offsetTop-50},methods:{async getDataList(){var t=(await this.$http.post("getDataList",{query:this.queryInfo.query,pageNum:this.queryInfo.pageNum,pageSize:this.queryInfo.pageSize,CatID:this.queryInfo.catID,hToken:window.sessionStorage.getItem("token"),hVersion:this.mVersion}))["data"];200!==t.status&&this.$message.error("显示数据失败！"),0!==t.total?this.datalist=JSON.parse(t.data):this.datalist=[],this.tableBfieldlist=JSON.parse(t.tableBfield),this.total=t.total,this.pageFlag=this.total>this.queryInfo.pageSize},getItem(t){this.datalist.forEach(e=>{e.t_ID===t&&(this.editDataForm=e)})},async getParentCateList(){var t=(await this.$http.post("getCatList",{hCatID:"IDATA",hRoleID:this.$root.gRoleID}))["data"];if(200!==t.status)return this.$message.error("获取父级分类数据失败！");this.parentCateList=t.data1},async getDocCatList(){var t=(await this.$http.post("getCatList",{hCatID:"IDOC",hRoleID:this.$root.gRoleID}))["data"];if(200!==t.status)return this.$message.error("获取DOC父级分类数据失败！");this.docCatList=t.data1},async saveLink(){var t=(await this.$http.post("savetLink",{hCatID:window.sessionStorage.getItem("currentCatID"),hDefineName:this.selValue,hCatList:JSON.stringify(this.$refs.treedocCatList.getCheckedKeys())}))["data"];if(200!==t.status)return this.$message.error("保存清单失败！");this.$message.success("清单成功保存！")},parentCateChanged(){0<this.selectedKeys.length?(this.cat_pid=this.selectedKeys[this.selectedKeys.length-1],this.cat_level=this.selectedKeys.length):(this.cat_pid=0,this.cat_level=0)},handleNodeClick(t){this.queryInfo.catID=t.t_ID,this.idArray=[t.t_ID],window.sessionStorage.setItem("currentCatID",t.t_ID),this.getDataList(),this.linkItemList=[],this.linkExpressionList=[]}}};a("61a4"),a=a("2877"),a=Object(a.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"mainZone",attrs:{height:t.mainHeight}},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),a("el-breadcrumb-item",[t._v("数据管理")]),a("el-breadcrumb-item",[t._v("定义清单")])],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{staticClass:"col-1",attrs:{span:8}},[a("el-card",{staticClass:"card-1",attrs:{"body-style":{padding:"5px"}}},[a("el-scrollbar",{staticStyle:{height:"500px"}},[a("el-tree",{ref:"treeList",attrs:{"default-expanded-keys":t.idArray,"current-node-key":this.queryInfo.catID,"highlight-current":"",data:t.parentCateList,props:t.cascaderProps,"node-key":"t_ID"},on:{"node-click":t.handleNodeClick}})],1)],1)],1),a("el-col",{staticClass:"col-1",attrs:{span:16}},[a("el-card",{staticClass:"card-2",attrs:{"body-style":{padding:"5px"}}},[a("el-scrollbar",{staticStyle:{height:"500px"}},[a("el-tree",{ref:"treedocCatList",attrs:{"default-expanded-keys":t.idArray,"highlight-current":"","show-checkbox":"",data:t.docCatList,props:t.cascaderProps,"node-key":"t_ID"}})],1)],1)],1)],1),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:8}},[a("el-select",{attrs:{placeholder:"请选择数据包"},model:{value:t.selValue,callback:function(e){t.selValue=e},expression:"selValue"}},t._l(t.options,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-col",{attrs:{span:8}},[a("el-button",{attrs:{type:"primary"},on:{click:t.saveLink}},[t._v("保存")])],1)],1)],1)}),[],!1,null,"4a6033e8",null);e.default=a.exports},"61a4":function(t,e,a){"use strict";a("a9b8")},a9b8:function(t,e,a){}}]);