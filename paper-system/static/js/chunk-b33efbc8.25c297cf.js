(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-b33efbc8"],{"1d5e":function(t,e,a){},2817:function(t,e,a){"use strict";a("1d5e")},b33f:function(t,e,a){"use strict";a.r(e);var s={data(){return{mainHeight:this.$root.gScreenHeight-70,tabsHeight:this.$root.gScreenHeight-160,openDocForm:{SuggtionText:"",Selection:"1"},taskobj:{mTaskID:"",mStepName:"",mStepID:"",mStepCatID:"",mflowItemName:"",mflowItemID:"",mflowCatID:"",mDocItemID:"",mDocCatID:""},mIsFirstStep:0,mTitle:"提交评审结果",mlabel:"具体意见",mplaceholder:"请在这里补充评审意见，便于发挥每位评审人的价值！",tasklist:[],taskcount:{},mStr:{},nextsteplist:[],openItemDialogVisible:!1,submitTaskDialogVisible:!1,activeTab:"1",submitForm:{Conclusion:"-100",nextstepRadio:"",suggestion:""},total:0}},created(){this.getMyTaskList("1"),this.$root.leveOnePathName="任务管理",this.$root.leveTwoPathName="我的任务",this.tabsHeight=JSON.parse(window.localStorage.getItem("gHeight"))-260,this.slbHeight=JSON.parse(window.localStorage.getItem("gHeight"))-195,this.mainHeight=JSON.parse(window.localStorage.getItem("gHeight"))-185,this.mainWidth=this.$root.gScreenWidth-210},methods:{async getMyTaskList(){var t=(await this.$http.post("getMyTaskList",{hState:this.activeTab,hToken:window.sessionStorage.getItem("token")}))["data"];if(200!==t.status)return this.$message.error("获取我的任务失败！");0===t.total?this.tasklist=[]:this.tasklist=JSON.parse(t.data),this.taskcount=JSON.parse(t.mStream),this.mStr.Todo="待办"+this.taskcount.Todo,this.mStr.Signed="已办"+this.taskcount.Signed,this.mStr.Submitted="已提交"+this.taskcount.Submitted,this.mStr.Finished="已完成"+this.taskcount.Finished,this.mStr.Waitting="等待"+this.taskcount.Waitting,this.mStr.Entrust="委托"+this.taskcount.Entrust,this.mStr.Beentrusted="受托"+this.taskcount.Beentrusted},handTabsClick(t,e){this.activeTab=t.name,this.getMyTaskList(this.activeTab)},async openSubmitDialog(t){this.taskobj.mTaskID=t.t_StepItemID,this.taskobj.mStepName=t.t_StepName,this.taskobj.mStepID=t.t_StepID,this.taskobj.mStepCatID=t.v_stepCatID,this.taskobj.mflowItemName=t.v_FlowItemName,this.taskobj.mflowItemID=t.t_FlowItemID,this.taskobj.mflowCatID=t.t_FlowItemCatID,this.taskobj.mDocItemID=t.t_ID,this.taskobj.mDocCatID=t.t_CatID,this.mIsFirstStep=0,this.isFirstStep(t.t_FlowItemID,t.t_StepID).then(()=>{1===this.mIsFirstStep?(this.mTitle="提交工作",this.mlabel="工作备注",this.mplaceholder="请在这里备注相关事项，便于评审人高效、准确评审！",this.submitForm.Conclusion="1"):(this.mTitle="提交评审结果",this.mlabel="具体意见",this.mplaceholder="请在这里补充评审意见，便于发挥每位评审人的价值！",this.submitForm.Conclusion="-100"),this.openItemDialogVisible=!1,this.submitTaskDialogVisible=!0}),this.getNextStep(t.t_FlowItemID,t.t_StepID)},async onSubmitTask(){return"-100"===this.submitForm.Conclusion?this.$message.info("请先给出评审结论！"):"confirm"!==await this.$confirm("确信要"+this.mTitle+"吗?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(t=>t)?this.$message.info("已取消！"):(t=(await this.$http.post("submitTask",{hTaskID:this.taskobj.mTaskID,hStepName:this.taskobj.mStepName,hStepID:this.taskobj.mStepID,hStepCatID:this.taskobj.mStepCatID,hFlowItemName:this.taskobj.mflowItemName,hFlowItemID:this.taskobj.mflowItemID,hFlowCatID:this.taskobj.mflowCatID,hDocItemID:this.taskobj.mDocItemID,hDocCatID:this.taskobj.mDocCatID,hNextStepID:this.submitForm.nextstepRadio,hConclusion:this.submitForm.Conclusion,hSuggestion:this.submitForm.Suggestion,hToken:window.sessionStorage.getItem("token")}))["data"],200!==t.status?this.$message.error("提交任务失败！原因是："+t.Msg):(this.openItemDialogVisible=!1,this.submitTaskDialogVisible=!1,void this.getMyTaskList("1")));var t},closeSubmitTask(){this.submitTaskDialogVisible=!1},async getNextStep(t,e){if(t=(await this.$http.post("getNextSteps",{hFlowID:t,hStepID:e})).data,200!==t.status)return this.$message.error("获取 nextsteplist 失败！");0===t.total?this.nextsteplist="":this.nextsteplist=JSON.parse(t.data)},async isFirstStep(t,e){t=(await this.$http.post("isFirstStep",{hFlowID:t,hStepID:e})).data,200===t.status?this.mIsFirstStep=1:this.mIsFirstStep=0},async openItem(t){this.openItemDialogVisible=!0,this.submitTaskDialogVisible=!1},openItemDialogClosed(){},submitTaskDialogClosed(){}}};a("2817"),a=a("2877"),a=Object(a.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"mainZone",staticClass:"datalist-container",style:{height:t.mainHeight+"px"}},[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":t.handTabsClick},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:this.mStr.Todo,name:"1"}},[a("el-table",{attrs:{data:t.tasklist,border:"",height:this.tabsHeight,stripe:"","highlight-current-row":"","row-style":{height:"30px"},"cell-style":{padding:"0px"}}},[a("el-table-column",{attrs:{type:"index"}}),a("el-table-column",{attrs:{prop:"t_Name",label:"待审文件"}}),a("el-table-column",{attrs:{prop:"t_StepName",label:"任务名"}}),a("el-table-column",{attrs:{prop:"t_State",label:"文档状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.t_State?a("span",[t._v("新建")]):100===e.row.t_State?a("span",[t._v("待提交")]):199===e.row.t_State?a("span",[t._v("预发布")]):200===e.row.t_State?a("span",[t._v("发布")]):300===e.row.t_State?a("span",[t._v("冻结")]):a("span",[t._v(t._s(e.row.t_State))])]}}])}),t._e(),t._e(),t._e(),a("el-table-column",{attrs:{prop:"t_ActualStart",label:"开始时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[null!==e.row.t_ActualStart?a("span",[t._v(t._s(e.row.t_ActualStart.substring(0,16).replace("T"," ")))]):a("span",[t._v(t._s(e.row.t_ActualStart))])]}}])}),a("el-table-column",{attrs:{prop:"v_FlowItemName",label:"所在流程"}}),a("el-table-column",{attrs:{label:"操作",width:"180px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(a){return t.openItem(e.row.t_ID,e.row.t_StepName,e.row.t_StepID,e.row.v_flowItemName,e.row.t_flowItemID,e.row.t_ItemID,e.row.t_DocCatID)}}},[t._v("详情")]),a("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(a){return t.openSubmitDialog(e.row)}}},[t._v("提交")])]}}])})],1)],1),a("el-tab-pane",{attrs:{label:this.mStr.Signed,name:"2"}},[a("el-table",{attrs:{data:t.tasklist,border:"",height:this.tabsHeight,stripe:"","highlight-current-row":"","row-style":{height:"30px"},"cell-style":{padding:"0px"}}},[a("el-table-column",{attrs:{type:"index"}}),a("el-table-column",{attrs:{prop:"t_Name",label:"待审文件"}}),a("el-table-column",{attrs:{prop:"t_StepName",label:"任务名"}}),a("el-table-column",{attrs:{prop:"t_State",label:"文档状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.t_State?a("span",[t._v("新建")]):100===e.row.t_State?a("span",[t._v("待提交")]):199===e.row.t_State?a("span",[t._v("预发布")]):200===e.row.t_State?a("span",[t._v("发布")]):300===e.row.t_State?a("span",[t._v("冻结")]):a("span",[t._v(t._s(e.row.t_State))])]}}])}),t._e(),t._e(),t._e(),a("el-table-column",{attrs:{prop:"t_ActualStart",label:"开始时间"},scopedSlots:t._u([{key:"default",fn:function(e){return["null"!==e.row.t_ActualStart?a("span",[t._v(t._s(e.row.t_ActualStart.substring(0,16).replace("T"," ")))]):a("span",[t._v(t._s(e.row.t_ActualStart))])]}}])}),a("el-table-column",{attrs:{prop:"v_FlowItemName",label:"所在流程"}}),a("el-table-column",{attrs:{label:"操作",width:"180px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(a){return t.openItem(e.row.t_ID,e.row.t_StepName,e.row.t_StepID,e.row.v_flowItemName,e.row.t_flowItemID,e.row.t_ItemID,e.row.t_DocCatID)}}},[t._v("详情")]),a("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(a){return t.openSubmitDialog(e.row)}}},[t._v("提交")])]}}])})],1)],1),a("el-tab-pane",{attrs:{label:this.mStr.Submitted,name:"3"}},[a("el-table",{attrs:{data:t.tasklist,border:"",height:this.tabsHeight,stripe:"","highlight-current-row":"","row-style":{height:"30px"},"cell-style":{padding:"0px"}}},[a("el-table-column",{attrs:{type:"index"}}),a("el-table-column",{attrs:{prop:"t_Name",label:"待审文件"}}),a("el-table-column",{attrs:{prop:"t_StepName",label:"任务名"}}),a("el-table-column",{attrs:{prop:"t_State",label:"文档状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.t_State?a("span",[t._v("新建")]):100===e.row.t_State?a("span",[t._v("待提交")]):199===e.row.t_State?a("span",[t._v("预发布")]):200===e.row.t_State?a("span",[t._v("发布")]):300===e.row.t_State?a("span",[t._v("冻结")]):a("span",[t._v(t._s(e.row.t_State))])]}}])}),t._e(),t._e(),t._e(),a("el-table-column",{attrs:{prop:"t_ActualStart",label:"开始时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[null!==e.row.t_ActualStart?a("span",[t._v(t._s(e.row.t_ActualStart.substring(0,16).replace("T"," ")))]):a("span",[t._v(t._s(e.row.t_ActualStart))])]}}])}),a("el-table-column",{attrs:{prop:"v_FlowItemName",label:"所在流程"}})],1)],1),a("el-tab-pane",{attrs:{label:this.mStr.Finished,name:"4"}},[a("el-table",{attrs:{data:t.tasklist,border:"",height:this.tabsHeight,stripe:"","highlight-current-row":"","row-style":{height:"30px"},"cell-style":{padding:"0px"}}},[a("el-table-column",{attrs:{type:"index"}}),a("el-table-column",{attrs:{prop:"t_Name",label:"待审文件"}}),a("el-table-column",{attrs:{prop:"t_StepName",label:"任务名"}}),a("el-table-column",{attrs:{prop:"t_State",label:"文档状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.t_State?a("span",[t._v("新建")]):100===e.row.t_State?a("span",[t._v("待提交")]):199===e.row.t_State?a("span",[t._v("预发布")]):200===e.row.t_State?a("span",[t._v("发布")]):300===e.row.t_State?a("span",[t._v("冻结")]):a("span",[t._v(t._s(e.row.t_State))])]}}])}),t._e(),t._e(),t._e(),a("el-table-column",{attrs:{prop:"t_ActualStart",label:"开始时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[null!==e.row.t_ActualStart?a("span",[t._v(t._s(e.row.t_ActualStart.substring(0,16).replace("T"," ")))]):a("span",[t._v(t._s(e.row.t_ActualStart))])]}}])}),a("el-table-column",{attrs:{prop:"t_ActualFinish",label:"完成时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[null!==e.row.t_ActualFinish?a("span",[t._v(t._s(e.row.t_ActualFinish.substring(0,16).replace("T"," ")))]):a("span",[t._v(t._s(e.row.t_ActualFinish))])]}}])}),a("el-table-column",{attrs:{prop:"v_FlowItemName",label:"所在流程"}})],1)],1),a("el-tab-pane",{attrs:{label:this.mStr.Entrust,name:"5"}},[a("el-table",{attrs:{data:t.tasklist,border:"",height:this.tabsHeight,stripe:"","highlight-current-row":"","row-style":{height:"30px"},"cell-style":{padding:"0px"}}},[a("el-table-column",{attrs:{type:"index"}}),a("el-table-column",{attrs:{prop:"t_Name",label:"待审文件"}}),a("el-table-column",{attrs:{prop:"t_StepName",label:"任务名"}}),a("el-table-column",{attrs:{prop:"t_State",label:"文档状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.t_State?a("span",[t._v("新建")]):100===e.row.t_State?a("span",[t._v("待提交")]):199===e.row.t_State?a("span",[t._v("预发布")]):200===e.row.t_State?a("span",[t._v("发布")]):300===e.row.t_State?a("span",[t._v("冻结")]):a("span",[t._v(t._s(e.row.t_State))])]}}])}),t._e(),t._e(),t._e(),a("el-table-column",{attrs:{prop:"t_ActualStart",label:"开始时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[null!==e.row.t_ActualStart?a("span",[t._v(t._s(e.row.t_ActualStart.substring(0,16).replace("T"," ")))]):a("span",[t._v(t._s(e.row.t_ActualStart))])]}}])}),a("el-table-column",{attrs:{prop:"v_FlowItemName",label:"所在流程"}})],1)],1),a("el-tab-pane",{attrs:{label:this.mStr.Beentrusted,name:"6"}},[a("el-table",{attrs:{data:t.tasklist,border:"",height:this.tabsHeight,stripe:"","highlight-current-row":"","row-style":{height:"30px"},"cell-style":{padding:"0px"}}},[a("el-table-column",{attrs:{type:"index"}}),a("el-table-column",{attrs:{prop:"t_Name",label:"待审文件"}}),a("el-table-column",{attrs:{prop:"t_StepName",label:"任务名"}}),a("el-table-column",{attrs:{prop:"t_State",label:"文档状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.t_State?a("span",[t._v("新建")]):100===e.row.t_State?a("span",[t._v("待提交")]):199===e.row.t_State?a("span",[t._v("预发布")]):200===e.row.t_State?a("span",[t._v("发布")]):300===e.row.t_State?a("span",[t._v("冻结")]):a("span",[t._v(t._s(e.row.t_State))])]}}])}),t._e(),t._e(),t._e(),a("el-table-column",{attrs:{prop:"t_ActualStart",label:"开始时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[null!==e.row.t_ActualStart?a("span",[t._v(t._s(e.row.t_ActualStart.substring(0,16).replace("T"," ")))]):a("span",[t._v(t._s(e.row.t_ActualStart))])]}}])}),a("el-table-column",{attrs:{prop:"v_FlowItemName",label:"所在流程"}}),a("el-table-column",{attrs:{label:"操作",width:"180px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(a){return t.openItem(e.row.t_ID,e.row.t_StepName,e.row.t_StepID,e.row.v_flowItemName,e.row.t_flowItemID,e.row.t_ItemID,e.row.t_DocCatID)}}},[t._v("详情")]),a("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(a){return t.openSubmitDialog(e.row)}}},[t._v("提交")])]}}])})],1)],1),a("el-tab-pane",{attrs:{label:this.mStr.Waitting,name:"7"}},[a("el-table",{attrs:{data:t.tasklist,border:"",height:this.tabsHeight,stripe:"","highlight-current-row":"","row-style":{height:"30px"},"cell-style":{padding:"0px"}}},[a("el-table-column",{attrs:{type:"index"}}),a("el-table-column",{attrs:{prop:"t_Name",label:"待审文件"}}),a("el-table-column",{attrs:{prop:"t_StepName",label:"任务名"}}),a("el-table-column",{attrs:{prop:"t_State",label:"文档状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.t_State?a("span",[t._v("新建")]):100===e.row.t_State?a("span",[t._v("待提交")]):199===e.row.t_State?a("span",[t._v("预发布")]):200===e.row.t_State?a("span",[t._v("发布")]):300===e.row.t_State?a("span",[t._v("冻结")]):a("span",[t._v(t._s(e.row.t_State))])]}}])}),t._e(),a("el-table-column",{attrs:{prop:"t_ScheduledStart",label:"计划开始"},scopedSlots:t._u([{key:"default",fn:function(e){return[null!==e.row.t_ScheduledStart?a("span",[t._v(t._s(e.row.t_ScheduledStart.substring(0,16).replace("T"," ")))]):a("span",[t._v(t._s(e.row.t_ScheduledStart))])]}}])}),t._e(),a("el-table-column",{attrs:{prop:"v_FlowItemName",label:"所在流程"}})],1)],1)],1),a("el-dialog",{attrs:{title:"文档详情",visible:t.openItemDialogVisible,width:"80%"},on:{"update:visible":function(e){t.openItemDialogVisible=e},close:t.openItemDialogClosed}},[a("el-form",{ref:"openDocFormRef",attrs:{model:t.openDocForm,"label-width":"0px"}},[a("el-form-item",{staticClass:"btns"},[a("el-button",{attrs:{type:"primary"}},[t._v("确定")]),a("el-button",{attrs:{type:"info"}},[t._v("取消")])],1)],1)],1),a("el-dialog",{attrs:{title:t.mTitle,visible:t.submitTaskDialogVisible,width:"50%"},on:{"update:visible":function(e){t.submitTaskDialogVisible=e},close:t.submitTaskDialogClosed}},[a("el-form",{ref:"submitFormRef",attrs:{model:t.submitForm,"label-width":"120px"}},[0===t.mIsFirstStep?a("el-form-item",{attrs:{label:"评审结论"}},[a("el-radio-group",{model:{value:t.submitForm.Conclusion,callback:function(e){t.$set(t.submitForm,"Conclusion",e)},expression:"submitForm.Conclusion"}},[a("el-radio-button",{key:"1",attrs:{label:"1"}},[t._v("同意")]),a("el-radio-button",{key:"2",attrs:{label:"-1"}},[t._v("不同意")]),a("el-radio-button",{key:"3",attrs:{label:"0"}},[t._v("弃权")])],1)],1):t._e(),a("el-form-item",{attrs:{label:t.mlabel}},[a("el-input",{attrs:{type:"textarea",rows:6,placeholder:t.mplaceholder},model:{value:t.submitForm.Suggestion,callback:function(e){t.$set(t.submitForm,"Suggestion",e)},expression:"submitForm.Suggestion"}})],1),t._e(),a("el-form-item",{staticClass:"btns"},[a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmitTask}},[t._v("提交")]),a("el-button",{attrs:{type:"info"},on:{click:t.closeSubmitTask}},[t._v("取消")])],1)],1)],1)],1)}),[],!1,null,"72d79561",null);e.default=a.exports}}]);