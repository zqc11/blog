(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-340d012c"],{"1f2f":function(e,o,t){},7517:function(e,o,t){"use strict";t.r(o);var a={data(){return{mainHeight:this.$root.gScreenHeight-70,tableHeight:this.$root.gScreenHeight-170,addForm:{moduleName:"",moduleID:"",moduleRemark:"",modulePath:"",moduleNo:1,moduleComponents:"",groupID:"",groupName:""},addFormRules:{moduleName:[{required:!0,message:"请输入权限名称",trigger:"blur"},{min:3,max:30,message:"名称的长度在3~30个字符之间",trigger:"blur"}],moduleID:[{required:!0,message:"权限ID数字",trigger:"change"},{validator(e,o,t){Number.isInteger(Number(o))&&300<Number(o)?t():t(new Error("请输入有效数字"))},trigger:"blur"}]},addDialogVisible:!1,editDialogVisible:!1,rightsList:[],treeProps:{label:"t_Name",children:"Children"}}},created(){this.getRightsList(),this.$root.leveOnePathName="权限管理",this.$root.leveTwoPathName="二级权限",this.tableHeight=JSON.parse(window.localStorage.getItem("gHeight"))-270,this.slbHeight=JSON.parse(window.localStorage.getItem("gHeight"))-225,this.mainHeight=JSON.parse(window.localStorage.getItem("gHeight"))-185},methods:{async getRightsList(){var e=(await this.$http.post("getRightList"))["data"];if(200!==e.status)return this.$message.error("获取权限列表失败！");this.rightsList=JSON.parse(e.data)},append(e){this.addForm.groupName=e.t_Name,this.addForm.groupID=e.t_ID,this.addForm.moduleName="",this.addForm.moduleID="",this.addForm.modulePath="",this.addForm.moduleNo=1,this.addForm.moduleComponents="",this.addForm.moduleRemark="",this.addDialogVisible=!0},async addLevelTwo(){this.$refs.addFormRef.validate(async e=>{if(e){if(e=(await this.$http.post("addLevelTwo",{hModuleName:this.addForm.moduleName,hModuleRemark:this.addForm.moduleRemark,hModuleNo:this.addForm.moduleNo,hModulePath:this.addForm.modulePath,hModuleComponents:this.addForm.moduleComponents,hGroupName:this.addForm.groupName}))["data"],200!==e.status)return this.$message.error("添加二级权限失败！");this.$message.error("添加二级权限列成功！"),this.getRightsList(),this.addDialogVisible=!1}})},editDialog(e){this.addForm.moduleName=e.t_Name,this.addForm.moduleID=e.t_ID,this.addForm.moduleNo=e.t_No,this.addForm.modulePath=e.t_Path,this.addForm.moduleComponents=e.t_Components,this.addForm.moduleRemark=e.t_Remark,this.editDialogVisible=!0},async editLevelTwo(){var e=(await this.$http.post("editLevelTwo",{hModuleID:this.addForm.groupID+this.addForm.moduleID,hModuleName:this.addForm.moduleName,hModuleRemark:this.addForm.moduleRemark,hModuleNo:this.addForm.moduleNo,hModulePath:this.addForm.modulePath,hModuleComponents:this.addForm.moduleComponents}))["data"];if(200!==e.status)return this.$message.error("添加二级权限失败！");this.$message.error("修改二级权限列成功！"),this.getRightsList(),this.editDialogVisible=!1},async remove(e,o){if(o=(await this.$http.post("deleteLevelTwo",{hModuleID:o.t_ID})).data,200!==o.status)return this.$message.error("删除二级权限失败！");this.$message.error("删除二级权限列成功！"),this.getRightsList(),this.addDialogVisible=!1},addDialogClosed(){this.$refs.addFormRef.resetFields()}}};t("b67e"),t=t("2877"),t=Object(t.a)(a,(function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("div",{ref:"mainZone",staticClass:"datalist-container",style:{height:e.mainHeight+"px"}},[t("el-card",[t("el-scrollbar",{style:{height:e.slbHeight+"px"}},[t("el-tree",{ref:"treeRef",attrs:{data:e.rightsList,props:e.treeProps,"expand-on-click-node":!1,"show-checkbox":"","node-key":"t_ID"},scopedSlots:e._u([{key:"default",fn:function(o){var a=o.node,d=o.data;return t("span",{staticClass:"custom-tree-node"},[t("span",[e._v(e._s(a.label))]),t("span",[null!==d.Children?t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(){return e.append(d)}}},[e._v(" Append ")]):e._e(),null===d.Children?t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(){return e.editDialog(d)}}},[e._v("Edit")]):e._e(),null===d.Children?t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(){return e.remove(a,d)}}},[e._v("Delete")]):e._e()],1)])}}])})],1)],1),t("el-dialog",{attrs:{title:"添加二级权限",visible:e.addDialogVisible,width:"50%"},on:{"update:visible":function(o){e.addDialogVisible=o},close:e.addDialogClosed}},[t("el-form",{ref:"addFormRef",attrs:{model:e.addForm,rules:e.addFormRules,"label-width":"170px"}},[e._e(),t("el-form-item",{attrs:{label:"二级权限",prop:"moduleName"}},[t("el-input",{model:{value:e.addForm.moduleName,callback:function(o){e.$set(e.addForm,"moduleName",o)},expression:"addForm.moduleName"}})],1),t("el-form-item",{attrs:{label:"序号",prop:"moduleNo"}},[t("el-input",{model:{value:e.addForm.moduleNo,callback:function(o){e.$set(e.addForm,"moduleNo",o)},expression:"addForm.moduleNo"}})],1),t("el-form-item",{attrs:{label:"Path",prop:"modulePath"}},[t("el-input",{model:{value:e.addForm.modulePath,callback:function(o){e.$set(e.addForm,"modulePath",o)},expression:"addForm.modulePath"}})],1),t("el-form-item",{attrs:{label:"Components",prop:"moduleComponents"}},[t("el-input",{model:{value:e.addForm.moduleComponents,callback:function(o){e.$set(e.addForm,"moduleComponents",o)},expression:"addForm.moduleComponents"}})],1),t("el-form-item",{attrs:{label:"说明",prop:"moduleRemark"}},[t("el-input",{model:{value:e.addForm.moduleRemark,callback:function(o){e.$set(e.addForm,"moduleRemark",o)},expression:"addForm.moduleRemark"}})],1),t("el-form-item",{attrs:{label:"一级权限",prop:"groupName"}},[t("el-input",{attrs:{disabled:!0},model:{value:e.addForm.groupName,callback:function(o){e.$set(e.addForm,"groupName",o)},expression:"addForm.groupName"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(o){e.addDialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.addLevelTwo}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{title:"修改二级权限",visible:e.editDialogVisible,width:"50%"},on:{"update:visible":function(o){e.editDialogVisible=o}}},[t("el-form",{ref:"addFormRef",attrs:{model:e.addForm,"label-width":"170px"}},[t("el-form-item",{attrs:{label:"ID",prop:"moduleID"}},[t("el-input",{attrs:{placeholder:"请输入二级权限唯一ID，用1-100之间的整数表示",disabled:""},model:{value:e.addForm.moduleID,callback:function(o){e.$set(e.addForm,"moduleID",o)},expression:"addForm.moduleID"}})],1),t("el-form-item",{attrs:{label:"二级权限名称",prop:"moduleName"}},[t("el-input",{model:{value:e.addForm.moduleName,callback:function(o){e.$set(e.addForm,"moduleName",o)},expression:"addForm.moduleName"}})],1),t("el-form-item",{attrs:{label:"序号",prop:"moduleNo"}},[t("el-input",{attrs:{placeholder:"请输入整数，数值越小，菜单位置越靠前"},model:{value:e.addForm.moduleNo,callback:function(o){e.$set(e.addForm,"moduleNo",o)},expression:"addForm.moduleNo"}})],1),t("el-form-item",{attrs:{label:"Path",prop:"modulePath"}},[t("el-input",{model:{value:e.addForm.modulePath,callback:function(o){e.$set(e.addForm,"modulePath",o)},expression:"addForm.modulePath"}})],1),t("el-form-item",{attrs:{label:"Components",prop:"moduleComponents"}},[t("el-input",{model:{value:e.addForm.moduleComponents,callback:function(o){e.$set(e.addForm,"moduleComponents",o)},expression:"addForm.moduleComponents"}})],1),t("el-form-item",{attrs:{label:"说明",prop:"moduleRemark"}},[t("el-input",{model:{value:e.addForm.moduleRemark,callback:function(o){e.$set(e.addForm,"moduleRemark",o)},expression:"addForm.moduleRemark"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(o){e.editDialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.editLevelTwo}},[e._v("确 定")])],1)],1)],1)}),[],!1,null,"7c0476c2",null);o.default=t.exports},b67e:function(e,o,t){"use strict";t("1f2f")}}]);